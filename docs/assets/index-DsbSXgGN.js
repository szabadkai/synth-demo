(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const p of d)if(p.type==="childList")for(const v of p.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function l(d){const p={};return d.integrity&&(p.integrity=d.integrity),d.referrerPolicy&&(p.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?p.credentials="include":d.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function u(d){if(d.ep)return;d.ep=!0;const p=l(d);fetch(d.href,p)}})();function Iu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ni={exports:{}},Qr={},ri={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iu;function Ff(){if(iu)return Me;iu=1;var r=Symbol.for("react.element"),i=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),v=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.iterator;function y(b){return b===null||typeof b!="object"?null:(b=x&&b[x]||b["@@iterator"],typeof b=="function"?b:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,P={};function T(b,D,ye){this.props=b,this.context=D,this.refs=P,this.updater=ye||C}T.prototype.isReactComponent={},T.prototype.setState=function(b,D){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,D,"setState")},T.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function R(){}R.prototype=T.prototype;function z(b,D,ye){this.props=b,this.context=D,this.refs=P,this.updater=ye||C}var Z=z.prototype=new R;Z.constructor=z,k(Z,T.prototype),Z.isPureReactComponent=!0;var ee=Array.isArray,Q=Object.prototype.hasOwnProperty,M={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function A(b,D,ye){var ve,Se={},ue=null,we=null;if(D!=null)for(ve in D.ref!==void 0&&(we=D.ref),D.key!==void 0&&(ue=""+D.key),D)Q.call(D,ve)&&!F.hasOwnProperty(ve)&&(Se[ve]=D[ve]);var je=arguments.length-2;if(je===1)Se.children=ye;else if(1<je){for(var Pe=Array(je),ce=0;ce<je;ce++)Pe[ce]=arguments[ce+2];Se.children=Pe}if(b&&b.defaultProps)for(ve in je=b.defaultProps,je)Se[ve]===void 0&&(Se[ve]=je[ve]);return{$$typeof:r,type:b,key:ue,ref:we,props:Se,_owner:M.current}}function X(b,D){return{$$typeof:r,type:b.type,key:D,ref:b.ref,props:b.props,_owner:b._owner}}function xe(b){return typeof b=="object"&&b!==null&&b.$$typeof===r}function be(b){var D={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ye){return D[ye]})}var H=/\/+/g;function L(b,D){return typeof b=="object"&&b!==null&&b.key!=null?be(""+b.key):D.toString(36)}function B(b,D,ye,ve,Se){var ue=typeof b;(ue==="undefined"||ue==="boolean")&&(b=null);var we=!1;if(b===null)we=!0;else switch(ue){case"string":case"number":we=!0;break;case"object":switch(b.$$typeof){case r:case i:we=!0}}if(we)return we=b,Se=Se(we),b=ve===""?"."+L(we,0):ve,ee(Se)?(ye="",b!=null&&(ye=b.replace(H,"$&/")+"/"),B(Se,D,ye,"",function(ce){return ce})):Se!=null&&(xe(Se)&&(Se=X(Se,ye+(!Se.key||we&&we.key===Se.key?"":(""+Se.key).replace(H,"$&/")+"/")+b)),D.push(Se)),1;if(we=0,ve=ve===""?".":ve+":",ee(b))for(var je=0;je<b.length;je++){ue=b[je];var Pe=ve+L(ue,je);we+=B(ue,D,ye,Pe,Se)}else if(Pe=y(b),typeof Pe=="function")for(b=Pe.call(b),je=0;!(ue=b.next()).done;)ue=ue.value,Pe=ve+L(ue,je++),we+=B(ue,D,ye,Pe,Se);else if(ue==="object")throw D=String(b),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return we}function $(b,D,ye){if(b==null)return b;var ve=[],Se=0;return B(b,ve,"","",function(ue){return D.call(ye,ue,Se++)}),ve}function ie(b){if(b._status===-1){var D=b._result;D=D(),D.then(function(ye){(b._status===0||b._status===-1)&&(b._status=1,b._result=ye)},function(ye){(b._status===0||b._status===-1)&&(b._status=2,b._result=ye)}),b._status===-1&&(b._status=0,b._result=D)}if(b._status===1)return b._result.default;throw b._result}var pe={current:null},K={transition:null},te={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:K,ReactCurrentOwner:M};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:$,forEach:function(b,D,ye){$(b,function(){D.apply(this,arguments)},ye)},count:function(b){var D=0;return $(b,function(){D++}),D},toArray:function(b){return $(b,function(D){return D})||[]},only:function(b){if(!xe(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Me.Component=T,Me.Fragment=l,Me.Profiler=d,Me.PureComponent=z,Me.StrictMode=u,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Me.act=Y,Me.cloneElement=function(b,D,ye){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var ve=k({},b.props),Se=b.key,ue=b.ref,we=b._owner;if(D!=null){if(D.ref!==void 0&&(ue=D.ref,we=M.current),D.key!==void 0&&(Se=""+D.key),b.type&&b.type.defaultProps)var je=b.type.defaultProps;for(Pe in D)Q.call(D,Pe)&&!F.hasOwnProperty(Pe)&&(ve[Pe]=D[Pe]===void 0&&je!==void 0?je[Pe]:D[Pe])}var Pe=arguments.length-2;if(Pe===1)ve.children=ye;else if(1<Pe){je=Array(Pe);for(var ce=0;ce<Pe;ce++)je[ce]=arguments[ce+2];ve.children=je}return{$$typeof:r,type:b.type,key:Se,ref:ue,props:ve,_owner:we}},Me.createContext=function(b){return b={$$typeof:v,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:p,_context:b},b.Consumer=b},Me.createElement=A,Me.createFactory=function(b){var D=A.bind(null,b);return D.type=b,D},Me.createRef=function(){return{current:null}},Me.forwardRef=function(b){return{$$typeof:w,render:b}},Me.isValidElement=xe,Me.lazy=function(b){return{$$typeof:m,_payload:{_status:-1,_result:b},_init:ie}},Me.memo=function(b,D){return{$$typeof:g,type:b,compare:D===void 0?null:D}},Me.startTransition=function(b){var D=K.transition;K.transition={};try{b()}finally{K.transition=D}},Me.unstable_act=Y,Me.useCallback=function(b,D){return pe.current.useCallback(b,D)},Me.useContext=function(b){return pe.current.useContext(b)},Me.useDebugValue=function(){},Me.useDeferredValue=function(b){return pe.current.useDeferredValue(b)},Me.useEffect=function(b,D){return pe.current.useEffect(b,D)},Me.useId=function(){return pe.current.useId()},Me.useImperativeHandle=function(b,D,ye){return pe.current.useImperativeHandle(b,D,ye)},Me.useInsertionEffect=function(b,D){return pe.current.useInsertionEffect(b,D)},Me.useLayoutEffect=function(b,D){return pe.current.useLayoutEffect(b,D)},Me.useMemo=function(b,D){return pe.current.useMemo(b,D)},Me.useReducer=function(b,D,ye){return pe.current.useReducer(b,D,ye)},Me.useRef=function(b){return pe.current.useRef(b)},Me.useState=function(b){return pe.current.useState(b)},Me.useSyncExternalStore=function(b,D,ye){return pe.current.useSyncExternalStore(b,D,ye)},Me.useTransition=function(){return pe.current.useTransition()},Me.version="18.3.1",Me}var au;function Zr(){return au||(au=1,ri.exports=Ff()),ri.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu;function zf(){if(cu)return Qr;cu=1;var r=Zr(),i=Symbol.for("react.element"),l=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,d=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function v(w,h,g){var m,x={},y=null,C=null;g!==void 0&&(y=""+g),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(C=h.ref);for(m in h)u.call(h,m)&&!p.hasOwnProperty(m)&&(x[m]=h[m]);if(w&&w.defaultProps)for(m in h=w.defaultProps,h)x[m]===void 0&&(x[m]=h[m]);return{$$typeof:i,type:w,key:y,ref:C,props:x,_owner:d.current}}return Qr.Fragment=l,Qr.jsx=v,Qr.jsxs=v,Qr}var uu;function Af(){return uu||(uu=1,ni.exports=zf()),ni.exports}var a=Af(),io={},si={exports:{}},wt={},oi={exports:{}},li={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var du;function Df(){return du||(du=1,(function(r){function i(K,te){var Y=K.length;K.push(te);e:for(;0<Y;){var b=Y-1>>>1,D=K[b];if(0<d(D,te))K[b]=te,K[Y]=D,Y=b;else break e}}function l(K){return K.length===0?null:K[0]}function u(K){if(K.length===0)return null;var te=K[0],Y=K.pop();if(Y!==te){K[0]=Y;e:for(var b=0,D=K.length,ye=D>>>1;b<ye;){var ve=2*(b+1)-1,Se=K[ve],ue=ve+1,we=K[ue];if(0>d(Se,Y))ue<D&&0>d(we,Se)?(K[b]=we,K[ue]=Y,b=ue):(K[b]=Se,K[ve]=Y,b=ve);else if(ue<D&&0>d(we,Y))K[b]=we,K[ue]=Y,b=ue;else break e}}return te}function d(K,te){var Y=K.sortIndex-te.sortIndex;return Y!==0?Y:K.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;r.unstable_now=function(){return p.now()}}else{var v=Date,w=v.now();r.unstable_now=function(){return v.now()-w}}var h=[],g=[],m=1,x=null,y=3,C=!1,k=!1,P=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(K){for(var te=l(g);te!==null;){if(te.callback===null)u(g);else if(te.startTime<=K)u(g),te.sortIndex=te.expirationTime,i(h,te);else break;te=l(g)}}function ee(K){if(P=!1,Z(K),!k)if(l(h)!==null)k=!0,ie(Q);else{var te=l(g);te!==null&&pe(ee,te.startTime-K)}}function Q(K,te){k=!1,P&&(P=!1,R(A),A=-1),C=!0;var Y=y;try{for(Z(te),x=l(h);x!==null&&(!(x.expirationTime>te)||K&&!be());){var b=x.callback;if(typeof b=="function"){x.callback=null,y=x.priorityLevel;var D=b(x.expirationTime<=te);te=r.unstable_now(),typeof D=="function"?x.callback=D:x===l(h)&&u(h),Z(te)}else u(h);x=l(h)}if(x!==null)var ye=!0;else{var ve=l(g);ve!==null&&pe(ee,ve.startTime-te),ye=!1}return ye}finally{x=null,y=Y,C=!1}}var M=!1,F=null,A=-1,X=5,xe=-1;function be(){return!(r.unstable_now()-xe<X)}function H(){if(F!==null){var K=r.unstable_now();xe=K;var te=!0;try{te=F(!0,K)}finally{te?L():(M=!1,F=null)}}else M=!1}var L;if(typeof z=="function")L=function(){z(H)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=H,L=function(){$.postMessage(null)}}else L=function(){T(H,0)};function ie(K){F=K,M||(M=!0,L())}function pe(K,te){A=T(function(){K(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_continueExecution=function(){k||C||(k=!0,ie(Q))},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return l(h)},r.unstable_next=function(K){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var Y=y;y=te;try{return K()}finally{y=Y}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Y=y;y=K;try{return te()}finally{y=Y}},r.unstable_scheduleCallback=function(K,te,Y){var b=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?b+Y:b):Y=b,K){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Y+D,K={id:m++,callback:te,priorityLevel:K,startTime:Y,expirationTime:D,sortIndex:-1},Y>b?(K.sortIndex=Y,i(g,K),l(h)===null&&K===l(g)&&(P?(R(A),A=-1):P=!0,pe(ee,Y-b))):(K.sortIndex=D,i(h,K),k||C||(k=!0,ie(Q))),K},r.unstable_shouldYield=be,r.unstable_wrapCallback=function(K){var te=y;return function(){var Y=y;y=te;try{return K.apply(this,arguments)}finally{y=Y}}}})(li)),li}var fu;function qf(){return fu||(fu=1,oi.exports=Df()),oi.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu;function Bf(){if(pu)return wt;pu=1;var r=Zr(),i=qf();function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,d={};function p(e,t){v(e,t),v(e+"Capture",t)}function v(e,t){for(d[e]=t,e=0;e<t.length;e++)u.add(t[e])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},x={};function y(e){return h.call(x,e)?!0:h.call(m,e)?!1:g.test(e)?x[e]=!0:(m[e]=!0,!1)}function C(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k(e,t,n,s){if(t===null||typeof t>"u"||C(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,n,s,o,c,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=f}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){T[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];T[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){T[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){T[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){T[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){T[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){T[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){T[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){T[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(R,z);T[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(R,z);T[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(R,z);T[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){T[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),T.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){T[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function Z(e,t,n,s){var o=T.hasOwnProperty(t)?T[t]:null;(o!==null?o.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k(t,n,o,s)&&(n=null),s||o===null?y(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,s=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var ee=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),M=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),xe=Symbol.for("react.provider"),be=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),K=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=K&&e[K]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Object.assign,b;function D(e){if(b===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);b=t&&t[1]||""}return`
`+b+e}var ye=!1;function ve(e,t){if(!e||ye)return"";ye=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(O){var s=O}Reflect.construct(e,[],t)}else{try{t.call()}catch(O){s=O}e.call(t.prototype)}else{try{throw Error()}catch(O){s=O}e()}}catch(O){if(O&&s&&typeof O.stack=="string"){for(var o=O.stack.split(`
`),c=s.stack.split(`
`),f=o.length-1,S=c.length-1;1<=f&&0<=S&&o[f]!==c[S];)S--;for(;1<=f&&0<=S;f--,S--)if(o[f]!==c[S]){if(f!==1||S!==1)do if(f--,S--,0>S||o[f]!==c[S]){var j=`
`+o[f].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=f&&0<=S);break}}}finally{ye=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function Se(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=ve(e.type,!1),e;case 11:return e=ve(e.type.render,!1),e;case 1:return e=ve(e.type,!0),e;default:return""}}function ue(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case M:return"Portal";case X:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case B:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case be:return(e.displayName||"Context")+".Consumer";case xe:return(e._context.displayName||"Context")+".Provider";case H:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return t=e.displayName||null,t!==null?t:ue(e.type)||"Memo";case ie:t=e._payload,e=e._init;try{return ue(e(t))}catch{}}return null}function we(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function je(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ce(e){var t=Pe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(f){s=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qe(e){e._valueTracker||(e._valueTracker=ce(e))}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Pe(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Xe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dt(e,t){var n=t.checked;return Y({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function It(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=je(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function W(e,t){t=t.checked,t!=null&&Z(e,"checked",t,!1)}function he(e,t){W(e,t);var n=je(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ge(e,t.type,n):t.hasOwnProperty("defaultValue")&&ge(e,t.type,je(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ke(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ge(e,t,n){(t!=="number"||Xe(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ne=Array.isArray;function _e(e,t,n,s){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&s&&(e[n].defaultSelected=!0)}else{for(n=""+je(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ht(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(l(91));return Y({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kt(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(l(92));if(Ne(n)){if(1<n.length)throw Error(l(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:je(n)}}function Ee(e,t){var n=je(t.value),s=je(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Ft(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ct(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ie(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ct(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rt,En=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,o)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rt=rt||document.createElement("div"),rt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ur(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Du=["Webkit","ms","Moz","O"];Object.keys(dr).forEach(function(e){Du.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dr[t]=dr[e]})});function ki(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||dr.hasOwnProperty(e)&&dr[e]?(""+t).trim():t+"px"}function ji(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,o=ki(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,o):e[n]=o}}var qu=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ho(e,t){if(t){if(qu[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(l(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(l(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(t.style!=null&&typeof t.style!="object")throw Error(l(62))}}function mo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vo=null;function go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yo=null,Dn=null,qn=null;function Mi(e){if(e=Or(e)){if(typeof yo!="function")throw Error(l(280));var t=e.stateNode;t&&(t=ks(t),yo(e.stateNode,e.type,t))}}function Ei(e){Dn?qn?qn.push(e):qn=[e]:Dn=e}function Ci(){if(Dn){var e=Dn,t=qn;if(qn=Dn=null,Mi(e),t)for(e=0;e<t.length;e++)Mi(t[e])}}function bi(e,t){return e(t)}function Ni(){}var xo=!1;function Pi(e,t,n){if(xo)return e(t,n);xo=!0;try{return bi(e,t,n)}finally{xo=!1,(Dn!==null||qn!==null)&&(Ni(),Ci())}}function fr(e,t){var n=e.stateNode;if(n===null)return null;var s=ks(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(l(231,t,typeof n));return n}var wo=!1;if(w)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){wo=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{wo=!1}function Bu(e,t,n,s,o,c,f,S,j){var O=Array.prototype.slice.call(arguments,3);try{t.apply(n,O)}catch(U){this.onError(U)}}var hr=!1,es=null,ts=!1,So=null,Uu={onError:function(e){hr=!0,es=e}};function Hu(e,t,n,s,o,c,f,S,j){hr=!1,es=null,Bu.apply(Uu,arguments)}function Wu(e,t,n,s,o,c,f,S,j){if(Hu.apply(this,arguments),hr){if(hr){var O=es;hr=!1,es=null}else throw Error(l(198));ts||(ts=!0,So=O)}}function Cn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ti(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _i(e){if(Cn(e)!==e)throw Error(l(188))}function Vu(e){var t=e.alternate;if(!t){if(t=Cn(e),t===null)throw Error(l(188));return t!==e?null:e}for(var n=e,s=t;;){var o=n.return;if(o===null)break;var c=o.alternate;if(c===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===n)return _i(o),e;if(c===s)return _i(o),t;c=c.sibling}throw Error(l(188))}if(n.return!==s.return)n=o,s=c;else{for(var f=!1,S=o.child;S;){if(S===n){f=!0,n=o,s=c;break}if(S===s){f=!0,s=o,n=c;break}S=S.sibling}if(!f){for(S=c.child;S;){if(S===n){f=!0,n=c,s=o;break}if(S===s){f=!0,s=c,n=o;break}S=S.sibling}if(!f)throw Error(l(189))}}if(n.alternate!==s)throw Error(l(190))}if(n.tag!==3)throw Error(l(188));return n.stateNode.current===n?e:t}function Li(e){return e=Vu(e),e!==null?Oi(e):null}function Oi(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Oi(e);if(t!==null)return t;e=e.sibling}return null}var Ri=i.unstable_scheduleCallback,Ii=i.unstable_cancelCallback,$u=i.unstable_shouldYield,Gu=i.unstable_requestPaint,$e=i.unstable_now,Qu=i.unstable_getCurrentPriorityLevel,ko=i.unstable_ImmediatePriority,Fi=i.unstable_UserBlockingPriority,ns=i.unstable_NormalPriority,Ku=i.unstable_LowPriority,zi=i.unstable_IdlePriority,rs=null,Wt=null;function Xu(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(rs,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Zu,Yu=Math.log,Ju=Math.LN2;function Zu(e){return e>>>=0,e===0?32:31-(Yu(e)/Ju|0)|0}var ss=64,os=4194304;function mr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ls(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,o=e.suspendedLanes,c=e.pingedLanes,f=n&268435455;if(f!==0){var S=f&~o;S!==0?s=mr(S):(c&=f,c!==0&&(s=mr(c)))}else f=n&~o,f!==0?s=mr(f):c!==0&&(s=mr(c));if(s===0)return 0;if(t!==0&&t!==s&&(t&o)===0&&(o=s&-s,c=t&-t,o>=c||o===16&&(c&4194240)!==0))return t;if((s&4)!==0&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-zt(t),o=1<<n,s|=e[n],t&=~o;return s}function ed(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function td(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes;0<c;){var f=31-zt(c),S=1<<f,j=o[f];j===-1?((S&n)===0||(S&s)!==0)&&(o[f]=ed(S,t)):j<=t&&(e.expiredLanes|=S),c&=~S}}function jo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ai(){var e=ss;return ss<<=1,(ss&4194240)===0&&(ss=64),e}function Mo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=n}function nd(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-zt(n),c=1<<o;t[o]=0,s[o]=-1,e[o]=-1,n&=~c}}function Eo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-zt(n),o=1<<s;o&t|e[s]&t&&(e[s]|=t),n&=~o}}var Re=0;function Di(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var qi,Co,Bi,Ui,Hi,bo=!1,is=[],on=null,ln=null,an=null,gr=new Map,yr=new Map,cn=[],rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wi(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":gr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yr.delete(t.pointerId)}}function xr(e,t,n,s,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:c,targetContainers:[o]},t!==null&&(t=Or(t),t!==null&&Co(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function sd(e,t,n,s,o){switch(t){case"focusin":return on=xr(on,e,t,n,s,o),!0;case"dragenter":return ln=xr(ln,e,t,n,s,o),!0;case"mouseover":return an=xr(an,e,t,n,s,o),!0;case"pointerover":var c=o.pointerId;return gr.set(c,xr(gr.get(c)||null,e,t,n,s,o)),!0;case"gotpointercapture":return c=o.pointerId,yr.set(c,xr(yr.get(c)||null,e,t,n,s,o)),!0}return!1}function Vi(e){var t=bn(e.target);if(t!==null){var n=Cn(t);if(n!==null){if(t=n.tag,t===13){if(t=Ti(n),t!==null){e.blockedOn=t,Hi(e.priority,function(){Bi(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function as(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Po(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);vo=s,n.target.dispatchEvent(s),vo=null}else return t=Or(n),t!==null&&Co(t),e.blockedOn=n,!1;t.shift()}return!0}function $i(e,t,n){as(e)&&n.delete(t)}function od(){bo=!1,on!==null&&as(on)&&(on=null),ln!==null&&as(ln)&&(ln=null),an!==null&&as(an)&&(an=null),gr.forEach($i),yr.forEach($i)}function wr(e,t){e.blockedOn===t&&(e.blockedOn=null,bo||(bo=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,od)))}function Sr(e){function t(o){return wr(o,e)}if(0<is.length){wr(is[0],e);for(var n=1;n<is.length;n++){var s=is[n];s.blockedOn===e&&(s.blockedOn=null)}}for(on!==null&&wr(on,e),ln!==null&&wr(ln,e),an!==null&&wr(an,e),gr.forEach(t),yr.forEach(t),n=0;n<cn.length;n++)s=cn[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)Vi(n),n.blockedOn===null&&cn.shift()}var Bn=ee.ReactCurrentBatchConfig,cs=!0;function ld(e,t,n,s){var o=Re,c=Bn.transition;Bn.transition=null;try{Re=1,No(e,t,n,s)}finally{Re=o,Bn.transition=c}}function id(e,t,n,s){var o=Re,c=Bn.transition;Bn.transition=null;try{Re=4,No(e,t,n,s)}finally{Re=o,Bn.transition=c}}function No(e,t,n,s){if(cs){var o=Po(e,t,n,s);if(o===null)$o(e,t,s,us,n),Wi(e,s);else if(sd(o,e,t,n,s))s.stopPropagation();else if(Wi(e,s),t&4&&-1<rd.indexOf(e)){for(;o!==null;){var c=Or(o);if(c!==null&&qi(c),c=Po(e,t,n,s),c===null&&$o(e,t,s,us,n),c===o)break;o=c}o!==null&&s.stopPropagation()}else $o(e,t,s,null,n)}}var us=null;function Po(e,t,n,s){if(us=null,e=go(s),e=bn(e),e!==null)if(t=Cn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ti(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return us=e,null}function Gi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qu()){case ko:return 1;case Fi:return 4;case ns:case Ku:return 16;case zi:return 536870912;default:return 16}default:return 16}}var un=null,To=null,ds=null;function Qi(){if(ds)return ds;var e,t=To,n=t.length,s,o="value"in un?un.value:un.textContent,c=o.length;for(e=0;e<n&&t[e]===o[e];e++);var f=n-e;for(s=1;s<=f&&t[n-s]===o[c-s];s++);return ds=o.slice(e,1<s?1-s:void 0)}function fs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ps(){return!0}function Ki(){return!1}function kt(e){function t(n,s,o,c,f){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(n=e[S],this[S]=n?n(c):c[S]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?ps:Ki,this.isPropagationStopped=Ki,this}return Y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),t}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=kt(Un),kr=Y({},Un,{view:0,detail:0}),ad=kt(kr),Lo,Oo,jr,hs=Y({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Io,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jr&&(jr&&e.type==="mousemove"?(Lo=e.screenX-jr.screenX,Oo=e.screenY-jr.screenY):Oo=Lo=0,jr=e),Lo)},movementY:function(e){return"movementY"in e?e.movementY:Oo}}),Xi=kt(hs),cd=Y({},hs,{dataTransfer:0}),ud=kt(cd),dd=Y({},kr,{relatedTarget:0}),Ro=kt(dd),fd=Y({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),pd=kt(fd),hd=Y({},Un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),md=kt(hd),vd=Y({},Un,{data:0}),Yi=kt(vd),gd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xd[e])?!!t[e]:!1}function Io(){return wd}var Sd=Y({},kr,{key:function(e){if(e.key){var t=gd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Io,charCode:function(e){return e.type==="keypress"?fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kd=kt(Sd),jd=Y({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=kt(jd),Md=Y({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Io}),Ed=kt(Md),Cd=Y({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),bd=kt(Cd),Nd=Y({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pd=kt(Nd),Td=[9,13,27,32],Fo=w&&"CompositionEvent"in window,Mr=null;w&&"documentMode"in document&&(Mr=document.documentMode);var _d=w&&"TextEvent"in window&&!Mr,Zi=w&&(!Fo||Mr&&8<Mr&&11>=Mr),ea=" ",ta=!1;function na(e,t){switch(e){case"keyup":return Td.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ra(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hn=!1;function Ld(e,t){switch(e){case"compositionend":return ra(t);case"keypress":return t.which!==32?null:(ta=!0,ea);case"textInput":return e=t.data,e===ea&&ta?null:e;default:return null}}function Od(e,t){if(Hn)return e==="compositionend"||!Fo&&na(e,t)?(e=Qi(),ds=To=un=null,Hn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zi&&t.locale!=="ko"?null:t.data;default:return null}}var Rd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rd[e.type]:t==="textarea"}function oa(e,t,n,s){Ei(s),t=xs(t,"onChange"),0<t.length&&(n=new _o("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Er=null,Cr=null;function Id(e){ja(e,0)}function ms(e){var t=Qn(e);if(Ve(t))return e}function Fd(e,t){if(e==="change")return t}var la=!1;if(w){var zo;if(w){var Ao="oninput"in document;if(!Ao){var ia=document.createElement("div");ia.setAttribute("oninput","return;"),Ao=typeof ia.oninput=="function"}zo=Ao}else zo=!1;la=zo&&(!document.documentMode||9<document.documentMode)}function aa(){Er&&(Er.detachEvent("onpropertychange",ca),Cr=Er=null)}function ca(e){if(e.propertyName==="value"&&ms(Cr)){var t=[];oa(t,Cr,e,go(e)),Pi(Id,t)}}function zd(e,t,n){e==="focusin"?(aa(),Er=t,Cr=n,Er.attachEvent("onpropertychange",ca)):e==="focusout"&&aa()}function Ad(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ms(Cr)}function Dd(e,t){if(e==="click")return ms(t)}function qd(e,t){if(e==="input"||e==="change")return ms(t)}function Bd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:Bd;function br(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!h.call(t,o)||!At(e[o],t[o]))return!1}return!0}function ua(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function da(e,t){var n=ua(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ua(n)}}function fa(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fa(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pa(){for(var e=window,t=Xe();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xe(e.document)}return t}function Do(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ud(e){var t=pa(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fa(n.ownerDocument.documentElement,n)){if(s!==null&&Do(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,c=Math.min(s.start,o);s=s.end===void 0?c:Math.min(s.end,o),!e.extend&&c>s&&(o=s,s=c,c=o),o=da(n,c);var f=da(n,s);o&&f&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),c>s?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hd=w&&"documentMode"in document&&11>=document.documentMode,Wn=null,qo=null,Nr=null,Bo=!1;function ha(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bo||Wn==null||Wn!==Xe(s)||(s=Wn,"selectionStart"in s&&Do(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Nr&&br(Nr,s)||(Nr=s,s=xs(qo,"onSelect"),0<s.length&&(t=new _o("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Wn)))}function vs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vn={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionend:vs("Transition","TransitionEnd")},Uo={},ma={};w&&(ma=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function gs(e){if(Uo[e])return Uo[e];if(!Vn[e])return e;var t=Vn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ma)return Uo[e]=t[n];return e}var va=gs("animationend"),ga=gs("animationiteration"),ya=gs("animationstart"),xa=gs("transitionend"),wa=new Map,Sa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(e,t){wa.set(e,t),p(t,[e])}for(var Ho=0;Ho<Sa.length;Ho++){var Wo=Sa[Ho],Wd=Wo.toLowerCase(),Vd=Wo[0].toUpperCase()+Wo.slice(1);dn(Wd,"on"+Vd)}dn(va,"onAnimationEnd"),dn(ga,"onAnimationIteration"),dn(ya,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(xa,"onTransitionEnd"),v("onMouseEnter",["mouseout","mouseover"]),v("onMouseLeave",["mouseout","mouseover"]),v("onPointerEnter",["pointerout","pointerover"]),v("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$d=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function ka(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Wu(s,t,void 0,e),e.currentTarget=null}function ja(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],o=s.event;s=s.listeners;e:{var c=void 0;if(t)for(var f=s.length-1;0<=f;f--){var S=s[f],j=S.instance,O=S.currentTarget;if(S=S.listener,j!==c&&o.isPropagationStopped())break e;ka(o,S,O),c=j}else for(f=0;f<s.length;f++){if(S=s[f],j=S.instance,O=S.currentTarget,S=S.listener,j!==c&&o.isPropagationStopped())break e;ka(o,S,O),c=j}}}if(ts)throw e=So,ts=!1,So=null,e}function ze(e,t){var n=t[Jo];n===void 0&&(n=t[Jo]=new Set);var s=e+"__bubble";n.has(s)||(Ma(t,e,2,!1),n.add(s))}function Vo(e,t,n){var s=0;t&&(s|=4),Ma(n,e,s,t)}var ys="_reactListening"+Math.random().toString(36).slice(2);function Tr(e){if(!e[ys]){e[ys]=!0,u.forEach(function(n){n!=="selectionchange"&&($d.has(n)||Vo(n,!1,e),Vo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ys]||(t[ys]=!0,Vo("selectionchange",!1,t))}}function Ma(e,t,n,s){switch(Gi(t)){case 1:var o=ld;break;case 4:o=id;break;default:o=No}n=o.bind(null,t,n,e),o=void 0,!wo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function $o(e,t,n,s,o){var c=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var S=s.stateNode.containerInfo;if(S===o||S.nodeType===8&&S.parentNode===o)break;if(f===4)for(f=s.return;f!==null;){var j=f.tag;if((j===3||j===4)&&(j=f.stateNode.containerInfo,j===o||j.nodeType===8&&j.parentNode===o))return;f=f.return}for(;S!==null;){if(f=bn(S),f===null)return;if(j=f.tag,j===5||j===6){s=c=f;continue e}S=S.parentNode}}s=s.return}Pi(function(){var O=c,U=go(n),G=[];e:{var q=wa.get(e);if(q!==void 0){var re=_o,oe=e;switch(e){case"keypress":if(fs(n)===0)break e;case"keydown":case"keyup":re=kd;break;case"focusin":oe="focus",re=Ro;break;case"focusout":oe="blur",re=Ro;break;case"beforeblur":case"afterblur":re=Ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=ud;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Ed;break;case va:case ga:case ya:re=pd;break;case xa:re=bd;break;case"scroll":re=ad;break;case"wheel":re=Pd;break;case"copy":case"cut":case"paste":re=md;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Ji}var le=(t&4)!==0,Ge=!le&&e==="scroll",N=le?q!==null?q+"Capture":null:q;le=[];for(var E=O,_;E!==null;){_=E;var J=_.stateNode;if(_.tag===5&&J!==null&&(_=J,N!==null&&(J=fr(E,N),J!=null&&le.push(_r(E,J,_)))),Ge)break;E=E.return}0<le.length&&(q=new re(q,oe,null,n,U),G.push({event:q,listeners:le}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",q&&n!==vo&&(oe=n.relatedTarget||n.fromElement)&&(bn(oe)||oe[Xt]))break e;if((re||q)&&(q=U.window===U?U:(q=U.ownerDocument)?q.defaultView||q.parentWindow:window,re?(oe=n.relatedTarget||n.toElement,re=O,oe=oe?bn(oe):null,oe!==null&&(Ge=Cn(oe),oe!==Ge||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(re=null,oe=O),re!==oe)){if(le=Xi,J="onMouseLeave",N="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(le=Ji,J="onPointerLeave",N="onPointerEnter",E="pointer"),Ge=re==null?q:Qn(re),_=oe==null?q:Qn(oe),q=new le(J,E+"leave",re,n,U),q.target=Ge,q.relatedTarget=_,J=null,bn(U)===O&&(le=new le(N,E+"enter",oe,n,U),le.target=_,le.relatedTarget=Ge,J=le),Ge=J,re&&oe)t:{for(le=re,N=oe,E=0,_=le;_;_=$n(_))E++;for(_=0,J=N;J;J=$n(J))_++;for(;0<E-_;)le=$n(le),E--;for(;0<_-E;)N=$n(N),_--;for(;E--;){if(le===N||N!==null&&le===N.alternate)break t;le=$n(le),N=$n(N)}le=null}else le=null;re!==null&&Ea(G,q,re,le,!1),oe!==null&&Ge!==null&&Ea(G,Ge,oe,le,!0)}}e:{if(q=O?Qn(O):window,re=q.nodeName&&q.nodeName.toLowerCase(),re==="select"||re==="input"&&q.type==="file")var ae=Fd;else if(sa(q))if(la)ae=qd;else{ae=Ad;var de=zd}else(re=q.nodeName)&&re.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ae=Dd);if(ae&&(ae=ae(e,O))){oa(G,ae,n,U);break e}de&&de(e,q,O),e==="focusout"&&(de=q._wrapperState)&&de.controlled&&q.type==="number"&&ge(q,"number",q.value)}switch(de=O?Qn(O):window,e){case"focusin":(sa(de)||de.contentEditable==="true")&&(Wn=de,qo=O,Nr=null);break;case"focusout":Nr=qo=Wn=null;break;case"mousedown":Bo=!0;break;case"contextmenu":case"mouseup":case"dragend":Bo=!1,ha(G,n,U);break;case"selectionchange":if(Hd)break;case"keydown":case"keyup":ha(G,n,U)}var fe;if(Fo)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else Hn?na(e,n)&&(me="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(me="onCompositionStart");me&&(Zi&&n.locale!=="ko"&&(Hn||me!=="onCompositionStart"?me==="onCompositionEnd"&&Hn&&(fe=Qi()):(un=U,To="value"in un?un.value:un.textContent,Hn=!0)),de=xs(O,me),0<de.length&&(me=new Yi(me,e,null,n,U),G.push({event:me,listeners:de}),fe?me.data=fe:(fe=ra(n),fe!==null&&(me.data=fe)))),(fe=_d?Ld(e,n):Od(e,n))&&(O=xs(O,"onBeforeInput"),0<O.length&&(U=new Yi("onBeforeInput","beforeinput",null,n,U),G.push({event:U,listeners:O}),U.data=fe))}ja(G,t)})}function _r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xs(e,t){for(var n=t+"Capture",s=[];e!==null;){var o=e,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=fr(e,n),c!=null&&s.unshift(_r(e,c,o)),c=fr(e,t),c!=null&&s.push(_r(e,c,o))),e=e.return}return s}function $n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ea(e,t,n,s,o){for(var c=t._reactName,f=[];n!==null&&n!==s;){var S=n,j=S.alternate,O=S.stateNode;if(j!==null&&j===s)break;S.tag===5&&O!==null&&(S=O,o?(j=fr(n,c),j!=null&&f.unshift(_r(n,j,S))):o||(j=fr(n,c),j!=null&&f.push(_r(n,j,S)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Gd=/\r\n?/g,Qd=/\u0000|\uFFFD/g;function Ca(e){return(typeof e=="string"?e:""+e).replace(Gd,`
`).replace(Qd,"")}function ws(e,t,n){if(t=Ca(t),Ca(e)!==t&&n)throw Error(l(425))}function Ss(){}var Go=null,Qo=null;function Ko(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xo=typeof setTimeout=="function"?setTimeout:void 0,Kd=typeof clearTimeout=="function"?clearTimeout:void 0,ba=typeof Promise=="function"?Promise:void 0,Xd=typeof queueMicrotask=="function"?queueMicrotask:typeof ba<"u"?function(e){return ba.resolve(null).then(e).catch(Yd)}:Xo;function Yd(e){setTimeout(function(){throw e})}function Yo(e,t){var n=t,s=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(s===0){e.removeChild(o),Sr(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=o}while(n);Sr(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Na(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gn=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Gn,Lr="__reactProps$"+Gn,Xt="__reactContainer$"+Gn,Jo="__reactEvents$"+Gn,Jd="__reactListeners$"+Gn,Zd="__reactHandles$"+Gn;function bn(e){var t=e[Vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xt]||n[Vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Na(e);e!==null;){if(n=e[Vt])return n;e=Na(e)}return t}e=n,n=e.parentNode}return null}function Or(e){return e=e[Vt]||e[Xt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(l(33))}function ks(e){return e[Lr]||null}var Zo=[],Kn=-1;function pn(e){return{current:e}}function Ae(e){0>Kn||(e.current=Zo[Kn],Zo[Kn]=null,Kn--)}function Fe(e,t){Kn++,Zo[Kn]=e.current,e.current=t}var hn={},it=pn(hn),mt=pn(!1),Nn=hn;function Xn(e,t){var n=e.type.contextTypes;if(!n)return hn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in n)o[c]=t[c];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function vt(e){return e=e.childContextTypes,e!=null}function js(){Ae(mt),Ae(it)}function Pa(e,t,n){if(it.current!==hn)throw Error(l(168));Fe(it,t),Fe(mt,n)}function Ta(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(l(108,we(e)||"Unknown",o));return Y({},n,s)}function Ms(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hn,Nn=it.current,Fe(it,e),Fe(mt,mt.current),!0}function _a(e,t,n){var s=e.stateNode;if(!s)throw Error(l(169));n?(e=Ta(e,t,Nn),s.__reactInternalMemoizedMergedChildContext=e,Ae(mt),Ae(it),Fe(it,e)):Ae(mt),Fe(mt,n)}var Yt=null,Es=!1,el=!1;function La(e){Yt===null?Yt=[e]:Yt.push(e)}function ef(e){Es=!0,La(e)}function mn(){if(!el&&Yt!==null){el=!0;var e=0,t=Re;try{var n=Yt;for(Re=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Yt=null,Es=!1}catch(o){throw Yt!==null&&(Yt=Yt.slice(e+1)),Ri(ko,mn),o}finally{Re=t,el=!1}}return null}var Yn=[],Jn=0,Cs=null,bs=0,bt=[],Nt=0,Pn=null,Jt=1,Zt="";function Tn(e,t){Yn[Jn++]=bs,Yn[Jn++]=Cs,Cs=e,bs=t}function Oa(e,t,n){bt[Nt++]=Jt,bt[Nt++]=Zt,bt[Nt++]=Pn,Pn=e;var s=Jt;e=Zt;var o=32-zt(s)-1;s&=~(1<<o),n+=1;var c=32-zt(t)+o;if(30<c){var f=o-o%5;c=(s&(1<<f)-1).toString(32),s>>=f,o-=f,Jt=1<<32-zt(t)+o|n<<o|s,Zt=c+e}else Jt=1<<c|n<<o|s,Zt=e}function tl(e){e.return!==null&&(Tn(e,1),Oa(e,1,0))}function nl(e){for(;e===Cs;)Cs=Yn[--Jn],Yn[Jn]=null,bs=Yn[--Jn],Yn[Jn]=null;for(;e===Pn;)Pn=bt[--Nt],bt[Nt]=null,Zt=bt[--Nt],bt[Nt]=null,Jt=bt[--Nt],bt[Nt]=null}var jt=null,Mt=null,De=!1,Dt=null;function Ra(e,t){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ia(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,Mt=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,Mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pn!==null?{id:Jt,overflow:Zt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,Mt=null,!0):!1;default:return!1}}function rl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sl(e){if(De){var t=Mt;if(t){var n=t;if(!Ia(e,t)){if(rl(e))throw Error(l(418));t=fn(n.nextSibling);var s=jt;t&&Ia(e,t)?Ra(s,n):(e.flags=e.flags&-4097|2,De=!1,jt=e)}}else{if(rl(e))throw Error(l(418));e.flags=e.flags&-4097|2,De=!1,jt=e}}}function Fa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function Ns(e){if(e!==jt)return!1;if(!De)return Fa(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ko(e.type,e.memoizedProps)),t&&(t=Mt)){if(rl(e))throw za(),Error(l(418));for(;t;)Ra(e,t),t=fn(t.nextSibling)}if(Fa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Mt=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Mt=null}}else Mt=jt?fn(e.stateNode.nextSibling):null;return!0}function za(){for(var e=Mt;e;)e=fn(e.nextSibling)}function Zn(){Mt=jt=null,De=!1}function ol(e){Dt===null?Dt=[e]:Dt.push(e)}var tf=ee.ReactCurrentBatchConfig;function Rr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(l(309));var s=n.stateNode}if(!s)throw Error(l(147,e));var o=s,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(f){var S=o.refs;f===null?delete S[c]:S[c]=f},t._stringRef=c,t)}if(typeof e!="string")throw Error(l(284));if(!n._owner)throw Error(l(290,e))}return e}function Ps(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Aa(e){var t=e._init;return t(e._payload)}function Da(e){function t(N,E){if(e){var _=N.deletions;_===null?(N.deletions=[E],N.flags|=16):_.push(E)}}function n(N,E){if(!e)return null;for(;E!==null;)t(N,E),E=E.sibling;return null}function s(N,E){for(N=new Map;E!==null;)E.key!==null?N.set(E.key,E):N.set(E.index,E),E=E.sibling;return N}function o(N,E){return N=jn(N,E),N.index=0,N.sibling=null,N}function c(N,E,_){return N.index=_,e?(_=N.alternate,_!==null?(_=_.index,_<E?(N.flags|=2,E):_):(N.flags|=2,E)):(N.flags|=1048576,E)}function f(N){return e&&N.alternate===null&&(N.flags|=2),N}function S(N,E,_,J){return E===null||E.tag!==6?(E=Xl(_,N.mode,J),E.return=N,E):(E=o(E,_),E.return=N,E)}function j(N,E,_,J){var ae=_.type;return ae===F?U(N,E,_.props.children,J,_.key):E!==null&&(E.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ie&&Aa(ae)===E.type)?(J=o(E,_.props),J.ref=Rr(N,E,_),J.return=N,J):(J=Zs(_.type,_.key,_.props,null,N.mode,J),J.ref=Rr(N,E,_),J.return=N,J)}function O(N,E,_,J){return E===null||E.tag!==4||E.stateNode.containerInfo!==_.containerInfo||E.stateNode.implementation!==_.implementation?(E=Yl(_,N.mode,J),E.return=N,E):(E=o(E,_.children||[]),E.return=N,E)}function U(N,E,_,J,ae){return E===null||E.tag!==7?(E=An(_,N.mode,J,ae),E.return=N,E):(E=o(E,_),E.return=N,E)}function G(N,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Xl(""+E,N.mode,_),E.return=N,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Q:return _=Zs(E.type,E.key,E.props,null,N.mode,_),_.ref=Rr(N,null,E),_.return=N,_;case M:return E=Yl(E,N.mode,_),E.return=N,E;case ie:var J=E._init;return G(N,J(E._payload),_)}if(Ne(E)||te(E))return E=An(E,N.mode,_,null),E.return=N,E;Ps(N,E)}return null}function q(N,E,_,J){var ae=E!==null?E.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return ae!==null?null:S(N,E,""+_,J);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Q:return _.key===ae?j(N,E,_,J):null;case M:return _.key===ae?O(N,E,_,J):null;case ie:return ae=_._init,q(N,E,ae(_._payload),J)}if(Ne(_)||te(_))return ae!==null?null:U(N,E,_,J,null);Ps(N,_)}return null}function re(N,E,_,J,ae){if(typeof J=="string"&&J!==""||typeof J=="number")return N=N.get(_)||null,S(E,N,""+J,ae);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Q:return N=N.get(J.key===null?_:J.key)||null,j(E,N,J,ae);case M:return N=N.get(J.key===null?_:J.key)||null,O(E,N,J,ae);case ie:var de=J._init;return re(N,E,_,de(J._payload),ae)}if(Ne(J)||te(J))return N=N.get(_)||null,U(E,N,J,ae,null);Ps(E,J)}return null}function oe(N,E,_,J){for(var ae=null,de=null,fe=E,me=E=0,nt=null;fe!==null&&me<_.length;me++){fe.index>me?(nt=fe,fe=null):nt=fe.sibling;var Oe=q(N,fe,_[me],J);if(Oe===null){fe===null&&(fe=nt);break}e&&fe&&Oe.alternate===null&&t(N,fe),E=c(Oe,E,me),de===null?ae=Oe:de.sibling=Oe,de=Oe,fe=nt}if(me===_.length)return n(N,fe),De&&Tn(N,me),ae;if(fe===null){for(;me<_.length;me++)fe=G(N,_[me],J),fe!==null&&(E=c(fe,E,me),de===null?ae=fe:de.sibling=fe,de=fe);return De&&Tn(N,me),ae}for(fe=s(N,fe);me<_.length;me++)nt=re(fe,N,me,_[me],J),nt!==null&&(e&&nt.alternate!==null&&fe.delete(nt.key===null?me:nt.key),E=c(nt,E,me),de===null?ae=nt:de.sibling=nt,de=nt);return e&&fe.forEach(function(Mn){return t(N,Mn)}),De&&Tn(N,me),ae}function le(N,E,_,J){var ae=te(_);if(typeof ae!="function")throw Error(l(150));if(_=ae.call(_),_==null)throw Error(l(151));for(var de=ae=null,fe=E,me=E=0,nt=null,Oe=_.next();fe!==null&&!Oe.done;me++,Oe=_.next()){fe.index>me?(nt=fe,fe=null):nt=fe.sibling;var Mn=q(N,fe,Oe.value,J);if(Mn===null){fe===null&&(fe=nt);break}e&&fe&&Mn.alternate===null&&t(N,fe),E=c(Mn,E,me),de===null?ae=Mn:de.sibling=Mn,de=Mn,fe=nt}if(Oe.done)return n(N,fe),De&&Tn(N,me),ae;if(fe===null){for(;!Oe.done;me++,Oe=_.next())Oe=G(N,Oe.value,J),Oe!==null&&(E=c(Oe,E,me),de===null?ae=Oe:de.sibling=Oe,de=Oe);return De&&Tn(N,me),ae}for(fe=s(N,fe);!Oe.done;me++,Oe=_.next())Oe=re(fe,N,me,Oe.value,J),Oe!==null&&(e&&Oe.alternate!==null&&fe.delete(Oe.key===null?me:Oe.key),E=c(Oe,E,me),de===null?ae=Oe:de.sibling=Oe,de=Oe);return e&&fe.forEach(function(If){return t(N,If)}),De&&Tn(N,me),ae}function Ge(N,E,_,J){if(typeof _=="object"&&_!==null&&_.type===F&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Q:e:{for(var ae=_.key,de=E;de!==null;){if(de.key===ae){if(ae=_.type,ae===F){if(de.tag===7){n(N,de.sibling),E=o(de,_.props.children),E.return=N,N=E;break e}}else if(de.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ie&&Aa(ae)===de.type){n(N,de.sibling),E=o(de,_.props),E.ref=Rr(N,de,_),E.return=N,N=E;break e}n(N,de);break}else t(N,de);de=de.sibling}_.type===F?(E=An(_.props.children,N.mode,J,_.key),E.return=N,N=E):(J=Zs(_.type,_.key,_.props,null,N.mode,J),J.ref=Rr(N,E,_),J.return=N,N=J)}return f(N);case M:e:{for(de=_.key;E!==null;){if(E.key===de)if(E.tag===4&&E.stateNode.containerInfo===_.containerInfo&&E.stateNode.implementation===_.implementation){n(N,E.sibling),E=o(E,_.children||[]),E.return=N,N=E;break e}else{n(N,E);break}else t(N,E);E=E.sibling}E=Yl(_,N.mode,J),E.return=N,N=E}return f(N);case ie:return de=_._init,Ge(N,E,de(_._payload),J)}if(Ne(_))return oe(N,E,_,J);if(te(_))return le(N,E,_,J);Ps(N,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,E!==null&&E.tag===6?(n(N,E.sibling),E=o(E,_),E.return=N,N=E):(n(N,E),E=Xl(_,N.mode,J),E.return=N,N=E),f(N)):n(N,E)}return Ge}var er=Da(!0),qa=Da(!1),Ts=pn(null),_s=null,tr=null,ll=null;function il(){ll=tr=_s=null}function al(e){var t=Ts.current;Ae(Ts),e._currentValue=t}function cl(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function nr(e,t){_s=e,ll=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(gt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(ll!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(_s===null)throw Error(l(308));tr=e,_s.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var _n=null;function ul(e){_n===null?_n=[e]:_n.push(e)}function Ba(e,t,n,s){var o=t.interleaved;return o===null?(n.next=n,ul(t)):(n.next=o.next,o.next=n),t.interleaved=n,en(e,s)}function en(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vn=!1;function dl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Le&2)!==0){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,en(e,n)}return o=s.interleaved,o===null?(t.next=t,ul(s)):(t.next=o.next,o.next=t),s.interleaved=t,en(e,n)}function Ls(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Eo(e,n)}}function Ha(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?o=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?o=c=t:c=c.next=t}else o=c=t;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Os(e,t,n,s){var o=e.updateQueue;vn=!1;var c=o.firstBaseUpdate,f=o.lastBaseUpdate,S=o.shared.pending;if(S!==null){o.shared.pending=null;var j=S,O=j.next;j.next=null,f===null?c=O:f.next=O,f=j;var U=e.alternate;U!==null&&(U=U.updateQueue,S=U.lastBaseUpdate,S!==f&&(S===null?U.firstBaseUpdate=O:S.next=O,U.lastBaseUpdate=j))}if(c!==null){var G=o.baseState;f=0,U=O=j=null,S=c;do{var q=S.lane,re=S.eventTime;if((s&q)===q){U!==null&&(U=U.next={eventTime:re,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var oe=e,le=S;switch(q=t,re=n,le.tag){case 1:if(oe=le.payload,typeof oe=="function"){G=oe.call(re,G,q);break e}G=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=le.payload,q=typeof oe=="function"?oe.call(re,G,q):oe,q==null)break e;G=Y({},G,q);break e;case 2:vn=!0}}S.callback!==null&&S.lane!==0&&(e.flags|=64,q=o.effects,q===null?o.effects=[S]:q.push(S))}else re={eventTime:re,lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},U===null?(O=U=re,j=G):U=U.next=re,f|=q;if(S=S.next,S===null){if(S=o.shared.pending,S===null)break;q=S,S=q.next,q.next=null,o.lastBaseUpdate=q,o.shared.pending=null}}while(!0);if(U===null&&(j=G),o.baseState=j,o.firstBaseUpdate=O,o.lastBaseUpdate=U,t=o.shared.interleaved,t!==null){o=t;do f|=o.lane,o=o.next;while(o!==t)}else c===null&&(o.shared.lanes=0);Rn|=f,e.lanes=f,e.memoizedState=G}}function Wa(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(o!==null){if(s.callback=null,s=n,typeof o!="function")throw Error(l(191,o));o.call(s)}}}var Ir={},$t=pn(Ir),Fr=pn(Ir),zr=pn(Ir);function Ln(e){if(e===Ir)throw Error(l(174));return e}function fl(e,t){switch(Fe(zr,t),Fe(Fr,e),Fe($t,Ir),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ie(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ie(t,e)}Ae($t),Fe($t,t)}function rr(){Ae($t),Ae(Fr),Ae(zr)}function Va(e){Ln(zr.current);var t=Ln($t.current),n=Ie(t,e.type);t!==n&&(Fe(Fr,e),Fe($t,n))}function pl(e){Fr.current===e&&(Ae($t),Ae(Fr))}var Be=pn(0);function Rs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hl=[];function ml(){for(var e=0;e<hl.length;e++)hl[e]._workInProgressVersionPrimary=null;hl.length=0}var Is=ee.ReactCurrentDispatcher,vl=ee.ReactCurrentBatchConfig,On=0,Ue=null,Ye=null,et=null,Fs=!1,Ar=!1,Dr=0,nf=0;function at(){throw Error(l(321))}function gl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!At(e[n],t[n]))return!1;return!0}function yl(e,t,n,s,o,c){if(On=c,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Is.current=e===null||e.memoizedState===null?lf:af,e=n(s,o),Ar){c=0;do{if(Ar=!1,Dr=0,25<=c)throw Error(l(301));c+=1,et=Ye=null,t.updateQueue=null,Is.current=cf,e=n(s,o)}while(Ar)}if(Is.current=Ds,t=Ye!==null&&Ye.next!==null,On=0,et=Ye=Ue=null,Fs=!1,t)throw Error(l(300));return e}function xl(){var e=Dr!==0;return Dr=0,e}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ue.memoizedState=et=e:et=et.next=e,et}function Tt(){if(Ye===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=et===null?Ue.memoizedState:et.next;if(t!==null)et=t,Ye=e;else{if(e===null)throw Error(l(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Ue.memoizedState=et=e:et=et.next=e}return et}function qr(e,t){return typeof t=="function"?t(e):t}function wl(e){var t=Tt(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var s=Ye,o=s.baseQueue,c=n.pending;if(c!==null){if(o!==null){var f=o.next;o.next=c.next,c.next=f}s.baseQueue=o=c,n.pending=null}if(o!==null){c=o.next,s=s.baseState;var S=f=null,j=null,O=c;do{var U=O.lane;if((On&U)===U)j!==null&&(j=j.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),s=O.hasEagerState?O.eagerState:e(s,O.action);else{var G={lane:U,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};j===null?(S=j=G,f=s):j=j.next=G,Ue.lanes|=U,Rn|=U}O=O.next}while(O!==null&&O!==c);j===null?f=s:j.next=S,At(s,t.memoizedState)||(gt=!0),t.memoizedState=s,t.baseState=f,t.baseQueue=j,n.lastRenderedState=s}if(e=n.interleaved,e!==null){o=e;do c=o.lane,Ue.lanes|=c,Rn|=c,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sl(e){var t=Tt(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var s=n.dispatch,o=n.pending,c=t.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do c=e(c,f.action),f=f.next;while(f!==o);At(c,t.memoizedState)||(gt=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,s]}function $a(){}function Ga(e,t){var n=Ue,s=Tt(),o=t(),c=!At(s.memoizedState,o);if(c&&(s.memoizedState=o,gt=!0),s=s.queue,kl(Xa.bind(null,n,s,e),[e]),s.getSnapshot!==t||c||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Br(9,Ka.bind(null,n,s,o,t),void 0,null),tt===null)throw Error(l(349));(On&30)!==0||Qa(n,t,o)}return o}function Qa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ka(e,t,n,s){t.value=n,t.getSnapshot=s,Ya(t)&&Ja(e)}function Xa(e,t,n){return n(function(){Ya(t)&&Ja(e)})}function Ya(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!At(e,n)}catch{return!0}}function Ja(e){var t=en(e,1);t!==null&&Ht(t,e,1,-1)}function Za(e){var t=Gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:e},t.queue=e,e=e.dispatch=of.bind(null,Ue,e),[t.memoizedState,e]}function Br(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function ec(){return Tt().memoizedState}function zs(e,t,n,s){var o=Gt();Ue.flags|=e,o.memoizedState=Br(1|t,n,void 0,s===void 0?null:s)}function As(e,t,n,s){var o=Tt();s=s===void 0?null:s;var c=void 0;if(Ye!==null){var f=Ye.memoizedState;if(c=f.destroy,s!==null&&gl(s,f.deps)){o.memoizedState=Br(t,n,c,s);return}}Ue.flags|=e,o.memoizedState=Br(1|t,n,c,s)}function tc(e,t){return zs(8390656,8,e,t)}function kl(e,t){return As(2048,8,e,t)}function nc(e,t){return As(4,2,e,t)}function rc(e,t){return As(4,4,e,t)}function sc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oc(e,t,n){return n=n!=null?n.concat([e]):null,As(4,4,sc.bind(null,t,e),n)}function jl(){}function lc(e,t){var n=Tt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&gl(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function ic(e,t){var n=Tt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&gl(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function ac(e,t,n){return(On&21)===0?(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=n):(At(n,t)||(n=Ai(),Ue.lanes|=n,Rn|=n,e.baseState=!0),t)}function rf(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var s=vl.transition;vl.transition={};try{e(!1),t()}finally{Re=n,vl.transition=s}}function cc(){return Tt().memoizedState}function sf(e,t,n){var s=Sn(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},uc(e))dc(t,n);else if(n=Ba(e,t,n,s),n!==null){var o=pt();Ht(n,e,s,o),fc(n,t,s)}}function of(e,t,n){var s=Sn(e),o={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(uc(e))dc(t,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,S=c(f,n);if(o.hasEagerState=!0,o.eagerState=S,At(S,f)){var j=t.interleaved;j===null?(o.next=o,ul(t)):(o.next=j.next,j.next=o),t.interleaved=o;return}}catch{}finally{}n=Ba(e,t,o,s),n!==null&&(o=pt(),Ht(n,e,s,o),fc(n,t,s))}}function uc(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function dc(e,t){Ar=Fs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fc(e,t,n){if((n&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Eo(e,n)}}var Ds={readContext:Pt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},lf={readContext:Pt,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:tc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,zs(4194308,4,sc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zs(4194308,4,e,t)},useInsertionEffect:function(e,t){return zs(4,2,e,t)},useMemo:function(e,t){var n=Gt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Gt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=sf.bind(null,Ue,e),[s.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:Za,useDebugValue:jl,useDeferredValue:function(e){return Gt().memoizedState=e},useTransition:function(){var e=Za(!1),t=e[0];return e=rf.bind(null,e[1]),Gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ue,o=Gt();if(De){if(n===void 0)throw Error(l(407));n=n()}else{if(n=t(),tt===null)throw Error(l(349));(On&30)!==0||Qa(s,t,n)}o.memoizedState=n;var c={value:n,getSnapshot:t};return o.queue=c,tc(Xa.bind(null,s,c,e),[e]),s.flags|=2048,Br(9,Ka.bind(null,s,c,n,t),void 0,null),n},useId:function(){var e=Gt(),t=tt.identifierPrefix;if(De){var n=Zt,s=Jt;n=(s&~(1<<32-zt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Dr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=nf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},af={readContext:Pt,useCallback:lc,useContext:Pt,useEffect:kl,useImperativeHandle:oc,useInsertionEffect:nc,useLayoutEffect:rc,useMemo:ic,useReducer:wl,useRef:ec,useState:function(){return wl(qr)},useDebugValue:jl,useDeferredValue:function(e){var t=Tt();return ac(t,Ye.memoizedState,e)},useTransition:function(){var e=wl(qr)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:$a,useSyncExternalStore:Ga,useId:cc,unstable_isNewReconciler:!1},cf={readContext:Pt,useCallback:lc,useContext:Pt,useEffect:kl,useImperativeHandle:oc,useInsertionEffect:nc,useLayoutEffect:rc,useMemo:ic,useReducer:Sl,useRef:ec,useState:function(){return Sl(qr)},useDebugValue:jl,useDeferredValue:function(e){var t=Tt();return Ye===null?t.memoizedState=e:ac(t,Ye.memoizedState,e)},useTransition:function(){var e=Sl(qr)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:$a,useSyncExternalStore:Ga,useId:cc,unstable_isNewReconciler:!1};function qt(e,t){if(e&&e.defaultProps){t=Y({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ml(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Y({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qs={isMounted:function(e){return(e=e._reactInternals)?Cn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=pt(),o=Sn(e),c=tn(s,o);c.payload=t,n!=null&&(c.callback=n),t=gn(e,c,o),t!==null&&(Ht(t,e,o,s),Ls(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=pt(),o=Sn(e),c=tn(s,o);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=gn(e,c,o),t!==null&&(Ht(t,e,o,s),Ls(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pt(),s=Sn(e),o=tn(n,s);o.tag=2,t!=null&&(o.callback=t),t=gn(e,o,s),t!==null&&(Ht(t,e,s,n),Ls(t,e,s))}};function pc(e,t,n,s,o,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,c,f):t.prototype&&t.prototype.isPureReactComponent?!br(n,s)||!br(o,c):!0}function hc(e,t,n){var s=!1,o=hn,c=t.contextType;return typeof c=="object"&&c!==null?c=Pt(c):(o=vt(t)?Nn:it.current,s=t.contextTypes,c=(s=s!=null)?Xn(e,o):hn),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qs,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=c),t}function mc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&qs.enqueueReplaceState(t,t.state,null)}function El(e,t,n,s){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},dl(e);var c=t.contextType;typeof c=="object"&&c!==null?o.context=Pt(c):(c=vt(t)?Nn:it.current,o.context=Xn(e,c)),o.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(Ml(e,t,c,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&qs.enqueueReplaceState(o,o.state,null),Os(e,n,o,s),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function sr(e,t){try{var n="",s=t;do n+=Se(s),s=s.return;while(s);var o=n}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:o,digest:null}}function Cl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uf=typeof WeakMap=="function"?WeakMap:Map;function vc(e,t,n){n=tn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Gs||(Gs=!0,Ul=s),bl(e,t)},n}function gc(e,t,n){n=tn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;n.payload=function(){return s(o)},n.callback=function(){bl(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){bl(e,t),typeof s!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function yc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new uf;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(n)||(o.add(n),e=Mf.bind(null,e,t,n),t.then(e,e))}function xc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wc(e,t,n,s,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tn(-1,1),t.tag=2,gn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var df=ee.ReactCurrentOwner,gt=!1;function ft(e,t,n,s){t.child=e===null?qa(t,null,n,s):er(t,e.child,n,s)}function Sc(e,t,n,s,o){n=n.render;var c=t.ref;return nr(t,o),s=yl(e,t,n,s,c,o),n=xl(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,nn(e,t,o)):(De&&n&&tl(t),t.flags|=1,ft(e,t,s,o),t.child)}function kc(e,t,n,s,o){if(e===null){var c=n.type;return typeof c=="function"&&!Kl(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,jc(e,t,c,s,o)):(e=Zs(n.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,(e.lanes&o)===0){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:br,n(f,s)&&e.ref===t.ref)return nn(e,t,o)}return t.flags|=1,e=jn(c,s),e.ref=t.ref,e.return=t,t.child=e}function jc(e,t,n,s,o){if(e!==null){var c=e.memoizedProps;if(br(c,s)&&e.ref===t.ref)if(gt=!1,t.pendingProps=s=c,(e.lanes&o)!==0)(e.flags&131072)!==0&&(gt=!0);else return t.lanes=e.lanes,nn(e,t,o)}return Nl(e,t,n,s,o)}function Mc(e,t,n){var s=t.pendingProps,o=s.children,c=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(lr,Et),Et|=n;else{if((n&1073741824)===0)return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(lr,Et),Et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=c!==null?c.baseLanes:n,Fe(lr,Et),Et|=s}else c!==null?(s=c.baseLanes|n,t.memoizedState=null):s=n,Fe(lr,Et),Et|=s;return ft(e,t,o,n),t.child}function Ec(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Nl(e,t,n,s,o){var c=vt(n)?Nn:it.current;return c=Xn(t,c),nr(t,o),n=yl(e,t,n,s,c,o),s=xl(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,nn(e,t,o)):(De&&s&&tl(t),t.flags|=1,ft(e,t,n,o),t.child)}function Cc(e,t,n,s,o){if(vt(n)){var c=!0;Ms(t)}else c=!1;if(nr(t,o),t.stateNode===null)Us(e,t),hc(t,n,s),El(t,n,s,o),s=!0;else if(e===null){var f=t.stateNode,S=t.memoizedProps;f.props=S;var j=f.context,O=n.contextType;typeof O=="object"&&O!==null?O=Pt(O):(O=vt(n)?Nn:it.current,O=Xn(t,O));var U=n.getDerivedStateFromProps,G=typeof U=="function"||typeof f.getSnapshotBeforeUpdate=="function";G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S!==s||j!==O)&&mc(t,f,s,O),vn=!1;var q=t.memoizedState;f.state=q,Os(t,s,f,o),j=t.memoizedState,S!==s||q!==j||mt.current||vn?(typeof U=="function"&&(Ml(t,n,U,s),j=t.memoizedState),(S=vn||pc(t,n,S,s,q,j,O))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=j),f.props=s,f.state=j,f.context=O,s=S):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{f=t.stateNode,Ua(e,t),S=t.memoizedProps,O=t.type===t.elementType?S:qt(t.type,S),f.props=O,G=t.pendingProps,q=f.context,j=n.contextType,typeof j=="object"&&j!==null?j=Pt(j):(j=vt(n)?Nn:it.current,j=Xn(t,j));var re=n.getDerivedStateFromProps;(U=typeof re=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S!==G||q!==j)&&mc(t,f,s,j),vn=!1,q=t.memoizedState,f.state=q,Os(t,s,f,o);var oe=t.memoizedState;S!==G||q!==oe||mt.current||vn?(typeof re=="function"&&(Ml(t,n,re,s),oe=t.memoizedState),(O=vn||pc(t,n,O,s,q,oe,j)||!1)?(U||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,oe,j),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,oe,j)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||S===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=oe),f.props=s,f.state=oe,f.context=j,s=O):(typeof f.componentDidUpdate!="function"||S===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),s=!1)}return Pl(e,t,n,s,c,o)}function Pl(e,t,n,s,o,c){Ec(e,t);var f=(t.flags&128)!==0;if(!s&&!f)return o&&_a(t,n,!1),nn(e,t,c);s=t.stateNode,df.current=t;var S=f&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&f?(t.child=er(t,e.child,null,c),t.child=er(t,null,S,c)):ft(e,t,S,c),t.memoizedState=s.state,o&&_a(t,n,!0),t.child}function bc(e){var t=e.stateNode;t.pendingContext?Pa(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pa(e,t.context,!1),fl(e,t.containerInfo)}function Nc(e,t,n,s,o){return Zn(),ol(o),t.flags|=256,ft(e,t,n,s),t.child}var Tl={dehydrated:null,treeContext:null,retryLane:0};function _l(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pc(e,t,n){var s=t.pendingProps,o=Be.current,c=!1,f=(t.flags&128)!==0,S;if((S=f)||(S=e!==null&&e.memoizedState===null?!1:(o&2)!==0),S?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Fe(Be,o&1),e===null)return sl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(f=s.children,e=s.fallback,c?(s=t.mode,c=t.child,f={mode:"hidden",children:f},(s&1)===0&&c!==null?(c.childLanes=0,c.pendingProps=f):c=eo(f,s,0,null),e=An(e,s,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=_l(n),t.memoizedState=Tl,e):Ll(t,f));if(o=e.memoizedState,o!==null&&(S=o.dehydrated,S!==null))return ff(e,t,f,s,S,o,n);if(c){c=s.fallback,f=t.mode,o=e.child,S=o.sibling;var j={mode:"hidden",children:s.children};return(f&1)===0&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=j,t.deletions=null):(s=jn(o,j),s.subtreeFlags=o.subtreeFlags&14680064),S!==null?c=jn(S,c):(c=An(c,f,n,null),c.flags|=2),c.return=t,s.return=t,s.sibling=c,t.child=s,s=c,c=t.child,f=e.child.memoizedState,f=f===null?_l(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=e.childLanes&~n,t.memoizedState=Tl,s}return c=e.child,e=c.sibling,s=jn(c,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ll(e,t){return t=eo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bs(e,t,n,s){return s!==null&&ol(s),er(t,e.child,null,n),e=Ll(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ff(e,t,n,s,o,c,f){if(n)return t.flags&256?(t.flags&=-257,s=Cl(Error(l(422))),Bs(e,t,f,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=s.fallback,o=t.mode,s=eo({mode:"visible",children:s.children},o,0,null),c=An(c,o,f,null),c.flags|=2,s.return=t,c.return=t,s.sibling=c,t.child=s,(t.mode&1)!==0&&er(t,e.child,null,f),t.child.memoizedState=_l(f),t.memoizedState=Tl,c);if((t.mode&1)===0)return Bs(e,t,f,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var S=s.dgst;return s=S,c=Error(l(419)),s=Cl(c,s,void 0),Bs(e,t,f,s)}if(S=(f&e.childLanes)!==0,gt||S){if(s=tt,s!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&(s.suspendedLanes|f))!==0?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,en(e,o),Ht(s,e,o,-1))}return Ql(),s=Cl(Error(l(421))),Bs(e,t,f,s)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Ef.bind(null,e),o._reactRetry=t,null):(e=c.treeContext,Mt=fn(o.nextSibling),jt=t,De=!0,Dt=null,e!==null&&(bt[Nt++]=Jt,bt[Nt++]=Zt,bt[Nt++]=Pn,Jt=e.id,Zt=e.overflow,Pn=t),t=Ll(t,s.children),t.flags|=4096,t)}function Tc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),cl(e.return,t,n)}function Ol(e,t,n,s,o){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=n,c.tailMode=o)}function _c(e,t,n){var s=t.pendingProps,o=s.revealOrder,c=s.tail;if(ft(e,t,s.children,n),s=Be.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tc(e,n,t);else if(e.tag===19)Tc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Fe(Be,s),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Rs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ol(t,!1,o,n,c);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Rs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ol(t,!0,n,null,c);break;case"together":Ol(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Rn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,n=jn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pf(e,t,n){switch(t.tag){case 3:bc(t),Zn();break;case 5:Va(t);break;case 1:vt(t.type)&&Ms(t);break;case 4:fl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;Fe(Ts,s._currentValue),s._currentValue=o;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Fe(Be,Be.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Pc(e,t,n):(Fe(Be,Be.current&1),e=nn(e,t,n),e!==null?e.sibling:null);Fe(Be,Be.current&1);break;case 19:if(s=(n&t.childLanes)!==0,(e.flags&128)!==0){if(s)return _c(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Fe(Be,Be.current),s)break;return null;case 22:case 23:return t.lanes=0,Mc(e,t,n)}return nn(e,t,n)}var Lc,Rl,Oc,Rc;Lc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rl=function(){},Oc=function(e,t,n,s){var o=e.memoizedProps;if(o!==s){e=t.stateNode,Ln($t.current);var c=null;switch(n){case"input":o=dt(e,o),s=dt(e,s),c=[];break;case"select":o=Y({},o,{value:void 0}),s=Y({},s,{value:void 0}),c=[];break;case"textarea":o=ht(e,o),s=ht(e,s),c=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ss)}ho(n,s);var f;n=null;for(O in o)if(!s.hasOwnProperty(O)&&o.hasOwnProperty(O)&&o[O]!=null)if(O==="style"){var S=o[O];for(f in S)S.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(d.hasOwnProperty(O)?c||(c=[]):(c=c||[]).push(O,null));for(O in s){var j=s[O];if(S=o?.[O],s.hasOwnProperty(O)&&j!==S&&(j!=null||S!=null))if(O==="style")if(S){for(f in S)!S.hasOwnProperty(f)||j&&j.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in j)j.hasOwnProperty(f)&&S[f]!==j[f]&&(n||(n={}),n[f]=j[f])}else n||(c||(c=[]),c.push(O,n)),n=j;else O==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,S=S?S.__html:void 0,j!=null&&S!==j&&(c=c||[]).push(O,j)):O==="children"?typeof j!="string"&&typeof j!="number"||(c=c||[]).push(O,""+j):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(d.hasOwnProperty(O)?(j!=null&&O==="onScroll"&&ze("scroll",e),c||S===j||(c=[])):(c=c||[]).push(O,j))}n&&(c=c||[]).push("style",n);var O=c;(t.updateQueue=O)&&(t.flags|=4)}},Rc=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ur(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function hf(e,t,n){var s=t.pendingProps;switch(nl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return vt(t.type)&&js(),ct(t),null;case 3:return s=t.stateNode,rr(),Ae(mt),Ae(it),ml(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ns(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dt!==null&&(Vl(Dt),Dt=null))),Rl(e,t),ct(t),null;case 5:pl(t);var o=Ln(zr.current);if(n=t.type,e!==null&&t.stateNode!=null)Oc(e,t,n,s,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(l(166));return ct(t),null}if(e=Ln($t.current),Ns(t)){s=t.stateNode,n=t.type;var c=t.memoizedProps;switch(s[Vt]=t,s[Lr]=c,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(o=0;o<Pr.length;o++)ze(Pr[o],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":It(s,c),ze("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!c.multiple},ze("invalid",s);break;case"textarea":Kt(s,c),ze("invalid",s)}ho(n,c),o=null;for(var f in c)if(c.hasOwnProperty(f)){var S=c[f];f==="children"?typeof S=="string"?s.textContent!==S&&(c.suppressHydrationWarning!==!0&&ws(s.textContent,S,e),o=["children",S]):typeof S=="number"&&s.textContent!==""+S&&(c.suppressHydrationWarning!==!0&&ws(s.textContent,S,e),o=["children",""+S]):d.hasOwnProperty(f)&&S!=null&&f==="onScroll"&&ze("scroll",s)}switch(n){case"input":qe(s),ke(s,c,!0);break;case"textarea":qe(s),Ft(s);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(s.onclick=Ss)}s=o,t.updateQueue=s,s!==null&&(t.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ct(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=f.createElement(n,{is:s.is}):(e=f.createElement(n),n==="select"&&(f=e,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):e=f.createElementNS(e,n),e[Vt]=t,e[Lr]=s,Lc(e,t,!1,!1),t.stateNode=e;e:{switch(f=mo(n,s),n){case"dialog":ze("cancel",e),ze("close",e),o=s;break;case"iframe":case"object":case"embed":ze("load",e),o=s;break;case"video":case"audio":for(o=0;o<Pr.length;o++)ze(Pr[o],e);o=s;break;case"source":ze("error",e),o=s;break;case"img":case"image":case"link":ze("error",e),ze("load",e),o=s;break;case"details":ze("toggle",e),o=s;break;case"input":It(e,s),o=dt(e,s),ze("invalid",e);break;case"option":o=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},o=Y({},s,{value:void 0}),ze("invalid",e);break;case"textarea":Kt(e,s),o=ht(e,s),ze("invalid",e);break;default:o=s}ho(n,o),S=o;for(c in S)if(S.hasOwnProperty(c)){var j=S[c];c==="style"?ji(e,j):c==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&En(e,j)):c==="children"?typeof j=="string"?(n!=="textarea"||j!=="")&&ur(e,j):typeof j=="number"&&ur(e,""+j):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(d.hasOwnProperty(c)?j!=null&&c==="onScroll"&&ze("scroll",e):j!=null&&Z(e,c,j,f))}switch(n){case"input":qe(e),ke(e,s,!1);break;case"textarea":qe(e),Ft(e);break;case"option":s.value!=null&&e.setAttribute("value",""+je(s.value));break;case"select":e.multiple=!!s.multiple,c=s.value,c!=null?_e(e,!!s.multiple,c,!1):s.defaultValue!=null&&_e(e,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ss)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ct(t),null;case 6:if(e&&t.stateNode!=null)Rc(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(l(166));if(n=Ln(zr.current),Ln($t.current),Ns(t)){if(s=t.stateNode,n=t.memoizedProps,s[Vt]=t,(c=s.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:ws(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ws(s.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Vt]=t,t.stateNode=s}return ct(t),null;case 13:if(Ae(Be),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&Mt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)za(),Zn(),t.flags|=98560,c=!1;else if(c=Ns(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[Vt]=t}else Zn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ct(t),c=!1}else Dt!==null&&(Vl(Dt),Dt=null),c=!0;if(!c)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Be.current&1)!==0?Je===0&&(Je=3):Ql())),t.updateQueue!==null&&(t.flags|=4),ct(t),null);case 4:return rr(),Rl(e,t),e===null&&Tr(t.stateNode.containerInfo),ct(t),null;case 10:return al(t.type._context),ct(t),null;case 17:return vt(t.type)&&js(),ct(t),null;case 19:if(Ae(Be),c=t.memoizedState,c===null)return ct(t),null;if(s=(t.flags&128)!==0,f=c.rendering,f===null)if(s)Ur(c,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Rs(e),f!==null){for(t.flags|=128,Ur(c,!1),s=f.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)c=n,e=s,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,e=f.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(Be,Be.current&1|2),t.child}e=e.sibling}c.tail!==null&&$e()>ir&&(t.flags|=128,s=!0,Ur(c,!1),t.lanes=4194304)}else{if(!s)if(e=Rs(f),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ur(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!De)return ct(t),null}else 2*$e()-c.renderingStartTime>ir&&n!==1073741824&&(t.flags|=128,s=!0,Ur(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(n=c.last,n!==null?n.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=$e(),t.sibling=null,n=Be.current,Fe(Be,s?n&1|2:n&1),t):(ct(t),null);case 22:case 23:return Gl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Et&1073741824)!==0&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),null;case 24:return null;case 25:return null}throw Error(l(156,t.tag))}function mf(e,t){switch(nl(t),t.tag){case 1:return vt(t.type)&&js(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rr(),Ae(mt),Ae(it),ml(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return pl(t),null;case 13:if(Ae(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Zn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(Be),null;case 4:return rr(),null;case 10:return al(t.type._context),null;case 22:case 23:return Gl(),null;case 24:return null;default:return null}}var Hs=!1,ut=!1,vf=typeof WeakSet=="function"?WeakSet:Set,se=null;function or(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){We(e,t,s)}else n.current=null}function Il(e,t,n){try{n()}catch(s){We(e,t,s)}}var Ic=!1;function gf(e,t){if(Go=cs,e=pa(),Do(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,S=-1,j=-1,O=0,U=0,G=e,q=null;t:for(;;){for(var re;G!==n||o!==0&&G.nodeType!==3||(S=f+o),G!==c||s!==0&&G.nodeType!==3||(j=f+s),G.nodeType===3&&(f+=G.nodeValue.length),(re=G.firstChild)!==null;)q=G,G=re;for(;;){if(G===e)break t;if(q===n&&++O===o&&(S=f),q===c&&++U===s&&(j=f),(re=G.nextSibling)!==null)break;G=q,q=G.parentNode}G=re}n=S===-1||j===-1?null:{start:S,end:j}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qo={focusedElem:e,selectionRange:n},cs=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var oe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var le=oe.memoizedProps,Ge=oe.memoizedState,N=t.stateNode,E=N.getSnapshotBeforeUpdate(t.elementType===t.type?le:qt(t.type,le),Ge);N.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(J){We(t,t.return,J)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return oe=Ic,Ic=!1,oe}function Hr(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var c=o.destroy;o.destroy=void 0,c!==void 0&&Il(t,n,c)}o=o.next}while(o!==s)}}function Ws(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Fl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fc(e){var t=e.alternate;t!==null&&(e.alternate=null,Fc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[Lr],delete t[Jo],delete t[Jd],delete t[Zd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zc(e){return e.tag===5||e.tag===3||e.tag===4}function Ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zl(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ss));else if(s!==4&&(e=e.child,e!==null))for(zl(e,t,n),e=e.sibling;e!==null;)zl(e,t,n),e=e.sibling}function Al(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Al(e,t,n),e=e.sibling;e!==null;)Al(e,t,n),e=e.sibling}var st=null,Bt=!1;function yn(e,t,n){for(n=n.child;n!==null;)Dc(e,t,n),n=n.sibling}function Dc(e,t,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(rs,n)}catch{}switch(n.tag){case 5:ut||or(n,t);case 6:var s=st,o=Bt;st=null,yn(e,t,n),st=s,Bt=o,st!==null&&(Bt?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(Bt?(e=st,n=n.stateNode,e.nodeType===8?Yo(e.parentNode,n):e.nodeType===1&&Yo(e,n),Sr(e)):Yo(st,n.stateNode));break;case 4:s=st,o=Bt,st=n.stateNode.containerInfo,Bt=!0,yn(e,t,n),st=s,Bt=o;break;case 0:case 11:case 14:case 15:if(!ut&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var c=o,f=c.destroy;c=c.tag,f!==void 0&&((c&2)!==0||(c&4)!==0)&&Il(n,t,f),o=o.next}while(o!==s)}yn(e,t,n);break;case 1:if(!ut&&(or(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(S){We(n,t,S)}yn(e,t,n);break;case 21:yn(e,t,n);break;case 22:n.mode&1?(ut=(s=ut)||n.memoizedState!==null,yn(e,t,n),ut=s):yn(e,t,n);break;default:yn(e,t,n)}}function qc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vf),t.forEach(function(s){var o=Cf.bind(null,e,s);n.has(s)||(n.add(s),s.then(o,o))})}}function Ut(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];try{var c=e,f=t,S=f;e:for(;S!==null;){switch(S.tag){case 5:st=S.stateNode,Bt=!1;break e;case 3:st=S.stateNode.containerInfo,Bt=!0;break e;case 4:st=S.stateNode.containerInfo,Bt=!0;break e}S=S.return}if(st===null)throw Error(l(160));Dc(c,f,o),st=null,Bt=!1;var j=o.alternate;j!==null&&(j.return=null),o.return=null}catch(O){We(o,t,O)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bc(t,e),t=t.sibling}function Bc(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ut(t,e),Qt(e),s&4){try{Hr(3,e,e.return),Ws(3,e)}catch(le){We(e,e.return,le)}try{Hr(5,e,e.return)}catch(le){We(e,e.return,le)}}break;case 1:Ut(t,e),Qt(e),s&512&&n!==null&&or(n,n.return);break;case 5:if(Ut(t,e),Qt(e),s&512&&n!==null&&or(n,n.return),e.flags&32){var o=e.stateNode;try{ur(o,"")}catch(le){We(e,e.return,le)}}if(s&4&&(o=e.stateNode,o!=null)){var c=e.memoizedProps,f=n!==null?n.memoizedProps:c,S=e.type,j=e.updateQueue;if(e.updateQueue=null,j!==null)try{S==="input"&&c.type==="radio"&&c.name!=null&&W(o,c),mo(S,f);var O=mo(S,c);for(f=0;f<j.length;f+=2){var U=j[f],G=j[f+1];U==="style"?ji(o,G):U==="dangerouslySetInnerHTML"?En(o,G):U==="children"?ur(o,G):Z(o,U,G,O)}switch(S){case"input":he(o,c);break;case"textarea":Ee(o,c);break;case"select":var q=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var re=c.value;re!=null?_e(o,!!c.multiple,re,!1):q!==!!c.multiple&&(c.defaultValue!=null?_e(o,!!c.multiple,c.defaultValue,!0):_e(o,!!c.multiple,c.multiple?[]:"",!1))}o[Lr]=c}catch(le){We(e,e.return,le)}}break;case 6:if(Ut(t,e),Qt(e),s&4){if(e.stateNode===null)throw Error(l(162));o=e.stateNode,c=e.memoizedProps;try{o.nodeValue=c}catch(le){We(e,e.return,le)}}break;case 3:if(Ut(t,e),Qt(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Sr(t.containerInfo)}catch(le){We(e,e.return,le)}break;case 4:Ut(t,e),Qt(e);break;case 13:Ut(t,e),Qt(e),o=e.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(Bl=$e())),s&4&&qc(e);break;case 22:if(U=n!==null&&n.memoizedState!==null,e.mode&1?(ut=(O=ut)||U,Ut(t,e),ut=O):Ut(t,e),Qt(e),s&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!U&&(e.mode&1)!==0)for(se=e,U=e.child;U!==null;){for(G=se=U;se!==null;){switch(q=se,re=q.child,q.tag){case 0:case 11:case 14:case 15:Hr(4,q,q.return);break;case 1:or(q,q.return);var oe=q.stateNode;if(typeof oe.componentWillUnmount=="function"){s=q,n=q.return;try{t=s,oe.props=t.memoizedProps,oe.state=t.memoizedState,oe.componentWillUnmount()}catch(le){We(s,n,le)}}break;case 5:or(q,q.return);break;case 22:if(q.memoizedState!==null){Wc(G);continue}}re!==null?(re.return=q,se=re):Wc(G)}U=U.sibling}e:for(U=null,G=e;;){if(G.tag===5){if(U===null){U=G;try{o=G.stateNode,O?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(S=G.stateNode,j=G.memoizedProps.style,f=j!=null&&j.hasOwnProperty("display")?j.display:null,S.style.display=ki("display",f))}catch(le){We(e,e.return,le)}}}else if(G.tag===6){if(U===null)try{G.stateNode.nodeValue=O?"":G.memoizedProps}catch(le){We(e,e.return,le)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===e)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===e)break e;for(;G.sibling===null;){if(G.return===null||G.return===e)break e;U===G&&(U=null),G=G.return}U===G&&(U=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:Ut(t,e),Qt(e),s&4&&qc(e);break;case 21:break;default:Ut(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zc(n)){var s=n;break e}n=n.return}throw Error(l(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(ur(o,""),s.flags&=-33);var c=Ac(e);Al(e,c,o);break;case 3:case 4:var f=s.stateNode.containerInfo,S=Ac(e);zl(e,S,f);break;default:throw Error(l(161))}}catch(j){We(e,e.return,j)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yf(e,t,n){se=e,Uc(e)}function Uc(e,t,n){for(var s=(e.mode&1)!==0;se!==null;){var o=se,c=o.child;if(o.tag===22&&s){var f=o.memoizedState!==null||Hs;if(!f){var S=o.alternate,j=S!==null&&S.memoizedState!==null||ut;S=Hs;var O=ut;if(Hs=f,(ut=j)&&!O)for(se=o;se!==null;)f=se,j=f.child,f.tag===22&&f.memoizedState!==null?Vc(o):j!==null?(j.return=f,se=j):Vc(o);for(;c!==null;)se=c,Uc(c),c=c.sibling;se=o,Hs=S,ut=O}Hc(e)}else(o.subtreeFlags&8772)!==0&&c!==null?(c.return=o,se=c):Hc(e)}}function Hc(e){for(;se!==null;){var t=se;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ut||Ws(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ut)if(n===null)s.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:qt(t.type,n.memoizedProps);s.componentDidUpdate(o,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&Wa(t,c,s);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wa(t,f,n)}break;case 5:var S=t.stateNode;if(n===null&&t.flags&4){n=S;var j=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&n.focus();break;case"img":j.src&&(n.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var O=t.alternate;if(O!==null){var U=O.memoizedState;if(U!==null){var G=U.dehydrated;G!==null&&Sr(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}ut||t.flags&512&&Fl(t)}catch(q){We(t,t.return,q)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function Wc(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function Vc(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ws(4,t)}catch(j){We(t,n,j)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(j){We(t,o,j)}}var c=t.return;try{Fl(t)}catch(j){We(t,c,j)}break;case 5:var f=t.return;try{Fl(t)}catch(j){We(t,f,j)}}}catch(j){We(t,t.return,j)}if(t===e){se=null;break}var S=t.sibling;if(S!==null){S.return=t.return,se=S;break}se=t.return}}var xf=Math.ceil,Vs=ee.ReactCurrentDispatcher,Dl=ee.ReactCurrentOwner,_t=ee.ReactCurrentBatchConfig,Le=0,tt=null,Qe=null,ot=0,Et=0,lr=pn(0),Je=0,Wr=null,Rn=0,$s=0,ql=0,Vr=null,yt=null,Bl=0,ir=1/0,rn=null,Gs=!1,Ul=null,xn=null,Qs=!1,wn=null,Ks=0,$r=0,Hl=null,Xs=-1,Ys=0;function pt(){return(Le&6)!==0?$e():Xs!==-1?Xs:Xs=$e()}function Sn(e){return(e.mode&1)===0?1:(Le&2)!==0&&ot!==0?ot&-ot:tf.transition!==null?(Ys===0&&(Ys=Ai()),Ys):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Gi(e.type)),e)}function Ht(e,t,n,s){if(50<$r)throw $r=0,Hl=null,Error(l(185));vr(e,n,s),((Le&2)===0||e!==tt)&&(e===tt&&((Le&2)===0&&($s|=n),Je===4&&kn(e,ot)),xt(e,s),n===1&&Le===0&&(t.mode&1)===0&&(ir=$e()+500,Es&&mn()))}function xt(e,t){var n=e.callbackNode;td(e,t);var s=ls(e,e===tt?ot:0);if(s===0)n!==null&&Ii(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Ii(n),t===1)e.tag===0?ef(Gc.bind(null,e)):La(Gc.bind(null,e)),Xd(function(){(Le&6)===0&&mn()}),n=null;else{switch(Di(s)){case 1:n=ko;break;case 4:n=Fi;break;case 16:n=ns;break;case 536870912:n=zi;break;default:n=ns}n=tu(n,$c.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $c(e,t){if(Xs=-1,Ys=0,(Le&6)!==0)throw Error(l(327));var n=e.callbackNode;if(ar()&&e.callbackNode!==n)return null;var s=ls(e,e===tt?ot:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=Js(e,s);else{t=s;var o=Le;Le|=2;var c=Kc();(tt!==e||ot!==t)&&(rn=null,ir=$e()+500,Fn(e,t));do try{kf();break}catch(S){Qc(e,S)}while(!0);il(),Vs.current=c,Le=o,Qe!==null?t=0:(tt=null,ot=0,t=Je)}if(t!==0){if(t===2&&(o=jo(e),o!==0&&(s=o,t=Wl(e,o))),t===1)throw n=Wr,Fn(e,0),kn(e,s),xt(e,$e()),n;if(t===6)kn(e,s);else{if(o=e.current.alternate,(s&30)===0&&!wf(o)&&(t=Js(e,s),t===2&&(c=jo(e),c!==0&&(s=c,t=Wl(e,c))),t===1))throw n=Wr,Fn(e,0),kn(e,s),xt(e,$e()),n;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(l(345));case 2:zn(e,yt,rn);break;case 3:if(kn(e,s),(s&130023424)===s&&(t=Bl+500-$e(),10<t)){if(ls(e,0)!==0)break;if(o=e.suspendedLanes,(o&s)!==s){pt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Xo(zn.bind(null,e,yt,rn),t);break}zn(e,yt,rn);break;case 4:if(kn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,o=-1;0<s;){var f=31-zt(s);c=1<<f,f=t[f],f>o&&(o=f),s&=~c}if(s=o,s=$e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*xf(s/1960))-s,10<s){e.timeoutHandle=Xo(zn.bind(null,e,yt,rn),s);break}zn(e,yt,rn);break;case 5:zn(e,yt,rn);break;default:throw Error(l(329))}}}return xt(e,$e()),e.callbackNode===n?$c.bind(null,e):null}function Wl(e,t){var n=Vr;return e.current.memoizedState.isDehydrated&&(Fn(e,t).flags|=256),e=Js(e,t),e!==2&&(t=yt,yt=n,t!==null&&Vl(t)),e}function Vl(e){yt===null?yt=e:yt.push.apply(yt,e)}function wf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var o=n[s],c=o.getSnapshot;o=o.value;try{if(!At(c(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kn(e,t){for(t&=~ql,t&=~$s,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),s=1<<n;e[n]=-1,t&=~s}}function Gc(e){if((Le&6)!==0)throw Error(l(327));ar();var t=ls(e,0);if((t&1)===0)return xt(e,$e()),null;var n=Js(e,t);if(e.tag!==0&&n===2){var s=jo(e);s!==0&&(t=s,n=Wl(e,s))}if(n===1)throw n=Wr,Fn(e,0),kn(e,t),xt(e,$e()),n;if(n===6)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zn(e,yt,rn),xt(e,$e()),null}function $l(e,t){var n=Le;Le|=1;try{return e(t)}finally{Le=n,Le===0&&(ir=$e()+500,Es&&mn())}}function In(e){wn!==null&&wn.tag===0&&(Le&6)===0&&ar();var t=Le;Le|=1;var n=_t.transition,s=Re;try{if(_t.transition=null,Re=1,e)return e()}finally{Re=s,_t.transition=n,Le=t,(Le&6)===0&&mn()}}function Gl(){Et=lr.current,Ae(lr)}function Fn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Kd(n)),Qe!==null)for(n=Qe.return;n!==null;){var s=n;switch(nl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&js();break;case 3:rr(),Ae(mt),Ae(it),ml();break;case 5:pl(s);break;case 4:rr();break;case 13:Ae(Be);break;case 19:Ae(Be);break;case 10:al(s.type._context);break;case 22:case 23:Gl()}n=n.return}if(tt=e,Qe=e=jn(e.current,null),ot=Et=t,Je=0,Wr=null,ql=$s=Rn=0,yt=Vr=null,_n!==null){for(t=0;t<_n.length;t++)if(n=_n[t],s=n.interleaved,s!==null){n.interleaved=null;var o=s.next,c=n.pending;if(c!==null){var f=c.next;c.next=o,s.next=f}n.pending=s}_n=null}return e}function Qc(e,t){do{var n=Qe;try{if(il(),Is.current=Ds,Fs){for(var s=Ue.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Fs=!1}if(On=0,et=Ye=Ue=null,Ar=!1,Dr=0,Dl.current=null,n===null||n.return===null){Je=1,Wr=t,Qe=null;break}e:{var c=e,f=n.return,S=n,j=t;if(t=ot,S.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var O=j,U=S,G=U.tag;if((U.mode&1)===0&&(G===0||G===11||G===15)){var q=U.alternate;q?(U.updateQueue=q.updateQueue,U.memoizedState=q.memoizedState,U.lanes=q.lanes):(U.updateQueue=null,U.memoizedState=null)}var re=xc(f);if(re!==null){re.flags&=-257,wc(re,f,S,c,t),re.mode&1&&yc(c,O,t),t=re,j=O;var oe=t.updateQueue;if(oe===null){var le=new Set;le.add(j),t.updateQueue=le}else oe.add(j);break e}else{if((t&1)===0){yc(c,O,t),Ql();break e}j=Error(l(426))}}else if(De&&S.mode&1){var Ge=xc(f);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),wc(Ge,f,S,c,t),ol(sr(j,S));break e}}c=j=sr(j,S),Je!==4&&(Je=2),Vr===null?Vr=[c]:Vr.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var N=vc(c,j,t);Ha(c,N);break e;case 1:S=j;var E=c.type,_=c.stateNode;if((c.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(xn===null||!xn.has(_)))){c.flags|=65536,t&=-t,c.lanes|=t;var J=gc(c,S,t);Ha(c,J);break e}}c=c.return}while(c!==null)}Yc(n)}catch(ae){t=ae,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function Kc(){var e=Vs.current;return Vs.current=Ds,e===null?Ds:e}function Ql(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||(Rn&268435455)===0&&($s&268435455)===0||kn(tt,ot)}function Js(e,t){var n=Le;Le|=2;var s=Kc();(tt!==e||ot!==t)&&(rn=null,Fn(e,t));do try{Sf();break}catch(o){Qc(e,o)}while(!0);if(il(),Le=n,Vs.current=s,Qe!==null)throw Error(l(261));return tt=null,ot=0,Je}function Sf(){for(;Qe!==null;)Xc(Qe)}function kf(){for(;Qe!==null&&!$u();)Xc(Qe)}function Xc(e){var t=eu(e.alternate,e,Et);e.memoizedProps=e.pendingProps,t===null?Yc(e):Qe=t,Dl.current=null}function Yc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=hf(n,t,Et),n!==null){Qe=n;return}}else{if(n=mf(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Qe=null;return}}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);Je===0&&(Je=5)}function zn(e,t,n){var s=Re,o=_t.transition;try{_t.transition=null,Re=1,jf(e,t,n,s)}finally{_t.transition=o,Re=s}return null}function jf(e,t,n,s){do ar();while(wn!==null);if((Le&6)!==0)throw Error(l(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(nd(e,c),e===tt&&(Qe=tt=null,ot=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Qs||(Qs=!0,tu(ns,function(){return ar(),null})),c=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||c){c=_t.transition,_t.transition=null;var f=Re;Re=1;var S=Le;Le|=4,Dl.current=null,gf(e,n),Bc(n,e),Ud(Qo),cs=!!Go,Qo=Go=null,e.current=n,yf(n),Gu(),Le=S,Re=f,_t.transition=c}else e.current=n;if(Qs&&(Qs=!1,wn=e,Ks=o),c=e.pendingLanes,c===0&&(xn=null),Xu(n.stateNode),xt(e,$e()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],s(o.value,{componentStack:o.stack,digest:o.digest});if(Gs)throw Gs=!1,e=Ul,Ul=null,e;return(Ks&1)!==0&&e.tag!==0&&ar(),c=e.pendingLanes,(c&1)!==0?e===Hl?$r++:($r=0,Hl=e):$r=0,mn(),null}function ar(){if(wn!==null){var e=Di(Ks),t=_t.transition,n=Re;try{if(_t.transition=null,Re=16>e?16:e,wn===null)var s=!1;else{if(e=wn,wn=null,Ks=0,(Le&6)!==0)throw Error(l(331));var o=Le;for(Le|=4,se=e.current;se!==null;){var c=se,f=c.child;if((se.flags&16)!==0){var S=c.deletions;if(S!==null){for(var j=0;j<S.length;j++){var O=S[j];for(se=O;se!==null;){var U=se;switch(U.tag){case 0:case 11:case 15:Hr(8,U,c)}var G=U.child;if(G!==null)G.return=U,se=G;else for(;se!==null;){U=se;var q=U.sibling,re=U.return;if(Fc(U),U===O){se=null;break}if(q!==null){q.return=re,se=q;break}se=re}}}var oe=c.alternate;if(oe!==null){var le=oe.child;if(le!==null){oe.child=null;do{var Ge=le.sibling;le.sibling=null,le=Ge}while(le!==null)}}se=c}}if((c.subtreeFlags&2064)!==0&&f!==null)f.return=c,se=f;else e:for(;se!==null;){if(c=se,(c.flags&2048)!==0)switch(c.tag){case 0:case 11:case 15:Hr(9,c,c.return)}var N=c.sibling;if(N!==null){N.return=c.return,se=N;break e}se=c.return}}var E=e.current;for(se=E;se!==null;){f=se;var _=f.child;if((f.subtreeFlags&2064)!==0&&_!==null)_.return=f,se=_;else e:for(f=E;se!==null;){if(S=se,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Ws(9,S)}}catch(ae){We(S,S.return,ae)}if(S===f){se=null;break e}var J=S.sibling;if(J!==null){J.return=S.return,se=J;break e}se=S.return}}if(Le=o,mn(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(rs,e)}catch{}s=!0}return s}finally{Re=n,_t.transition=t}}return!1}function Jc(e,t,n){t=sr(n,t),t=vc(e,t,1),e=gn(e,t,1),t=pt(),e!==null&&(vr(e,1,t),xt(e,t))}function We(e,t,n){if(e.tag===3)Jc(e,e,n);else for(;t!==null;){if(t.tag===3){Jc(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(xn===null||!xn.has(s))){e=sr(n,e),e=gc(t,e,1),t=gn(t,e,1),e=pt(),t!==null&&(vr(t,1,e),xt(t,e));break}}t=t.return}}function Mf(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(ot&n)===n&&(Je===4||Je===3&&(ot&130023424)===ot&&500>$e()-Bl?Fn(e,0):ql|=n),xt(e,t)}function Zc(e,t){t===0&&((e.mode&1)===0?t=1:(t=os,os<<=1,(os&130023424)===0&&(os=4194304)));var n=pt();e=en(e,t),e!==null&&(vr(e,t,n),xt(e,n))}function Ef(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zc(e,n)}function Cf(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(l(314))}s!==null&&s.delete(t),Zc(e,n)}var eu;eu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)gt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return gt=!1,pf(e,t,n);gt=(e.flags&131072)!==0}else gt=!1,De&&(t.flags&1048576)!==0&&Oa(t,bs,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Us(e,t),e=t.pendingProps;var o=Xn(t,it.current);nr(t,n),o=yl(null,t,s,e,o,n);var c=xl();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(s)?(c=!0,Ms(t)):c=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,dl(t),o.updater=qs,t.stateNode=o,o._reactInternals=t,El(t,s,e,n),t=Pl(null,t,s,!0,c,n)):(t.tag=0,De&&c&&tl(t),ft(null,t,o,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=Nf(s),e=qt(s,e),o){case 0:t=Nl(null,t,s,e,n);break e;case 1:t=Cc(null,t,s,e,n);break e;case 11:t=Sc(null,t,s,e,n);break e;case 14:t=kc(null,t,s,qt(s.type,e),n);break e}throw Error(l(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:qt(s,o),Nl(e,t,s,o,n);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:qt(s,o),Cc(e,t,s,o,n);case 3:e:{if(bc(t),e===null)throw Error(l(387));s=t.pendingProps,c=t.memoizedState,o=c.element,Ua(e,t),Os(t,s,null,n);var f=t.memoizedState;if(s=f.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){o=sr(Error(l(423)),t),t=Nc(e,t,s,n,o);break e}else if(s!==o){o=sr(Error(l(424)),t),t=Nc(e,t,s,n,o);break e}else for(Mt=fn(t.stateNode.containerInfo.firstChild),jt=t,De=!0,Dt=null,n=qa(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zn(),s===o){t=nn(e,t,n);break e}ft(e,t,s,n)}t=t.child}return t;case 5:return Va(t),e===null&&sl(t),s=t.type,o=t.pendingProps,c=e!==null?e.memoizedProps:null,f=o.children,Ko(s,o)?f=null:c!==null&&Ko(s,c)&&(t.flags|=32),Ec(e,t),ft(e,t,f,n),t.child;case 6:return e===null&&sl(t),null;case 13:return Pc(e,t,n);case 4:return fl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=er(t,null,s,n):ft(e,t,s,n),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:qt(s,o),Sc(e,t,s,o,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,c=t.memoizedProps,f=o.value,Fe(Ts,s._currentValue),s._currentValue=f,c!==null)if(At(c.value,f)){if(c.children===o.children&&!mt.current){t=nn(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var S=c.dependencies;if(S!==null){f=c.child;for(var j=S.firstContext;j!==null;){if(j.context===s){if(c.tag===1){j=tn(-1,n&-n),j.tag=2;var O=c.updateQueue;if(O!==null){O=O.shared;var U=O.pending;U===null?j.next=j:(j.next=U.next,U.next=j),O.pending=j}}c.lanes|=n,j=c.alternate,j!==null&&(j.lanes|=n),cl(c.return,n,t),S.lanes|=n;break}j=j.next}}else if(c.tag===10)f=c.type===t.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(l(341));f.lanes|=n,S=f.alternate,S!==null&&(S.lanes|=n),cl(f,n,t),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===t){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}ft(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,nr(t,n),o=Pt(o),s=s(o),t.flags|=1,ft(e,t,s,n),t.child;case 14:return s=t.type,o=qt(s,t.pendingProps),o=qt(s.type,o),kc(e,t,s,o,n);case 15:return jc(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:qt(s,o),Us(e,t),t.tag=1,vt(s)?(e=!0,Ms(t)):e=!1,nr(t,n),hc(t,s,o),El(t,s,o,n),Pl(null,t,s,!0,e,n);case 19:return _c(e,t,n);case 22:return Mc(e,t,n)}throw Error(l(156,t.tag))};function tu(e,t){return Ri(e,t)}function bf(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,n,s){return new bf(e,t,n,s)}function Kl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nf(e){if(typeof e=="function")return Kl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===H)return 11;if(e===$)return 14}return 2}function jn(e,t){var n=e.alternate;return n===null?(n=Lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zs(e,t,n,s,o,c){var f=2;if(s=e,typeof e=="function")Kl(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case F:return An(n.children,o,c,t);case A:f=8,o|=8;break;case X:return e=Lt(12,n,t,o|2),e.elementType=X,e.lanes=c,e;case L:return e=Lt(13,n,t,o),e.elementType=L,e.lanes=c,e;case B:return e=Lt(19,n,t,o),e.elementType=B,e.lanes=c,e;case pe:return eo(n,o,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xe:f=10;break e;case be:f=9;break e;case H:f=11;break e;case $:f=14;break e;case ie:f=16,s=null;break e}throw Error(l(130,e==null?e:typeof e,""))}return t=Lt(f,n,t,o),t.elementType=e,t.type=s,t.lanes=c,t}function An(e,t,n,s){return e=Lt(7,e,s,t),e.lanes=n,e}function eo(e,t,n,s){return e=Lt(22,e,s,t),e.elementType=pe,e.lanes=n,e.stateNode={isHidden:!1},e}function Xl(e,t,n){return e=Lt(6,e,null,t),e.lanes=n,e}function Yl(e,t,n){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pf(e,t,n,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mo(0),this.expirationTimes=Mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Jl(e,t,n,s,o,c,f,S,j){return e=new Pf(e,t,n,S,j),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Lt(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dl(c),e}function Tf(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function nu(e){if(!e)return hn;e=e._reactInternals;e:{if(Cn(e)!==e||e.tag!==1)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(l(171))}if(e.tag===1){var n=e.type;if(vt(n))return Ta(e,n,t)}return t}function ru(e,t,n,s,o,c,f,S,j){return e=Jl(n,s,!0,e,o,c,f,S,j),e.context=nu(null),n=e.current,s=pt(),o=Sn(n),c=tn(s,o),c.callback=t??null,gn(n,c,o),e.current.lanes=o,vr(e,o,s),xt(e,s),e}function to(e,t,n,s){var o=t.current,c=pt(),f=Sn(o);return n=nu(n),t.context===null?t.context=n:t.pendingContext=n,t=tn(c,f),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=gn(o,t,f),e!==null&&(Ht(e,o,f,c),Ls(e,o,f)),f}function no(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function su(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zl(e,t){su(e,t),(e=e.alternate)&&su(e,t)}function _f(){return null}var ou=typeof reportError=="function"?reportError:function(e){console.error(e)};function ei(e){this._internalRoot=e}ro.prototype.render=ei.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));to(e,t,null,null)},ro.prototype.unmount=ei.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;In(function(){to(null,e,null,null)}),t[Xt]=null}};function ro(e){this._internalRoot=e}ro.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ui();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cn.length&&t!==0&&t<cn[n].priority;n++);cn.splice(n,0,e),n===0&&Vi(e)}};function ti(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function so(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lu(){}function Lf(e,t,n,s,o){if(o){if(typeof s=="function"){var c=s;s=function(){var O=no(f);c.call(O)}}var f=ru(t,s,e,0,null,!1,!1,"",lu);return e._reactRootContainer=f,e[Xt]=f.current,Tr(e.nodeType===8?e.parentNode:e),In(),f}for(;o=e.lastChild;)e.removeChild(o);if(typeof s=="function"){var S=s;s=function(){var O=no(j);S.call(O)}}var j=Jl(e,0,!1,null,null,!1,!1,"",lu);return e._reactRootContainer=j,e[Xt]=j.current,Tr(e.nodeType===8?e.parentNode:e),In(function(){to(t,j,n,s)}),j}function oo(e,t,n,s,o){var c=n._reactRootContainer;if(c){var f=c;if(typeof o=="function"){var S=o;o=function(){var j=no(f);S.call(j)}}to(t,f,e,o)}else f=Lf(n,t,e,o,s);return no(f)}qi=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mr(t.pendingLanes);n!==0&&(Eo(t,n|1),xt(t,$e()),(Le&6)===0&&(ir=$e()+500,mn()))}break;case 13:In(function(){var s=en(e,1);if(s!==null){var o=pt();Ht(s,e,1,o)}}),Zl(e,1)}},Co=function(e){if(e.tag===13){var t=en(e,134217728);if(t!==null){var n=pt();Ht(t,e,134217728,n)}Zl(e,134217728)}},Bi=function(e){if(e.tag===13){var t=Sn(e),n=en(e,t);if(n!==null){var s=pt();Ht(n,e,t,s)}Zl(e,t)}},Ui=function(){return Re},Hi=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}},yo=function(e,t,n){switch(t){case"input":if(he(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var o=ks(s);if(!o)throw Error(l(90));Ve(s),he(s,o)}}}break;case"textarea":Ee(e,n);break;case"select":t=n.value,t!=null&&_e(e,!!n.multiple,t,!1)}},bi=$l,Ni=In;var Of={usingClientEntryPoint:!1,Events:[Or,Qn,ks,Ei,Ci,$l]},Gr={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rf={bundleType:Gr.bundleType,version:Gr.version,rendererPackageName:Gr.rendererPackageName,rendererConfig:Gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Li(e),e===null?null:e.stateNode},findFiberByHostInstance:Gr.findFiberByHostInstance||_f,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lo.isDisabled&&lo.supportsFiber)try{rs=lo.inject(Rf),Wt=lo}catch{}}return wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Of,wt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ti(t))throw Error(l(200));return Tf(e,t,null,n)},wt.createRoot=function(e,t){if(!ti(e))throw Error(l(299));var n=!1,s="",o=ou;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Jl(e,1,!1,null,null,n,!1,s,o),e[Xt]=t.current,Tr(e.nodeType===8?e.parentNode:e),new ei(t)},wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=Li(t),e=e===null?null:e.stateNode,e},wt.flushSync=function(e){return In(e)},wt.hydrate=function(e,t,n){if(!so(t))throw Error(l(200));return oo(null,e,t,!0,n)},wt.hydrateRoot=function(e,t,n){if(!ti(e))throw Error(l(405));var s=n!=null&&n.hydratedSources||null,o=!1,c="",f=ou;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=ru(t,null,e,1,n??null,o,!1,c,f),e[Xt]=t.current,Tr(e),s)for(e=0;e<s.length;e++)n=s[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new ro(t)},wt.render=function(e,t,n){if(!so(t))throw Error(l(200));return oo(null,e,t,!1,n)},wt.unmountComponentAtNode=function(e){if(!so(e))throw Error(l(40));return e._reactRootContainer?(In(function(){oo(null,null,e,!1,function(){e._reactRootContainer=null,e[Xt]=null})}),!0):!1},wt.unstable_batchedUpdates=$l,wt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!so(n))throw Error(l(200));if(e==null||e._reactInternals===void 0)throw Error(l(38));return oo(e,t,n,!1,s)},wt.version="18.3.1-next-f1338f8080-20240426",wt}var hu;function Uf(){if(hu)return si.exports;hu=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),si.exports=Bf(),si.exports}var mu;function Hf(){if(mu)return io;mu=1;var r=Uf();return io.createRoot=r.createRoot,io.hydrateRoot=r.hydrateRoot,io}var Wf=Hf(),V=Zr();const He=Iu(V),Yr=Math.PI*2,vu=(r,i,l)=>r<i?i:r>l?l:r,Vf=r=>{let i=1;for(;i<r;)i<<=1;return i},$f=r=>{const i=new Uint32Array(r);let l=0;for(;1<<l<r;)l++;for(let u=0;u<r;u++){let d=0,p=u;for(let v=0;v<l;v++)d=d<<1|p&1,p>>=1;i[u]=d}return i},Gf=r=>{const i=new Float32Array(r),l=Yr/(r-1);for(let u=0;u<r;u++)i[u]=.5*(1-Math.cos(l*u));return i};class Qf{size;permutation;twiddleReal;twiddleImag;constructor(i){this.size=i,this.permutation=$f(i),this.twiddleReal=[],this.twiddleImag=[];for(let l=2;l<=i;l<<=1){const u=l>>1,d=Yr/l,p=new Float32Array(u),v=new Float32Array(u);for(let w=0;w<u;w++)p[w]=Math.cos(d*w),v[w]=Math.sin(d*w);this.twiddleReal.push(p),this.twiddleImag.push(v)}}fft(i,l,u){const{size:d,permutation:p,twiddleReal:v,twiddleImag:w}=this;for(let g=0;g<d;g++){const m=p[g];if(m>g){const x=i[g],y=l[g];i[g]=i[m],l[g]=l[m],i[m]=x,l[m]=y}}let h=0;for(let g=2;g<=d;g<<=1){const m=g>>1,x=v[h],y=w[h];for(let C=0;C<d;C+=g)for(let k=0;k<m;k++){const P=C+k,T=P+m,R=x[k],z=u?-y[k]:y[k],Z=i[T],ee=l[T],Q=R*Z-z*ee,M=R*ee+z*Z,F=i[P],A=l[P];i[T]=F-Q,l[T]=A-M,i[P]=F+Q,l[P]=A+M}h++}if(u){const g=1/d;for(let m=0;m<d;m++)i[m]*=g,l[m]*=g}}}const Kf=2048,Xf=512,Yf=(r,i,l)=>r<=0?0:r<=i?1:Math.ceil((r-i)/l)+1,Jf=r=>((r>Math.PI||r<-Math.PI)&&(r-=Yr*Math.round(r/Yr)),r),Zf=r=>{const{channels:i,pitchRatio:l}=r,u=Vf(vu(r.windowSize??Kf,256,8192)),d=vu(r.hopSize??Xf,1,u>>1);if(!i.length)return[];const p=Number.isFinite(l)&&l>0?l:1;if(Math.abs(p-1)<1e-6)return i.map(F=>new Float32Array(F));const v=i[0].length;if(v===0)return i.map(()=>new Float32Array(0));const w=Gf(u),h=new Qf(u),g=(u>>1)+1,m=Yf(v,u,d),x=v+u,y=i.map(()=>new Float32Array(x)),C=new Float32Array(x),k=new Float32Array(u),P=new Float32Array(u),T=new Float32Array(u),R=new Float32Array(u),z=new Float32Array(g),Z=new Float32Array(g),ee=i.map(()=>new Float32Array(g)),Q=i.map(()=>new Float32Array(g));for(let F=0;F<m;F++){const A=F*d;for(let X=0;X<i.length;X++){const xe=i[X];k.fill(0),P.fill(0);for(let L=0;L<u;L++){const B=A+L,$=B<v?xe[B]:0;k[L]=$*w[L]}h.fft(k,P,!1);const be=ee[X],H=Q[X];for(let L=0;L<g;L++){const B=k[L],$=P[L],ie=Math.hypot(B,$),pe=Math.atan2($,B),K=Yr*d*L/u,te=Jf(pe-be[L]-K),Y=K+te;z[L]=ie,Z[L]=Y,be[L]=pe}T.fill(0),R.fill(0);for(let L=0;L<g;L++){const B=L/p;let $=0,ie=0;if(B<=0)$=z[0],ie=Z[0]*p;else if(B>=g-1){const Y=g-1;$=z[Y],ie=Z[Y]*p}else{const Y=Math.floor(B),b=Y+1,D=B-Y,ye=z[Y],ve=z[b],Se=Z[Y],ue=Z[b];$=ye+D*(ve-ye),ie=(Se+D*(ue-Se))*p}H[L]+=ie;const pe=H[L],K=$*Math.cos(pe),te=$*Math.sin(pe);if(T[L]=K,R[L]=te,L>0&&L<g-1){const Y=u-L;T[Y]=K,R[Y]=-te}}R[0]=0,R[g-1]=0,h.fft(T,R,!0);for(let L=0;L<u;L++){const B=A+L;if(B>=x)break;const $=w[L];y[X][B]+=T[L]*$,X===0&&(C[B]+=$*$)}}}return y.map(F=>{const A=F.subarray(0,v);for(let X=0;X<A.length;X++){const xe=C[X];xe>1e-6&&(A[X]/=xe)}return Float32Array.from(A)})},Rt={model:"va",harmonics:.6,timbre:.5,morph:.5,level:1},St={id:null,name:"Empty",dataUrl:null,rootMidi:60,loop:!0,recordedAt:void 0,durationSec:0,trimStartSec:0,trimEndSec:0},gu=r=>({...r,mode:r.mode??"analog",macro:{...Rt,...r.macro??{}},sampler:{...St,...r.sampler??{}}}),I={osc1:{wave:"sawtooth",detune:0,detuneFine:0,octave:0,mode:"analog",macro:{...Rt},sampler:{...St}},osc2:{wave:"square",detune:0,detuneFine:0,octave:0,mode:"analog",macro:{...Rt},sampler:{...St}},mix:0,fm:{enabled:!1,ratio:2,amount:0},sub:{enabled:!1,octave:1,level:0,wave:"square"},ring:{enabled:!1,amount:1},filter:{type:"lowpass",cutoff:1200,q:.8},envelope:{attack:.01,decay:.2,sustain:.7,release:.3},master:{gain:.2},sampler:{...St},engineMode:"classic",macro:{...Rt},effects:{delay:{enabled:!1,time:.25,feedback:.3,mix:.2},reverb:{enabled:!1,size:.5,decay:.5,mix:.25}},lfo1:{enabled:!1,wave:"sine",rateHz:5,amount:.2,dest:"pitch"},lfo2:{enabled:!1,wave:"triangle",rateHz:.5,amount:.4,dest:"filter"},arp:{enabled:!1,rateHz:8,bpmSync:!1,bpm:120,division:"1/8",gate:.6,chordSource:"preset",mode:"up",octaves:1,chord:"none",latch:!1,swingPct:0,repeats:1,patternLen:0},sequencer:{enabled:!1,playing:!1,bpm:120,division:"1/16",swingPct:0,gate:.6,rootMidi:60,length:16,steps:Array.from({length:16},()=>({on:!1,offset:0,velocity:1}))},expression:{x:"osc1.detune",y:"filter.cutoff"}},lt=(r,i)=>Number.isFinite(r)?r:i,Ot=r=>{const i=r;if(!i._managedLifecycleAttached){i._managedLifecycleAttached=!0;const l=()=>{i._started=!1};if(typeof i.addEventListener=="function")i.addEventListener("ended",l);else{const u=i.onended;i.onended=d=>{l(),typeof u=="function"&&u.call(i,d)}}}return i._started==null&&(i._started=!!i._autoStarted),i},yu=r=>{const i=Ot(r);i._started=!0},ep=r=>{const i=Ot(r);i._autoStarted=!0,i._started=!0},ao=(r,i)=>r.patch[i]??I[i],co=r=>r.patch.macro??I.macro,uo={"filter.cutoff":{getBase:r=>lt(r.patch.filter.cutoff,I.filter.cutoff),range:(r,i)=>{const l=Ce(i*.25,80,12e3),u=Ce(i*4,l+20,14e3);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({filter:{cutoff:i}},{fromExpression:!0})},"filter.q":{getBase:r=>lt(r.patch.filter.q,I.filter.q),range:(r,i)=>{const l=Ce(i*.5,.1,20),u=Ce(i*2.5,l+.1,20);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({filter:{q:i}},{fromExpression:!0})},"master.gain":{getBase:r=>lt(r.patch.master.gain,I.master.gain),range:(r,i)=>{const l=Ce(i*.4,.01,1),u=Ce(i*1.6,l+.01,1);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({master:{gain:i}},{fromExpression:!0})},mix:{getBase:r=>lt(r.patch.mix,I.mix),range:()=>({min:0,max:1}),apply:(r,i)=>r.applyPatch({mix:Ce(i,0,1)},{fromExpression:!0})},"osc1.detune":{getBase:r=>lt(r.patch.osc1.detune,I.osc1.detune),range:(r,i)=>{const l=Ce(i-120,-2400,2400),u=Ce(i+120,l+1,2400);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({osc1:{detune:i}},{fromExpression:!0})},"osc2.detune":{getBase:r=>lt(r.patch.osc2.detune,I.osc2.detune),range:(r,i)=>{const l=Ce(i-120,-2400,2400),u=Ce(i+120,l+1,2400);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({osc2:{detune:i}},{fromExpression:!0})},"fm.amount":{getBase:r=>lt(r.patch.fm.amount,I.fm.amount),range:(r,i)=>{const l=Ce(i*.5,0,4e3),u=Ce(Math.max(i+400,400),l+10,4e3);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({fm:{amount:Ce(i,0,4e3)}},{fromExpression:!0})},"envelope.attack":{getBase:r=>lt(r.patch.envelope.attack,I.envelope.attack),range:(r,i)=>{const l=Ce(i*.2,.001,4),u=Ce(i*3,l+.01,4);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({envelope:{attack:i}},{fromExpression:!0})},"envelope.release":{getBase:r=>lt(r.patch.envelope.release,I.envelope.release),range:(r,i)=>{const l=Ce(i*.5,.03,6),u=Ce(i*3,l+.05,6);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({envelope:{release:i}},{fromExpression:!0})},"macro.harmonics":{getBase:r=>lt(co(r).harmonics,I.macro.harmonics),range:()=>({min:0,max:1}),apply:(r,i)=>r.applyPatch({macro:{harmonics:Ce(i,0,1)}},{fromExpression:!0})},"macro.timbre":{getBase:r=>lt(co(r).timbre,I.macro.timbre),range:()=>({min:0,max:1}),apply:(r,i)=>r.applyPatch({macro:{timbre:Ce(i,0,1)}},{fromExpression:!0})},"macro.morph":{getBase:r=>lt(co(r).morph,I.macro.morph),range:()=>({min:0,max:1}),apply:(r,i)=>r.applyPatch({macro:{morph:Ce(i,0,1)}},{fromExpression:!0})},"macro.level":{getBase:r=>lt(co(r).level,I.macro.level),range:()=>({min:0,max:1}),apply:(r,i)=>r.applyPatch({macro:{level:Ce(i,0,1)}},{fromExpression:!0})},"lfo1.rateHz":{getBase:r=>lt(ao(r,"lfo1").rateHz,I.lfo1.rateHz),range:(r,i)=>{const l=Ce(i*.25,.05,30),u=Ce(i*4,l+.05,40);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({lfo1:{rateHz:i}},{fromExpression:!0})},"lfo1.amount":{getBase:r=>lt(ao(r,"lfo1").amount,I.lfo1.amount),range:()=>({min:0,max:1}),apply:(r,i)=>r.applyPatch({lfo1:{amount:Ce(i,0,1)}},{fromExpression:!0})},"lfo2.rateHz":{getBase:r=>lt(ao(r,"lfo2").rateHz,I.lfo2.rateHz),range:(r,i)=>{const l=Ce(i*.25,.02,20),u=Ce(i*4,l+.05,30);return{min:l,max:u}},apply:(r,i)=>r.applyPatch({lfo2:{rateHz:i}},{fromExpression:!0})},"lfo2.amount":{getBase:r=>lt(ao(r,"lfo2").amount,I.lfo2.amount),range:()=>({min:0,max:1}),apply:(r,i)=>r.applyPatch({lfo2:{amount:Ce(i,0,1)}},{fromExpression:!0})}},ii=["x","y"],Ce=(r,i,l)=>Math.min(l,Math.max(i,r));function xu(r){const i=r.sampleRate*1,l=r.createBuffer(1,i,r.sampleRate),u=l.getChannelData(0);for(let d=0;d<i;d++)u[d]=Math.random()*2-1;return l}class vi{ctx;master;filter;analyser;noiseBuffer;activeVoices=new Map;fxInput;fxOutput;currentFxTap=null;lfos;expression2D={active:!1,x:.5,y:.5};expressionAxisTargets={x:I.expression.x,y:I.expression.y};expressionSnapshot={x:null,y:null};expressionApplying=!1;samplerBuffer=null;samplerMeta={...I.sampler};samplerLoadToken=0;samplerPitchCache=new Map;patch;arpHeld=new Set;arpIndex=0;arpTimer=null;arpLastNote=null;arpBypass=!1;arpPhase=0;arpRepeatCounter=0;arpCurrentStepMs=0;seqTimer=null;seqPhase=0;seqCurrentStepMs=0;seqStepIndex=0;seqLastNote=null;constructor(i){this.ctx=i??new(window.AudioContext||window.webkitAudioContext),this.master=this.ctx.createGain(),this.filter=this.ctx.createBiquadFilter(),this.analyser=this.ctx.createAnalyser(),this.fxInput=this.ctx.createGain(),this.fxOutput=this.ctx.createGain(),this.filter.connect(this.fxInput),this.fxInput.connect(this.fxOutput),this.fxOutput.connect(this.master),this.master.connect(this.ctx.destination);try{this.filter.connect(this.analyser)}catch{}this.analyser.smoothingTimeConstant=0,this.lfos=[];for(let l=0;l<2;l++){const u=this.ctx.createOscillator();u.type="sine",u.frequency.value=5;const d=this.ctx.createGain();d.gain.value=0,u.connect(d),u.start(),this.lfos.push({osc:u,noise:null,noiseFilter:null,gain:d,dest:"none",wave:"sine"})}this.patch={...I},this.applyPatch(),this.samplerMeta=this.normalizeSamplerMeta(this.patch.sampler,null)}get audioContext(){return this.ctx}getAnalyser(){return this.analyser}getWaveform(){const i=this.analyser.fftSize,l=new Uint8Array(i);return this.analyser.getByteTimeDomainData(l),l}async resume(){this.ctx.state!=="running"&&await this.ctx.resume()}normalizeSamplerMeta(i,l){const u=l?.duration??(Number.isFinite(i.durationSec)?i.durationSec:0);if(!(u>0))return{...i,durationSec:0,trimStartSec:0,trimEndSec:0};const d=.005,p=Math.max(0,u-d),v=Number(i.trimStartSec),w=Ce(Number.isFinite(v)?v:0,0,p),h=Number(i.trimEndSec);let g=Number.isFinite(h)?h:u;return g=Ce(g,w+d,u),g-w<d&&(g=Math.min(u,w+d)),{...i,durationSec:u,trimStartSec:w,trimEndSec:g}}async updateSamplerBuffer(i){const l=this.samplerMeta.id===i.id&&this.samplerMeta.dataUrl===i.dataUrl;if(this.samplerMeta=this.normalizeSamplerMeta({...i},l?this.samplerBuffer:null),!i.dataUrl){this.samplerBuffer=null,this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,null),this.samplerPitchCache.clear();return}if(l&&this.samplerBuffer)return;const u=++this.samplerLoadToken;try{const p=await(await fetch(i.dataUrl)).arrayBuffer(),v=await this.ctx.decodeAudioData(p.slice(0));u===this.samplerLoadToken&&(this.samplerBuffer=v,this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,v),this.samplerPitchCache.clear())}catch(d){u===this.samplerLoadToken&&(this.samplerBuffer=null,this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,null),this.samplerPitchCache.clear()),console.warn("Failed to decode sampler buffer",d)}}getSamplerBaseFrequency(){const i=Number.isFinite(this.samplerMeta.rootMidi)?this.samplerMeta.rootMidi:60;return 440*Math.pow(2,(i-69)/12)}getDetuneCents(i){if(i==="osc1"){const l=this.patch.osc1.detune||0,u=this.patch.osc1.detuneFine??0;return l+u}return this.patch.osc2.detune||0}mapNoiseLfoCutoff(i){const l=Ce(i,.01,20);return Ce(l*12,.5,600)}updateLfoSource(i,l){const u=this.lfos[i];if(!u)return;const d=this.ctx.currentTime,p=l.wave;if(p==="noise"){if(this.noiseBuffer||(this.noiseBuffer=xu(this.ctx)),u.osc){try{u.osc.stop(d)}catch{}try{u.osc.disconnect()}catch{}u.osc=null}if(!u.noise){const v=this.ctx.createBufferSource();v.buffer=this.noiseBuffer,v.loop=!0;const w=this.ctx.createBiquadFilter();w.type="lowpass",w.Q.value=1e-4,v.connect(w),w.connect(u.gain),v.start(),u.noise=v,u.noiseFilter=w}if(u.noiseFilter){const v=this.mapNoiseLfoCutoff(l.rateHz);u.noiseFilter.frequency.setTargetAtTime(v,d,.05)}}else{if(u.osc)u.osc.type=p,u.osc.frequency.setValueAtTime(Math.max(.01,l.rateHz),d);else{const v=this.ctx.createOscillator();v.type=p,v.frequency.value=Math.max(.01,l.rateHz),v.connect(u.gain),v.start(),u.osc=v}if(u.noise){try{u.noise.stop(d)}catch{}try{u.noise.disconnect()}catch{}u.noise=null}if(u.noiseFilter){try{u.noiseFilter.disconnect()}catch{}u.noiseFilter=null}}u.wave=p}getPitchedSamplerBuffer(i){if(!this.samplerBuffer)return null;const l=this.samplerBuffer.sampleRate,u=this.samplerMeta.trimStartSec??0,d=this.samplerMeta.trimEndSec??this.samplerBuffer.duration,p=Ce(u,0,this.samplerBuffer.duration),v=Ce(d,p+.005,this.samplerBuffer.duration),w=Math.max(0,Math.floor(p*l)),h=Math.max(w+1,Math.min(this.samplerBuffer.length,Math.floor(v*l)));if(h-w<=0)return null;const x=`${this.samplerMeta.id??"inline"}|${this.samplerMeta.dataUrl??"data"}|${w}|${h}`,y=Number.isFinite(i)&&i>0?i:1,C=y.toFixed(6),k=`${x}|${C}|${l}|${this.samplerBuffer.numberOfChannels}`,P=this.samplerPitchCache.get(k);if(P)return P;const T=this.samplerBuffer.numberOfChannels,R=[];for(let ee=0;ee<T;ee++){const M=this.samplerBuffer.getChannelData(ee).subarray(w,h);R.push(new Float32Array(M))}const z=Math.abs(y-1)<1e-4?R:Zf({channels:R,pitchRatio:y});if(!z.length||z[0].length===0)return null;const Z=this.ctx.createBuffer(z.length,z[0].length,l);for(let ee=0;ee<z.length;ee++)Z.copyToChannel(z[ee],ee,0);return this.samplerPitchCache.set(k,Z),Z}createSamplerSource(i,l,u={}){const{autoStart:d=!0,allowLoop:p=!0}=u;if(!this.samplerBuffer)return null;this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,this.samplerBuffer);const v=this.getSamplerBaseFrequency(),w=this.getDetuneCents(l),h=Math.pow(2,w/1200),g=v>0?i/v*h:h,m=this.getPitchedSamplerBuffer(g);if(!m)return null;const x=m.duration,y=p&&!!this.samplerMeta.loop&&x>.01,C=Ot(this.ctx.createBufferSource());if(C.buffer=m,C.loop=y,y&&(C.loopStart=0,C.loopEnd=x),d){if(y)C.start(0);else{const k=Math.max(.005,x);C.start(0,0,k)}ep(C)}return C}applyPatch(i={},l={}){const{fromExpression:u=!1}=l,d=this.patch,p=i.osc1??{},v=i.osc2??{},w=gu({...this.patch.osc1,...p}),h=gu({...this.patch.osc2,...v}),g={...this.patch,...i,osc1:w,osc2:h,fm:{...this.patch.fm,...i.fm??{}},sub:{...this.patch.sub,...i.sub??{}},ring:{...this.patch.ring,...i.ring??{}},filter:{...this.patch.filter,...i.filter??{}},envelope:{...this.patch.envelope,...i.envelope??{}},master:{...this.patch.master,...i.master??{}},mix:i.mix!=null?i.mix:this.patch.mix,engineMode:i.engineMode??this.patch.engineMode??"classic",sampler:{...this.patch.sampler??I.sampler,...i.sampler??{}},macro:{...this.patch.macro??Rt,...i.macro??{}},effects:{...this.patch.effects??I.effects,...i.effects??{}},lfo1:{...this.patch.lfo1??I.lfo1,...i.lfo1??{}},lfo2:{...this.patch.lfo2??I.lfo2,...i.lfo2??{}},arp:{...this.patch.arp??I.arp,...i.arp??{}},sequencer:{...this.patch.sequencer??I.sequencer,...i.sequencer??{}},expression:{...this.patch.expression??I.expression,...i.expression??{}}};if(this.patch=g,i.sampler!==void 0?this.updateSamplerBuffer(g.sampler):i.osc1?.sampler!==void 0?this.updateSamplerBuffer(g.osc1.sampler??I.sampler):i.osc2?.sampler!==void 0&&this.updateSamplerBuffer(g.osc2.sampler??I.sampler),this.configureExpressionRouting(g.expression),i.mix!==void 0&&g.mix!==d.mix){const m=Ce(1-g.mix,0,1),x=Ce(g.mix,0,1),y=this.ctx.currentTime;for(const C of this.activeVoices.values())C.osc1Mix&&C.osc1Mix.gain.setTargetAtTime(m,y,.01),C.osc2Mix&&C.osc2Mix.gain.setTargetAtTime(x,y,.01)}if(g.master.gain!==d.master.gain&&this.master.gain.setTargetAtTime(g.master.gain,this.ctx.currentTime,.01),g.filter.type!==d.filter.type&&(this.filter.type=g.filter.type),g.filter.q!==d.filter.q&&this.filter.Q.setTargetAtTime(g.filter.q,this.ctx.currentTime,.02),g.filter.cutoff!==d.filter.cutoff&&this.filter.frequency.setTargetAtTime(g.filter.cutoff,this.ctx.currentTime,.015),this.noiseBuffer||(this.noiseBuffer=xu(this.ctx)),i.effects!==void 0&&this.buildFxChain(),i.lfo1!==void 0||i.lfo2!==void 0||i.master?.gain!==void 0){const m=[this.patch.lfo1,this.patch.lfo2];for(let x=0;x<this.lfos.length;x++){const y=this.lfos[x],C=m[x];this.updateLfoSource(x,C);try{y.gain.disconnect()}catch{}if(y.dest="none",y.gain.gain.value=0,C.enabled)if(C.dest==="filter")y.dest="filter",y.gain.gain.value=Math.max(0,C.amount)*2e3,y.gain.connect(this.filter.frequency);else if(C.dest==="amp"){y.dest="amp";const k=this.patch.master.gain;y.gain.gain.value=Math.max(0,C.amount)*Math.max(0,k)*.8,y.gain.connect(this.master.gain)}else C.dest==="pitch"&&(y.dest="pitch",y.gain.gain.value=Math.max(0,C.amount)*50)}}if(i.arp!==void 0&&this.updateArpScheduler({forceRestart:!0}),i.sequencer!==void 0&&this.updateSeqScheduler(),i.osc1?.detune!==void 0||i.osc1?.detuneFine!==void 0){const m=this.ctx.currentTime,x=(g.osc1.detune||0)+(g.osc1.detuneFine??0);for(const y of this.activeVoices.values())if(y.osc1Detune)try{y.osc1Detune.setTargetAtTime(x,m,.01)}catch{}}if(i.osc2?.detune!==void 0){const m=this.ctx.currentTime;for(const x of this.activeVoices.values())if(x.osc2Detune)try{x.osc2Detune.setTargetAtTime(g.osc2.detune||0,m,.01)}catch{}}this.expression2D.active&&!u&&this.applyExpression2D()}async previewSampler(i){const l=this.patch[i].sampler??I.sampler;if(!l?.dataUrl||(await this.updateSamplerBuffer(l),!this.samplerBuffer))return;const u=Number.isFinite(l.rootMidi)?l.rootMidi:60,d=440*Math.pow(2,(u-69)/12),p=this.createSamplerSource(d,i,{autoStart:!1,allowLoop:!1});if(!p)return;const v=Ot(p),w=this.ctx.createGain();w.gain.value=.8,v.connect(w),w.connect(this.master);const h=this.ctx.currentTime,g=Math.max(.05,Math.min(v.buffer?.duration??.5,5));let m=!1;try{v.start(h),m=!0,yu(v),v.stop(h+g),v._started=!1}catch(y){if(!m){try{v.disconnect()}catch{}try{w.disconnect()}catch{}return}throw y}const x=()=>{try{v.disconnect()}catch{}try{w.disconnect()}catch{}};v.addEventListener("ended",x,{once:!0})}buildFxChain(){try{this.fxInput.disconnect()}catch{}if(this.currentFxTap){try{this.currentFxTap.disconnect(this.fxOutput)}catch{}this.currentFxTap=null}let i=this.fxInput;const l=this.patch.effects;l?.delay?.enabled&&(i=this.applyDelayEffect(i,l.delay)),l?.reverb?.enabled&&(i=this.applyReverbEffect(i,l.reverb)),i.connect(this.fxOutput),this.currentFxTap=i}clamp01(i){return Math.min(1,Math.max(0,i))}setExpression2D(i,l){const u=this.clamp01(i),d=this.clamp01(l);this.expression2D.active||this.captureExpressionBase(),this.expression2D={active:!0,x:u,y:d},this.applyExpression2D()}clearExpression2D(){if(this.expression2D.active){this.expressionApplying=!0;try{for(const i of ii)this.resetExpressionAxis(i)}finally{this.expressionApplying=!1,this.expression2D={active:!1,x:.5,y:.5},this.expressionSnapshot={x:null,y:null}}}}configureExpressionRouting(i=this.patch.expression??I.expression){const l=I.expression??{x:"osc1.detune",y:"filter.cutoff"};for(const u of ii){const d=i?.[u]??l[u],p=uo[d]?d:l[u];(this.expressionAxisTargets[u]!==p||!this.expression2D.active)&&(this.expressionSnapshot[u]=null),this.expressionAxisTargets[u]=p}}captureExpressionBase(){for(const i of ii){const l=this.expressionAxisTargets[i],u=uo[l];if(!u)continue;const d=u.getBase(this);this.expressionSnapshot[i]=Number.isFinite(d)?d:0}}applyExpressionAxis(i,l){const u=this.expressionAxisTargets[i],d=uo[u];if(!d)return;let p=this.expressionSnapshot[i];(p==null||Number.isNaN(p))&&(p=d.getBase(this),this.expressionSnapshot[i]=p);const{min:v,max:w}=d.range(this,p),h=w-v,g=h<=0?p:v+h*this.clamp01(l);d.apply(this,g)}resetExpressionAxis(i){const l=this.expressionSnapshot[i],u=this.expressionAxisTargets[i],d=uo[u];d&&l!=null&&Number.isFinite(l)&&d.apply(this,l),this.expressionSnapshot[i]=null}applyExpression2D(){if(!(!this.expression2D.active||this.expressionApplying)){this.expressionApplying=!0;try{this.applyExpressionAxis("x",this.expression2D.x),this.applyExpressionAxis("y",this.expression2D.y)}finally{this.expressionApplying=!1}}}applyDelayEffect(i,l){const u=this.clamp01(l.mix),d=Math.max(0,Math.min(1.5,l.time)),p=Math.max(0,Math.min(.95,l.feedback)),v=this.ctx.createDelay(2);v.delayTime.value=d;const w=this.ctx.createGain();w.gain.value=p,v.connect(w),w.connect(v);const h=this.ctx.createGain();h.gain.value=1-u;const g=this.ctx.createGain();g.gain.value=u;const m=this.ctx.createGain();return i.connect(h),i.connect(v),v.connect(g),h.connect(m),g.connect(m),m}makeImpulse(i,l){const u=Math.max(1,Math.floor(this.ctx.sampleRate*Math.max(.05,i))),d=this.ctx.createBuffer(2,u,this.ctx.sampleRate);for(let p=0;p<d.numberOfChannels;p++){const v=d.getChannelData(p);for(let w=0;w<u;w++){const h=w/u;v[w]=(Math.random()*2-1)*Math.pow(1-h,2+l*6)}}return d}applyReverbEffect(i,l){const u=this.clamp01(l.mix),d=.1+this.clamp01(l.size)*3,p=this.clamp01(l.decay),v=this.ctx.createConvolver();v.normalize=!0,v.buffer=this.makeImpulse(d,p);const w=this.ctx.createGain();w.gain.value=1-u;const h=this.ctx.createGain();h.gain.value=u;const g=this.ctx.createGain();return i.connect(w),i.connect(v),v.connect(h),w.connect(g),h.connect(g),g}makeWavefolderCurve(i,l,u=2048){const d=new Float32Array(u),p=Math.max(1e-4,i)*6,v=(l-.5)*2;for(let w=0;w<u;w++){let h=w/(u-1)*2-1;h+=v*.5;const g=Math.tanh(p*h)/Math.tanh(p);d[w]=g}return d}buildMacroVoice(i,l){switch(l.model){case"fold":return this.createMacroFold(i,l);case"pluck":return this.createMacroPluck(i,l);case"supersaw":return this.createMacroSuperSaw(i,l);case"pwm":return this.createMacroPWM(i,l);case"fm2op":return this.createMacroFM2Op(i,l);case"wavetable":return this.createMacroWavetable(i,l);case"harmonic":return this.createMacroHarmonic(i,l);case"chord":return this.createMacroChord(i,l);case"dirichlet":return this.createMacroDirichletPulse(i,l);case"formant":return this.createMacroFormant(i,l);case"va":default:return this.createMacroVA(i,l)}}createMacroSuperSaw(i,l){const d=this.ctx.createGain(),p=this.ctx.createBiquadFilter();p.type="lowpass",p.frequency.value=800+l.timbre*12e3,p.Q.value=.3;const v=0+l.harmonics*30,w=[-1,-.6,-.2,.2,.6,1],h=[];for(let m=0;m<6;m++){const x=this.ctx.createOscillator();x.type="sawtooth",x.frequency.value=i,x.detune.value=w[m]*v;const y=this.ctx.createGain();y.gain.value=1/6;const C=this.ctx.createStereoPanner(),k=(l.morph-.5)*2,P=w[m]/Math.max(1,Math.max(...w.map(Math.abs)))*k;C.pan.value=P,x.connect(y).connect(C).connect(d),h.push({osc:x,pan:C}),x.start()}d.connect(p);const g=this.ctx.createGain();return g.gain.value=l.level,p.connect(g),{output:g,stop:m=>h.forEach(({osc:x})=>x.stop(m)),pitched:h.map(m=>m.osc)}}createMacroDirichletPulse(i,l){const u=this.ctx.createOscillator();u.frequency.value=i;const d=8,v=Math.max(d,Math.round(d+l.harmonics*(64-d))),w=Math.min(.92,Math.max(.08,.08+l.timbre*.84)),h=(l.morph-.5)*Math.PI*2,g=new Float32Array(v+1),m=new Float32Array(v+1);g[0]=0;for(let P=1;P<=v;P++){const T=P,R=2/(T*Math.PI)*Math.sin(T*Math.PI*w),z=T/(v+1),Z=z===0?1:Math.sin(Math.PI*z)/(Math.PI*z),ee=R*Z;if(!Number.isFinite(ee)||Math.abs(ee)<1e-6)continue;const Q=h*T;g[T]=ee*Math.cos(Q),m[T]=ee*Math.sin(Q)}const x=this.ctx.createPeriodicWave(g,m,{disableNormalization:!1});u.setPeriodicWave(x);const y=this.ctx.createBiquadFilter();y.type="lowpass";const C=Math.max(i*2,i*Math.min(v+2,40));y.frequency.value=Math.min(this.ctx.sampleRate*.48,C),y.Q.value=Math.max(.35,.7+(.5-w)*.6);const k=this.ctx.createGain();return k.gain.value=l.level,u.connect(y).connect(k),u.start(),{output:k,stop:P=>u.stop(P),pitched:[u]}}createMacroWavetable(i,l){const u=["sine","triangle","sawtooth","square"],d=Math.min(3,Math.max(0,Math.floor(l.morph*3.00001))),p=Math.min(1,Math.max(0,l.morph*3-d)),v=(y,C)=>{const k=this.ctx.createOscillator();k.type=y,k.frequency.value=i;const P=this.ctx.createGain();return P.gain.value=C,k.connect(P),{osc:k,g:P}},w=v(u[d],d===3?1:1-p),h=d<3?v(u[d+1],p):null,g=this.ctx.createBiquadFilter();g.type="lowpass",g.frequency.value=800+l.harmonics*15e3,g.Q.value=.1+l.timbre*.6;const m=this.ctx.createGain();m.gain.value=l.level,w.g.connect(g),h&&h.g.connect(g),g.connect(m),w.osc.start(),h&&h.osc.start();const x=[w.osc];return h&&x.push(h.osc),{output:m,stop:y=>{w.osc.stop(y),h&&h.osc.stop(y)},pitched:x}}createMacroHarmonic(i,l){const p=Math.round(2+l.harmonics*14),v=.5+(1-l.timbre)*2,w=(l.morph-.5)*2,h=this.ctx.createGain(),g=[];for(let y=1;y<=p;y++){const C=this.ctx.createOscillator();C.type="sine",C.frequency.value=i*y;let k=1/Math.pow(y,v);const T=y%2===0?Math.max(.1,(w+1)/2):Math.max(.1,(1-w)/2);k*=T;const R=this.ctx.createGain();R.gain.value=k,C.connect(R).connect(h),C.start(),g.push(C)}const m=this.ctx.createBiquadFilter();m.type="lowpass",m.frequency.value=1e3+l.timbre*15e3,m.Q.value=.2;const x=this.ctx.createGain();return x.gain.value=l.level,h.connect(m).connect(x),{output:x,stop:y=>{for(const C of g)C.stop(y)},pitched:g}}createMacroFormant(i,l){const u=this.ctx.createOscillator();u.type="sawtooth",u.frequency.value=i;const d=this.ctx.createGain();d.gain.value=1,u.connect(d);const p=this.ctx.createGain();p.gain.value=1;const v=[{ratios:[1,2.6,4.9],widths:[.22,.18,.28],gains:[1,.7,.45]},{ratios:[.9,2.1,3.5],widths:[.28,.22,.32],gains:[1,.65,.55]},{ratios:[1.3,2.8,4.2],widths:[.2,.16,.24],gains:[.9,.75,.5]},{ratios:[.8,1.6,2.8],widths:[.32,.26,.36],gains:[1.05,.6,.55]}],w=l.morph*(v.length-1),h=Math.floor(w),g=Math.min(v.length-1,h+1),m=w-h,x=v[h]??v[0],y=v[g],C=.8+l.harmonics*1.4,k=.6+l.timbre*2.4,P=this.ctx.sampleRate*.48,T=x.ratios.length;for(let ee=0;ee<T;ee++){const Q=x.ratios[ee],M=y.ratios[ee],F=x.widths[ee],A=y.widths[ee],X=x.gains[ee],xe=y.gains[ee],be=(Q+(M-Q)*m)*C,H=Math.max(.05,F+(A-F)*m),L=X+(xe-X)*m,B=Math.min(P,Math.max(60,i*be)),$=this.ctx.createBiquadFilter();$.type="bandpass",$.frequency.value=B;const ie=Math.max(.5,Math.min(30,1/H*k));$.Q.value=ie;const pe=this.ctx.createGain();pe.gain.value=L/T*(1/Math.sqrt(ie)),d.connect($),$.connect(pe).connect(p)}const R=this.ctx.createBiquadFilter();R.type="highpass",R.frequency.value=Math.max(40,i*.5),R.Q.value=.7;const z=this.ctx.createBiquadFilter();z.type="lowpass",z.frequency.value=Math.min(P,3e3+l.harmonics*14e3),z.Q.value=.7+l.timbre*.6,p.connect(R).connect(z);const Z=this.ctx.createGain();return Z.gain.value=l.level,z.connect(Z),u.start(),{output:Z,stop:ee=>u.stop(ee),pitched:[u]}}createMacroChord(i,l){const u=[[0,4,7],[0,3,7],[0,5,7],[0,2,7],[0,4,7,10],[0,3,7,10],[0,4,7,11],[0,3,6,9],[0,4,8],[-12,0,7,12]],d=Math.max(0,Math.min(u.length-1,Math.floor(l.harmonics*u.length))),p=u[d],v=(l.morph-.5)*2,w=this.ctx.createGain(),h=this.ctx.createBiquadFilter();h.type="lowpass",h.frequency.value=900+l.timbre*15e3,h.Q.value=.3;const g=this.ctx.createGain();g.gain.value=l.level;const m=[],x=[-1,-.3,.3,1];return p.forEach((y,C)=>{const k=this.ctx.createOscillator();k.type="sawtooth";const P=440*Math.pow(2,Math.log2(i/440)+y/12);k.frequency.value=P;const T=x[C%x.length]*v*15;k.detune.value=T;const R=this.ctx.createGain();R.gain.value=1/p.length;const z=this.ctx.createStereoPanner();z.pan.value=x[C%x.length]*v,k.connect(R).connect(z).connect(w),k.start(),m.push(k)}),w.connect(h).connect(g),{output:g,stop:y=>{for(const C of m)C.stop(y)},pitched:m}}createMacroPWM(i,l){const u=this.ctx.createOscillator();u.type="sawtooth",u.frequency.value=i;const d=this.ctx.createGain();d.gain.value=1;const p=this.ctx.createConstantSource(),v=(l.morph-.5)*1.6;p.offset.value=v,p.start(),u.connect(d),p.connect(d);const w=this.ctx.createWaveShaper(),h=1+l.harmonics*24,g=2048,m=new Float32Array(g);for(let C=0;C<g;C++){const k=C/(g-1)*2-1;m[C]=Math.tanh(h*k)}w.curve=m,w.oversample="4x";const x=this.ctx.createBiquadFilter();x.type="lowpass",x.frequency.value=2e3+l.timbre*14e3,x.Q.value=.2;const y=this.ctx.createGain();return y.gain.value=l.level,d.connect(w).connect(x).connect(y),u.start(),{output:y,stop:C=>{u.stop(C),p.stop(C)},pitched:[u]}}createMacroFM2Op(i,l){const u=this.ctx.createOscillator();u.type="sine",u.frequency.value=i;const d=this.ctx.createOscillator();d.type="sine";const p=.25+l.harmonics*7.75;d.frequency.value=i*p;const v=this.ctx.createGain();v.gain.value=Math.max(0,l.timbre)*i*2,d.connect(v).connect(u.frequency);const w=this.ctx.createBiquadFilter();w.type="lowpass",w.frequency.value=1e3+l.morph*15e3,w.Q.value=.1;const h=this.ctx.createGain();return h.gain.value=l.level,u.connect(w).connect(h),u.start(),d.start(),{output:h,stop:g=>{u.stop(g),d.stop(g)},pitched:[u]}}createMacroVA(i,l){const u=this.ctx.createOscillator(),d=this.ctx.createOscillator();u.type="sawtooth",d.type="triangle",u.frequency.value=i,d.frequency.value=i;const p=this.ctx.createGain(),v=this.ctx.createGain();p.gain.value=1-l.timbre,v.gain.value=l.timbre;const w=this.ctx.createGain(),h=this.ctx.createBiquadFilter();return h.type="lowpass",h.frequency.value=1e3+l.harmonics*15e3,h.Q.value=.5,d.connect(p).connect(w),u.connect(v).connect(w),w.connect(h),d.start(),u.start(),{output:h,stop:g=>{d.stop(g),u.stop(g)},pitched:[d,u]}}createMacroFold(i,l){const u=this.ctx.createOscillator();u.type="sine",u.frequency.value=i;const d=this.ctx.createGain(),p=this.ctx.createWaveShaper(),v=this.ctx.createGain(),w=.2+l.harmonics*1.6,h=l.morph;p.curve=this.makeWavefolderCurve(w,h),p.oversample="4x",d.gain.value=1,v.gain.value=l.level;const g=this.ctx.createBiquadFilter();return g.type="lowpass",g.frequency.value=4e3+l.timbre*16e3,g.Q.value=.2,u.connect(d).connect(p).connect(g).connect(v),u.start(),{output:v,stop:m=>u.stop(m),pitched:[u]}}createMacroPluck(i,l){const u=this.ctx.createGain(),d=this.ctx.createBufferSource(),p=Math.floor(this.ctx.sampleRate*.02),v=this.ctx.createBuffer(1,p,this.ctx.sampleRate),w=v.getChannelData(0);for(let C=0;C<p;C++)w[C]=(Math.random()*2-1)*(1-C/p);d.buffer=v,d.loop=!1;const h=1/Math.max(20,i),g=this.ctx.createDelay(1);g.delayTime.value=h;const m=this.ctx.createGain();m.gain.value=.85+l.harmonics*.14;const x=this.ctx.createBiquadFilter();x.type="lowpass",x.frequency.value=1e3+l.timbre*8e3,x.Q.value=0;const y=this.ctx.createBiquadFilter();return y.type="highpass",y.frequency.value=50+l.morph*400,d.connect(y).connect(g).connect(u),g.connect(x).connect(m).connect(g),u.gain.value=l.level,d.start(),{output:u,stop:C=>{},pitched:[]}}makeVoice(i){const l=this.ctx.currentTime,u=this.patch.envelope,d=this.ctx.createGain();d.gain.value=0,d.connect(this.filter);const p=this.activeVoices.size,w=.65/Math.max(1,Math.sqrt(p+1)),g=(H=>{const L=Number(H??0);return Number.isFinite(L)?Math.max(-3,Math.min(3,Math.round(L))):0})(this.patch.osc1.octave),m=i*Math.pow(2,g),x=this.patch.engineMode??"classic",y=H=>H==="macro"?"macro":H==="sampler"?"sampler":"analog",C=this.patch.osc1.mode??y(x),k=this.patch.osc2.mode??y(x),P=this.ctx.createGain(),T=this.ctx.createGain(),R=Math.max(0,Math.min(1,this.patch.mix));P.gain.value=1-R,T.gain.value=R;const z=this.ctx.createGain();z.gain.value=1,P.connect(z),T.connect(z),z.connect(d);const Z=[];let ee=null,Q=null,M=null;const F=[],A=[];if(C==="macro"){const H=this.patch.osc1.macro??this.patch.macro??Rt,L=this.buildMacroVoice(m,H);if(L.output.connect(P),A.push(L),M||(M=L.output),L.pitched&&L.pitched.length)for(const B of L.pitched)for(const $ of this.lfos)$.dest==="pitch"&&this.patch[this.lfos.indexOf($)===0?"lfo1":"lfo2"]?.enabled&&($.gain.connect(B.detune),F.push({g:$.gain,p:B.detune}))}else if(C==="sampler"){const H=this.createSamplerSource(m,"osc1");H&&(H.connect(P),Z.push(H),M=H)}else{let H=null;if(this.patch.osc1.wave==="noise"){const L=Ot(this.ctx.createBufferSource());L.buffer=this.noiseBuffer,L.loop=!0,H=L}else if(this.patch.osc1.wave==="sample")H=this.createSamplerSource(m,"osc1");else{const L=Ot(this.ctx.createOscillator());L.type=this.patch.osc1.wave,L.frequency.setValueAtTime(m,l);const B=this.patch.osc1.detuneFine??0;L.detune.value=(this.patch.osc1.detune||0)+B,H=L,ee=L}if(H&&(H.connect(P),Z.push(H),M=H),H&&this.patch.fm.enabled&&"frequency"in H){const L=H,B=Ot(this.ctx.createOscillator());B.type=this.patch.osc2.wave;const $=Math.max(.01,this.patch.fm.ratio||1);B.frequency.setValueAtTime(i*$,l),B.detune.value=this.patch.osc2.detune||0;const ie=this.ctx.createGain();ie.gain.value=Math.max(0,this.patch.fm.amount||0),B.connect(ie),ie.connect(L.frequency),Z.push(B)}if(H&&"detune"in H)for(const L of this.lfos)L.dest==="pitch"&&this.patch[this.lfos.indexOf(L)===0?"lfo1":"lfo2"]?.enabled&&(L.gain.connect(H.detune),F.push({g:L.gain,p:H.detune}))}if(k==="macro"){const H=this.patch.osc2.macro??this.patch.macro??Rt,L=this.buildMacroVoice(i,H);if(L.output.connect(T),A.push(L),L.pitched&&L.pitched.length)for(const B of L.pitched)for(const $ of this.lfos)$.dest==="pitch"&&this.patch[this.lfos.indexOf($)===0?"lfo1":"lfo2"]?.enabled&&($.gain.connect(B.detune),F.push({g:$.gain,p:B.detune}))}else if(k==="sampler"){const H=this.createSamplerSource(i,"osc2");H&&(H.connect(T),Z.push(H))}else{let H=null;if(this.patch.osc2.wave==="noise"){const L=Ot(this.ctx.createBufferSource());L.buffer=this.noiseBuffer,L.loop=!0,H=L}else{const L=Ot(this.ctx.createOscillator());L.type=this.patch.osc2.wave,L.frequency.setValueAtTime(i,l),L.detune.value=this.patch.osc2.detune,H=L,Q=L}if(H&&(H.connect(T),Z.push(H)),this.patch.ring.enabled&&M&&H){const L=this.ctx.createGain();L.gain.value=0,M.connect(L);const B=this.ctx.createGain();B.gain.value=1,H.connect(B),B.connect(L.gain);const $=Math.max(0,Math.min(1,this.patch.ring.amount));z.gain.value=1-$;const ie=this.ctx.createGain();ie.gain.value=$,L.connect(ie),ie.connect(d)}if(H&&"detune"in H)for(const L of this.lfos)L.dest==="pitch"&&this.patch[this.lfos.indexOf(L)===0?"lfo1":"lfo2"]?.enabled&&(L.gain.connect(H.detune),F.push({g:L.gain,p:H.detune}))}const X=d.gain;if(X.cancelScheduledValues(l),X.setValueAtTime(0,l),X.linearRampToValueAtTime(w,l+Math.max(.001,u.attack)),X.linearRampToValueAtTime(u.sustain*w,l+u.attack+Math.max(.001,u.decay)),this.patch.sub.enabled){const H=Ot(this.ctx.createOscillator());H.type=this.patch.sub.wave||"square";const L=i/Math.pow(2,Math.max(1,Math.min(2,this.patch.sub.octave)));H.frequency.setValueAtTime(L,l);const B=this.ctx.createGain();B.gain.value=Math.max(0,Math.min(1,this.patch.sub.level)),H.connect(B),B.connect(d),Z.push(H);for(const $ of this.lfos)$.dest==="pitch"&&this.patch[this.lfos.indexOf($)===0?"lfo1":"lfo2"]?.enabled&&($.gain.connect(H.detune),F.push({g:$.gain,p:H.detune}))}for(const H of Z)if("start"in H){const L=Ot(H);if(L._autoStarted)continue;L._started||(L.start(),yu(L))}const be={stop:H=>{const L=Math.max(this.ctx.currentTime,H);X.cancelScheduledValues(L),X.setValueAtTime(X.value,L),X.linearRampToValueAtTime(0,L+Math.max(.001,u.release));for(const B of Z)if("stop"in B){const $=Ot(B);if(!$._started)continue;try{$.stop(L+u.release+.05)}catch(ie){if(!(ie instanceof DOMException))throw ie}finally{$._started=!1}}for(const B of A)try{B.stop(L+u.release+.05)}catch{}for(const B of F)try{B.g.disconnect(B.p)}catch{}},osc1Mix:P,osc2Mix:T};return ee&&(be.osc1Detune=ee.detune),Q&&(be.osc2Detune=Q.detune),be}allNotesOff(){const i=this.ctx.currentTime;for(const l of this.activeVoices.values())l.stop(i);this.activeVoices.clear()}getArpChordOffsets(){const i=this.patch.arp??I.arp;if((i.chordSource??"preset")==="sequencer"){const d=this.patch.sequencer??I.sequencer,p=d.steps??[],v=Math.max(1,Math.min(p.length,d.length)),w=new Set;for(let h=0;h<v;h++){const g=p[h];if(g?.on){const m=Math.round(g.offset??0);Number.isFinite(m)&&w.add(m)}}return w.size>0?Array.from(w).sort((h,g)=>h-g):[0]}switch(i.chord??I.arp.chord??"none"){case"power":return[0,7];case"major":return[0,4,7];case"minor":return[0,3,7];case"sus2":return[0,2,7];case"sus4":return[0,5,7];case"maj7":return[0,4,7,11];case"min7":return[0,3,7,10];default:return[0]}}buildArpPool(){if(this.arpHeld.size===0)return[];const i=this.patch.arp?.mode??"up",l=i==="asplayed"?Array.from(this.arpHeld.values()):Array.from(this.arpHeld.values()).sort((v,w)=>v-w),u=Math.max(1,Math.min(4,this.patch.arp?.octaves??1)),d=[],p=this.getArpChordOffsets();for(let v=0;v<u;v++)for(const w of l){const h=w+v*12;for(const g of p){const m=h+g;m<0||m>127||d.push(m)}}if(i==="down")return d.slice().sort((v,w)=>w-v);if(i==="random")return d.slice().sort(()=>Math.random()-.5);if(i==="updown"){const v=d.slice().sort((h,g)=>h-g),w=v.slice().reverse().slice(1,-1);return v.concat(w)}return d}updateArpScheduler(i={}){const{forceRestart:l=!1}=i;if(!!this.patch.arp?.enabled&&this.arpHeld.size>0){const d=l||this.arpTimer==null;if(d&&this.arpTimer!=null&&(clearTimeout(this.arpTimer),this.arpTimer=null),d){this.arpPhase=0,this.arpRepeatCounter=0;const p=this.getArpStepMs(),v=this.computeArpAlignmentDelay(p);this.scheduleNextArpTick(v)}}else{if(this.arpTimer!=null&&(clearTimeout(this.arpTimer),this.arpTimer=null),this.arpLastNote!=null){const d=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(d)}finally{this.arpBypass=!1}this.arpLastNote=null}this.arpIndex=0,this.arpRepeatCounter=0}}computeArpAlignmentDelay(i){if(!(i>0))return 0;const u=this.ctx.currentTime*1e3%i;return u<1?0:i-u}scheduleNextArpTick(i){const l=this.getArpStepMs();let u=0;if(this.patch.arp?.bpmSync){const w=this.patch.arp?.division,h=Math.max(0,Math.min(1,this.patch.arp?.swingPct??0));w==="1/8"?u=h:w==="1/16"?u=h*.5:u=0}const d=this.arpPhase===0?1+u*.5:1-u*.5,p=l*d,v=i??p;this.arpCurrentStepMs=p,this.arpTimer=setTimeout(()=>{if(!this.patch.arp?.enabled||this.arpHeld.size===0){this.updateArpScheduler();return}this.arpTick(),this.arpPhase=this.arpPhase?0:1,this.scheduleNextArpTick()},Math.max(0,v))}getArpStepMs(){const i=this.patch.arp;if(i?.bpmSync){const u=6e4/Math.max(20,Math.min(300,i.bpm||120)),d=i.division||"1/8",p=d==="1/4"?1:d==="1/8"?.5:d==="1/8T"?1/3:d==="1/16"?.25:1/6;return u*p}else return 1e3/Math.max(.1,i?.rateHz??8)}arpTick(){let i=this.buildArpPool();if(i.length===0){if(this.arpLastNote!=null){const g=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(g)}finally{this.arpBypass=!1}this.arpLastNote=null}return}const l=Math.max(0,this.patch.arp?.patternLen??0);l>0&&i.length>l&&(i=i.slice(0,l)),this.arpIndex>=i.length&&(this.arpIndex=0);const u=i[this.arpIndex++],d=Math.max(1,Math.min(8,this.patch.arp?.repeats??1));this.arpRepeatCounter<d-1?(this.arpIndex=(this.arpIndex-1+i.length)%i.length,this.arpRepeatCounter++):this.arpRepeatCounter=0,this.arpLastNote!=null&&(this.patch.arp?.gate??.6)>=1,this.arpBypass=!0;try{this.noteOn(u)}finally{this.arpBypass=!1}this.arpLastNote=u;const p=this.arpCurrentStepMs||this.getArpStepMs(),v=Math.max(.05,Math.min(1,this.patch.arp?.gate??.6)),w=p*v,h=u;setTimeout(()=>{this.arpBypass=!0;try{this.noteOff(h)}finally{this.arpBypass=!1}},w)}getArpStatus(){const i=!!this.patch.arp?.enabled;let l=0,u=0;if(i){const d=this.buildArpPool().length,p=Math.max(0,this.patch.arp?.patternLen??0);if(l=p>0?Math.min(p,d):d,l<=0&&(l=0),l>0){const v=(this.arpIndex-1+l)%l;u=v<0?0:v}}return{enabled:i,stepIndex:u,length:l}}getSeqStepMs(){const i=this.patch.sequencer,u=6e4/Math.max(20,Math.min(300,i.bpm||120)),d=i.division,p=d==="1/4"?1:d==="1/8"?.5:d==="1/8T"?1/3:d==="1/16"?.25:1/6;return u*p}updateSeqScheduler(){const i=this.patch.sequencer;if(!!i.enabled&&!!i.playing)this.seqTimer!=null&&(clearTimeout(this.seqTimer),this.seqTimer=null),this.seqPhase=0,this.seqStepIndex=0,this.scheduleNextSeqTick();else if(this.seqTimer!=null&&(clearTimeout(this.seqTimer),this.seqTimer=null),this.seqLastNote!=null){const u=this.seqLastNote;this.arpBypass=!0;try{this.noteOff(u)}finally{this.arpBypass=!1}this.seqLastNote=null}}scheduleNextSeqTick(){const i=this.getSeqStepMs(),l=this.patch.sequencer?.division;let u=Math.max(0,Math.min(1,this.patch.sequencer?.swingPct??0));l==="1/16"&&(u*=.5),l==="1/8"&&(u=u),(l==="1/4"||l?.endsWith("T"))&&(u=0);const d=this.seqPhase===0?1+u*.5:1-u*.5,p=i*d;this.seqCurrentStepMs=p,this.seqTimer=setTimeout(()=>{if(!this.patch.sequencer?.enabled||!this.patch.sequencer?.playing){this.updateSeqScheduler();return}this.seqTick(),this.seqPhase=this.seqPhase?0:1,this.scheduleNextSeqTick()},p)}seqTick(){const i=this.patch.sequencer,l=Math.max(1,Math.min(i.steps.length,i.length)),u=this.seqStepIndex%l,d=i.steps[u]||{on:!1,offset:0};if(this.seqStepIndex=(this.seqStepIndex+1)%l,this.seqLastNote!=null&&(i.gate??.6)>=1){const p=this.seqLastNote;this.arpBypass=!0;try{this.noteOff(p)}finally{this.arpBypass=!1}this.seqLastNote=null}if(d.on){const p=Math.round((i.rootMidi||60)+(d.offset||0));this.arpBypass=!0;try{this.noteOn(p)}finally{this.arpBypass=!1}this.seqLastNote=p;const v=Math.max(.05,Math.min(1,i.gate??.6)),w=(this.seqCurrentStepMs||this.getSeqStepMs())*v;setTimeout(()=>{this.arpBypass=!0;try{this.noteOff(p)}finally{this.arpBypass=!1}},w)}}getSequencerStatus(){const i=this.patch.sequencer,l=!!i.enabled&&!!i.playing,u=Math.max(0,Math.min(i.steps.length,i.length)),d=l&&u>0?(this.seqStepIndex+u-1)%u:0;return{enabled:l,stepIndex:d,length:u}}previewNote(i,l=150){this.arpBypass=!0;try{this.noteOn(i)}finally{this.arpBypass=!1}setTimeout(()=>{this.arpBypass=!0;try{this.noteOff(i)}finally{this.arpBypass=!1}},Math.max(20,l))}noteOn(i){if(this.patch.arp?.enabled&&!this.arpBypass){this.arpHeld.add(i),this.updateArpScheduler();return}const l=440*Math.pow(2,(i-69)/12),u=this.makeVoice(l);this.activeVoices.set(i,u)}noteOff(i){if(this.patch.arp?.enabled&&!this.arpBypass){if(this.patch.arp?.latch||(this.arpHeld.delete(i),this.arpHeld.size===0&&this.updateArpScheduler()),this.arpLastNote===i){const u=this.activeVoices.get(i);u&&u.stop(this.ctx.currentTime),this.activeVoices.delete(i),this.arpLastNote===i&&(this.arpLastNote=null)}return}const l=this.activeVoices.get(i);l&&(l.stop(this.ctx.currentTime),this.activeVoices.delete(i))}arpClear(){if(this.arpHeld.clear(),this.arpIndex=0,this.arpTimer!=null&&(clearInterval(this.arpTimer),this.arpTimer=null),this.arpLastNote!=null){const i=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(i)}finally{this.arpBypass=!1}this.arpLastNote=null}}}const tp={},wu=r=>{let i;const l=new Set,u=(m,x)=>{const y=typeof m=="function"?m(i):m;if(!Object.is(y,i)){const C=i;i=x??(typeof y!="object"||y===null)?y:Object.assign({},i,y),l.forEach(k=>k(i,C))}},d=()=>i,h={setState:u,getState:d,getInitialState:()=>g,subscribe:m=>(l.add(m),()=>l.delete(m)),destroy:()=>{(tp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),l.clear()}},g=i=r(u,d,h);return h},np=r=>r?wu(r):wu;var ai={exports:{}},ci={},ui={exports:{}},di={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su;function rp(){if(Su)return di;Su=1;var r=Zr();function i(x,y){return x===y&&(x!==0||1/x===1/y)||x!==x&&y!==y}var l=typeof Object.is=="function"?Object.is:i,u=r.useState,d=r.useEffect,p=r.useLayoutEffect,v=r.useDebugValue;function w(x,y){var C=y(),k=u({inst:{value:C,getSnapshot:y}}),P=k[0].inst,T=k[1];return p(function(){P.value=C,P.getSnapshot=y,h(P)&&T({inst:P})},[x,C,y]),d(function(){return h(P)&&T({inst:P}),x(function(){h(P)&&T({inst:P})})},[x]),v(C),C}function h(x){var y=x.getSnapshot;x=x.value;try{var C=y();return!l(x,C)}catch{return!0}}function g(x,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:w;return di.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:m,di}var ku;function sp(){return ku||(ku=1,ui.exports=rp()),ui.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju;function op(){if(ju)return ci;ju=1;var r=Zr(),i=sp();function l(g,m){return g===m&&(g!==0||1/g===1/m)||g!==g&&m!==m}var u=typeof Object.is=="function"?Object.is:l,d=i.useSyncExternalStore,p=r.useRef,v=r.useEffect,w=r.useMemo,h=r.useDebugValue;return ci.useSyncExternalStoreWithSelector=function(g,m,x,y,C){var k=p(null);if(k.current===null){var P={hasValue:!1,value:null};k.current=P}else P=k.current;k=w(function(){function R(M){if(!z){if(z=!0,Z=M,M=y(M),C!==void 0&&P.hasValue){var F=P.value;if(C(F,M))return ee=F}return ee=M}if(F=ee,u(Z,M))return F;var A=y(M);return C!==void 0&&C(F,A)?F:(Z=M,ee=A)}var z=!1,Z,ee,Q=x===void 0?null:x;return[function(){return R(m())},Q===null?void 0:function(){return R(Q())}]},[m,x,y,C]);var T=d(g,k[0],k[1]);return v(function(){P.hasValue=!0,P.value=T},[T]),h(T),T},ci}var Mu;function lp(){return Mu||(Mu=1,ai.exports=op()),ai.exports}var ip=lp();const ap=Iu(ip),Fu={},{useDebugValue:cp}=He,{useSyncExternalStoreWithSelector:up}=ap;let Eu=!1;const dp=r=>r;function fp(r,i=dp,l){(Fu?"production":void 0)!=="production"&&l&&!Eu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Eu=!0);const u=up(r.subscribe,r.getState,r.getServerState||r.getInitialState,i,l);return cp(u),u}const pp=r=>{(Fu?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const i=typeof r=="function"?np(r):r,l=(u,d)=>fp(i,u,d);return Object.assign(l,i),l},hp=r=>pp,mp={};function vp(r,i){let l;try{l=r()}catch{return}return{getItem:d=>{var p;const v=h=>h===null?null:JSON.parse(h,void 0),w=(p=l.getItem(d))!=null?p:null;return w instanceof Promise?w.then(v):v(w)},setItem:(d,p)=>l.setItem(d,JSON.stringify(p,void 0)),removeItem:d=>l.removeItem(d)}}const Jr=r=>i=>{try{const l=r(i);return l instanceof Promise?l:{then(u){return Jr(u)(l)},catch(u){return this}}}catch(l){return{then(u){return this},catch(u){return Jr(u)(l)}}}},gp=(r,i)=>(l,u,d)=>{let p={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:T=>T,version:0,merge:(T,R)=>({...R,...T}),...i},v=!1;const w=new Set,h=new Set;let g;try{g=p.getStorage()}catch{}if(!g)return r((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),l(...T)},u,d);const m=Jr(p.serialize),x=()=>{const T=p.partialize({...u()});let R;const z=m({state:T,version:p.version}).then(Z=>g.setItem(p.name,Z)).catch(Z=>{R=Z});if(R)throw R;return z},y=d.setState;d.setState=(T,R)=>{y(T,R),x()};const C=r((...T)=>{l(...T),x()},u,d);let k;const P=()=>{var T;if(!g)return;v=!1,w.forEach(z=>z(u()));const R=((T=p.onRehydrateStorage)==null?void 0:T.call(p,u()))||void 0;return Jr(g.getItem.bind(g))(p.name).then(z=>{if(z)return p.deserialize(z)}).then(z=>{if(z)if(typeof z.version=="number"&&z.version!==p.version){if(p.migrate)return p.migrate(z.state,z.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return z.state}).then(z=>{var Z;return k=p.merge(z,(Z=u())!=null?Z:C),l(k,!0),x()}).then(()=>{R?.(k,void 0),v=!0,h.forEach(z=>z(k))}).catch(z=>{R?.(void 0,z)})};return d.persist={setOptions:T=>{p={...p,...T},T.getStorage&&(g=T.getStorage())},clearStorage:()=>{g?.removeItem(p.name)},getOptions:()=>p,rehydrate:()=>P(),hasHydrated:()=>v,onHydrate:T=>(w.add(T),()=>{w.delete(T)}),onFinishHydration:T=>(h.add(T),()=>{h.delete(T)})},P(),k||C},yp=(r,i)=>(l,u,d)=>{let p={storage:vp(()=>localStorage),partialize:P=>P,version:0,merge:(P,T)=>({...T,...P}),...i},v=!1;const w=new Set,h=new Set;let g=p.storage;if(!g)return r((...P)=>{console.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),l(...P)},u,d);const m=()=>{const P=p.partialize({...u()});return g.setItem(p.name,{state:P,version:p.version})},x=d.setState;d.setState=(P,T)=>{x(P,T),m()};const y=r((...P)=>{l(...P),m()},u,d);d.getInitialState=()=>y;let C;const k=()=>{var P,T;if(!g)return;v=!1,w.forEach(z=>{var Z;return z((Z=u())!=null?Z:y)});const R=((T=p.onRehydrateStorage)==null?void 0:T.call(p,(P=u())!=null?P:y))||void 0;return Jr(g.getItem.bind(g))(p.name).then(z=>{if(z)if(typeof z.version=="number"&&z.version!==p.version){if(p.migrate)return[!0,p.migrate(z.state,z.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,z.state];return[!1,void 0]}).then(z=>{var Z;const[ee,Q]=z;if(C=p.merge(Q,(Z=u())!=null?Z:y),l(C,!0),ee)return m()}).then(()=>{R?.(C,void 0),C=u(),v=!0,h.forEach(z=>z(C))}).catch(z=>{R?.(void 0,z)})};return d.persist={setOptions:P=>{p={...p,...P},P.storage&&(g=P.storage)},clearStorage:()=>{g?.removeItem(p.name)},getOptions:()=>p,rehydrate:()=>k(),hasHydrated:()=>v,onHydrate:P=>(w.add(P),()=>{w.delete(P)}),onFinishHydration:P=>(h.add(P),()=>{h.delete(P)})},p.skipHydration||k(),C||y},xp=(r,i)=>"getStorage"in i||"serialize"in i||"deserialize"in i?((mp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),gp(r,i)):yp(r,i),wp=xp,sn=r=>({...r,mode:r.mode??"analog",macro:{...Rt,...r.macro??{}},sampler:{...St,...r.sampler??{}}}),Sp=(r,i)=>r==="sampler"||i==="sampler"?"sampler":r==="macro"||i==="macro"?"macro":"classic",kp=r=>r.osc1.mode==="macro"&&r.osc1.macro?r.osc1.macro:r.osc2.mode==="macro"&&r.osc2.macro?r.osc2.macro:r.macro??Rt,ne=hp()(wp((r,i)=>({engine:null,patch:I,samplerLibrary:[],layoutOrder:[],oscilloscope:{fftSize:4096},tempo:110,transport:{tempo:110,playing:!1,tick:0},midi:{supported:null,status:"idle",enabled:!1,inputs:[],selectedInputId:null,lastError:null,activeNotes:[]},setEngine:l=>r({engine:l}),updatePatch:l=>{const u=i().patch,d={...u,...l,osc1:{...u.osc1,...l.osc1},osc2:{...u.osc2,...l.osc2},fm:{...u.fm,...l.fm},sub:{...u.sub,...l.sub},ring:{...u.ring,...l.ring},filter:{...u.filter,...l.filter},envelope:{...u.envelope,...l.envelope},master:{...u.master,...l.master},sampler:{...u.sampler,...l.sampler},macro:{...u.macro||I.macro,...l.macro},effects:{...u.effects||I.effects,...l.effects},lfo1:{...u.lfo1||I.lfo1,...l.lfo1},lfo2:{...u.lfo2||I.lfo2,...l.lfo2},arp:{...u.arp||I.arp,...l.arp},sequencer:{...u.sequencer||I.sequencer,...l.sequencer},mix:l.mix!=null?l.mix:u.mix,expression:{...u.expression||I.expression,...l.expression}};d.osc1=sn(d.osc1),d.osc2=sn(d.osc2);const p=l.engineMode,v=p??Sp(d.osc1.mode??"analog",d.osc2.mode??"analog");d.engineMode=v;const w={...l};(p!==void 0||(u.engineMode??"classic")!==v)&&(w.engineMode=v);const h=kp(d),g={...Rt,...h??{}};d.macro=g,(v==="macro"||l.macro!==void 0||l.osc1?.macro!==void 0||l.osc2?.macro!==void 0)&&(w.macro=g),i().engine?.applyPatch(w),r({patch:d})},setLayoutOrder:l=>r({layoutOrder:l}),setTempo:l=>r(u=>({tempo:l,transport:{...u.transport,tempo:l}})),setTransportPlaying:l=>r(u=>({transport:{...u.transport,playing:l,tick:0}})),bumpTransportTick:()=>r(l=>({transport:{...l.transport,tick:l.transport.tick+1}})),importPatch:l=>{const u=JSON.parse(l),d={...i().patch,...u,osc1:{...i().patch.osc1,...u.osc1},osc2:{...i().patch.osc2,...u.osc2},fm:{...i().patch.fm,...u.fm},sub:{...i().patch.sub,...u.sub},ring:{...i().patch.ring,...u.ring},filter:{...i().patch.filter,...u.filter},envelope:{...i().patch.envelope,...u.envelope},master:{...i().patch.master,...u.master},sampler:{...i().patch.sampler,...u.sampler},macro:{...i().patch.macro||I.macro,...u.macro},effects:{...i().patch.effects||I.effects,...u.effects},lfo1:{...i().patch.lfo1||I.lfo1,...u.lfo1},lfo2:{...i().patch.lfo2||I.lfo2,...u.lfo2},arp:{...i().patch.arp||I.arp,...u.arp},sequencer:{...i().patch.sequencer||I.sequencer,...u.sequencer},mix:u.mix!=null?u.mix:i().patch.mix,expression:{...i().patch.expression||I.expression,...u.expression}};d.osc1=sn(d.osc1),d.osc2=sn(d.osc2),i().engine?.applyPatch(d),r({patch:d})},exportPatch:()=>JSON.stringify(i().patch,null,2),setMidiSupported:l=>r(u=>({midi:{...u.midi,supported:l}})),setMidiStatus:(l,u=null)=>r(d=>({midi:{...d.midi,status:l,lastError:u}})),setMidiEnabled:l=>r(u=>({midi:{...u.midi,enabled:l}})),setMidiInputs:l=>r(u=>({midi:{...u.midi,inputs:l}})),setMidiSelectedInput:l=>r(u=>({midi:{...u.midi,selectedInputId:l}})),setMidiActiveNotes:l=>r(u=>({midi:{...u.midi,activeNotes:l}})),setOscilloscopeFftSize:l=>r(u=>({oscilloscope:{fftSize:l}})),saveSamplerSample:(l,u)=>r(d=>{const p=u.id??`sample-${Date.now()}`,v={...St,...u,id:p},w=d.samplerLibrary.filter(m=>m.id!==p).concat(v),h={...d.patch,[l]:sn({...d.patch[l],mode:"sampler",sampler:v})},g={[l]:{mode:"sampler",sampler:v}};return h.sampler=v,g.sampler=v,d.engine?.applyPatch(g),{samplerLibrary:w,patch:h}}),deleteSamplerSample:l=>r(u=>{const d=u.samplerLibrary.filter(w=>w.id!==l),p={...u.patch},v={};if(["osc1","osc2"].forEach(w=>{if(p[w].sampler?.id===l){const h={...St};p[w]=sn({...p[w],sampler:h}),v[w]={sampler:h}}}),p.sampler?.id===l){const w={...St};p.sampler=w,v.sampler=w}return Object.keys(v).length>0&&u.engine?.applyPatch(v),{samplerLibrary:d,patch:p}}),setSamplerFromLibrary:(l,u)=>r(d=>{const p=d.samplerLibrary.find(g=>g.id===u);if(!p)return{};const v={...St,...p},w={...d.patch,[l]:sn({...d.patch[l],mode:"sampler",sampler:v})},h={[l]:{mode:"sampler",sampler:v}};return w.sampler=v,h.sampler=v,d.engine?.applyPatch(h),{patch:w}}),updateCurrentSampler:(l,u)=>r(d=>{const v={...{...St,...d.patch[l].sampler??{}},...u},w={...d.patch,[l]:sn({...d.patch[l],sampler:v})},h={[l]:{sampler:v}};w.sampler=v,h.sampler=v,d.engine?.applyPatch(h);const g=v.id?d.samplerLibrary.map(m=>m.id===v.id?{...m,...u}:m):d.samplerLibrary;return{patch:w,samplerLibrary:g}}),renameSamplerSample:(l,u)=>r(d=>{const p=u.trim();if(!p)return{};let v=!1;const w=d.samplerLibrary.map(m=>m.id!==l?m:(v=!0,{...m,name:p}));if(!v)return{};const h={...d.patch},g={};if(["osc1","osc2"].forEach(m=>{if(h[m].sampler?.id===l){const x={...h[m].sampler,name:p};h[m]=sn({...h[m],sampler:x}),g[m]={sampler:x}}}),h.sampler?.id===l){const m={...h.sampler,name:p};h.sampler=m,g.sampler=m}return Object.keys(g).length>0&&d.engine?.applyPatch(g),{samplerLibrary:w,patch:h}}),playSamplerPreview:l=>{const u=i().engine;u&&u.previewSampler(l)},resetPatch:()=>r(l=>(l.engine?.applyPatch(I),{patch:I,samplerLibrary:l.samplerLibrary}))}),{name:"websynth-patch",partialize:r=>({patch:{...r.patch,sequencer:r.patch.sequencer?{...r.patch.sequencer,playing:!1}:r.patch.sequencer,arp:r.patch.arp?{...r.patch.arp,bpmSync:r.patch.arp.bpmSync??!0}:r.patch.arp},samplerLibrary:r.samplerLibrary,layoutOrder:r.layoutOrder,tempo:r.tempo,transport:{tempo:r.transport.tempo,playing:!1,tick:0},midi:{enabled:r.midi.enabled,selectedInputId:r.midi.selectedInputId},oscilloscope:r.oscilloscope}),version:11,migrate:(r,i)=>{const l=r?.patch;if(!l)return r;const u=l.osc1||{},{finePct:d,...p}=u,v={...I,...l,osc1:{...I.osc1,...p},osc2:{...I.osc2,...l.osc2||{}},fm:{...I.fm,...l.fm||{}},sub:{...I.sub,...l.sub||{}},ring:{...I.ring,...l.ring||{}},filter:{...I.filter,...l.filter||{}},envelope:{...I.envelope,...l.envelope||{}},master:{...I.master,...l.master||{}},sampler:{...I.sampler,...l.sampler||{}},macro:{...I.macro,...l.macro||{}},effects:{...I.effects,...l.effects||{}},lfo1:{...I.lfo1,...l.lfo1||{}},lfo2:{...I.lfo2,...l.lfo2||{}},arp:{...I.arp,...l.arp||{}},sequencer:{...I.sequencer,...l.sequencer||{}},mix:typeof l.mix=="number"?l.mix:I.mix,expression:{...I.expression,...l.expression||{}}},w=Array.isArray(r?.layoutOrder)?r.layoutOrder.filter(R=>typeof R=="string"):[],h=typeof r?.tempo=="number"?r.tempo:110,g=r?.transport,m=g?{tempo:g.tempo??h,playing:!1,tick:0}:{tempo:h,playing:!1,tick:0},x=r?.midi,y={supported:null,status:"idle",enabled:x?.enabled??!1,inputs:[],selectedInputId:x?.selectedInputId??null,lastError:null,activeNotes:[]},C=Array.isArray(r?.samplerLibrary)?r.samplerLibrary.map((R,z)=>({...I.sampler,...R??{},id:typeof R?.id=="string"?R.id:`legacy-${Date.now()}-${z}`})):[],k=[1024,2048,4096,8192],P=r?.oscilloscope?.fftSize,T=k.includes(P)?P:4096;return{...r,patch:v,samplerLibrary:C,layoutOrder:w,tempo:h,transport:m,midi:y,oscilloscope:{fftSize:T}}},onRehydrateStorage:()=>r=>{r&&(r.engine=null,(!r.oscilloscope||![1024,2048,4096,8192].includes(r.oscilloscope.fftSize))&&(r.oscilloscope={fftSize:4096}),Array.isArray(r.layoutOrder)||(r.layoutOrder=[]),typeof r.tempo!="number"&&(r.tempo=110),r.transport||(r.transport={tempo:r.tempo,playing:!1,tick:0}),r.midi?r.midi={supported:null,status:"idle",enabled:!!r.midi.enabled,inputs:[],selectedInputId:r.midi.selectedInputId??null,lastError:null,activeNotes:[]}:r.midi={supported:null,status:"idle",enabled:!1,inputs:[],selectedInputId:null,lastError:null,activeNotes:[]})}}));function Te({value:r,min:i,max:l,step:u=.01,size:d=56,label:p,formatValue:v,onChange:w,disabled:h=!1,showValue:g=!0}){const[m,x]=V.useState(!1),y=V.useRef(null),C=V.useCallback(B=>Math.min(l,Math.max(i,B)),[i,l]),k=l-i,P=k===0?0:(r-i)/k,T=V.useMemo(()=>-135+P*270,[P]),R=v?v(r):jp(r),z=B=>{h||(B.currentTarget.setPointerCapture(B.pointerId),y.current={y:B.clientY,v:r},x(!0))},Z=B=>{if(!y.current||h)return;if(B.buttons===0){y.current=null,x(!1);try{B.currentTarget.releasePointerCapture(B.pointerId)}catch{}return}const ie=(y.current.y-B.clientY)/150*k,pe=C(y.current.v+ie);w(fi(pe,u))},ee=B=>{if(!h){try{B.currentTarget.releasePointerCapture(B.pointerId)}catch{}y.current=null,x(!1)}},Q=B=>{if(h)return;const $=u;(B.key==="ArrowUp"||B.key==="ArrowRight")&&w(C(fi(r+$,$))),(B.key==="ArrowDown"||B.key==="ArrowLeft")&&w(C(fi(r-$,$)))},M=d/2-6,F=d/2,A=d/2,X=-135,xe=F+Math.cos(X*Math.PI/180)*(M+6),be=A+Math.sin(X*Math.PI/180)*(M+6),H=F+Math.cos(T*Math.PI/180)*(M-6),L=A+Math.sin(T*Math.PI/180)*(M-6);return a.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:6,opacity:h?.4:1,pointerEvents:h?"none":"auto",width:d},children:[a.jsxs("svg",{width:d,height:d,onPointerDown:z,onPointerMove:Z,onPointerUp:ee,onKeyDown:Q,role:"slider","aria-label":p,"aria-valuemin":i,"aria-valuemax":l,"aria-valuenow":r,"aria-valuetext":R,tabIndex:h?-1:0,style:{cursor:h?"default":"ns-resize",outline:m?"1px solid var(--accent)":"none",borderRadius:8},children:[a.jsx("circle",{cx:F,cy:A,r:M,fill:"#0f1217",stroke:"#2a3040"}),a.jsx("circle",{cx:F,cy:A,r:M-8,fill:"#161a22",stroke:"#202635"}),a.jsx("circle",{cx:xe,cy:be,r:2.4,fill:"#3dd973",stroke:"#12161f",strokeWidth:.8}),a.jsx("line",{x1:F,y1:A,x2:H,y2:L,stroke:"var(--accent)",strokeWidth:3,strokeLinecap:"round"})]}),(p||g)&&a.jsxs("div",{className:"knob-legend",children:[p?a.jsx("span",{className:"label",children:p}):null,g?a.jsx("span",{className:"value",children:R}):null]})]})}function fi(r,i){const l=1/i;return Math.round(r*l)/l}function jp(r){return Math.abs(r)>=100?r.toFixed(0):Math.abs(r)>=10?r.toFixed(1):r.toFixed(2)}const Mp=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],cr=10,Ep=Array.from({length:61},(r,i)=>{const l=36+i,u=Mp[l%12],d=Math.floor(l/12)-1;return{midi:l,label:`${u}${d}`}}),Cp=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`sample-${Date.now()}-${Math.random().toString(16).slice(2)}`,Cu=(r,i)=>{const l=(r??"").trim();return l?l.slice(0,cr):i},bp=()=>`REC-${Math.floor(Date.now()%1e6).toString(36).toUpperCase().padStart(4,"0")}`.slice(0,cr),Np=r=>{const l=r.replace(/\.[^/.]+$/,"").replace(/[^A-Za-z0-9_-]/g,"").toUpperCase();return l?l.slice(0,cr):"SAMPLE"},Pp=r=>{const i={...St,...r??{}},l=typeof i.durationSec=="number"&&i.durationSec>0?i.durationSec:0;if(l===0)return{...i,durationSec:0,trimStartSec:0,trimEndSec:0};const u=.005,d=Math.max(0,l-u),p=Number(i.trimStartSec),v=Math.min(Math.max(Number.isFinite(p)?p:0,0),d),w=Number(i.trimEndSec);let h=Number.isFinite(w)?w:l;return h-v<u&&(h=l),h=Math.min(Math.max(h,v+u),l),{...i,durationSec:l,trimStartSec:v,trimEndSec:h}},fo=r=>{const i=Math.max(0,r),l=Math.floor(i/60),u=Math.floor(i%60);return`${String(l).padStart(2,"0")}:${String(u).padStart(2,"0")}`};function Tp({oscillator:r="osc1"}){const i=ne(W=>W.patch[r].sampler),l=ne(W=>W.samplerLibrary),u=ne(W=>W.saveSamplerSample),d=ne(W=>W.deleteSamplerSample),p=ne(W=>W.setSamplerFromLibrary),v=ne(W=>W.updateCurrentSampler),w=ne(W=>W.renameSamplerSample),h=ne(W=>W.playSamplerPreview),[g,m]=V.useState(null),[x,y]=V.useState(!1),[C,k]=V.useState(!1),[P,T]=V.useState(0),[R,z]=V.useState(!1),Z=V.useRef(null),ee=V.useRef(null),Q=V.useRef(null),M=V.useRef([]),F=V.useRef(null),A=V.useRef(null),X=V.useRef(null),[xe,be]=V.useState(null),[H,L]=V.useState(""),$=V.useMemo(()=>typeof window<"u"?typeof window.MediaRecorder<"u":!1,[])&&typeof navigator<"u"&&!!navigator.mediaDevices?.getUserMedia,ie=V.useCallback(()=>{Q.current&&(Q.current.getTracks().forEach(W=>{try{W.stop()}catch{}}),Q.current=null),ee.current=null},[]),pe=V.useCallback(async()=>{if(typeof window>"u")return null;if(!X.current)try{X.current=new AudioContext}catch(he){return m(he instanceof Error?he.message:"Unable to create AudioContext"),null}const W=X.current;if(W&&W.state==="suspended")try{await W.resume()}catch{}return W},[]),K=V.useCallback(async W=>{const he=await pe();if(!he)return null;try{const ge=await(await fetch(W)).arrayBuffer();return(await he.decodeAudioData(ge.slice(0))).duration}catch(ke){return m(ke instanceof Error?ke.message:"Unable to decode audio"),null}},[pe]),te=Pp(i),Y=V.useCallback(async(W,he)=>{y(!0),m(null);try{const ke=await K(W);if(ke==null)return;const ge=ke>0?ke:0,Ne={id:Cp(),name:Cu(he,"SAMPLE"),dataUrl:W,recordedAt:Date.now(),durationSec:ge,trimStartSec:0,trimEndSec:ge,loop:te.loop,rootMidi:te.rootMidi};u(r,Ne)}finally{y(!1)}},[r,te.loop,te.rootMidi,K,u]),b=V.useCallback((W,he)=>{const ke=new FileReader;ke.onloadend=()=>{const ge=ke.result;typeof ge=="string"?Y(ge,he):m("Unable to read recording data")},ke.onerror=()=>{m("Failed to read recorded audio")},ke.readAsDataURL(W)},[Y]),D=V.useCallback(()=>{const W=ee.current;if(W&&W.state!=="inactive"){try{W.stop()}catch{}k(!1),F.current=null}},[]),ye=async()=>{if(!(!$||C||x)){m(null);try{const W=await navigator.mediaDevices.getUserMedia({audio:!0}),he=window.MediaRecorder,ke=new he(W);M.current=[],ke.ondataavailable=ge=>{ge.data&&ge.data.size>0&&M.current.push(ge.data)},ke.onerror=ge=>{const Ne=ge?.error?.message??"Recording error";m(Ne),D()},ke.onstop=()=>{k(!1);const ge=new Blob(M.current,{type:M.current[0]?.type||"audio/webm"});M.current=[],ie(),ge.size>0&&b(ge,bp())},ke.start(),ee.current=ke,Q.current=W,k(!0),F.current=performance.now(),T(0),z(!0)}catch(W){ie(),k(!1),F.current=null,m(W instanceof Error?W.message:"Microphone access denied")}}},ve=V.useCallback(W=>{const he=new FileReader;he.onloadend=()=>{const ke=he.result;typeof ke=="string"?Y(ke,Np(W.name)):m("Unable to read file")},he.onerror=()=>m("Unable to load file"),he.readAsDataURL(W)},[Y]),Se=W=>{const he=W.target.files?.[0];he&&ve(he),W.target&&(W.target.value="")};V.useEffect(()=>()=>{D(),ie()},[ie,D]),V.useEffect(()=>(C?(A.current!=null&&window.clearInterval(A.current),A.current=window.setInterval(()=>{if(F.current!=null){const W=(performance.now()-F.current)/1e3;T(W),z(he=>!he)}},500)):(A.current!=null&&(window.clearInterval(A.current),A.current=null),T(0),z(!1)),()=>{A.current!=null&&(window.clearInterval(A.current),A.current=null)}),[C]);const ue=te.durationSec??0,we=!!te.dataUrl&&ue>0,je=te.trimStartSec??0,Pe=te.trimEndSec??ue,ce=W=>{if(!we)return;const he=Math.max(0,Math.min(W,ue)),ge=Math.max(he+.005,Pe);v(r,{trimStartSec:he,trimEndSec:Math.min(ge,ue)})},qe=W=>{if(!we)return;const he=Math.max(0,Math.min(W,ue)),ke=.005,ge=Math.min(je,he-ke),Ne=Math.max(0,Math.min(ge,ue)),_e=Math.min(ue,Math.max(he,ke));v(r,{trimStartSec:Math.max(Ne,0),trimEndSec:_e})},Ve=V.useCallback(W=>{if(typeof window>"u"||!W.dataUrl)return;const he=document.createElement("a");he.href=W.dataUrl;const ke=W.dataUrl.split(";")[0]?.split(":")[1]??"audio/webm",ge=ke.includes("/")?ke.split("/")[1]:"webm",Ne=(W.name||"sample").replace(/[^a-z0-9_\-]+/gi,"_");he.download=`${Ne}.${ge}`,document.body.appendChild(he),he.click(),document.body.removeChild(he)},[]),Xe=V.useCallback(()=>{if(typeof window>"u"||l.length===0)return;const W=JSON.stringify(l.map(Ne=>({...Ne,recordedAt:Ne.recordedAt??null})),null,2),he=new Blob([W],{type:"application/json"}),ke=URL.createObjectURL(he),ge=document.createElement("a");ge.href=ke,ge.download=`sampler-library-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(ke)},[l]),dt=V.useCallback(()=>{be(null),L("")},[]),It=V.useCallback(()=>{if(!xe)return;const W=H.trim();W&&(w(xe,Cu(W,"SAMPLE")),be(null),L(""))},[xe,H,w]);return a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,padding:"0 0 8px"},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[a.jsx("div",{className:"label",children:"Sampler"}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[a.jsx("button",{type:"button",onClick:()=>Z.current?.click(),disabled:x,children:x?"Loading...":"Load Sample"}),a.jsx("button",{type:"button",onClick:()=>h(r),disabled:!te.dataUrl||x,children:"Play"}),a.jsx("button",{type:"button",onClick:C?D:ye,disabled:!$||x,children:C?"Stop Recording":"Record"}),a.jsx("button",{type:"button",onClick:()=>{v(r,{id:null,name:St.name,dataUrl:null,recordedAt:void 0,durationSec:0,trimStartSec:0,trimEndSec:0,loop:St.loop,rootMidi:St.rootMidi}),m(null)},disabled:!te.dataUrl,children:"Clear"})]}),a.jsx("input",{ref:Z,type:"file",accept:"audio/*",style:{display:"none"},onChange:Se,disabled:x})]}),C&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:R?"#ff4d4f":"#ffb3b8",boxShadow:R?"0 0 8px rgba(255,77,79,0.8)":"none",transition:"background-color 0.2s linear, box-shadow 0.2s linear"}}),a.jsxs("span",{style:{fontFamily:"monospace",fontSize:12},children:["Recording ",fo(P)]})]}),a.jsxs("div",{style:{fontSize:12,color:"var(--muted)",display:"flex",flexWrap:"wrap",gap:8},children:[a.jsxs("span",{children:[a.jsx("span",{className:"label",style:{marginRight:4},children:"Current"}),a.jsx("span",{style:{maxWidth:`${cr}ch`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"bottom"},title:te.dataUrl?te.name:void 0,children:te.dataUrl?te.name:"No sample loaded"})]}),we&&a.jsxs("span",{children:["Length ",fo(ue),"  Window ",fo(Pe-je)]}),!$&&a.jsx("span",{children:"(Recording unsupported in this browser)"})]}),g&&a.jsx("div",{style:{color:"var(--danger, #d14343)",fontSize:12},children:g}),a.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",alignItems:"center"},children:[a.jsxs("label",{children:[a.jsx("span",{className:"label",children:"Root Note"}),a.jsx("select",{value:te.rootMidi,onChange:W=>v(r,{rootMidi:Number(W.target.value)}),children:Ep.map(W=>a.jsx("option",{value:W.midi,children:W.label},W.midi))})]}),a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:!!te.loop,onChange:W=>v(r,{loop:W.target.checked})}),"Loop playback"]})]}),we&&a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[a.jsx("div",{className:"label",children:"Trim"}),a.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:[a.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:4},children:[a.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:["Start ",Math.round(je*1e3)," ms"]}),a.jsx("input",{type:"range",min:0,max:Math.max(ue*1e3,5),step:5,value:Math.round(je*1e3),onChange:W=>ce(Number(W.target.value)/1e3)})]}),a.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:4},children:[a.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:["End ",Math.round(Pe*1e3)," ms"]}),a.jsx("input",{type:"range",min:5,max:Math.max(ue*1e3,5),step:5,value:Math.round(Pe*1e3),onChange:W=>qe(Number(W.target.value)/1e3)})]})]})]}),l.length>0&&a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[a.jsx("div",{className:"label",children:"Library"}),a.jsx("button",{type:"button",onClick:Xe,style:{fontSize:12},children:"Export Library"})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:l.map(W=>{if(!W.id)return null;const he=W.id===te.id,ke=xe===W.id;return a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 8px",borderRadius:6,background:he?"rgba(255, 77, 79, 0.1)":"rgba(255,255,255,0.04)"},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:160},children:[ke?a.jsx("input",{value:H,onChange:ge=>L(ge.target.value),onKeyDown:ge=>{ge.key==="Enter"&&(ge.preventDefault(),It()),ge.key==="Escape"&&(ge.preventDefault(),dt())},autoFocus:!0,maxLength:cr}):a.jsx("span",{style:{fontWeight:600,maxWidth:`${cr}ch`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:W.name||"Sample",children:W.name||"Sample"}),a.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:[fo(W.durationSec??0)," ",he?" Active":""]})]}),a.jsx("div",{style:{display:"flex",gap:8},children:ke?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:It,disabled:!H.trim(),children:"Save"}),a.jsx("button",{type:"button",onClick:dt,children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>p(r,W.id),disabled:he,children:he?"In Use":"Use"}),a.jsx("button",{type:"button",onClick:()=>{be(W.id),L(W.name||"")},children:"Rename"}),a.jsx("button",{type:"button",onClick:()=>Ve(W),disabled:!W.dataUrl,children:"Export"}),a.jsx("button",{type:"button",onClick:()=>d(W.id),style:{color:"var(--danger, #d14343)"},children:"Delete"})]})})]},W.id)})})]})]})}const _p=[{value:"analog",label:"Analog"},{value:"macro",label:"Macro"},{value:"sampler",label:"Sampler"}],Lp=[{value:"sine",label:"Sine"},{value:"square",label:"Square"},{value:"sawtooth",label:"Saw"},{value:"triangle",label:"Triangle"},{value:"noise",label:"Noise"}],Op={osc1:"ENG1",osc2:"ENG2"};function Rp(){const r=ne(m=>m.patch),i=ne(m=>m.updatePatch),l=He.useCallback((m,x)=>{i({[m]:x})},[i]),u=He.useCallback((m,x)=>{l(m,{mode:x})},[l]),d=He.useCallback((m,x)=>{const y=r[m].macro??Rt;l(m,{macro:{...y,...x}})},[r,l]),p=m=>{const x=r[m],y=x.mode??"analog",C=x.macro??Rt;return a.jsxs("div",{className:"osc-section",style:{display:"grid",gap:12},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[a.jsx("h4",{className:"settings-heading",style:{margin:0},children:Op[m]}),a.jsx("select",{value:y,onChange:k=>u(m,k.target.value),children:_p.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))})]}),y==="analog"&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{children:[a.jsx("div",{className:"label",children:"Wave"}),a.jsx("select",{value:x.wave??"sawtooth",onChange:k=>l(m,{wave:k.target.value}),children:Lp.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))})]}),a.jsxs("div",{className:"osc-knob-row",children:[a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Octave",min:-2,max:2,step:1,value:x.octave??0,onChange:k=>l(m,{octave:Math.round(k)}),formatValue:k=>`${Math.round(k)}`})}),a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Detune",min:-1200,max:1200,step:1,value:x.detune,onChange:k=>l(m,{detune:k}),formatValue:k=>`${Math.round(k)}`})}),a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Fine",min:-10,max:10,step:.1,value:x.detuneFine??0,onChange:k=>l(m,{detuneFine:Number(k.toFixed(1))}),formatValue:k=>`${k.toFixed(1)}`})})]})]}),y==="macro"&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{children:[a.jsx("div",{className:"label",children:"Model"}),a.jsx("select",{value:C.model??"va",onChange:k=>d(m,{model:k.target.value}),children:["va","fold","pluck","supersaw","pwm","fm2op","wavetable","harmonic","chord","dirichlet","formant"].map(k=>a.jsx("option",{value:k,children:k.toUpperCase()},k))})]}),a.jsxs("div",{className:"osc-knob-row",children:[a.jsx(Te,{label:"Harmonics",min:0,max:1,step:.001,value:C.harmonics??.6,onChange:k=>d(m,{harmonics:k})}),a.jsx(Te,{label:"Timbre",min:0,max:1,step:.001,value:C.timbre??.5,onChange:k=>d(m,{timbre:k})}),a.jsx(Te,{label:"Morph",min:0,max:1,step:.001,value:C.morph??.5,onChange:k=>d(m,{morph:k})}),a.jsx(Te,{label:"Level",min:0,max:1,step:.001,value:C.level??1,onChange:k=>d(m,{level:k})})]})]}),y==="sampler"&&a.jsx(Tp,{oscillator:m})]},m)},v=r.osc1.mode??"analog",w=r.osc2.mode??"analog",h=v==="analog"&&w==="analog",g=h;return a.jsxs("div",{style:{display:"grid",gap:16},children:[a.jsx("div",{className:"controls-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:16},children:["osc1","osc2"].map(p)}),a.jsxs("div",{className:"osc-knob-row",style:{justifyContent:"flex-start"},children:[a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Mix",min:0,max:1,step:.01,value:r.mix,onChange:m=>i({mix:m}),formatValue:m=>`${Math.round(m*100)}%`})}),a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,minWidth:120,opacity:h?1:.5},children:[a.jsx("input",{type:"checkbox",checked:r.fm.enabled&&h,disabled:!h,onChange:m=>i({fm:{...r.fm,enabled:m.target.checked}})}),a.jsx("span",{className:"label",children:"FM"})]}),a.jsx(Te,{label:"Ratio",min:.1,max:8,step:.1,value:r.fm.ratio,onChange:m=>i({fm:{...r.fm,ratio:m}}),disabled:!h||!r.fm.enabled}),a.jsx(Te,{label:"Amount (Hz)",min:0,max:1e3,step:1,value:r.fm.amount,onChange:m=>i({fm:{...r.fm,amount:m}}),disabled:!h||!r.fm.enabled}),a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,minWidth:120,opacity:g?1:.5},children:[a.jsx("input",{type:"checkbox",checked:r.ring.enabled&&g,disabled:!g,onChange:m=>i({ring:{...r.ring,enabled:m.target.checked}})}),a.jsx("span",{className:"label",children:"Ring"})]}),a.jsx(Te,{label:"Amount",min:0,max:1,step:.01,value:r.ring.amount,onChange:m=>i({ring:{...r.ring,amount:m}}),disabled:!g||!r.ring.enabled})]})]})}function Ip(){const r=ne(d=>d.patch),i=ne(d=>d.updatePatch),l=d=>{i({filter:{...r.filter,...d}})},u=r.master.gain;return a.jsxs("div",{className:"filter-panel",children:[a.jsxs("label",{className:"filter-type",children:[a.jsx("span",{className:"label",children:"Filter Type"}),a.jsxs("select",{value:r.filter.type,onChange:d=>l({type:d.target.value}),children:[a.jsx("option",{value:"lowpass",children:"Low-pass"}),a.jsx("option",{value:"highpass",children:"High-pass"}),a.jsx("option",{value:"bandpass",children:"Band-pass"}),a.jsx("option",{value:"notch",children:"Notch"})]})]}),a.jsxs("div",{className:"filter-knobs",children:[a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Cutoff",min:40,max:8e3,step:10,value:r.filter.cutoff,onChange:d=>l({cutoff:d}),formatValue:d=>`${Math.round(d)} Hz`})}),a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Resonance",min:0,max:10,step:.1,value:r.filter.q,onChange:d=>l({q:d}),formatValue:d=>d.toFixed(2)})}),a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Master",min:0,max:1,step:.01,value:u,onChange:d=>i({master:{...r.master,gain:d}}),formatValue:d=>d.toFixed(2)})})]})]})}function Fp(){const r=ne(u=>u.patch),i=ne(u=>u.updatePatch),l=r.envelope;return a.jsx("div",{className:"envelope-panel",children:a.jsxs("div",{className:"envelope-knobs",children:[a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Attack",min:0,max:2,step:.01,value:l.attack,onChange:u=>i({envelope:{...l,attack:u}})})}),a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Decay",min:0,max:2,step:.01,value:l.decay,onChange:u=>i({envelope:{...l,decay:u}})})}),a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Sustain",min:0,max:1,step:.01,value:l.sustain,onChange:u=>i({envelope:{...l,sustain:u}})})}),a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Release",min:0,max:3,step:.01,value:l.release,onChange:u=>i({envelope:{...l,release:u}})})})]})})}const zp=[0,2,4,5,7,9,11],Ap={0:1,1:3,2:null,3:6,4:8,5:10,6:null};function Dp(r,i=60){const l=Math.floor(r/7),u=zp[r%7];return i+l*12+u}function qp(r,i=60){const l=Math.floor(r/7),u=Ap[r%7];return u==null?null:i+l*12+u}const gi={a:0,w:1,s:2,e:3,d:4,f:5,t:6,g:7,y:8,h:9,u:10,j:11,k:12,o:13,l:14,p:15,";":16,"'":17},bu=Object.fromEntries(Object.entries(gi).map(([r,i])=>[i,r.length===1?r.toUpperCase():r]));function Bp(){const r=ne(Q=>Q.engine),i=ne(Q=>Q.midi.activeNotes),[l,u]=V.useState(()=>new Set),[d,p]=V.useState(60),v=V.useRef(new Map),w=V.useRef(l);V.useEffect(()=>{w.current=l},[l]);const h=V.useMemo(()=>{const Q=new Set(l);for(const M of i)Q.add(M);return Q},[l,i]),g=Q=>{r?.noteOn(Q),u(M=>new Set(M).add(Q))},m=Q=>{r?.noteOff(Q),u(M=>{const F=new Set(M);return F.delete(Q),F})};V.useEffect(()=>{const Q=new Set,M=L=>L.length===1?L.toLowerCase():L,F=L=>{if(!(L instanceof HTMLElement))return!1;if(L.isContentEditable)return!0;const B=L.tagName;return B==="INPUT"||B==="TEXTAREA"||B==="SELECT"},A=()=>{const L=new Set;v.current.forEach(B=>{L.has(B)||(r&&r.noteOff(B),L.add(B))}),v.current.clear(),w.current.forEach(B=>{L.has(B)||(r&&r.noteOff(B),L.add(B))}),(L.size>0||w.current.size>0)&&(u(new Set),w.current=new Set),Q.clear()},X=L=>{if(L.repeat)return;const B=M(L.key);if(F(L.target))return;if(B==="z"){p(pe=>Math.max(24,pe-12));return}if(B==="x"){p(pe=>Math.min(96,pe+12));return}const $=gi[B],ie=$!=null?d+$:void 0;ie!=null&&!Q.has(B)&&(L.preventDefault(),L.stopPropagation(),Q.add(B),g(ie))},xe=L=>{const B=M(L.key),$=gi[B],ie=$!=null?d+$:void 0;ie!=null&&(Q.delete(B),m(ie))},be=()=>{A()},H=()=>{document.visibilityState==="hidden"&&A()};return window.addEventListener("keydown",X),window.addEventListener("keyup",xe),window.addEventListener("blur",be),document.addEventListener("visibilitychange",H),()=>{window.removeEventListener("keydown",X),window.removeEventListener("keyup",xe),window.removeEventListener("blur",be),document.removeEventListener("visibilitychange",H),A()}},[r,d]);const x=14,y=V.useMemo(()=>Array.from({length:x},(Q,M)=>Dp(M,d)),[x,d]),C=28,P=C+2,T=Math.floor(d/12)-1,R=T-4,z=(Q,M)=>{Q.currentTarget.setPointerCapture(Q.pointerId),Q.preventDefault(),v.current.set(Q.pointerId,M),g(M)},Z=Q=>{if(!v.current.has(Q.pointerId))return;const M=v.current.get(Q.pointerId),A=document.elementFromPoint(Q.clientX,Q.clientY)?.dataset?.midi,X=A!=null?Number(A):void 0;if(X==null){M!=null&&(m(M),v.current.delete(Q.pointerId));return}X!==M&&(M!=null&&m(M),v.current.set(Q.pointerId,X),g(X))},ee=Q=>{const M=v.current.get(Q.pointerId);M!=null&&(m(M),v.current.delete(Q.pointerId))};return a.jsxs("div",{className:"keyboard",children:[a.jsx("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between"},children:a.jsxs("div",{className:"octave-indicator",children:[a.jsx("span",{className:"badge",children:"Octave"}),a.jsxs("span",{className:"value",style:{color:R===0?"var(--text)":"var(--accent)"},children:[T," ",R!==0?`(${R>0?"+":""}${R})`:""]})]})}),a.jsxs("div",{className:"keys-and-help",children:[a.jsxs("div",{className:"keys-row",style:{touchAction:"none"},children:[y.map((Q,M)=>a.jsx("div",{className:"key",style:{background:h.has(Q)?"#d1d5db":"#f8fafc"},"data-midi":Q,onPointerDown:F=>z(F,Q),onPointerMove:Z,onPointerUp:ee,onPointerCancel:ee,children:a.jsx("span",{className:"key-label",children:bu[Q-d]??""})},M)),Array.from({length:x}).map((Q,M)=>{const F=qp(M,d);if(F==null)return null;const A=M*P+Math.floor(C*.7);return a.jsx("div",{className:"key black",style:{left:A,background:h.has(F)?"#111827":"#0b0f16"},"data-midi":F,onPointerDown:X=>z(X,F),onPointerMove:Z,onPointerUp:ee,onPointerCancel:ee,children:a.jsx("span",{className:"key-label",children:bu[F-d]??""})},`b-${M}`)})]}),a.jsxs("div",{className:"kbd-help",children:[a.jsx("div",{className:"badge",style:{alignSelf:"flex-start"},children:"Octave shift"}),a.jsxs("button",{className:"kbd-row keyboard-shift-button",onClick:()=>p(Q=>Math.max(24,Q-12)),type:"button",children:[a.jsx("span",{className:"kbd",children:"Z"}),a.jsx("span",{className:"hint-text",children:"Octave Down"})]}),a.jsxs("button",{className:"kbd-row keyboard-shift-button",onClick:()=>p(Q=>Math.min(96,Q+12)),type:"button",children:[a.jsx("span",{className:"kbd",children:"X"}),a.jsx("span",{className:"hint-text",children:"Octave Up"})]})]})]})]})}const Kr={highPct:2,lowPct:2,windowPct:25,holdOff:3,corrRefresh:.5};function Up(){const r=ne(m=>m.engine),i=V.useRef(null),l=V.useRef(),u=V.useRef(0),d=V.useRef(0),p=V.useRef(0),v=V.useRef(0),w=V.useRef(null),h=V.useRef(128),g=ne(m=>m.oscilloscope.fftSize);return V.useEffect(()=>{const m=i.current;if(!m||!r||typeof r.getAnalyser!="function")return;const x=m.getContext("2d"),y=r.getAnalyser();y.fftSize=g,y.smoothingTimeConstant=0;const C=()=>{const k=r.getWaveform,P=typeof k=="function"?k.call(r):new Uint8Array(y.fftSize),T=window.devicePixelRatio||1,R=m.clientWidth||600,z=m.clientHeight||160,Z=Math.floor(R*T),ee=Math.floor(z*T);(m.width!==Z||m.height!==ee)&&(m.width=Z,m.height=ee);const Q=m.width,M=m.height;x.clearRect(0,0,Q,M),x.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--viz-bg")||"#05070b",x.fillRect(0,0,Q,M),x.save(),x.strokeStyle="rgba(255,255,255,0.06)",x.lineWidth=1,x.beginPath(),x.moveTo(0,M/2),x.lineTo(Q,M/2),x.stroke();const F=6;for(let $=1;$<F;$++){const ie=$*Q/F;x.beginPath(),x.moveTo(ie,0),x.lineTo(ie,M),x.stroke()}x.restore();const A=P.length,X=new Float32Array(A);let xe=0;for(let $=0;$<A;$++)xe+=P[$];xe/=A;let be=0;for(let $=0;$<A;$++){const ie=(P[$]-xe)/128;X[$]=ie,be+=ie*ie}let H=u.current||0;if(be>.001){const $=Math.max(.001,Kr.highPct/100),ie=-Math.max(.001,Kr.lowPct/100);let pe=!1;const K=[];for(let ce=1;ce<A;ce++){const qe=X[ce-1],Ve=X[ce];!pe&&qe<ie&&(pe=!0),pe&&qe<$&&Ve>=$&&(K.push(ce),pe=!1)}if(K.length>=2){const ce=[];for(let _e=1;_e<K.length;_e++)ce.push(K[_e]-K[_e-1]);ce.sort((_e,ht)=>_e-ht);const qe=ce[Math.floor(ce.length/2)];let Ve=0,Xe=0;for(const _e of ce)Math.abs(_e-qe)<=.2*qe&&(Ve+=_e,Xe++);const dt=Xe>0?Ve/Xe:qe,It=p.current||dt,W=Math.max(6,Math.min(A,It*.6+dt*.4));p.current=W;const he=((u.current||K[0])+W)%A,ke=Math.max(6,Math.floor(Kr.windowPct/100*W)),ge=[];for(const _e of K)Math.abs(_e-he)<=ke&&ge.push(_e);ge.length===0&&ge.push(Math.round(he));const Ne=Math.max(32,Math.min(256,Math.floor(W)));if(h.current=Ne,!w.current){const _e=new Float32Array(Ne);for(let Ee=0;Ee<Ne;Ee++)_e[Ee]=X[(ge[0]+Ee)%A];let ht=0;for(let Ee=0;Ee<Ne;Ee++)ht+=_e[Ee];ht/=Ne;let Kt=0;for(let Ee=0;Ee<Ne;Ee++)_e[Ee]=_e[Ee]-ht,Kt+=_e[Ee]*_e[Ee];Kt=Math.sqrt(Math.max(Kt,1e-12));for(let Ee=0;Ee<Ne;Ee++)_e[Ee]/=Kt;w.current=_e}{let _e=ge[0],ht=-1/0;const Kt=w.current;for(const Ee of ge){let Ft=0;for(let rt=0;rt<Ne;rt++)Ft+=X[(Ee+rt)%A];Ft/=Ne;let Ct=0,Ie=0;for(let rt=0;rt<Ne;rt++){const En=X[(Ee+rt)%A]-Ft;Ct+=En*En}Ct=Math.sqrt(Math.max(Ct,1e-12));for(let rt=0;rt<Ne;rt++){const En=(X[(Ee+rt)%A]-Ft)/Ct;Ie+=En*Kt[rt]}Ie>ht&&(ht=Ie,_e=Ee)}if(H=_e,ht<Kr.corrRefresh){const Ee=new Float32Array(Ne);for(let Ie=0;Ie<Ne;Ie++)Ee[Ie]=X[(H+Ie)%A];let Ft=0;for(let Ie=0;Ie<Ne;Ie++)Ft+=Ee[Ie];Ft/=Ne;let Ct=0;for(let Ie=0;Ie<Ne;Ie++)Ee[Ie]=Ee[Ie]-Ft,Ct+=Ee[Ie]*Ee[Ie];Ct=Math.sqrt(Math.max(Ct,1e-12));for(let Ie=0;Ie<Ne;Ie++)Ee[Ie]/=Ct;w.current=Ee}}}else if(K.length===1)H=K[0];else{let ce=0,qe=0;for(let Ve=1;Ve<A;Ve++){const Xe=X[Ve]-X[Ve-1];Xe>ce&&(ce=Xe,qe=Ve)}H=qe}const te=u.current||0,Y=p.current||0,b=Y?(te+Y)%A:te,D=Math.abs(H-b);if(Y&&D>.6*Y||v.current>=Kr.holdOff){const ce=Math.round(te*.4+H*.6);u.current=ce,v.current=0}else v.current+=1;let ve=u.current;const Se=12;for(let ce=-Se;ce<=Se;ce++){const qe=(ve+ce+A)%A,Ve=(qe+1)%A,Xe=X[qe],dt=X[Ve];if(Xe<$&&dt>=$){const It=($-Xe)/Math.max(dt-Xe,1e-6);ve=qe+It;break}}d.current=ve;const ue=h.current,we=new Float32Array(ue);for(let ce=0;ce<ue;ce++){const qe=(ve+ce)%A,Ve=Math.floor(qe),Xe=(Ve+1)%A,dt=qe-Ve,It=X[Ve]*(1-dt)+X[Xe]*dt;we[ce]=It}let je=0;for(let ce=0;ce<ue;ce++)je+=we[ce];je/=ue;let Pe=0;for(let ce=0;ce<ue;ce++)we[ce]=we[ce]-je,Pe+=we[ce]*we[ce];Pe=Math.sqrt(Math.max(Pe,1e-12));for(let ce=0;ce<ue;ce++)we[ce]/=Pe;w.current=we}const L=d.current||u.current||0,B=Q/A;x.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--viz-stroke")||"#00ffd5",x.lineWidth=2,x.shadowColor=x.strokeStyle,x.shadowBlur=8,x.beginPath();for(let $=0;$<A;$++){const ie=($+L)%A,pe=Math.floor(ie),K=(pe+1)%A,te=ie-pe,b=((X[pe]*(1-te)+X[K]*te)*.5+.5)*M,D=$*B;$===0?x.moveTo(D,b):x.lineTo(D,b)}x.stroke(),x.shadowBlur=0,l.current=requestAnimationFrame(C)};return l.current=requestAnimationFrame(C),()=>{l.current&&cancelAnimationFrame(l.current)}},[r,g]),a.jsx("div",{children:a.jsx("canvas",{ref:i,width:600,height:300,style:{width:"100%",height:300,borderRadius:8,border:"1px solid #222631"}})})}function Hp(){const r=ne(u=>u.patch),i=ne(u=>u.updatePatch),l=r.effects??{delay:{enabled:!1,time:.25,feedback:.3,mix:.2},reverb:{enabled:!1,size:.5,decay:.5,mix:.25}};return a.jsxs("div",{className:"effects-panel",children:[a.jsxs("div",{className:"effects-row",children:[a.jsx("div",{className:"effects-heading",children:"Delay"}),a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:l.delay.enabled,onChange:u=>i({effects:{...l,delay:{...l.delay,enabled:u.target.checked}}})}),a.jsx("span",{className:"label",children:"Enabled"})]}),a.jsxs("div",{className:"effects-knobs",children:[a.jsx(Te,{label:"Time",min:0,max:1.5,step:.01,value:l.delay.time,onChange:u=>i({effects:{...l,delay:{...l.delay,time:u}}}),disabled:!l.delay.enabled}),a.jsx(Te,{label:"Feedback",min:0,max:.95,step:.01,value:l.delay.feedback,onChange:u=>i({effects:{...l,delay:{...l.delay,feedback:u}}}),disabled:!l.delay.enabled}),a.jsx(Te,{label:"Mix",min:0,max:1,step:.01,value:l.delay.mix,onChange:u=>i({effects:{...l,delay:{...l.delay,mix:u}}}),disabled:!l.delay.enabled})]})]}),a.jsxs("div",{className:"effects-row",style:{marginTop:12},children:[a.jsx("div",{className:"effects-heading",children:"Reverb"}),a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:l.reverb.enabled,onChange:u=>i({effects:{...l,reverb:{...l.reverb,enabled:u.target.checked}}})}),a.jsx("span",{className:"label",children:"Enabled"})]}),a.jsxs("div",{className:"effects-knobs",children:[a.jsx(Te,{label:"Size",min:0,max:1,step:.01,value:l.reverb.size,onChange:u=>i({effects:{...l,reverb:{...l.reverb,size:u}}}),disabled:!l.reverb.enabled}),a.jsx(Te,{label:"Decay",min:0,max:1,step:.01,value:l.reverb.decay,onChange:u=>i({effects:{...l,reverb:{...l.reverb,decay:u}}}),disabled:!l.reverb.enabled}),a.jsx(Te,{label:"Mix",min:0,max:1,step:.01,value:l.reverb.mix,onChange:u=>i({effects:{...l,reverb:{...l.reverb,mix:u}}}),disabled:!l.reverb.enabled})]})]})]})}function Nu({idx:r}){const i=ne(p=>p.patch),l=ne(p=>p.updatePatch),u=r===1?"lfo1":"lfo2",d=i[u]||{enabled:!1,wave:"sine",rateHz:5,amount:.2,dest:"pitch"};return a.jsxs("div",{className:"lfo-row",children:[a.jsxs("label",{className:"lfo-toggle",children:[a.jsx("input",{type:"checkbox",checked:d.enabled,onChange:p=>l({[u]:{...d,enabled:p.target.checked}})}),a.jsxs("span",{className:"label",children:["LFO ",r]})]}),a.jsxs("label",{className:"lfo-select",children:[a.jsx("span",{className:"label",children:"Wave"}),a.jsxs("select",{value:d.wave,onChange:p=>l({[u]:{...d,wave:p.target.value}}),children:[a.jsx("option",{value:"sine",children:"Sine"}),a.jsx("option",{value:"triangle",children:"Triangle"}),a.jsx("option",{value:"square",children:"Square"}),a.jsx("option",{value:"sawtooth",children:"Saw"}),a.jsx("option",{value:"noise",children:"Noise"})]})]}),a.jsxs("label",{className:"lfo-select",children:[a.jsx("span",{className:"label",children:"Dest"}),a.jsxs("select",{value:d.dest,onChange:p=>l({[u]:{...d,dest:p.target.value}}),children:[a.jsx("option",{value:"pitch",children:"Pitch"}),a.jsx("option",{value:"filter",children:"Filter"}),a.jsx("option",{value:"amp",children:"Amp"})]})]}),a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Rate",min:.01,max:20,step:.01,value:d.rateHz,onChange:p=>l({[u]:{...d,rateHz:p}}),disabled:!d.enabled,formatValue:p=>`${p.toFixed(2)} Hz`})}),a.jsx("div",{className:"knob-group",children:a.jsx(Te,{label:"Amount",min:0,max:1,step:.01,value:d.amount,onChange:p=>l({[u]:{...d,amount:p}}),disabled:!d.enabled,formatValue:p=>`${Math.round(p*100)}%`})})]})}function Wp(){return a.jsxs("div",{style:{display:"grid",gap:12},children:[a.jsx(Nu,{idx:1}),a.jsx(Nu,{idx:2})]})}function Vp(){const r=ne(y=>y.patch),i=ne(y=>y.updatePatch),l=ne(y=>y.engine),u=ne(y=>y.transport.tempo),d=ne(y=>y.setTempo),p=r.arp??I.arp,v=r.sequencer??I.sequencer,[w,h]=He.useState({enabled:!1,stepIndex:0,length:0}),g=y=>{i({arp:{...p,...y}})},m=p.chordSource??"preset",x=He.useMemo(()=>{const y=v.steps??[],C=Math.max(1,Math.min(y.length,v.length)),k=new Set;for(let P=0;P<C;P++){const T=y[P];T?.on&&k.add(Math.round(T.offset??0))}return k.size},[v]);return He.useEffect(()=>{if(!l)return;const y=setInterval(()=>{const C=l.getArpStatus?.();C&&h(C)},120);return()=>clearInterval(y)},[l]),a.jsxs("div",{className:"controls-grid",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:p.enabled,onChange:y=>i({arp:{...p,enabled:y.target.checked}})}),a.jsx("span",{className:"label",children:"Enabled"})]}),a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:p.latch||!1,onChange:y=>i({arp:{...p,latch:y.target.checked}}),disabled:!p.enabled}),a.jsx("span",{className:"label",children:"Latch"})]}),a.jsx("button",{onClick:()=>l?.arpClear(),disabled:!p.enabled,style:{justifySelf:"start",alignSelf:"end",padding:"6px 10px",fontSize:12,borderRadius:6,background:"transparent",border:"1px solid var(--border, #2a3040)",color:"var(--text)"},children:"Clear"}),a.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:12,alignItems:"end"},children:[a.jsxs("label",{children:[a.jsx("div",{className:"label",children:"Mode"}),a.jsxs("select",{value:p.mode,onChange:y=>i({arp:{...p,mode:y.target.value}}),disabled:!p.enabled,children:[a.jsx("option",{value:"up",children:"Up"}),a.jsx("option",{value:"down",children:"Down"}),a.jsx("option",{value:"updown",children:"Up-Down"}),a.jsx("option",{value:"random",children:"Random"}),a.jsx("option",{value:"asplayed",children:"As Played"})]})]}),a.jsxs("label",{children:[a.jsx("div",{className:"label",children:"Octaves"}),a.jsxs("select",{value:p.octaves,onChange:y=>i({arp:{...p,octaves:Number(y.target.value)}}),disabled:!p.enabled,children:[a.jsx("option",{value:1,children:"1"}),a.jsx("option",{value:2,children:"2"}),a.jsx("option",{value:3,children:"3"}),a.jsx("option",{value:4,children:"4"})]})]}),a.jsxs("label",{children:[a.jsx("div",{className:"label",children:"Chord"}),a.jsxs("select",{value:m==="sequencer"?"sequencer":p.chord??"none",onChange:y=>{const C=y.target.value;g(C==="sequencer"?{chordSource:"sequencer"}:{chordSource:"preset",chord:C})},disabled:!p.enabled,children:[a.jsx("option",{value:"none",children:"Single"}),a.jsx("option",{value:"power",children:"Power (5th)"}),a.jsx("option",{value:"major",children:"Major Triad"}),a.jsx("option",{value:"minor",children:"Minor Triad"}),a.jsx("option",{value:"sus2",children:"Sus2"}),a.jsx("option",{value:"sus4",children:"Sus4"}),a.jsx("option",{value:"maj7",children:"Major 7th"}),a.jsx("option",{value:"min7",children:"Minor 7th"}),a.jsx("option",{value:"sequencer",children:"Sequencer Pattern"})]})]}),a.jsxs("label",{children:[a.jsx("div",{className:"label",children:"Division"}),a.jsxs("select",{value:p.division,onChange:y=>g({division:y.target.value}),disabled:!p.enabled,children:[a.jsx("option",{value:"1/4",children:"1/4"}),a.jsx("option",{value:"1/8",children:"1/8"}),a.jsx("option",{value:"1/8T",children:"1/8T"}),a.jsx("option",{value:"1/16",children:"1/16"}),a.jsx("option",{value:"1/16T",children:"1/16T"})]})]})]}),m==="sequencer"&&a.jsxs("div",{className:"hint-text",style:{gridColumn:"1 / -1",fontSize:12,opacity:.8,alignSelf:"start"},children:["Sequencer pattern",x>0?`  ${x} interval${x===1?"":"s"}`:"  no active steps yet"]}),a.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:20,alignItems:"center",justifyContent:"flex-start",padding:"6px 0"},children:[a.jsx(Te,{label:"Tempo",min:40,max:240,step:1,value:u,onChange:y=>{d(y),g({bpm:y,bpmSync:!0})},disabled:!p.enabled}),a.jsx(Te,{label:"Gate",min:.05,max:1,step:.01,value:p.gate,onChange:y=>i({arp:{...p,gate:y}}),disabled:!p.enabled}),a.jsx(Te,{label:"Swing",min:0,max:.75,step:.01,value:p.swingPct??0,onChange:y=>i({arp:{...p,swingPct:y}}),disabled:!p.enabled||!p.bpmSync})]}),a.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[a.jsxs("label",{children:[a.jsx("div",{className:"label",children:"Repeats"}),a.jsx("select",{value:p.repeats??1,onChange:y=>i({arp:{...p,repeats:Number(y.target.value)}}),disabled:!p.enabled,children:[1,2,3,4].map(y=>a.jsxs("option",{value:y,children:[y,"x"]},y))})]}),a.jsxs("label",{children:[a.jsx("div",{className:"label",children:"Length"}),a.jsxs("select",{value:p.patternLen??0,onChange:y=>i({arp:{...p,patternLen:Number(y.target.value)}}),disabled:!p.enabled,children:[a.jsx("option",{value:0,children:"Auto"}),Array.from({length:16},(y,C)=>C+1).map(y=>a.jsx("option",{value:y,children:y},y))]})]})]})]})}function $p(){const r=ne(M=>M.patch),i=ne(M=>M.updatePatch),l=ne(M=>M.engine),u=ne(M=>M.transport.tempo),d=ne(M=>M.transport.playing),p=ne(M=>M.transport.tick),v=ne(M=>M.setTempo),w=ne(M=>M.setTransportPlaying),h=r.sequencer??I.sequencer,g=M=>{const F=r.sequencer??I.sequencer;i({sequencer:{...F,...M}})},m=h.steps||[],x=Math.max(1,Math.min(m.length,h.length)),[y,C]=He.useState({enabled:!1,stepIndex:0,length:0});He.useEffect(()=>{if(!l)return;const M=setInterval(()=>{const F=l.getSequencerStatus?.();F&&C(F)},100);return()=>clearInterval(M)},[l]);const k=(M,F)=>{const A=m.slice();A[M]={...A[M],...F},g({steps:A})},P={a:0,w:1,s:2,e:3,d:4,f:5,t:6,g:7,y:8,h:9,u:10,j:11,k:12,o:13,l:14,p:15,";":16,"'":17},T=He.useRef(null),[R,z]=He.useState(0),[Z,ee]=He.useState(!1);He.useEffect(()=>{z(M=>Math.min(Math.max(0,M),x-1))},[x]),He.useEffect(()=>{Z&&T.current?.focus()},[Z]),He.useEffect(()=>{h.enabled&&h.bpm!==u&&g({bpm:u})},[u]),He.useEffect(()=>{h.enabled&&h.playing!==d&&g({playing:d})},[d,h.playing,h.enabled]);const Q=M=>{if(!Z||!h.enabled)return;const F=M.key,A=F.length===1?F.toLowerCase():F;if(A in P){M.preventDefault();const X=P[A];k(R,{on:!0,offset:X}),z(xe=>(xe+1)%x);return}F==="ArrowRight"?(M.preventDefault(),z(X=>(X+1)%x)):F==="ArrowLeft"?(M.preventDefault(),z(X=>(X-1+x)%x)):F==="ArrowUp"?(M.preventDefault(),k(R,{on:!0,offset:Math.min(24,(m[R]?.offset||0)+1)})):F==="ArrowDown"?(M.preventDefault(),k(R,{on:!0,offset:Math.max(-24,(m[R]?.offset||0)-1)})):F==="Enter"?(M.preventDefault(),k(R,{on:!m[R]?.on})):F==="Backspace"||F==="Delete"?(M.preventDefault(),k(R,{on:!1})):F==="+"||F==="="?(M.preventDefault(),k(R,{on:!0,offset:Math.min(24,(m[R]?.offset||0)+1)})):F==="-"||F==="_"?(M.preventDefault(),k(R,{on:!0,offset:Math.max(-24,(m[R]?.offset||0)-1)})):A==="z"?(M.preventDefault(),g({rootMidi:Math.max(24,h.rootMidi-12)})):A==="x"?(M.preventDefault(),g({rootMidi:Math.min(96,h.rootMidi+12)})):F===" "&&(M.preventDefault(),w(!d))};return a.jsxs("div",{className:"sequence-panel",children:[a.jsxs("div",{className:"sequence-controls",children:[a.jsx("button",{className:"play-button",onClick:()=>w(!d),disabled:!h.enabled,children:d?"Stop":"Play"}),a.jsxs("label",{className:"sequence-toggle",children:[a.jsx("input",{type:"checkbox",checked:h.enabled,onChange:M=>g({enabled:M.target.checked})}),a.jsx("span",{children:"Enabled"})]}),a.jsxs("label",{className:"sequence-toggle",children:[a.jsx("span",{children:"Division"}),a.jsxs("select",{value:h.division,onChange:M=>g({division:M.target.value}),disabled:!h.enabled,children:[a.jsx("option",{value:"1/4",children:"1/4"}),a.jsx("option",{value:"1/8",children:"1/8"}),a.jsx("option",{value:"1/8T",children:"1/8T"}),a.jsx("option",{value:"1/16",children:"1/16"}),a.jsx("option",{value:"1/16T",children:"1/16T"})]})]})]}),a.jsx("div",{className:"sequence-body",children:a.jsxs("div",{className:"controls-grid",style:{gridTemplateColumns:"repeat(5, 1fr)"},children:[a.jsxs("label",{children:[a.jsx("div",{className:"label",children:"Length"}),a.jsx("select",{value:h.length,onChange:M=>g({length:Number(M.target.value)}),disabled:!h.enabled,children:Array.from({length:m.length},(M,F)=>F+1).map(M=>a.jsx("option",{value:M,children:M},M))})]}),a.jsx(Te,{label:"Tempo",min:40,max:240,step:1,value:u,onChange:M=>{v(M),g({bpm:M})},disabled:!h.enabled}),a.jsx(Te,{label:"Gate",min:.05,max:1,step:.01,value:h.gate,onChange:M=>g({gate:M}),disabled:!h.enabled}),a.jsx(Te,{label:"Swing",min:0,max:.75,step:.01,value:h.swingPct??0,onChange:M=>g({swingPct:M}),disabled:!h.enabled||h.division.endsWith("T")||h.division==="1/4"}),a.jsx(Te,{label:"Root",min:36,max:84,step:1,value:h.rootMidi,onChange:M=>g({rootMidi:M}),disabled:!h.enabled}),a.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:12,alignItems:"center"},children:[a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Z,onChange:M=>ee(M.target.checked)}),a.jsx("span",{className:"label",children:"Edit Notes (Keyboard)"})]}),a.jsx("div",{className:"hint-text",style:{opacity:.8},children:"Keys: A/W/S... set notes  Arrows move  Z/X root 1 oct  Space play/pause  +/- semitone  Backspace clear"})]}),a.jsx("div",{ref:T,tabIndex:0,onKeyDown:Q,style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"repeat(16, 1fr)",gap:6,outline:Z?"1px dashed #2a3040":"none",borderRadius:6,padding:2},children:m.map((M,F)=>{const A=F<x,X=M.on&&A,xe=x>0?p%x:0,be=y.enabled&&d&&A&&xe===F;return a.jsx("div",{onClick:H=>{H.altKey?k(F,{offset:Math.max(-24,Math.min(24,(M.offset||0)+1))}):k(F,{on:!M.on}),z(F)},onContextMenu:H=>{H.preventDefault(),k(F,{offset:Math.max(-24,Math.min(24,(M.offset||0)-1))})},title:`Step ${F+1}${M.offset?`, ${M.offset>0?"+":""}${M.offset}`:""}`,style:{height:44,borderRadius:6,border:`1px solid ${be||F===R&&Z?"var(--accent)":"#2a3040"}`,background:X?be?"var(--accent)":"#1d2432":"#0f1217",color:X?be?"#0f1217":"var(--text)":"#556",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none"},children:a.jsx("span",{style:{fontSize:11,opacity:.9},children:M.offset===0?"0":M.offset>0?`+${M.offset}`:`${M.offset}`})},F)})})]})})]})}const yi=[{id:"filter.cutoff",label:"Filter Cutoff",category:"Filter",description:"Move the filter cutoff frequency"},{id:"filter.q",label:"Filter Resonance",category:"Filter",description:"Adjust filter Q / resonance"},{id:"master.gain",label:"Master Gain",category:"Master",description:"Scale the master volume"},{id:"mix",label:"Osc Mix",category:"Oscillators",description:"Crossfade between Osc 1 and Osc 2"},{id:"osc1.detune",label:"Osc 1 Detune",category:"Oscillators",description:"Offset oscillator 1 pitch in cents"},{id:"osc2.detune",label:"Osc 2 Detune",category:"Oscillators",description:"Offset oscillator 2 pitch in cents"},{id:"fm.amount",label:"FM Amount",category:"FM",description:"Modulation index for FM routing"},{id:"envelope.attack",label:"Env Attack",category:"Envelope",description:"Envelope attack time"},{id:"envelope.release",label:"Env Release",category:"Envelope",description:"Envelope release time"},{id:"macro.harmonics",label:"Macro Harmonics",category:"Macro",description:"Macro engine harmonics"},{id:"macro.timbre",label:"Macro Timbre",category:"Macro",description:"Macro engine timbre"},{id:"macro.morph",label:"Macro Morph",category:"Macro",description:"Macro engine morph"},{id:"macro.level",label:"Macro Level",category:"Macro",description:"Macro engine output level"},{id:"lfo1.rateHz",label:"LFO 1 Rate",category:"LFO",description:"LFO1 rate in Hz"},{id:"lfo1.amount",label:"LFO 1 Amount",category:"LFO",description:"LFO1 depth"},{id:"lfo2.rateHz",label:"LFO 2 Rate",category:"LFO",description:"LFO2 rate in Hz"},{id:"lfo2.amount",label:"LFO 2 Amount",category:"LFO",description:"LFO2 depth"}],Pu=Object.fromEntries(yi.map(r=>[r.id,r.label]));function Gp(){const r=ne(k=>k.engine),l=ne(k=>k.patch.expression)??I.expression,u=Pu[l.x]??"X Axis",d=Pu[l.y]??"Y Axis",p=V.useRef(r),[v,w]=V.useState(!1),[h,g]=V.useState(null),m=V.useRef(!1),x=V.useRef(null),y=V.useRef(null);V.useEffect(()=>{p.current=r},[r]);const C=V.useCallback(k=>{m.current=k,w(k),k||(y.current=null,x.current!=null&&(cancelAnimationFrame(x.current),x.current=null),p.current?.clearExpression2D(),g(null))},[]);return V.useEffect(()=>{const k=T=>{T.key==="CapsLock"?C(T.getModifierState("CapsLock")):!T.getModifierState("CapsLock")&&m.current&&C(!1)},P=()=>C(!1);return window.addEventListener("keydown",k),window.addEventListener("keyup",k),window.addEventListener("blur",P),()=>{window.removeEventListener("keydown",k),window.removeEventListener("keyup",k),window.removeEventListener("blur",P)}},[C]),V.useEffect(()=>{const k=()=>{if(x.current=null,!m.current)return;const z=y.current;z&&(y.current=null,p.current?.setExpression2D(z.x,z.y),g(z))},P=()=>{x.current==null&&(x.current=requestAnimationFrame(k))},T=z=>{if(!p.current)return;const Z=z.getModifierState?.("CapsLock")??m.current;if(Z!==m.current&&C(Z),!Z||!["mouse","touch","pen"].includes(z.pointerType))return;const ee=Math.min(1,Math.max(0,z.clientX/window.innerWidth)),Q=Math.min(1,Math.max(0,1-z.clientY/window.innerHeight));y.current={x:ee,y:Q},P()},R=()=>C(!1);return window.addEventListener("pointermove",T,{passive:!0}),window.addEventListener("pointerdown",T,{passive:!0}),window.addEventListener("pointerup",T,{passive:!0}),window.addEventListener("pointercancel",R),window.addEventListener("mouseleave",R),()=>{window.removeEventListener("pointermove",T),window.removeEventListener("pointerdown",T),window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",R),window.removeEventListener("mouseleave",R),x.current!=null&&(cancelAnimationFrame(x.current),x.current=null)}},[C]),r?a.jsxs("div",{className:`expression-overlay${v?" active":""}`,"aria-hidden":"true",children:[a.jsx("div",{className:"expression-label",children:"CapsLock XY Expression"}),v?a.jsxs("div",{className:"expression-status",children:["Active  ",u," ",((h?.x??.5)*100).toFixed(0),"%  ",d," ",((h?.y??.5)*100).toFixed(0),"%"]}):a.jsxs("div",{className:"expression-status",children:["Engage CapsLock and move on the trackpad to modulate ",u," / ",d]})]}):null}const Tu="application/x-websynth-panel";function _u(r,i,l){if(!r.includes(i))return r;const u=r.filter(p=>p!==i),d=Math.max(0,Math.min(l,u.length));return[...u.slice(0,d),i,...u.slice(d)]}function Qp({panels:r,order:i,onOrderChange:l,onRequestHelp:u}){const[d,p]=V.useState(null),[v,w]=V.useState(null),[h,g]=V.useState(!1),m=V.useMemo(()=>new Map(r.map(M=>[M.id,M])),[r]),x=V.useMemo(()=>r.map(M=>M.id),[r]),y=V.useMemo(()=>{const M=(i.length?i:x).filter(X=>m.has(X)),F=new Set(M),A=r.filter(X=>!F.has(X.id)).map(X=>X.id);return[...M,...A]},[i,x,m,r]),C=M=>F=>{F.dataTransfer.effectAllowed="move";try{F.dataTransfer.setData(Tu,M)}catch{F.dataTransfer.setData("text/plain",M)}p(M),w(null),g(!1)},k=()=>{p(null),w(null),g(!1)},P=M=>{let F="";try{F=M.dataTransfer.getData(Tu)}catch{F=M.dataTransfer.getData("text/plain")}return F||d},T=(M,F)=>A=>{if(A.preventDefault(),A.stopPropagation(),!d)return;const X=A.currentTarget.getBoundingClientRect(),xe=A.clientY<X.top+X.height/2;w({id:M,position:xe?"before":"after"}),g(!1)},R=(M,F)=>A=>{A.preventDefault(),A.stopPropagation();const X=P(A);if(!X)return;const xe=A.currentTarget.getBoundingClientRect(),H=A.clientY<xe.top+xe.height/2?F:F+1,L=_u(y,X,H);l(L),w(null),g(!1)},z=M=>F=>{F.stopPropagation(),v?.id===M&&w(null)},Z=M=>{d&&(M.preventDefault(),w(null),g(!0))},ee=M=>{M.preventDefault();const F=P(M);if(!F)return;const A=_u(y,F,y.length);l(A),w(null),g(!1)},Q=M=>F=>{F.preventDefault(),F.stopPropagation(),u?.(M)};return a.jsx("div",{className:`dashboard-grid${h?" drop-end":""}`,onDragOver:Z,onDrop:ee,children:y.map((M,F)=>{const A=m.get(M);if(!A)return null;const X=A.span??1,xe=d===M,be=v?.id===M&&v.position==="before",H=v?.id===M&&v.position==="after",L=["panel","dashboard-panel",xe?"dragging":"",be?"drop-before":"",H?"drop-after":""].filter(Boolean).join(" ");return a.jsx("section",{className:L,style:{gridColumn:X>1?`span ${X}`:void 0},onDragOver:T(A.id),onDrop:R(A.id,F),onDragLeave:z(A.id),children:a.jsxs("div",{className:"panel-body",children:[a.jsxs("div",{className:"panel-header",children:[a.jsx("h3",{className:"panel-title",children:A.title}),a.jsxs("div",{className:"panel-actions",children:[u?a.jsx("button",{type:"button",className:"panel-help-button",onClick:Q(A.id),"aria-label":`Show help for ${A.title}`,children:"?"}):null,a.jsx("span",{className:"panel-drag-hint","aria-hidden":"true",draggable:!0,onDragStart:C(A.id),onDragEnd:k,children:""})]})]}),A.render()]})},A.id)})})}const Kp=()=>JSON.parse(JSON.stringify(I)),Ze=r=>(r.effects||(r.effects=JSON.parse(JSON.stringify(I.effects))),r.effects),Xp=r=>r.endsWith("/")?r:`${r}/`,Yp=Xp("./"),Ke=(r,i,l,u,d={})=>{const p=Kp();u(p);const v=d.tags??[],w=d.image??`${Yp}presets/${r}.png`;return{id:r,name:i,description:l,tags:v,image:w,patch:p}},Jp={id:"essentials",name:"Essentials",description:"Foundation tones that show the core oscillators, filter, and envelopes.",presets:[Ke("init","Init Saw","Clean slate patch: saw + square with neutral envelope.",()=>{},{tags:["init"]}),Ke("warm-pad","Warm Pad","Gently detuned analog pad with slow attack and soft filter motion.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="triangle",r.osc1.detune=-4,r.osc1.detuneFine=-2,r.osc1.octave=0,r.osc2.mode="analog",r.osc2.wave="sawtooth",r.osc2.detune=5,r.osc2.detuneFine=1,r.osc2.octave=0,r.mix=.42,r.sub.enabled=!0,r.sub.wave="sine",r.sub.octave=1,r.sub.level=.35,r.fm.enabled=!1,r.ring.enabled=!1,r.filter.type="lowpass",r.filter.cutoff=880,r.filter.q=.85,r.envelope.attack=.6,r.envelope.decay=.85,r.envelope.sustain=.78,r.envelope.release=1.9,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.18,amount:.38},r.lfo2={...r.lfo2??I.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:.4,amount:.1};const i=Ze(r);i.delay={enabled:!1,time:.32,feedback:.28,mix:.18},i.reverb={enabled:!0,size:.72,decay:.85,mix:.33},r.master.gain=.22},{tags:["pad","analog"]}),Ke("bright-pluck","Bright Pluck","Snappy analog pluck with a touch of FM and tempo-friendly delay.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="square",r.osc1.detune=2,r.osc1.detuneFine=0,r.osc1.octave=0,r.osc2.mode="analog",r.osc2.wave="sawtooth",r.osc2.detune=-6,r.osc2.detuneFine=0,r.osc2.octave=0,r.mix=.5,r.fm.enabled=!0,r.fm.ratio=1.25,r.fm.amount=90,r.sub.enabled=!1,r.ring.enabled=!1,r.filter.type="lowpass",r.filter.cutoff=1500,r.filter.q=.95,r.envelope.attack=.008,r.envelope.decay=.18,r.envelope.sustain=.12,r.envelope.release=.22,r.lfo1={...r.lfo1??I.lfo1,enabled:!1,wave:"triangle",dest:"pitch",rateHz:5.5,amount:.06},r.lfo2={...r.lfo2??I.lfo2,enabled:!1,wave:"sine",dest:"amp",rateHz:.6,amount:0};const i=Ze(r);i.delay={enabled:!0,time:.26,feedback:.32,mix:.24},i.reverb={enabled:!1,size:.4,decay:.4,mix:.18},r.master.gain=.23},{tags:["lead","pluck"]})]},Zp={id:"basslines",name:"Basslines",description:"Low-end starters that demonstrate sub layering, resonance, and FM growl.",presets:[Ke("sub-driver","Sub Driver","Focused sub bass with a sine layer and tight envelope.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.octave=-1,r.osc1.detune=-2,r.osc1.detuneFine=0,r.osc2.mode="analog",r.osc2.wave="square",r.osc2.octave=-1,r.osc2.detune=3,r.osc2.detuneFine=0,r.mix=.25,r.sub.enabled=!0,r.sub.wave="sine",r.sub.octave=1,r.sub.level=.7,r.fm.enabled=!1,r.ring.enabled=!1,r.filter.type="lowpass",r.filter.cutoff=220,r.filter.q=1.2,r.envelope.attack=.01,r.envelope.decay=.2,r.envelope.sustain=.75,r.envelope.release=.32,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:.28,amount:.05},r.lfo2={...r.lfo2??I.lfo2,enabled:!1,wave:"sine",dest:"filter",rateHz:.6,amount:0};const i=Ze(r);i.delay={enabled:!1,time:.2,feedback:.2,mix:.1},i.reverb={enabled:!1,size:.3,decay:.2,mix:.1},r.master.gain=.28},{tags:["bass"]}),Ke("acid-line","Acid Line","Classic resonant saw bass ready for sequences and filter tweaks.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.octave=-1,r.osc1.detune=0,r.osc1.detuneFine=0,r.osc2.mode="analog",r.osc2.wave="sawtooth",r.osc2.octave=0,r.osc2.detune=7,r.osc2.detuneFine=0,r.mix=.55,r.sub.enabled=!1,r.fm.enabled=!1,r.ring.enabled=!1,r.filter.type="lowpass",r.filter.cutoff=520,r.filter.q=8.5,r.envelope.attack=.01,r.envelope.decay=.25,r.envelope.sustain=.3,r.envelope.release=.18,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"triangle",dest:"filter",rateHz:6,amount:.14},r.lfo2={...r.lfo2??I.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:3.5,amount:.04};const i=Ze(r);i.delay={enabled:!0,time:.18,feedback:.22,mix:.18},i.reverb={enabled:!1,size:.35,decay:.25,mix:.12},r.master.gain=.25},{tags:["bass","resonant"]}),Ke("fm-growl","FM Growl","Two-operator FM for gritty bass leads with animated mids.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.octave=0,r.osc1.detune=0,r.osc1.detuneFine=0,r.osc2.mode="analog",r.osc2.wave="square",r.osc2.octave=0,r.osc2.detune=0,r.osc2.detuneFine=0,r.mix=.4,r.fm.enabled=!0,r.fm.ratio=2,r.fm.amount=180,r.sub.enabled=!1,r.ring.enabled=!1,r.filter.type="bandpass",r.filter.cutoff=540,r.filter.q=2.8,r.envelope.attack=.012,r.envelope.decay=.22,r.envelope.sustain=.4,r.envelope.release=.3,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"triangle",dest:"filter",rateHz:1.2,amount:.25},r.lfo2={...r.lfo2??I.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:3,amount:.05};const i=Ze(r);i.delay={enabled:!1,time:.2,feedback:.2,mix:.1},i.reverb={enabled:!1,size:.4,decay:.25,mix:.12},r.master.gain=.24},{tags:["bass","fm"]})]},eh={id:"macro",name:"Macro Voices",description:"Presets that lean on the macro engine for hybrid keys, pads, and textures.",presets:[Ke("glass-keys","Glass Keys","Macro pluck blended with a triangle support for bell-like keys.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??I.osc1.macro,model:"pluck",harmonics:.45,timbre:.6,morph:.35,level:.9},r.osc2.mode="analog",r.osc2.wave="triangle",r.osc2.detune=-2,r.osc2.detuneFine=0,r.osc2.octave=0,r.mix=.35,r.filter.type="lowpass",r.filter.cutoff=1800,r.filter.q=.7,r.envelope.attack=.02,r.envelope.decay=.25,r.envelope.sustain=.6,r.envelope.release=.55,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:5,amount:.04},r.lfo2={...r.lfo2??I.lfo2,enabled:!1,wave:"sine",dest:"amp",rateHz:.4,amount:0};const i=Ze(r);i.delay={enabled:!0,time:.3,feedback:.25,mix:.22},i.reverb={enabled:!0,size:.55,decay:.6,mix:.28},r.master.gain=.21},{tags:["macro","keys"]}),Ke("supersaw-pad","Supersaw Pad","Wide, macro-driven supersaw with evolving filter movement.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??I.osc1.macro,model:"supersaw",harmonics:.68,timbre:.5,morph:.52,level:1},r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??I.osc2.macro,model:"va",harmonics:.4,timbre:.5,morph:.5,level:.5},r.mix=.5,r.filter.type="lowpass",r.filter.cutoff=720,r.filter.q=.8,r.envelope.attack=.5,r.envelope.decay=.9,r.envelope.sustain=.82,r.envelope.release=2.4,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.12,amount:.5},r.lfo2={...r.lfo2??I.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:.4,amount:0};const i=Ze(r);i.delay={enabled:!0,time:.36,feedback:.32,mix:.22},i.reverb={enabled:!0,size:.82,decay:1.2,mix:.4},r.master.gain=.2},{tags:["macro","pad"]}),Ke("harmonic-motion","Harmonic Motion","Evolving harmonic macro texture with slow motion and shimmer.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??I.osc1.macro,model:"harmonic",harmonics:.55,timbre:.68,morph:.45,level:1},r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??I.osc2.macro,model:"fm2op",harmonics:.4,timbre:.6,morph:.35,level:.6},r.mix=.6,r.filter.type="bandpass",r.filter.cutoff=680,r.filter.q=1.6,r.envelope.attack=1.2,r.envelope.decay=1.1,r.envelope.sustain=.65,r.envelope.release=3.2,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.1,amount:.55},r.lfo2={...r.lfo2??I.lfo2,enabled:!0,wave:"noise",dest:"pitch",rateHz:1.2,amount:.08};const i=Ze(r);i.delay={enabled:!0,time:.5,feedback:.4,mix:.28},i.reverb={enabled:!0,size:.9,decay:1.5,mix:.45},r.master.gain=.18},{tags:["macro","texture"]}),Ke("dirichlet-glow","Dirichlet Glow","New Dirichlet pulse macro blended with a VA pad for lyrical keys.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??I.osc1.macro,model:"dirichlet",harmonics:.78,timbre:.42,morph:.6,level:1},r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??I.osc2.macro,model:"va",harmonics:.5,timbre:.4,morph:.38,level:.58},r.mix=.55,r.filter.type="bandpass",r.filter.cutoff=1350,r.filter.q=1.2,r.envelope.attack=.06,r.envelope.decay=.4,r.envelope.sustain=.62,r.envelope.release=.95,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.65,amount:.36},r.lfo2={...r.lfo2??I.lfo2,enabled:!0,wave:"triangle",dest:"amp",rateHz:3.2,amount:.08};const i=Ze(r);i.delay={enabled:!0,time:.32,feedback:.26,mix:.24},i.reverb={enabled:!0,size:.68,decay:.9,mix:.33},r.master.gain=.2},{tags:["macro","dirichlet","keys"]}),Ke("vowel-wash","Vowel Wash","Phase-aligned formant engine for choir-like swells and evolving vowels.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??I.osc1.macro,model:"formant",harmonics:.52,timbre:.58,morph:.72,level:1},r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??I.osc2.macro,model:"harmonic",harmonics:.34,timbre:.66,morph:.5,level:.5},r.mix=.48,r.filter.type="lowpass",r.filter.cutoff=820,r.filter.q=.9,r.envelope.attack=.8,r.envelope.decay=1.1,r.envelope.sustain=.82,r.envelope.release=2.8,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.18,amount:.48},r.lfo2={...r.lfo2??I.lfo2,enabled:!0,wave:"sine",dest:"pitch",rateHz:.12,amount:.05};const i=Ze(r);i.delay={enabled:!0,time:.48,feedback:.38,mix:.26},i.reverb={enabled:!0,size:.9,decay:1.8,mix:.42},r.master.gain=.18},{tags:["macro","formant","pad"]})]},th={id:"motion",name:"Motion & FX",description:"Rhythmic and ambient presets highlighting LFO routing, noise modulation, and space.",presets:[Ke("noisy-motion","Noisy Motion","Analog layers with the new noise LFO pushing the filter for organic movement.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.detune=-7,r.osc1.detuneFine=-2,r.osc1.octave=0,r.osc2.mode="analog",r.osc2.wave="triangle",r.osc2.detune=6,r.osc2.detuneFine=2,r.osc2.octave=0,r.mix=.48,r.filter.type="bandpass",r.filter.cutoff=950,r.filter.q=1.4,r.envelope.attack=.12,r.envelope.decay=.6,r.envelope.sustain=.55,r.envelope.release=.8,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"noise",dest:"filter",rateHz:3.2,amount:.24},r.lfo2={...r.lfo2??I.lfo2,enabled:!0,wave:"sine",dest:"amp",rateHz:.55,amount:.35};const i=Ze(r);i.delay={enabled:!0,time:.4,feedback:.42,mix:.26},i.reverb={enabled:!0,size:.75,decay:1.1,mix:.36},r.master.gain=.21},{tags:["motion","noise"]}),Ke("pulsar-gate","Pulsar Gate","Square-wave LFO chops the amp while a slow triangle sweeps the filter.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.detune=-3,r.osc1.detuneFine=0,r.osc2.mode="analog",r.osc2.wave="square",r.osc2.detune=3,r.osc2.detuneFine=0,r.mix=.5,r.filter.type="lowpass",r.filter.cutoff=1400,r.filter.q=.9,r.envelope.attack=.03,r.envelope.decay=.4,r.envelope.sustain=.6,r.envelope.release=.6,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"square",dest:"amp",rateHz:6,amount:.7},r.lfo2={...r.lfo2??I.lfo2,enabled:!0,wave:"triangle",dest:"filter",rateHz:.25,amount:.4};const i=Ze(r);i.delay={enabled:!0,time:.33,feedback:.35,mix:.24},i.reverb={enabled:!0,size:.6,decay:.7,mix:.28},r.master.gain=.22,r.arp={...r.arp??I.arp,enabled:!0,gate:.45,bpmSync:!0,bpm:120,division:"1/8",mode:"updown",octaves:1,latch:!1}},{tags:["motion","arp"]}),Ke("space-drone","Space Drone","Long-release drone with ring modulation and cavernous ambience.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="triangle",r.osc1.detune=-6,r.osc1.detuneFine=-3,r.osc2.mode="analog",r.osc2.wave="sine",r.osc2.detune=6,r.osc2.detuneFine=3,r.mix=.5,r.sub.enabled=!0,r.sub.wave="sine",r.sub.octave=2,r.sub.level=.4,r.ring.enabled=!0,r.ring.amount=.6,r.filter.type="bandpass",r.filter.cutoff=420,r.filter.q=2.2,r.envelope.attack=1.5,r.envelope.decay=1.2,r.envelope.sustain=.65,r.envelope.release=4.5,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.08,amount:.45},r.lfo2={...r.lfo2??I.lfo2,enabled:!0,wave:"noise",dest:"pitch",rateHz:1.5,amount:.08};const i=Ze(r);i.delay={enabled:!0,time:.6,feedback:.48,mix:.3},i.reverb={enabled:!0,size:.95,decay:2.4,mix:.55},r.master.gain=.18},{tags:["drone","fx"]})]},nh={id:"keys-leads",name:"Keys & Leads",description:"Playable patches that highlight melodic workkeys, brass, and expressive leads.",presets:[Ke("dream-keys","Dream Keys","Soft keys with gentle vibrato and a shimmering tail.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="triangle",r.osc1.detune=-3,r.osc1.detuneFine=-1,r.osc2.mode="analog",r.osc2.wave="sine",r.osc2.detune=4,r.osc2.detuneFine=1,r.mix=.46,r.filter.type="lowpass",r.filter.cutoff=1450,r.filter.q=.75,r.envelope.attack=.05,r.envelope.decay=.4,r.envelope.sustain=.65,r.envelope.release=.9,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:5.8,amount:.08},r.lfo2={...r.lfo2??I.lfo2,enabled:!1,wave:"sine",dest:"amp",rateHz:.5,amount:0};const i=Ze(r);i.delay={enabled:!0,time:.28,feedback:.22,mix:.2},i.reverb={enabled:!0,size:.6,decay:.85,mix:.3},r.master.gain=.23},{tags:["keys","vibrato"]}),Ke("poly-brass","Poly Brass","Brassy synth stack with macro morphing and expressive filter.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??I.osc1.macro,model:"va",harmonics:.72,timbre:.48,morph:.62,level:1},r.osc2.mode="analog",r.osc2.wave="sawtooth",r.osc2.detune=-8,r.osc2.detuneFine=-1,r.mix=.58,r.filter.type="lowpass",r.filter.cutoff=980,r.filter.q=1.05,r.envelope.attack=.03,r.envelope.decay=.36,r.envelope.sustain=.58,r.envelope.release=.44,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"triangle",dest:"filter",rateHz:.45,amount:.32};const i=Ze(r);i.delay={enabled:!1,time:.3,feedback:.2,mix:.1},i.reverb={enabled:!0,size:.5,decay:.65,mix:.24},r.master.gain=.24},{tags:["macro","brass"]}),Ke("shimmer-lead","Shimmer Lead","Cutting lead with harmonics shimmer and subtle glide.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.detune=7,r.osc1.detuneFine=1,r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??I.osc2.macro,model:"harmonic",harmonics:.58,timbre:.62,morph:.4,level:.7},r.mix=.48,r.filter.type="bandpass",r.filter.cutoff=2100,r.filter.q=1.1,r.envelope.attack=.01,r.envelope.decay=.22,r.envelope.sustain=.45,r.envelope.release=.28,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:6.5,amount:.12},r.lfo2={...r.lfo2??I.lfo2,enabled:!0,wave:"noise",dest:"filter",rateHz:2.8,amount:.18};const i=Ze(r);i.delay={enabled:!0,time:.24,feedback:.27,mix:.2},i.reverb={enabled:!0,size:.48,decay:.6,mix:.22},r.master.gain=.23},{tags:["lead"]})]},rh={id:"percussion-fx",name:"Percussion & FX",description:"Hits, plucks, and sound design starters for rhythm tracks and atmospheres.",presets:[Ke("fm-bell","FM Bell","Metallic bell with quick shimmer and lingering tail.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sine",r.osc1.octave=1,r.osc2.mode="analog",r.osc2.wave="sine",r.osc2.octave=1,r.fm.enabled=!0,r.fm.ratio=3,r.fm.amount=210,r.mix=.5,r.filter.type="lowpass",r.filter.cutoff=1700,r.filter.q=1.4,r.envelope.attack=.002,r.envelope.decay=.42,r.envelope.sustain=0,r.envelope.release=1.2,r.lfo1={...r.lfo1??I.lfo1,enabled:!1,wave:"sine",dest:"pitch",rateHz:6,amount:0};const i=Ze(r);i.delay={enabled:!1,time:.22,feedback:.25,mix:.18},i.reverb={enabled:!0,size:.7,decay:1.4,mix:.4},r.master.gain=.2},{tags:["percussion","fm"]}),Ke("noise-hit","Noise Hit","Short noise burst shaped with looping sampler trimideal for snares or whooshes.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="noise",r.osc2.mode="analog",r.osc2.wave="sine",r.osc2.detune=-12,r.osc2.octave=-1,r.mix=.32,r.filter.type="bandpass",r.filter.cutoff=1800,r.filter.q=5,r.envelope.attack=.001,r.envelope.decay=.28,r.envelope.sustain=0,r.envelope.release=.18,r.lfo1={...r.lfo1??I.lfo1,enabled:!0,wave:"noise",dest:"filter",rateHz:8,amount:.2};const i=Ze(r);i.delay={enabled:!1,time:.12,feedback:.1,mix:.08},i.reverb={enabled:!0,size:.55,decay:.6,mix:.28},r.master.gain=.22},{tags:["percussion","noise"]}),Ke("chiptune-click","Chiptune Click","Retro 8-bit percussive blip with sequencer-ready envelope.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="square",r.osc1.octave=1,r.osc2.mode="analog",r.osc2.wave="square",r.osc2.detune=7,r.osc2.octave=1,r.mix=.45,r.filter.type="highpass",r.filter.cutoff=600,r.filter.q=.7,r.envelope.attack=.001,r.envelope.decay=.12,r.envelope.sustain=0,r.envelope.release=.08,r.lfo1={...r.lfo1??I.lfo1,enabled:!1,wave:"square",dest:"pitch",rateHz:12,amount:0};const i=Ze(r);i.delay={enabled:!1,time:.08,feedback:.1,mix:.05},i.reverb={enabled:!1,size:.3,decay:.3,mix:.08},r.master.gain=.2},{tags:["percussion","retro"]})]},wi=[Jp,Zp,eh,th,nh,rh],Si=wi.flatMap(r=>r.presets.map(i=>({...i,groupId:r.id}))),xi=Object.fromEntries(Si.map(r=>[r.id,r])),Lu=Object.fromEntries(Si.map(r=>[r.id,r.patch]));Si.map(r=>r.id);const pi="init";function sh(){const r=ne(m=>m.updatePatch),i=ne(m=>m.exportPatch),l=ne(m=>m.importPatch),u=V.useRef(null),[d,p]=V.useState(pi),v=()=>{const m=i(),x=new Blob([m],{type:"application/json"}),y=URL.createObjectURL(x),C=document.createElement("a");C.href=y,C.download="patch.json",C.click(),URL.revokeObjectURL(y)},w=m=>{const x=m.target.files?.[0];if(!x)return;const y=new FileReader;y.onload=()=>{l(String(y.result))},y.readAsText(x)},h=V.useMemo(()=>xi[d],[d]),g=m=>{const x=m.target.value;p(x),m.target.blur();const y=Lu[x];y&&r(y)};return a.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[a.jsxs("div",{className:"row",style:{gap:8},children:[a.jsx("select",{value:d,onChange:g,children:wi.map(m=>a.jsx("optgroup",{label:m.name,children:m.presets.map(x=>a.jsx("option",{value:x.id,title:x.description,children:x.name},x.id))},m.id))}),a.jsx("button",{onClick:()=>u.current?.click(),children:"Import"}),a.jsx("input",{ref:u,type:"file",accept:"application/json",style:{display:"none"},onChange:w}),a.jsx("button",{onClick:v,children:"Export"}),a.jsx("button",{onClick:()=>{p(pi),r(Lu[pi])},children:"Reset"}),a.jsx("button",{title:"Clears local patches to recover from incompatible versions",onClick:()=>{localStorage.removeItem("websynth-patch"),location.reload()},children:"Clear Local"})]}),a.jsxs("div",{className:"preset-panel-meta",children:[a.jsx("div",{className:"label",children:"Presets & Patch IO"}),h&&a.jsxs("div",{className:"preset-description",children:[a.jsx("p",{children:h.description}),h.tags&&h.tags.length>0&&a.jsx("div",{className:"preset-tags",children:h.tags.map(m=>a.jsx("span",{className:"preset-tag",children:m},m))})]})]})]})}function oh(){const i=ne(v=>v.patch.expression)??I.expression,l=ne(v=>v.updatePatch),u=V.useMemo(()=>{const v=new Map;for(const w of yi){const h=v.get(w.category)??[];h.push(w),v.set(w.category,h)}return Array.from(v.entries())},[]),d=v=>w=>{const h=w.target.value,g=v==="x"?{x:h,y:i.y}:{x:i.x,y:h};l({expression:g})},p=v=>{const w=i?.[v];return yi.find(g=>g.id===w)?.description??"Select a destination to be controlled by the XY surface."};return a.jsxs("div",{className:"expression-panel",children:[a.jsxs("div",{className:"expression-row",children:[a.jsxs("label",{children:[a.jsx("span",{className:"label",children:"X Axis Target"}),a.jsx("select",{value:i?.x??I.expression.x,onChange:d("x"),children:u.map(([v,w])=>a.jsx("optgroup",{label:v,children:w.map(h=>a.jsx("option",{value:h.id,children:h.label},h.id))},v))})]}),a.jsx("p",{className:"hint-text",children:p("x")})]}),a.jsxs("div",{className:"expression-row",children:[a.jsxs("label",{children:[a.jsx("span",{className:"label",children:"Y Axis Target"}),a.jsx("select",{value:i?.y??I.expression.y,onChange:d("y"),children:u.map(([v,w])=>a.jsx("optgroup",{label:v,children:w.map(h=>a.jsx("option",{value:h.id,children:h.label},h.id))},v))})]}),a.jsx("p",{className:"hint-text",children:p("y")})]})]})}function hi({open:r,onClose:i,children:l,title:u="Settings",closeLabel:d="Close settings"}){return V.useEffect(()=>{if(!r)return;const p=v=>{v.key==="Escape"&&i()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[r,i]),r?a.jsxs("div",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"modal-backdrop",onClick:i}),a.jsxs("div",{className:"modal",children:[a.jsxs("header",{className:"modal-header",children:[a.jsx("h3",{className:"modal-title",children:u}),a.jsx("button",{className:"modal-close",onClick:i,"aria-label":d,children:""})]}),a.jsx("div",{className:"modal-body",children:l})]})]}):null}const zu=16,po=[{id:"kick",label:"Kick",midi:36,patch:{osc1:{wave:"sine",detune:-24},osc2:{wave:"sine",detune:0},mix:0,envelope:{attack:.001,decay:.18,sustain:0,release:.08},filter:{type:"lowpass",cutoff:380,q:.8},master:{gain:.35}}},{id:"snare",label:"Snare",midi:38,patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"triangle",detune:12},mix:.55,envelope:{attack:.001,decay:.22,sustain:0,release:.12},filter:{type:"bandpass",cutoff:1800,q:2.8},master:{gain:.28}}},{id:"hat",label:"Hat",midi:42,patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"triangle",detune:24},mix:.7,envelope:{attack:.001,decay:.08,sustain:0,release:.05},filter:{type:"highpass",cutoff:5e3,q:.9},master:{gain:.22}}}];function lh(){const r={};for(const i of po)r[i.id]=Array.from({length:zu},()=>!1);return r.kick[0]=!0,r.kick[8]=!0,r.snare[4]=!0,r.snare[12]=!0,r.hat=r.hat.map((i,l)=>l%2===0),r}function ih(){const r=ne(k=>k.transport.tempo),i=ne(k=>k.transport.playing),l=ne(k=>k.transport.tick),u=ne(k=>k.setTempo),d=ne(k=>k.setTransportPlaying),[p,v]=V.useState(()=>lh()),[w,h]=V.useState(0),g=V.useRef({}),m=V.useRef(p);V.useEffect(()=>{m.current=p},[p]);const x=async k=>{let P=g.current[k];P||(P=new vi,g.current[k]=P),await P.resume();const T=po.find(R=>R.id===k)?.patch;return T&&P.applyPatch({...I,...T}),P},y=async k=>{const P=m.current,T=po.filter(R=>P[R.id]?.[k]);for(const R of T)(await x(R.id)).previewNote(R.midi,180)};V.useEffect(()=>{if(!i){h(0);return}const k=l%zu;h(k),y(k)},[l,i]),V.useEffect(()=>()=>{for(const k of Object.values(g.current))try{k.audioContext.close()}catch{}g.current={}},[]);const C=(k,P)=>{v(T=>{const R={...T,[k]:[...T[k]]};return R[k][P]=!R[k][P],R})};return a.jsxs("div",{className:"drum-machine",children:[a.jsxs("div",{className:"drum-controls",children:[a.jsx("button",{className:"play-button",onClick:()=>d(!i),children:i?"Stop":"Play"}),a.jsx(Te,{label:"Tempo",min:60,max:180,step:1,value:r,onChange:k=>u(k)})]}),a.jsx("div",{className:"drum-grid",children:po.map(k=>a.jsxs("div",{className:"drum-row",children:[a.jsx("div",{className:"drum-label",children:k.label}),a.jsx("div",{className:"drum-steps",children:p[k.id]?.map((P,T)=>{const R=i&&w===T;return a.jsx("button",{className:`drum-step${P?" active":""}${R?" current":""}`,onClick:()=>C(k.id,T)},T)})})]},k.id))})]})}const ah=4;function ch(){const r=ne(p=>p.transport.tempo),i=ne(p=>p.transport.playing),l=ne(p=>p.bumpTransportTick),u=ne(p=>p.patch),d=ne(p=>p.updatePatch);return V.useEffect(()=>{if(!i)return;const p=6e4/r/ah,v=window.setInterval(()=>l(),p);return()=>window.clearInterval(v)},[i,r,l]),V.useEffect(()=>{const p=u.sequencer??I.sequencer;p?.enabled&&p.playing!==i&&d({sequencer:{...p,playing:i}})},[i,u.sequencer,d]),V.useEffect(()=>{const p=u.sequencer??I.sequencer;p?.enabled&&p.bpm!==r&&d({sequencer:{...p,bpm:r}});const v=u.arp??I.arp;v?.enabled&&(v.bpm!==r||!v.bpmSync)&&d({arp:{...v,bpm:r,bpmSync:!0}})},[r,u.sequencer,u.arp,d]),null}const Ou=144,uh=128;function dh(r){return Array.from(r.inputs.values()).map(i=>({id:i.id,name:i.name??"Unknown input",manufacturer:i.manufacturer??null}))}let Xr=null;function Au(){return Xr||(typeof navigator>"u"||typeof navigator.requestMIDIAccess!="function"?Promise.reject(new Error("Web MIDI API is not supported in this environment")):(Xr=navigator.requestMIDIAccess({sysex:!1}).finally(()=>{Xr=null}),Xr))}function fh(){const r=ne(m=>m.engine),i=ne(m=>m.midi),l=ne(m=>m.setMidiSupported),u=ne(m=>m.setMidiStatus),d=ne(m=>m.setMidiInputs),p=ne(m=>m.setMidiSelectedInput),v=ne(m=>m.setMidiActiveNotes),w=V.useRef(null),h=V.useRef(null),g=V.useRef(new Set);return V.useEffect(()=>{if(!i.enabled){const x=Array.from(g.current);x.length&&r&&x.forEach(C=>r.noteOff(C)),g.current.clear(),v([]);const y=i.supported===!1?"unsupported":"idle";i.status!==y&&u(y),d([]),w.current&&(w.current.onstatechange=null);return}if(typeof navigator>"u"||typeof navigator.requestMIDIAccess!="function"){l(!1),u("unsupported");return}let m=!1;return l(!0),u("requesting"),Au().then(x=>{if(m)return;w.current=x;const y=()=>{const C=dh(x);d(C);const{selectedInputId:k}=ne.getState().midi;C.length===0&&(g.current.clear(),v([])),C.length>0?C.some(T=>T.id===k)||p(C[0]?.id??null):k&&p(null)};y(),x.onstatechange=()=>y(),u("ready")}).catch(x=>{if(m)return;const y=x instanceof Error?x.message:"Failed to access MIDI devices";u("error",y)}),()=>{m=!0,w.current&&(w.current.onstatechange=null),w.current=null}},[r,i.enabled,v,d,p,u,l]),V.useEffect(()=>{if(!i.enabled){h.current&&(h.current.onmidimessage=null,h.current=null);return}const m=w.current;if(!m)return;const x=i.selectedInputId,y=x?Array.from(m.inputs.values()).find(k=>k.id===x):null;if(h.current&&h.current!==y){h.current.onmidimessage=null,h.current=null;const k=Array.from(g.current);k.length&&r&&k.forEach(P=>r.noteOff(P)),g.current.clear(),v([])}if(!y)return;const C=k=>{const P=k.data;if(!P||P.length<2)return;const T=P[0],R=P[1],z=P[2]??0,Z=T&240,ee=R;if(Z===Ou&&z>0){r&&r.noteOn(ee),g.current.add(ee),v(Array.from(g.current));return}(Z===uh||Z===Ou&&z===0)&&(r&&r.noteOff(ee),g.current.delete(ee),v(Array.from(g.current)))};return y.onmidimessage=C,h.current=y,()=>{y.onmidimessage===C&&(y.onmidimessage=null);const k=Array.from(g.current);k.length&&r&&k.forEach(P=>r.noteOff(P)),g.current.clear(),v([])}},[r,i.enabled,i.selectedInputId,v]),null}const ph={idle:"Not connected",requesting:"Awaiting browser permission...",ready:"Connected",error:"Connection error",unsupported:"Not supported"};function hh(){const r=ne(h=>h.midi),i=ne(h=>h.setMidiEnabled),l=ne(h=>h.setMidiSelectedInput),u=ne(h=>h.setMidiStatus),d=ne(h=>h.setMidiSupported),p=V.useMemo(()=>{const h=ph[r.status]??"Unknown";return r.status==="error"&&r.lastError?`${h}: ${r.lastError}`:r.status==="ready"&&r.inputs.length===0?"Connected - no inputs detected":h},[r.inputs.length,r.lastError,r.status]),v=r.supported===!1,w=V.useCallback(h=>{if(!h.target.checked){i(!1);return}u("requesting"),i(!0),Au().then(()=>{d(!0)}).catch(m=>{const x=m instanceof Error?m.message:"Failed to access MIDI devices";if(m instanceof Error&&/not supported/i.test(m.message)){d(!1),u("unsupported"),i(!1);return}d(!0),u("error",x)})},[i,u,d]);return a.jsxs("div",{className:"settings-card",children:[a.jsxs("div",{className:"settings-row",children:[a.jsx("label",{className:"settings-label",htmlFor:"midi-enabled",children:"Enable MIDI input"}),a.jsx("input",{id:"midi-enabled",type:"checkbox",checked:r.enabled,onChange:w,disabled:v})]}),a.jsxs("div",{className:"settings-row",children:[a.jsx("span",{className:"settings-label",children:"Status"}),a.jsx("span",{className:"settings-value","data-status":r.status,children:p})]}),r.status==="unsupported"?a.jsx("p",{className:"settings-help",children:"This browser does not expose the Web MIDI API. Try Chrome or Edge on desktop."}):null,a.jsxs("div",{className:"settings-row",children:[a.jsx("label",{className:"settings-label",htmlFor:"midi-input",children:"MIDI input device"}),a.jsxs("select",{id:"midi-input",value:r.selectedInputId??"",onChange:h=>{const g=h.target.value;l(g.length?g:null)},disabled:!r.enabled||r.inputs.length===0,children:[r.inputs.length===0?a.jsx("option",{value:"",children:"No inputs detected"}):null,r.inputs.map(h=>a.jsxs("option",{value:h.id,children:[h.name,h.manufacturer?` (${h.manufacturer})`:""]},h.id))]})]}),r.enabled&&r.inputs.length===0?a.jsx("p",{className:"settings-help",children:"Plug in a controller or check browser permissions."}):null]})}function mh({href:r="https://github.com/szabadkai/synth-demo"}){return a.jsxs("a",{className:"github-corner",href:r,"aria-label":"View WebSynth Studio on GitHub",target:"_blank",rel:"noreferrer noopener",children:[a.jsx("span",{className:"sr-only",children:"View the project repository on GitHub"}),a.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:a.jsx("path",{d:"M12 0a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58 0-.29-.01-1.05-.02-2.05-3.34.73-4.04-1.61-4.04-1.61-.55-1.4-1.35-1.78-1.35-1.78-1.11-.76.08-.75.08-.75 1.22.09 1.87 1.26 1.87 1.26 1.09 1.86 2.86 1.32 3.56 1 .11-.79.43-1.32.78-1.62-2.66-.3-5.47-1.33-5.47-5.9 0-1.3.47-2.37 1.24-3.21-.12-.3-.54-1.51.12-3.15 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.3-1.55 3.3-1.23 3.3-1.23.66 1.64.24 2.85.12 3.15.77.84 1.24 1.9 1.24 3.21 0 4.58-2.82 5.6-5.5 5.9.44.39.83 1.16.83 2.34 0 1.69-.02 3.05-.02 3.47 0 .32.22.69.83.57A12 12 0 0 0 12 0Z"})})]})}const vh=[{title:"Power On + Audio Check",points:["Click Power On (or press any key) to resume the audio engine  browsers block sound until you interact.","Hold a note on the on-screen keyboard or your computer keys (A/W/S) to confirm audio output.","Watch the Audio Ready badge so you know the synth engine is live and responsive."]},{title:"Dashboard Basics",points:["Each panel can be dragged by the  handle to personalise your layout.","Use the Oscilloscope panel to visualise how the engines, filter, and envelope tweaks shape the signal.","Dive into the Engine panel (ENG1/ENG2), plus Filter, Envelope, and Effects modules to sculpt tone, dynamics, and ambience."]},{title:"Modulation Playground",points:["Assign LFOs to pitch, filter, or effect targets for evolving textures  adjust rate, shape, sync, and depth.","Flip on the Arpeggiator to latch held notes, experiment with patterns, octave ranges, and tempo sync.","Program riffs in the Sequencer, toggle steps live, and shape groove with direction and swing."]},{title:"Rhythm Layer",points:["Open the Drum Machine to sequence kick, snare, and hat voices using the shared global transport.","Hit Play/Stop in the Drum Machine (or space bar in the Sequencer) to drive every tempo-aware module.","Adjust BPM from either panel  the Transport keeps LFO sync, sequencer rate, and arps locked in."]},{title:"Expressive Performance",points:["Engage CapsLock to activate the 2D expression surface; glide a trackpad, mouse, or pen for live modulation.","Check the overlay label to see which parameters the X/Y axes control and their real-time values.","Customise X/Y destinations under Settings  Expression to map filter sweeps, macro blends, and more."]},{title:"Patch Workflow",points:["Browse the top-bar Preset menu or Settings  Patches to explore curated starting points.","Export your patch as JSON to share, import saved patches, or reset to the init patch at any time.","Use Clear Local if you ever need to wipe cached patches after upgrading the app."]},{title:"Hardware MIDI",points:["Toggle Enable MIDI input in Settings  MIDI to request browser permission for your controller.","Select a detected device and play  incoming notes route straight into the synth voice engine.","Status hints show permission prompts, errors, or a friendly ready state so you know what to expect."]},{title:"Next Steps",points:["Layer Sequencer, Arpeggiator, Drum Machine, and expression surface for full arrangements.","Save favourite patches into src/patches/ to share with your team or future sessions.","Before shipping changes, run npm run lint, npm run typecheck, npm test, and npm run build to keep QA tight."]}];function gh({onFinish:r}){return a.jsxs("div",{className:"onboarding-guide",children:[a.jsx("p",{className:"onboarding-intro",children:"New to WebSynth Studio? Work through the highlights below, tweaking the live app as you go. Each section points you to the panels and controls that define the instrument."}),a.jsx("ol",{className:"onboarding-list",children:vh.map(i=>a.jsxs("li",{className:"onboarding-section",children:[a.jsx("h4",{children:i.title}),a.jsx("ul",{children:i.points.map(l=>a.jsx("li",{children:l},l))})]},i.title))}),a.jsx("button",{type:"button",className:"onboarding-cta",onClick:()=>{r?.()},children:"Let's go"})]})}const yh="https://buymeacoffee.com/szabadkai",xh="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png",mi="buy-coffee-collapsed";function wh(){const[r,i]=V.useState(!1);return V.useEffect(()=>{try{window.localStorage.getItem(mi)==="1"&&i(!0)}catch{}},[]),V.useEffect(()=>{try{r?window.localStorage.setItem(mi,"1"):window.localStorage.removeItem(mi)}catch{}},[r]),r?a.jsx("div",{className:"buy-coffee collapsed",children:a.jsx("button",{type:"button",className:"buy-coffee-icon","aria-label":"Show Buy Me a Coffee support button",onClick:()=>i(!1),children:a.jsx("span",{"aria-hidden":"true",children:""})})}):a.jsxs("div",{className:"buy-coffee",children:[a.jsxs("a",{className:"buy-coffee-link",href:yh,target:"_blank",rel:"noreferrer noopener","aria-label":"Support WebSynth Studio via Buy Me a Coffee",children:[a.jsx("span",{className:"sr-only",children:"Support WebSynth Studio on Buy Me a Coffee"}),a.jsx("img",{src:xh,alt:"",loading:"lazy",width:220,height:62})]}),a.jsx("button",{type:"button",className:"buy-coffee-dismiss","aria-label":"Hide Buy Me a Coffee support button",onClick:()=>i(!0),children:a.jsx("span",{"aria-hidden":"true",children:""})})]})}const Sh=[{label:"1024",value:1024,description:"Fastest response, lowest resolution"},{label:"2048",value:2048,description:"Balanced speed and detail"},{label:"4096",value:4096,description:"Default detail"},{label:"8192",value:8192,description:"Highest resolution, slowest refresh"}];function kh(){const r=ne(l=>l.oscilloscope.fftSize),i=ne(l=>l.setOscilloscopeFftSize);return a.jsxs("div",{className:"settings-group",children:[a.jsx("h5",{className:"settings-subheading",children:"Oscilloscope"}),a.jsxs("div",{className:"settings-row",children:[a.jsx("span",{className:"label",children:"FFT Size"}),a.jsx("div",{className:"fft-options",children:Sh.map(l=>{const u=r===l.value;return a.jsxs("button",{type:"button",className:`fft-option${u?" active":""}`,"aria-pressed":u,onClick:()=>i(l.value),children:[a.jsx("span",{className:"fft-option__label",children:l.label}),a.jsx("span",{className:"fft-option__hint",children:l.description})]},l.value)})})]})]})}function jh(){const r=ne(x=>x.updatePatch),[i,l]=He.useState(null),[u,d]=He.useState(!1),p=He.useRef(null),v=He.useRef(null),w=i?xi[i]:null,h=He.useCallback(()=>{d(!1),p.current?.blur()},[]),g=He.useCallback(x=>{l(x),h();const y=xi[x];y&&r(y.patch)},[h,r]);He.useEffect(()=>{if(!u)return;const x=C=>{!p.current?.contains(C.target)&&!v.current?.contains(C.target)&&h()},y=C=>{C.key==="Escape"&&(C.preventDefault(),h())};return document.addEventListener("pointerdown",x),document.addEventListener("keydown",y),()=>{document.removeEventListener("pointerdown",x),document.removeEventListener("keydown",y)}},[u,h]);const m=()=>{d(x=>!x),u&&h()};return a.jsxs("div",{className:"preset-selector","data-open":u?"true":"false",children:[a.jsxs("button",{type:"button",ref:p,className:"preset-selector-trigger",onClick:m,"aria-haspopup":"listbox","aria-expanded":u,children:[w?a.jsxs("span",{className:"preset-selector-label",children:[a.jsx("span",{className:"preset-selector-thumb",style:{backgroundImage:`url(${w.image})`}}),a.jsx("span",{children:w.name})]}):a.jsx("span",{className:"preset-selector-placeholder",children:"Presets"}),a.jsx("span",{className:"preset-selector-caret","aria-hidden":"true",children:""})]}),u&&a.jsx("div",{className:"preset-selector-popover",ref:v,role:"listbox","aria-label":"Preset library",children:wi.map(x=>a.jsxs("div",{className:"preset-selector-group",children:[a.jsx("div",{className:"preset-selector-group-title",children:x.name}),a.jsx("div",{className:"preset-selector-options",children:x.presets.map(y=>a.jsx("button",{type:"button",role:"option","aria-selected":y.id===i,className:"preset-option",style:{backgroundImage:`url(${y.image})`},onClick:()=>g(y.id),children:a.jsxs("div",{className:"preset-option-overlay",children:[a.jsx("div",{className:"preset-option-name",children:y.name}),a.jsx("div",{className:"preset-option-description",children:y.description})]})},y.id))})]},x.id))})]})}const Ru="websynth-guide-seen",Mh=["oscilloscope","oscillator","effects","lfos","arp","sequencer","drum","keyboard"];function Eh(r){return Mh.includes(r)}function Ch(){const r=ne(R=>R.engine),i=ne(R=>R.setEngine),l=ne(R=>R.patch),[u,d]=V.useState(!1),[p,v]=V.useState(!1),[w,h]=V.useState(null);V.useEffect(()=>{try{localStorage.getItem(Ru)||v(!0)}catch{}},[]),V.useEffect(()=>{const R=async()=>{if(!ne.getState().engine){const z=new vi;await z.resume(),z.applyPatch(l),i(z)}window.removeEventListener("pointerdown",R),window.removeEventListener("keydown",R)};return window.addEventListener("pointerdown",R),window.addEventListener("keydown",R),()=>{window.removeEventListener("pointerdown",R),window.removeEventListener("keydown",R)}},[l,i]);const g=async()=>{if(!r){const R=new vi;await R.resume(),R.applyPatch(l),i(R)}},m=[{id:"oscilloscope",title:"Oscilloscope",span:2,render:()=>a.jsxs("div",{className:"oscilloscope-stack",children:[a.jsx(Up,{}),a.jsxs("div",{className:"oscilloscope-row",children:[a.jsx(Ip,{}),a.jsx(Fp,{})]})]})},{id:"oscillator",title:"Oscillator",span:2,render:()=>a.jsx(Rp,{})},{id:"effects",title:"Effects",span:2,render:()=>a.jsx(Hp,{})},{id:"lfos",title:"LFOs",span:2,render:()=>a.jsx(Wp,{})},{id:"arp",title:"Arpeggiator",span:2,render:()=>a.jsx(Vp,{})},{id:"sequencer",title:"Sequencer",span:2,render:()=>a.jsx($p,{})},{id:"drum",title:"Drum Machine",span:2,render:()=>a.jsx(ih,{})},{id:"keyboard",title:"Keyboard",span:2,render:()=>a.jsx(Bp,{})}],x=ne(R=>R.layoutOrder),y=ne(R=>R.setLayoutOrder),C=ne(R=>R.resetPatch),k=V.useMemo(()=>({oscilloscope:{title:"Oscilloscope & Signal Shaping",body:a.jsxs("div",{className:"module-help",children:[a.jsx("p",{children:"This column stacks the live scope with the filter and envelope controls so you can see and hear how each tweak reshapes the voice in real time."}),a.jsx("h5",{children:"Oscilloscope"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Live waveform"})," shows the post-filter signalwatch for clipping, phase inversion, or DC offset."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Visual feedback"})," makes it easy to dial envelope curves or modulation depth by eye."]})]}),a.jsx("h5",{children:"Filter"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Filter Type"}),": switch between low-pass, high-pass, band-pass, or notch responses."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Cutoff"}),": set the corner frequency (408 kHz)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Resonance"}),": emphasise frequencies around the cutoff for squelchy tones or formants."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Master"}),": trim the synth output to prevent overload after heavy resonance or drive."]})]}),a.jsx("h5",{children:"Envelope"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Attack/Decay"}),": tune how quickly the note ramps up and falls back."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Sustain"}),": set the plateau level while a key is held."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Release"}),": control how long the tail rings once the note stops."]})]}),a.jsx("h5",{children:"Workflow Tips"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Start with moderate sustain and adjust cutoff until the oscilloscope shows a balanced waveform."}),a.jsx("li",{children:"Use short attacks with high resonance for plucky stabs, or longer releases for pads."})]})]})},oscillator:{title:"ENG Voice Engine",body:a.jsxs("div",{className:"module-help",children:[a.jsx("p",{children:"The engine panel builds the raw tone. Switch between the classic dual-engine stack (ENG1/ENG2) and the macro voice engine."}),a.jsx("h5",{children:"Classic Mode"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Mode"}),": choose Classic to expose ENG1 and ENG2 controls; Macro flips to the multi-model engine."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Wave"}),": pick saw, square, triangle, sine, or noise per engine."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Detune/Fine"}),": detune ENG1 in cents for chorus movement; fine tune provides subtle offsets."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Mix"}),": blend ENG1 against ENG2 to balance the tone."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"FM toggle"}),": enable frequency modulation, then set ",a.jsx("strong",{children:"Ratio"})," for the modulator harmonic and ",a.jsx("strong",{children:"Amount"})," for depth."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Ring toggle"}),": engage ring modulation and scale its ",a.jsx("strong",{children:"Amount"})," for metallic textures."]})]}),a.jsx("h5",{children:"Macro Mode"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Model"}),": jump between macro-oscillator flavours (VA, wavefold, pluck, FM 2-Op, etc.)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Harmonics/Timbre/Morph"}),": scan each models parameter setgreat for morphing wavetables or shaping plucks."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Level"}),": trim the macro engine output when layering with other voices."]})]}),a.jsx("h5",{children:"Sound Design Tips"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Stack slight detune plus a touch of ring modulation for wide analog pads."}),a.jsx("li",{children:"Macro models respond well to LFO or expression assignmentsmap CapsLock X/Y to Morph or Timbre for live movement."})]})]})},effects:{title:"Effects Rack",body:a.jsxs("div",{className:"module-help",children:[a.jsx("p",{children:"Delay and reverb live here so you can finish a patch without leaving the synth view."}),a.jsx("h5",{children:"Delay"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Enabled"}),": toggle the bucket-brigade style delay."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Time"}),": set delay time in seconds (01.5s). Syncs nicely with tempo divisions."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Feedback"}),": control repeats; keep under ~0.7 for stable feedback."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Mix"}),": blend the wet signal back with the dry synth."]})]}),a.jsx("h5",{children:"Reverb"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Enabled"}),": load the convolution reverb stage."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Size"}),": pick the impulse room length."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Decay"}),": shape how long the tail sustains."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Mix"}),": balance ambience without washing out the dry signal."]})]}),a.jsx("h5",{children:"Tips"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Short delay times with low mix create slapback for bass and plucks."}),a.jsx("li",{children:"Cut delay feedback when engaging heavy reverb to avoid muddiness."})]})]})},lfos:{title:"LFO Modulators",body:a.jsxs("div",{className:"module-help",children:[a.jsx("p",{children:"Two low-frequency oscillators inject motion into almost any destination in the patch."}),a.jsx("h5",{children:"LFO Controls"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Enabled"}),": arm the modulation path for each LFO."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Wave"}),": choose sine, triangle, square, saw, or noise for the modulation shape."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Dest"}),": route to pitch, filter, or amptie depth to macros or expression for more routings."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Rate"}),": set frequency in Hz (0.0120); syncs with tempo when combined with the transport."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Amount"}),": scale modulation depth; automate this with the Sequencer or expression surface for evolving sounds."]})]}),a.jsx("h5",{children:"Tips"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Use LFO1 for slow filter sweeps and LFO2 for faster vibrato or tremolo."}),a.jsx("li",{children:"Disable the checkbox to park an LFO without losing its configuration."})]})]})},arp:{title:"Arpeggiator",body:a.jsxs("div",{className:"module-help",children:[a.jsx("p",{children:"Turn held chords into rhythmic runs that follow the global transport."}),a.jsx("h5",{children:"Playback"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Enabled"}),": start capturing held notes."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Latch"}),": keep notes running after you release the keys."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Clear"}),": flush the current latched chord without toggling the arp off."]})]}),a.jsx("h5",{children:"Timing"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Mode"}),": set traversal (up, down, up/down, random, as played)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Octaves"}),": extend the pattern across 14 octaves."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Chord"}),": fold power chords, triads, or sevenths into each step."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Division"}),": choose rhythmic value (1/41/16T)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"BPM"}),": the slider writes to the global tempo so drums and sequencer stay in sync."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Gate/Swing"}),": tighten note length and groove feel."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Repeats/Length"}),": loop steps multiple times or clamp the pattern length."]})]}),a.jsx("h5",{children:"Tips"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Combine Latch with the Sequencer for counterpointthat way the arp handles chords while the sequencer drives lead lines."}),a.jsx("li",{children:"Use the expression surface to modulate filter cutoff while the arp runs for dynamic sweeps."})]})]})},sequencer:{title:"Step Sequencer",body:a.jsxs("div",{className:"module-help",children:[a.jsx("p",{children:"Program note offsets and modulation lanes across up to 16 stepsperfect for basslines or evolving textures."}),a.jsx("h5",{children:"Transport & Timing"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Play"}),": toggles the shared transport; the button mirrors the space-bar shortcut."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Enabled"}),": arm the sequencer without nuking your pattern."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Tempo"}),": linked to the global BPM so drums and arp line up."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Division"}),": set step rate (quarter to triplet sixteenths)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Length"}),": choose how many steps play before looping."]})]}),a.jsx("h5",{children:"Shape the Pattern"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Gate"}),": change note length; great for staccato acid lines."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Swing"}),": add shuffle (disabled for triplets and quarter notes)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Root"}),": slide the entire sequence up or down in pitch."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Edit Notes (Keyboard)"}),": enable to type notes with A/W/S; +/- nudges semitones, Z/X shifts the root octave."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Step grid"}),": click to toggle notes, ",a.jsx("strong",{children:"Alt+click"})," raises semitone offset, right-click lowers it."]})]}),a.jsx("h5",{children:"Visual Feedback"}),a.jsxs("ul",{children:[a.jsx("li",{children:"The highlighted cell shows the playhead; cursor outlines follow keyboard edit focus."}),a.jsx("li",{children:"Offsets in the cells (+/- values) represent semitone shifts relative to Root."})]})]})},drum:{title:"Drum Machine",body:a.jsxs("div",{className:"module-help",children:[a.jsx("p",{children:"Create percussive backbeats that share tempo and transport with the synth voice."}),a.jsx("h5",{children:"Transport"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Play/Stop"}),": drives the global clock, so sequencer and arp follow the same BPM."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Tempo"}),": change BPM with the sliderapplies everywhere."]})]}),a.jsx("h5",{children:"Programming"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Step buttons"}),": click to toggle hits for kick, snare, and hat; glowing steps are active."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Current step highlight"}),": a brighter cell shows the beat currently firing."]}),a.jsx("li",{children:"Each instrument has its own SynthEngine voice with curated patches for punchy drums."})]}),a.jsx("h5",{children:"Tips"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Start with the default 4-on-the-floor kick and build snare/hat syncopation around it."}),a.jsx("li",{children:"Layer sequencer basslines with hats on offbeats for instant groove."})]})]})},keyboard:{title:"Keyboard & Performance",body:a.jsxs("div",{className:"module-help",children:[a.jsx("p",{children:"Play and monitor incoming notes from both the computer keyboard and external MIDI controllers."}),a.jsx("h5",{children:"Computer Keys"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Mapping"}),": A/W/S/D/F/G map to white and black keys; apostrophe reaches two octaves up."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Z / X"}),": shift the octave indicator down or up in 12-semitone jumps."]}),a.jsx("li",{children:"Held keys appear highlighted so you always know what is sustaining."})]}),a.jsx("h5",{children:"Pointer & Touch"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Click or drag for glissando; multi-touch (trackpad/tablet) keeps parallel notes held."}),a.jsx("li",{children:"Black keys float above the whites for accurate gliss transitions."})]}),a.jsx("h5",{children:"MIDI Integration"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Notes triggered from external hardware light up alongside local keysgreat for debugging MIDI routing."}),a.jsx("li",{children:"The octave badge shows the base MIDI note and offset so you can align hardware controllers quickly."})]})]})}}),[]),P=w?k[w]:null,T=()=>{try{localStorage.setItem(Ru,"1")}catch{}v(!1)};return a.jsxs("div",{className:"app",children:[a.jsx(mh,{}),a.jsx(wh,{}),a.jsx(fh,{}),a.jsxs("header",{className:"header",children:[a.jsx("h2",{children:"WebSynth Studio"}),a.jsxs("div",{className:"row",children:[a.jsx(jh,{}),a.jsx("button",{onClick:g,children:r?"Audio Ready":"Power On"}),a.jsx("button",{onClick:()=>{C()},children:"Reset Patch"}),a.jsx("button",{onClick:()=>{v(!0)},children:"Help"}),a.jsx("button",{onClick:()=>d(!0),children:"Settings"})]})]}),a.jsx("main",{children:a.jsx(Qp,{panels:m,order:x,onOrderChange:y,onRequestHelp:R=>{Eh(R)&&h(R)}})}),a.jsx(Gp,{}),a.jsx(hi,{open:w!=null,onClose:()=>h(null),title:P?.title??"Module Help",closeLabel:"Close module help",children:P?.body??a.jsx("p",{children:"Help content coming soon."})}),a.jsx(hi,{open:p,onClose:T,title:"Onboarding Guide",closeLabel:"Close help overlay",children:a.jsx(gh,{onFinish:T})}),a.jsxs(hi,{open:u,onClose:()=>d(!1),children:[a.jsxs("section",{className:"settings-section",children:[a.jsx("h4",{className:"settings-heading",children:"Patches"}),a.jsx(sh,{})]}),a.jsxs("section",{className:"settings-section",children:[a.jsx("h4",{className:"settings-heading",children:"Expression"}),a.jsx(oh,{})]}),a.jsxs("section",{className:"settings-section",children:[a.jsx("h4",{className:"settings-heading",children:"Visualization"}),a.jsx(kh,{})]}),a.jsxs("section",{className:"settings-section",children:[a.jsx("h4",{className:"settings-heading",children:"MIDI"}),a.jsx(hh,{})]})]}),a.jsx(ch,{})]})}const bh=Wf.createRoot(document.getElementById("root"));bh.render(a.jsx(Ch,{}));
