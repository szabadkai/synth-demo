(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const p of d)if(p.type==="childList")for(const v of p.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&c(v)}).observe(document,{childList:!0,subtree:!0});function i(d){const p={};return d.integrity&&(p.integrity=d.integrity),d.referrerPolicy&&(p.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?p.credentials="include":d.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function c(d){if(d.ep)return;d.ep=!0;const p=i(d);fetch(d.href,p)}})();function Oc(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ti={exports:{}},Gr={},ni={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc;function Rf(){if(oc)return Me;oc=1;var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),v=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),w=Symbol.iterator;function y(E){return E===null||typeof E!="object"?null:(E=w&&E[w]||E["@@iterator"],typeof E=="function"?E:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,T={};function _(E,D,ge){this.props=E,this.context=D,this.refs=T,this.updater=ge||N}_.prototype.isReactComponent={},_.prototype.setState=function(E,D){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,D,"setState")},_.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function O(){}O.prototype=_.prototype;function A(E,D,ge){this.props=E,this.context=D,this.refs=T,this.updater=ge||N}var Y=A.prototype=new O;Y.constructor=A,j(Y,_.prototype),Y.isPureReactComponent=!0;var q=Array.isArray,ne=Object.prototype.hasOwnProperty,C={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function I(E,D,ge){var me,Se={},ue=null,we=null;if(D!=null)for(me in D.ref!==void 0&&(we=D.ref),D.key!==void 0&&(ue=""+D.key),D)ne.call(D,me)&&!F.hasOwnProperty(me)&&(Se[me]=D[me]);var je=arguments.length-2;if(je===1)Se.children=ge;else if(1<je){for(var Pe=Array(je),ae=0;ae<je;ae++)Pe[ae]=arguments[ae+2];Se.children=Pe}if(E&&E.defaultProps)for(me in je=E.defaultProps,je)Se[me]===void 0&&(Se[me]=je[me]);return{$$typeof:s,type:E,key:ue,ref:we,props:Se,_owner:C.current}}function X(E,D){return{$$typeof:s,type:E.type,key:D,ref:E.ref,props:E.props,_owner:E._owner}}function ye(E){return typeof E=="object"&&E!==null&&E.$$typeof===s}function Ee(E){var D={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(ge){return D[ge]})}var H=/\/+/g;function z(E,D){return typeof E=="object"&&E!==null&&E.key!=null?Ee(""+E.key):D.toString(36)}function ee(E,D,ge,me,Se){var ue=typeof E;(ue==="undefined"||ue==="boolean")&&(E=null);var we=!1;if(E===null)we=!0;else switch(ue){case"string":case"number":we=!0;break;case"object":switch(E.$$typeof){case s:case a:we=!0}}if(we)return we=E,Se=Se(we),E=me===""?"."+z(we,0):me,q(Se)?(ge="",E!=null&&(ge=E.replace(H,"$&/")+"/"),ee(Se,D,ge,"",function(ae){return ae})):Se!=null&&(ye(Se)&&(Se=X(Se,ge+(!Se.key||we&&we.key===Se.key?"":(""+Se.key).replace(H,"$&/")+"/")+E)),D.push(Se)),1;if(we=0,me=me===""?".":me+":",q(E))for(var je=0;je<E.length;je++){ue=E[je];var Pe=me+z(ue,je);we+=ee(ue,D,ge,Pe,Se)}else if(Pe=y(E),typeof Pe=="function")for(E=Pe.call(E),je=0;!(ue=E.next()).done;)ue=ue.value,Pe=me+z(ue,je++),we+=ee(ue,D,ge,Pe,Se);else if(ue==="object")throw D=String(E),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return we}function J(E,D,ge){if(E==null)return E;var me=[],Se=0;return ee(E,me,"","",function(ue){return D.call(ge,ue,Se++)}),me}function fe(E){if(E._status===-1){var D=E._result;D=D(),D.then(function(ge){(E._status===0||E._status===-1)&&(E._status=1,E._result=ge)},function(ge){(E._status===0||E._status===-1)&&(E._status=2,E._result=ge)}),E._status===-1&&(E._status=0,E._result=D)}if(E._status===1)return E._result.default;throw E._result}var xe={current:null},G={transition:null},Z={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:G,ReactCurrentOwner:C};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:J,forEach:function(E,D,ge){J(E,function(){D.apply(this,arguments)},ge)},count:function(E){var D=0;return J(E,function(){D++}),D},toArray:function(E){return J(E,function(D){return D})||[]},only:function(E){if(!ye(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Me.Component=_,Me.Fragment=i,Me.Profiler=d,Me.PureComponent=A,Me.StrictMode=c,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Me.act=Q,Me.cloneElement=function(E,D,ge){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var me=j({},E.props),Se=E.key,ue=E.ref,we=E._owner;if(D!=null){if(D.ref!==void 0&&(ue=D.ref,we=C.current),D.key!==void 0&&(Se=""+D.key),E.type&&E.type.defaultProps)var je=E.type.defaultProps;for(Pe in D)ne.call(D,Pe)&&!F.hasOwnProperty(Pe)&&(me[Pe]=D[Pe]===void 0&&je!==void 0?je[Pe]:D[Pe])}var Pe=arguments.length-2;if(Pe===1)me.children=ge;else if(1<Pe){je=Array(Pe);for(var ae=0;ae<Pe;ae++)je[ae]=arguments[ae+2];me.children=je}return{$$typeof:s,type:E.type,key:Se,ref:ue,props:me,_owner:we}},Me.createContext=function(E){return E={$$typeof:v,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:p,_context:E},E.Consumer=E},Me.createElement=I,Me.createFactory=function(E){var D=I.bind(null,E);return D.type=E,D},Me.createRef=function(){return{current:null}},Me.forwardRef=function(E){return{$$typeof:S,render:E}},Me.isValidElement=ye,Me.lazy=function(E){return{$$typeof:m,_payload:{_status:-1,_result:E},_init:fe}},Me.memo=function(E,D){return{$$typeof:g,type:E,compare:D===void 0?null:D}},Me.startTransition=function(E){var D=G.transition;G.transition={};try{E()}finally{G.transition=D}},Me.unstable_act=Q,Me.useCallback=function(E,D){return xe.current.useCallback(E,D)},Me.useContext=function(E){return xe.current.useContext(E)},Me.useDebugValue=function(){},Me.useDeferredValue=function(E){return xe.current.useDeferredValue(E)},Me.useEffect=function(E,D){return xe.current.useEffect(E,D)},Me.useId=function(){return xe.current.useId()},Me.useImperativeHandle=function(E,D,ge){return xe.current.useImperativeHandle(E,D,ge)},Me.useInsertionEffect=function(E,D){return xe.current.useInsertionEffect(E,D)},Me.useLayoutEffect=function(E,D){return xe.current.useLayoutEffect(E,D)},Me.useMemo=function(E,D){return xe.current.useMemo(E,D)},Me.useReducer=function(E,D,ge){return xe.current.useReducer(E,D,ge)},Me.useRef=function(E){return xe.current.useRef(E)},Me.useState=function(E){return xe.current.useState(E)},Me.useSyncExternalStore=function(E,D,ge){return xe.current.useSyncExternalStore(E,D,ge)},Me.useTransition=function(){return xe.current.useTransition()},Me.version="18.3.1",Me}var ic;function Jr(){return ic||(ic=1,ni.exports=Rf()),ni.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ac;function If(){if(ac)return Gr;ac=1;var s=Jr(),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,d=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function v(S,h,g){var m,w={},y=null,N=null;g!==void 0&&(y=""+g),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(N=h.ref);for(m in h)c.call(h,m)&&!p.hasOwnProperty(m)&&(w[m]=h[m]);if(S&&S.defaultProps)for(m in h=S.defaultProps,h)w[m]===void 0&&(w[m]=h[m]);return{$$typeof:a,type:S,key:y,ref:N,props:w,_owner:d.current}}return Gr.Fragment=i,Gr.jsx=v,Gr.jsxs=v,Gr}var uc;function Ff(){return uc||(uc=1,ti.exports=If()),ti.exports}var o=Ff(),ol={},ri={exports:{}},wt={},si={exports:{}},li={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc;function zf(){return cc||(cc=1,(function(s){function a(G,Z){var Q=G.length;G.push(Z);e:for(;0<Q;){var E=Q-1>>>1,D=G[E];if(0<d(D,Z))G[E]=Z,G[Q]=D,Q=E;else break e}}function i(G){return G.length===0?null:G[0]}function c(G){if(G.length===0)return null;var Z=G[0],Q=G.pop();if(Q!==Z){G[0]=Q;e:for(var E=0,D=G.length,ge=D>>>1;E<ge;){var me=2*(E+1)-1,Se=G[me],ue=me+1,we=G[ue];if(0>d(Se,Q))ue<D&&0>d(we,Se)?(G[E]=we,G[ue]=Q,E=ue):(G[E]=Se,G[me]=Q,E=me);else if(ue<D&&0>d(we,Q))G[E]=we,G[ue]=Q,E=ue;else break e}}return Z}function d(G,Z){var Q=G.sortIndex-Z.sortIndex;return Q!==0?Q:G.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;s.unstable_now=function(){return p.now()}}else{var v=Date,S=v.now();s.unstable_now=function(){return v.now()-S}}var h=[],g=[],m=1,w=null,y=3,N=!1,j=!1,T=!1,_=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(G){for(var Z=i(g);Z!==null;){if(Z.callback===null)c(g);else if(Z.startTime<=G)c(g),Z.sortIndex=Z.expirationTime,a(h,Z);else break;Z=i(g)}}function q(G){if(T=!1,Y(G),!j)if(i(h)!==null)j=!0,fe(ne);else{var Z=i(g);Z!==null&&xe(q,Z.startTime-G)}}function ne(G,Z){j=!1,T&&(T=!1,O(I),I=-1),N=!0;var Q=y;try{for(Y(Z),w=i(h);w!==null&&(!(w.expirationTime>Z)||G&&!Ee());){var E=w.callback;if(typeof E=="function"){w.callback=null,y=w.priorityLevel;var D=E(w.expirationTime<=Z);Z=s.unstable_now(),typeof D=="function"?w.callback=D:w===i(h)&&c(h),Y(Z)}else c(h);w=i(h)}if(w!==null)var ge=!0;else{var me=i(g);me!==null&&xe(q,me.startTime-Z),ge=!1}return ge}finally{w=null,y=Q,N=!1}}var C=!1,F=null,I=-1,X=5,ye=-1;function Ee(){return!(s.unstable_now()-ye<X)}function H(){if(F!==null){var G=s.unstable_now();ye=G;var Z=!0;try{Z=F(!0,G)}finally{Z?z():(C=!1,F=null)}}else C=!1}var z;if(typeof A=="function")z=function(){A(H)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,J=ee.port2;ee.port1.onmessage=H,z=function(){J.postMessage(null)}}else z=function(){_(H,0)};function fe(G){F=G,C||(C=!0,z())}function xe(G,Z){I=_(function(){G(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_continueExecution=function(){j||N||(j=!0,fe(ne))},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return i(h)},s.unstable_next=function(G){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var Q=y;y=Z;try{return G()}finally{y=Q}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=y;y=G;try{return Z()}finally{y=Q}},s.unstable_scheduleCallback=function(G,Z,Q){var E=s.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?E+Q:E):Q=E,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Q+D,G={id:m++,callback:Z,priorityLevel:G,startTime:Q,expirationTime:D,sortIndex:-1},Q>E?(G.sortIndex=Q,a(g,G),i(h)===null&&G===i(g)&&(T?(O(I),I=-1):T=!0,xe(q,Q-E))):(G.sortIndex=D,a(h,G),j||N||(j=!0,fe(ne))),G},s.unstable_shouldYield=Ee,s.unstable_wrapCallback=function(G){var Z=y;return function(){var Q=y;y=Z;try{return G.apply(this,arguments)}finally{y=Q}}}})(li)),li}var dc;function Df(){return dc||(dc=1,si.exports=zf()),si.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fc;function Af(){if(fc)return wt;fc=1;var s=Jr(),a=Df();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,d={};function p(e,t){v(e,t),v(e+"Capture",t)}function v(e,t){for(d[e]=t,e=0;e<t.length;e++)c.add(t[e])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},w={};function y(e){return h.call(w,e)?!0:h.call(m,e)?!1:g.test(e)?w[e]=!0:(m[e]=!0,!1)}function N(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j(e,t,n,r){if(t===null||typeof t>"u"||N(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function T(e,t,n,r,l,u,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=f}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_[e]=new T(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_[t]=new T(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){_[e]=new T(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_[e]=new T(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_[e]=new T(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){_[e]=new T(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){_[e]=new T(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){_[e]=new T(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){_[e]=new T(e,5,!1,e.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function A(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(O,A);_[t]=new T(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(O,A);_[t]=new T(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(O,A);_[t]=new T(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){_[e]=new T(e,1,!1,e.toLowerCase(),null,!1,!1)}),_.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){_[e]=new T(e,1,!1,e.toLowerCase(),null,!0,!0)});function Y(e,t,n,r){var l=_.hasOwnProperty(t)?_[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(j(t,n,l,r)&&(n=null),r||l===null?y(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var q=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),C=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ye=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),G=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var Q=Object.assign,E;function D(e){if(E===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);E=t&&t[1]||""}return`
`+E+e}var ge=!1;function me(e,t){if(!e||ge)return"";ge=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(L){var r=L}Reflect.construct(e,[],t)}else{try{t.call()}catch(L){r=L}e.call(t.prototype)}else{try{throw Error()}catch(L){r=L}e()}}catch(L){if(L&&r&&typeof L.stack=="string"){for(var l=L.stack.split(`
`),u=r.stack.split(`
`),f=l.length-1,x=u.length-1;1<=f&&0<=x&&l[f]!==u[x];)x--;for(;1<=f&&0<=x;f--,x--)if(l[f]!==u[x]){if(f!==1||x!==1)do if(f--,x--,0>x||l[f]!==u[x]){var k=`
`+l[f].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=f&&0<=x);break}}}finally{ge=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function Se(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=me(e.type,!1),e;case 11:return e=me(e.type.render,!1),e;case 1:return e=me(e.type,!0),e;default:return""}}function ue(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case C:return"Portal";case X:return"Profiler";case I:return"StrictMode";case z:return"Suspense";case ee:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ee:return(e.displayName||"Context")+".Consumer";case ye:return(e._context.displayName||"Context")+".Provider";case H:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return t=e.displayName||null,t!==null?t:ue(e.type)||"Memo";case fe:t=e._payload,e=e._init;try{return ue(e(t))}catch{}}return null}function we(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function je(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ae(e){var t=Pe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){r=""+f,u.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(f){r=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qe(e){e._valueTracker||(e._valueTracker=ae(e))}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Pe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ke(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dt(e,t){var n=t.checked;return Q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Rt(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=je(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function W(e,t){t=t.checked,t!=null&&Y(e,"checked",t,!1)}function pe(e,t){W(e,t);var n=je(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ve(e,t.type,n):t.hasOwnProperty("defaultValue")&&ve(e,t.type,je(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ke(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ve(e,t,n){(t!=="number"||Ke(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var be=Array.isArray;function _e(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+je(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ht(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return Q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qt(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(i(92));if(be(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:je(n)}}function Ce(e,t){var n=je(t.value),r=je(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function It(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ct(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ie(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ct(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nt,Mn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nt=nt||document.createElement("div"),nt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ur(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zc=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(e){zc.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cr[t]=cr[e]})});function Si(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cr.hasOwnProperty(e)&&cr[e]?(""+t).trim():t+"px"}function ki(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Si(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Dc=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fl(e,t){if(t){if(Dc[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function pl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=null;function ml(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vl=null,Dn=null,An=null;function ji(e){if(e=Lr(e)){if(typeof vl!="function")throw Error(i(280));var t=e.stateNode;t&&(t=Ss(t),vl(e.stateNode,e.type,t))}}function Mi(e){Dn?An?An.push(e):An=[e]:Dn=e}function Ei(){if(Dn){var e=Dn,t=An;if(An=Dn=null,ji(e),t)for(e=0;e<t.length;e++)ji(t[e])}}function Ci(e,t){return e(t)}function Ni(){}var gl=!1;function bi(e,t,n){if(gl)return e(t,n);gl=!0;try{return Ci(e,t,n)}finally{gl=!1,(Dn!==null||An!==null)&&(Ni(),Ei())}}function dr(e,t){var n=e.stateNode;if(n===null)return null;var r=Ss(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(i(231,t,typeof n));return n}var yl=!1;if(S)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){yl=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{yl=!1}function Ac(e,t,n,r,l,u,f,x,k){var L=Array.prototype.slice.call(arguments,3);try{t.apply(n,L)}catch(U){this.onError(U)}}var pr=!1,Zr=null,es=!1,xl=null,qc={onError:function(e){pr=!0,Zr=e}};function Bc(e,t,n,r,l,u,f,x,k){pr=!1,Zr=null,Ac.apply(qc,arguments)}function Uc(e,t,n,r,l,u,f,x,k){if(Bc.apply(this,arguments),pr){if(pr){var L=Zr;pr=!1,Zr=null}else throw Error(i(198));es||(es=!0,xl=L)}}function En(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Pi(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ti(e){if(En(e)!==e)throw Error(i(188))}function Hc(e){var t=e.alternate;if(!t){if(t=En(e),t===null)throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var u=l.alternate;if(u===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===n)return Ti(l),e;if(u===r)return Ti(l),t;u=u.sibling}throw Error(i(188))}if(n.return!==r.return)n=l,r=u;else{for(var f=!1,x=l.child;x;){if(x===n){f=!0,n=l,r=u;break}if(x===r){f=!0,r=l,n=u;break}x=x.sibling}if(!f){for(x=u.child;x;){if(x===n){f=!0,n=u,r=l;break}if(x===r){f=!0,r=u,n=l;break}x=x.sibling}if(!f)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function _i(e){return e=Hc(e),e!==null?Li(e):null}function Li(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Li(e);if(t!==null)return t;e=e.sibling}return null}var Oi=a.unstable_scheduleCallback,Ri=a.unstable_cancelCallback,Wc=a.unstable_shouldYield,Vc=a.unstable_requestPaint,$e=a.unstable_now,$c=a.unstable_getCurrentPriorityLevel,wl=a.unstable_ImmediatePriority,Ii=a.unstable_UserBlockingPriority,ts=a.unstable_NormalPriority,Gc=a.unstable_LowPriority,Fi=a.unstable_IdlePriority,ns=null,Ht=null;function Qc(e){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(ns,e,void 0,(e.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Yc,Kc=Math.log,Xc=Math.LN2;function Yc(e){return e>>>=0,e===0?32:31-(Kc(e)/Xc|0)|0}var rs=64,ss=4194304;function hr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ls(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,u=e.pingedLanes,f=n&268435455;if(f!==0){var x=f&~l;x!==0?r=hr(x):(u&=f,u!==0&&(r=hr(u)))}else f=n&~l,f!==0?r=hr(f):u!==0&&(r=hr(u));if(r===0)return 0;if(t!==0&&t!==r&&(t&l)===0&&(l=r&-r,u=t&-t,l>=u||l===16&&(u&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ft(t),l=1<<n,r|=e[n],t&=~l;return r}function Jc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,u=e.pendingLanes;0<u;){var f=31-Ft(u),x=1<<f,k=l[f];k===-1?((x&n)===0||(x&r)!==0)&&(l[f]=Jc(x,t)):k<=t&&(e.expiredLanes|=x),u&=~x}}function Sl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zi(){var e=rs;return rs<<=1,(rs&4194240)===0&&(rs=64),e}function kl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ft(t),e[t]=n}function ed(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Ft(n),u=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~u}}function jl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ft(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var Re=0;function Di(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ai,Ml,qi,Bi,Ui,El=!1,os=[],sn=null,ln=null,on=null,vr=new Map,gr=new Map,an=[],td="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hi(e,t){switch(e){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":vr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gr.delete(t.pointerId)}}function yr(e,t,n,r,l,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[l]},t!==null&&(t=Lr(t),t!==null&&Ml(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function nd(e,t,n,r,l){switch(t){case"focusin":return sn=yr(sn,e,t,n,r,l),!0;case"dragenter":return ln=yr(ln,e,t,n,r,l),!0;case"mouseover":return on=yr(on,e,t,n,r,l),!0;case"pointerover":var u=l.pointerId;return vr.set(u,yr(vr.get(u)||null,e,t,n,r,l)),!0;case"gotpointercapture":return u=l.pointerId,gr.set(u,yr(gr.get(u)||null,e,t,n,r,l)),!0}return!1}function Wi(e){var t=Cn(e.target);if(t!==null){var n=En(t);if(n!==null){if(t=n.tag,t===13){if(t=Pi(n),t!==null){e.blockedOn=t,Ui(e.priority,function(){qi(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function is(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);hl=r,n.target.dispatchEvent(r),hl=null}else return t=Lr(n),t!==null&&Ml(t),e.blockedOn=n,!1;t.shift()}return!0}function Vi(e,t,n){is(e)&&n.delete(t)}function rd(){El=!1,sn!==null&&is(sn)&&(sn=null),ln!==null&&is(ln)&&(ln=null),on!==null&&is(on)&&(on=null),vr.forEach(Vi),gr.forEach(Vi)}function xr(e,t){e.blockedOn===t&&(e.blockedOn=null,El||(El=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,rd)))}function wr(e){function t(l){return xr(l,e)}if(0<os.length){xr(os[0],e);for(var n=1;n<os.length;n++){var r=os[n];r.blockedOn===e&&(r.blockedOn=null)}}for(sn!==null&&xr(sn,e),ln!==null&&xr(ln,e),on!==null&&xr(on,e),vr.forEach(t),gr.forEach(t),n=0;n<an.length;n++)r=an[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)Wi(n),n.blockedOn===null&&an.shift()}var qn=q.ReactCurrentBatchConfig,as=!0;function sd(e,t,n,r){var l=Re,u=qn.transition;qn.transition=null;try{Re=1,Cl(e,t,n,r)}finally{Re=l,qn.transition=u}}function ld(e,t,n,r){var l=Re,u=qn.transition;qn.transition=null;try{Re=4,Cl(e,t,n,r)}finally{Re=l,qn.transition=u}}function Cl(e,t,n,r){if(as){var l=Nl(e,t,n,r);if(l===null)Wl(e,t,r,us,n),Hi(e,r);else if(nd(l,e,t,n,r))r.stopPropagation();else if(Hi(e,r),t&4&&-1<td.indexOf(e)){for(;l!==null;){var u=Lr(l);if(u!==null&&Ai(u),u=Nl(e,t,n,r),u===null&&Wl(e,t,r,us,n),u===l)break;l=u}l!==null&&r.stopPropagation()}else Wl(e,t,r,null,n)}}var us=null;function Nl(e,t,n,r){if(us=null,e=ml(r),e=Cn(e),e!==null)if(t=En(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Pi(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return us=e,null}function $i(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($c()){case wl:return 1;case Ii:return 4;case ts:case Gc:return 16;case Fi:return 536870912;default:return 16}default:return 16}}var un=null,bl=null,cs=null;function Gi(){if(cs)return cs;var e,t=bl,n=t.length,r,l="value"in un?un.value:un.textContent,u=l.length;for(e=0;e<n&&t[e]===l[e];e++);var f=n-e;for(r=1;r<=f&&t[n-r]===l[u-r];r++);return cs=l.slice(e,1<r?1-r:void 0)}function ds(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fs(){return!0}function Qi(){return!1}function kt(e){function t(n,r,l,u,f){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=u,this.target=f,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(n=e[x],this[x]=n?n(u):u[x]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?fs:Qi,this.isPropagationStopped=Qi,this}return Q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),t}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pl=kt(Bn),Sr=Q({},Bn,{view:0,detail:0}),od=kt(Sr),Tl,_l,kr,ps=Q({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kr&&(kr&&e.type==="mousemove"?(Tl=e.screenX-kr.screenX,_l=e.screenY-kr.screenY):_l=Tl=0,kr=e),Tl)},movementY:function(e){return"movementY"in e?e.movementY:_l}}),Ki=kt(ps),id=Q({},ps,{dataTransfer:0}),ad=kt(id),ud=Q({},Sr,{relatedTarget:0}),Ll=kt(ud),cd=Q({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),dd=kt(cd),fd=Q({},Bn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pd=kt(fd),hd=Q({},Bn,{data:0}),Xi=kt(hd),md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gd[e])?!!t[e]:!1}function Ol(){return yd}var xd=Q({},Sr,{key:function(e){if(e.key){var t=md[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(e){return e.type==="keypress"?ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wd=kt(xd),Sd=Q({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=kt(Sd),kd=Q({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),jd=kt(kd),Md=Q({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ed=kt(Md),Cd=Q({},ps,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nd=kt(Cd),bd=[9,13,27,32],Rl=S&&"CompositionEvent"in window,jr=null;S&&"documentMode"in document&&(jr=document.documentMode);var Pd=S&&"TextEvent"in window&&!jr,Ji=S&&(!Rl||jr&&8<jr&&11>=jr),Zi=" ",ea=!1;function ta(e,t){switch(e){case"keyup":return bd.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function na(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Un=!1;function Td(e,t){switch(e){case"compositionend":return na(t);case"keypress":return t.which!==32?null:(ea=!0,Zi);case"textInput":return e=t.data,e===Zi&&ea?null:e;default:return null}}function _d(e,t){if(Un)return e==="compositionend"||!Rl&&ta(e,t)?(e=Gi(),cs=bl=un=null,Un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ji&&t.locale!=="ko"?null:t.data;default:return null}}var Ld={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ra(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ld[e.type]:t==="textarea"}function sa(e,t,n,r){Mi(r),t=ys(t,"onChange"),0<t.length&&(n=new Pl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mr=null,Er=null;function Od(e){ka(e,0)}function hs(e){var t=Gn(e);if(Ve(t))return e}function Rd(e,t){if(e==="change")return t}var la=!1;if(S){var Il;if(S){var Fl="oninput"in document;if(!Fl){var oa=document.createElement("div");oa.setAttribute("oninput","return;"),Fl=typeof oa.oninput=="function"}Il=Fl}else Il=!1;la=Il&&(!document.documentMode||9<document.documentMode)}function ia(){Mr&&(Mr.detachEvent("onpropertychange",aa),Er=Mr=null)}function aa(e){if(e.propertyName==="value"&&hs(Er)){var t=[];sa(t,Er,e,ml(e)),bi(Od,t)}}function Id(e,t,n){e==="focusin"?(ia(),Mr=t,Er=n,Mr.attachEvent("onpropertychange",aa)):e==="focusout"&&ia()}function Fd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hs(Er)}function zd(e,t){if(e==="click")return hs(t)}function Dd(e,t){if(e==="input"||e==="change")return hs(t)}function Ad(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:Ad;function Cr(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!h.call(t,l)||!zt(e[l],t[l]))return!1}return!0}function ua(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ca(e,t){var n=ua(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ua(n)}}function da(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?da(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fa(){for(var e=window,t=Ke();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ke(e.document)}return t}function zl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qd(e){var t=fa(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&da(n.ownerDocument.documentElement,n)){if(r!==null&&zl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,u=Math.min(r.start,l);r=r.end===void 0?u:Math.min(r.end,l),!e.extend&&u>r&&(l=r,r=u,u=l),l=ca(n,u);var f=ca(n,r);l&&f&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),u>r?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bd=S&&"documentMode"in document&&11>=document.documentMode,Hn=null,Dl=null,Nr=null,Al=!1;function pa(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Al||Hn==null||Hn!==Ke(r)||(r=Hn,"selectionStart"in r&&zl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nr&&Cr(Nr,r)||(Nr=r,r=ys(Dl,"onSelect"),0<r.length&&(t=new Pl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hn)))}function ms(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wn={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionend:ms("Transition","TransitionEnd")},ql={},ha={};S&&(ha=document.createElement("div").style,"AnimationEvent"in window||(delete Wn.animationend.animation,delete Wn.animationiteration.animation,delete Wn.animationstart.animation),"TransitionEvent"in window||delete Wn.transitionend.transition);function vs(e){if(ql[e])return ql[e];if(!Wn[e])return e;var t=Wn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ha)return ql[e]=t[n];return e}var ma=vs("animationend"),va=vs("animationiteration"),ga=vs("animationstart"),ya=vs("transitionend"),xa=new Map,wa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(e,t){xa.set(e,t),p(t,[e])}for(var Bl=0;Bl<wa.length;Bl++){var Ul=wa[Bl],Ud=Ul.toLowerCase(),Hd=Ul[0].toUpperCase()+Ul.slice(1);cn(Ud,"on"+Hd)}cn(ma,"onAnimationEnd"),cn(va,"onAnimationIteration"),cn(ga,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(ya,"onTransitionEnd"),v("onMouseEnter",["mouseout","mouseover"]),v("onMouseLeave",["mouseout","mouseover"]),v("onPointerEnter",["pointerout","pointerover"]),v("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wd=new Set("cancel close invalid load scroll toggle".split(" ").concat(br));function Sa(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Uc(r,t,void 0,e),e.currentTarget=null}function ka(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var f=r.length-1;0<=f;f--){var x=r[f],k=x.instance,L=x.currentTarget;if(x=x.listener,k!==u&&l.isPropagationStopped())break e;Sa(l,x,L),u=k}else for(f=0;f<r.length;f++){if(x=r[f],k=x.instance,L=x.currentTarget,x=x.listener,k!==u&&l.isPropagationStopped())break e;Sa(l,x,L),u=k}}}if(es)throw e=xl,es=!1,xl=null,e}function ze(e,t){var n=t[Xl];n===void 0&&(n=t[Xl]=new Set);var r=e+"__bubble";n.has(r)||(ja(t,e,2,!1),n.add(r))}function Hl(e,t,n){var r=0;t&&(r|=4),ja(n,e,r,t)}var gs="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){if(!e[gs]){e[gs]=!0,c.forEach(function(n){n!=="selectionchange"&&(Wd.has(n)||Hl(n,!1,e),Hl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gs]||(t[gs]=!0,Hl("selectionchange",!1,t))}}function ja(e,t,n,r){switch($i(t)){case 1:var l=sd;break;case 4:l=ld;break;default:l=Cl}n=l.bind(null,t,n,e),l=void 0,!yl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Wl(e,t,n,r,l){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var f=r.tag;if(f===3||f===4){var x=r.stateNode.containerInfo;if(x===l||x.nodeType===8&&x.parentNode===l)break;if(f===4)for(f=r.return;f!==null;){var k=f.tag;if((k===3||k===4)&&(k=f.stateNode.containerInfo,k===l||k.nodeType===8&&k.parentNode===l))return;f=f.return}for(;x!==null;){if(f=Cn(x),f===null)return;if(k=f.tag,k===5||k===6){r=u=f;continue e}x=x.parentNode}}r=r.return}bi(function(){var L=u,U=ml(n),V=[];e:{var B=xa.get(e);if(B!==void 0){var re=Pl,le=e;switch(e){case"keypress":if(ds(n)===0)break e;case"keydown":case"keyup":re=wd;break;case"focusin":le="focus",re=Ll;break;case"focusout":le="blur",re=Ll;break;case"beforeblur":case"afterblur":re=Ll;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Ki;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=ad;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=jd;break;case ma:case va:case ga:re=dd;break;case ya:re=Ed;break;case"scroll":re=od;break;case"wheel":re=Nd;break;case"copy":case"cut":case"paste":re=pd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Yi}var oe=(t&4)!==0,Ge=!oe&&e==="scroll",b=oe?B!==null?B+"Capture":null:B;oe=[];for(var M=L,P;M!==null;){P=M;var K=P.stateNode;if(P.tag===5&&K!==null&&(P=K,b!==null&&(K=dr(M,b),K!=null&&oe.push(Tr(M,K,P)))),Ge)break;M=M.return}0<oe.length&&(B=new re(B,le,null,n,U),V.push({event:B,listeners:oe}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",B&&n!==hl&&(le=n.relatedTarget||n.fromElement)&&(Cn(le)||le[Kt]))break e;if((re||B)&&(B=U.window===U?U:(B=U.ownerDocument)?B.defaultView||B.parentWindow:window,re?(le=n.relatedTarget||n.toElement,re=L,le=le?Cn(le):null,le!==null&&(Ge=En(le),le!==Ge||le.tag!==5&&le.tag!==6)&&(le=null)):(re=null,le=L),re!==le)){if(oe=Ki,K="onMouseLeave",b="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(oe=Yi,K="onPointerLeave",b="onPointerEnter",M="pointer"),Ge=re==null?B:Gn(re),P=le==null?B:Gn(le),B=new oe(K,M+"leave",re,n,U),B.target=Ge,B.relatedTarget=P,K=null,Cn(U)===L&&(oe=new oe(b,M+"enter",le,n,U),oe.target=P,oe.relatedTarget=Ge,K=oe),Ge=K,re&&le)t:{for(oe=re,b=le,M=0,P=oe;P;P=Vn(P))M++;for(P=0,K=b;K;K=Vn(K))P++;for(;0<M-P;)oe=Vn(oe),M--;for(;0<P-M;)b=Vn(b),P--;for(;M--;){if(oe===b||b!==null&&oe===b.alternate)break t;oe=Vn(oe),b=Vn(b)}oe=null}else oe=null;re!==null&&Ma(V,B,re,oe,!1),le!==null&&Ge!==null&&Ma(V,Ge,le,oe,!0)}}e:{if(B=L?Gn(L):window,re=B.nodeName&&B.nodeName.toLowerCase(),re==="select"||re==="input"&&B.type==="file")var ie=Rd;else if(ra(B))if(la)ie=Dd;else{ie=Fd;var ce=Id}else(re=B.nodeName)&&re.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(ie=zd);if(ie&&(ie=ie(e,L))){sa(V,ie,n,U);break e}ce&&ce(e,B,L),e==="focusout"&&(ce=B._wrapperState)&&ce.controlled&&B.type==="number"&&ve(B,"number",B.value)}switch(ce=L?Gn(L):window,e){case"focusin":(ra(ce)||ce.contentEditable==="true")&&(Hn=ce,Dl=L,Nr=null);break;case"focusout":Nr=Dl=Hn=null;break;case"mousedown":Al=!0;break;case"contextmenu":case"mouseup":case"dragend":Al=!1,pa(V,n,U);break;case"selectionchange":if(Bd)break;case"keydown":case"keyup":pa(V,n,U)}var de;if(Rl)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Un?ta(e,n)&&(he="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(he="onCompositionStart");he&&(Ji&&n.locale!=="ko"&&(Un||he!=="onCompositionStart"?he==="onCompositionEnd"&&Un&&(de=Gi()):(un=U,bl="value"in un?un.value:un.textContent,Un=!0)),ce=ys(L,he),0<ce.length&&(he=new Xi(he,e,null,n,U),V.push({event:he,listeners:ce}),de?he.data=de:(de=na(n),de!==null&&(he.data=de)))),(de=Pd?Td(e,n):_d(e,n))&&(L=ys(L,"onBeforeInput"),0<L.length&&(U=new Xi("onBeforeInput","beforeinput",null,n,U),V.push({event:U,listeners:L}),U.data=de))}ka(V,t)})}function Tr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ys(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,u=l.stateNode;l.tag===5&&u!==null&&(l=u,u=dr(e,n),u!=null&&r.unshift(Tr(e,u,l)),u=dr(e,t),u!=null&&r.push(Tr(e,u,l))),e=e.return}return r}function Vn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ma(e,t,n,r,l){for(var u=t._reactName,f=[];n!==null&&n!==r;){var x=n,k=x.alternate,L=x.stateNode;if(k!==null&&k===r)break;x.tag===5&&L!==null&&(x=L,l?(k=dr(n,u),k!=null&&f.unshift(Tr(n,k,x))):l||(k=dr(n,u),k!=null&&f.push(Tr(n,k,x)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Vd=/\r\n?/g,$d=/\u0000|\uFFFD/g;function Ea(e){return(typeof e=="string"?e:""+e).replace(Vd,`
`).replace($d,"")}function xs(e,t,n){if(t=Ea(t),Ea(e)!==t&&n)throw Error(i(425))}function ws(){}var Vl=null,$l=null;function Gl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,Gd=typeof clearTimeout=="function"?clearTimeout:void 0,Ca=typeof Promise=="function"?Promise:void 0,Qd=typeof queueMicrotask=="function"?queueMicrotask:typeof Ca<"u"?function(e){return Ca.resolve(null).then(e).catch(Kd)}:Ql;function Kd(e){setTimeout(function(){throw e})}function Kl(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),wr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);wr(t)}function dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Na(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $n=Math.random().toString(36).slice(2),Wt="__reactFiber$"+$n,_r="__reactProps$"+$n,Kt="__reactContainer$"+$n,Xl="__reactEvents$"+$n,Xd="__reactListeners$"+$n,Yd="__reactHandles$"+$n;function Cn(e){var t=e[Wt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Kt]||n[Wt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Na(e);e!==null;){if(n=e[Wt])return n;e=Na(e)}return t}e=n,n=e.parentNode}return null}function Lr(e){return e=e[Wt]||e[Kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Ss(e){return e[_r]||null}var Yl=[],Qn=-1;function fn(e){return{current:e}}function De(e){0>Qn||(e.current=Yl[Qn],Yl[Qn]=null,Qn--)}function Fe(e,t){Qn++,Yl[Qn]=e.current,e.current=t}var pn={},it=fn(pn),mt=fn(!1),Nn=pn;function Kn(e,t){var n=e.type.contextTypes;if(!n)return pn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},u;for(u in n)l[u]=t[u];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function vt(e){return e=e.childContextTypes,e!=null}function ks(){De(mt),De(it)}function ba(e,t,n){if(it.current!==pn)throw Error(i(168));Fe(it,t),Fe(mt,n)}function Pa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(i(108,we(e)||"Unknown",l));return Q({},n,r)}function js(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pn,Nn=it.current,Fe(it,e),Fe(mt,mt.current),!0}function Ta(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Pa(e,t,Nn),r.__reactInternalMemoizedMergedChildContext=e,De(mt),De(it),Fe(it,e)):De(mt),Fe(mt,n)}var Xt=null,Ms=!1,Jl=!1;function _a(e){Xt===null?Xt=[e]:Xt.push(e)}function Jd(e){Ms=!0,_a(e)}function hn(){if(!Jl&&Xt!==null){Jl=!0;var e=0,t=Re;try{var n=Xt;for(Re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xt=null,Ms=!1}catch(l){throw Xt!==null&&(Xt=Xt.slice(e+1)),Oi(wl,hn),l}finally{Re=t,Jl=!1}}return null}var Xn=[],Yn=0,Es=null,Cs=0,Nt=[],bt=0,bn=null,Yt=1,Jt="";function Pn(e,t){Xn[Yn++]=Cs,Xn[Yn++]=Es,Es=e,Cs=t}function La(e,t,n){Nt[bt++]=Yt,Nt[bt++]=Jt,Nt[bt++]=bn,bn=e;var r=Yt;e=Jt;var l=32-Ft(r)-1;r&=~(1<<l),n+=1;var u=32-Ft(t)+l;if(30<u){var f=l-l%5;u=(r&(1<<f)-1).toString(32),r>>=f,l-=f,Yt=1<<32-Ft(t)+l|n<<l|r,Jt=u+e}else Yt=1<<u|n<<l|r,Jt=e}function Zl(e){e.return!==null&&(Pn(e,1),La(e,1,0))}function eo(e){for(;e===Es;)Es=Xn[--Yn],Xn[Yn]=null,Cs=Xn[--Yn],Xn[Yn]=null;for(;e===bn;)bn=Nt[--bt],Nt[bt]=null,Jt=Nt[--bt],Nt[bt]=null,Yt=Nt[--bt],Nt[bt]=null}var jt=null,Mt=null,Ae=!1,Dt=null;function Oa(e,t){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ra(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,Mt=dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,Mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bn!==null?{id:Yt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,Mt=null,!0):!1;default:return!1}}function to(e){return(e.mode&1)!==0&&(e.flags&128)===0}function no(e){if(Ae){var t=Mt;if(t){var n=t;if(!Ra(e,t)){if(to(e))throw Error(i(418));t=dn(n.nextSibling);var r=jt;t&&Ra(e,t)?Oa(r,n):(e.flags=e.flags&-4097|2,Ae=!1,jt=e)}}else{if(to(e))throw Error(i(418));e.flags=e.flags&-4097|2,Ae=!1,jt=e}}}function Ia(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function Ns(e){if(e!==jt)return!1;if(!Ae)return Ia(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gl(e.type,e.memoizedProps)),t&&(t=Mt)){if(to(e))throw Fa(),Error(i(418));for(;t;)Oa(e,t),t=dn(t.nextSibling)}if(Ia(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Mt=dn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Mt=null}}else Mt=jt?dn(e.stateNode.nextSibling):null;return!0}function Fa(){for(var e=Mt;e;)e=dn(e.nextSibling)}function Jn(){Mt=jt=null,Ae=!1}function ro(e){Dt===null?Dt=[e]:Dt.push(e)}var Zd=q.ReactCurrentBatchConfig;function Or(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var l=r,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(f){var x=l.refs;f===null?delete x[u]:x[u]=f},t._stringRef=u,t)}if(typeof e!="string")throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function za(e){var t=e._init;return t(e._payload)}function Da(e){function t(b,M){if(e){var P=b.deletions;P===null?(b.deletions=[M],b.flags|=16):P.push(M)}}function n(b,M){if(!e)return null;for(;M!==null;)t(b,M),M=M.sibling;return null}function r(b,M){for(b=new Map;M!==null;)M.key!==null?b.set(M.key,M):b.set(M.index,M),M=M.sibling;return b}function l(b,M){return b=kn(b,M),b.index=0,b.sibling=null,b}function u(b,M,P){return b.index=P,e?(P=b.alternate,P!==null?(P=P.index,P<M?(b.flags|=2,M):P):(b.flags|=2,M)):(b.flags|=1048576,M)}function f(b){return e&&b.alternate===null&&(b.flags|=2),b}function x(b,M,P,K){return M===null||M.tag!==6?(M=Ko(P,b.mode,K),M.return=b,M):(M=l(M,P),M.return=b,M)}function k(b,M,P,K){var ie=P.type;return ie===F?U(b,M,P.props.children,K,P.key):M!==null&&(M.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===fe&&za(ie)===M.type)?(K=l(M,P.props),K.ref=Or(b,M,P),K.return=b,K):(K=Js(P.type,P.key,P.props,null,b.mode,K),K.ref=Or(b,M,P),K.return=b,K)}function L(b,M,P,K){return M===null||M.tag!==4||M.stateNode.containerInfo!==P.containerInfo||M.stateNode.implementation!==P.implementation?(M=Xo(P,b.mode,K),M.return=b,M):(M=l(M,P.children||[]),M.return=b,M)}function U(b,M,P,K,ie){return M===null||M.tag!==7?(M=zn(P,b.mode,K,ie),M.return=b,M):(M=l(M,P),M.return=b,M)}function V(b,M,P){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Ko(""+M,b.mode,P),M.return=b,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ne:return P=Js(M.type,M.key,M.props,null,b.mode,P),P.ref=Or(b,null,M),P.return=b,P;case C:return M=Xo(M,b.mode,P),M.return=b,M;case fe:var K=M._init;return V(b,K(M._payload),P)}if(be(M)||Z(M))return M=zn(M,b.mode,P,null),M.return=b,M;bs(b,M)}return null}function B(b,M,P,K){var ie=M!==null?M.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return ie!==null?null:x(b,M,""+P,K);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ne:return P.key===ie?k(b,M,P,K):null;case C:return P.key===ie?L(b,M,P,K):null;case fe:return ie=P._init,B(b,M,ie(P._payload),K)}if(be(P)||Z(P))return ie!==null?null:U(b,M,P,K,null);bs(b,P)}return null}function re(b,M,P,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number")return b=b.get(P)||null,x(M,b,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case ne:return b=b.get(K.key===null?P:K.key)||null,k(M,b,K,ie);case C:return b=b.get(K.key===null?P:K.key)||null,L(M,b,K,ie);case fe:var ce=K._init;return re(b,M,P,ce(K._payload),ie)}if(be(K)||Z(K))return b=b.get(P)||null,U(M,b,K,ie,null);bs(M,K)}return null}function le(b,M,P,K){for(var ie=null,ce=null,de=M,he=M=0,et=null;de!==null&&he<P.length;he++){de.index>he?(et=de,de=null):et=de.sibling;var Oe=B(b,de,P[he],K);if(Oe===null){de===null&&(de=et);break}e&&de&&Oe.alternate===null&&t(b,de),M=u(Oe,M,he),ce===null?ie=Oe:ce.sibling=Oe,ce=Oe,de=et}if(he===P.length)return n(b,de),Ae&&Pn(b,he),ie;if(de===null){for(;he<P.length;he++)de=V(b,P[he],K),de!==null&&(M=u(de,M,he),ce===null?ie=de:ce.sibling=de,ce=de);return Ae&&Pn(b,he),ie}for(de=r(b,de);he<P.length;he++)et=re(de,b,he,P[he],K),et!==null&&(e&&et.alternate!==null&&de.delete(et.key===null?he:et.key),M=u(et,M,he),ce===null?ie=et:ce.sibling=et,ce=et);return e&&de.forEach(function(jn){return t(b,jn)}),Ae&&Pn(b,he),ie}function oe(b,M,P,K){var ie=Z(P);if(typeof ie!="function")throw Error(i(150));if(P=ie.call(P),P==null)throw Error(i(151));for(var ce=ie=null,de=M,he=M=0,et=null,Oe=P.next();de!==null&&!Oe.done;he++,Oe=P.next()){de.index>he?(et=de,de=null):et=de.sibling;var jn=B(b,de,Oe.value,K);if(jn===null){de===null&&(de=et);break}e&&de&&jn.alternate===null&&t(b,de),M=u(jn,M,he),ce===null?ie=jn:ce.sibling=jn,ce=jn,de=et}if(Oe.done)return n(b,de),Ae&&Pn(b,he),ie;if(de===null){for(;!Oe.done;he++,Oe=P.next())Oe=V(b,Oe.value,K),Oe!==null&&(M=u(Oe,M,he),ce===null?ie=Oe:ce.sibling=Oe,ce=Oe);return Ae&&Pn(b,he),ie}for(de=r(b,de);!Oe.done;he++,Oe=P.next())Oe=re(de,b,he,Oe.value,K),Oe!==null&&(e&&Oe.alternate!==null&&de.delete(Oe.key===null?he:Oe.key),M=u(Oe,M,he),ce===null?ie=Oe:ce.sibling=Oe,ce=Oe);return e&&de.forEach(function(Of){return t(b,Of)}),Ae&&Pn(b,he),ie}function Ge(b,M,P,K){if(typeof P=="object"&&P!==null&&P.type===F&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case ne:e:{for(var ie=P.key,ce=M;ce!==null;){if(ce.key===ie){if(ie=P.type,ie===F){if(ce.tag===7){n(b,ce.sibling),M=l(ce,P.props.children),M.return=b,b=M;break e}}else if(ce.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===fe&&za(ie)===ce.type){n(b,ce.sibling),M=l(ce,P.props),M.ref=Or(b,ce,P),M.return=b,b=M;break e}n(b,ce);break}else t(b,ce);ce=ce.sibling}P.type===F?(M=zn(P.props.children,b.mode,K,P.key),M.return=b,b=M):(K=Js(P.type,P.key,P.props,null,b.mode,K),K.ref=Or(b,M,P),K.return=b,b=K)}return f(b);case C:e:{for(ce=P.key;M!==null;){if(M.key===ce)if(M.tag===4&&M.stateNode.containerInfo===P.containerInfo&&M.stateNode.implementation===P.implementation){n(b,M.sibling),M=l(M,P.children||[]),M.return=b,b=M;break e}else{n(b,M);break}else t(b,M);M=M.sibling}M=Xo(P,b.mode,K),M.return=b,b=M}return f(b);case fe:return ce=P._init,Ge(b,M,ce(P._payload),K)}if(be(P))return le(b,M,P,K);if(Z(P))return oe(b,M,P,K);bs(b,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,M!==null&&M.tag===6?(n(b,M.sibling),M=l(M,P),M.return=b,b=M):(n(b,M),M=Ko(P,b.mode,K),M.return=b,b=M),f(b)):n(b,M)}return Ge}var Zn=Da(!0),Aa=Da(!1),Ps=fn(null),Ts=null,er=null,so=null;function lo(){so=er=Ts=null}function oo(e){var t=Ps.current;De(Ps),e._currentValue=t}function io(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function tr(e,t){Ts=e,so=er=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(gt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(so!==e)if(e={context:e,memoizedValue:t,next:null},er===null){if(Ts===null)throw Error(i(308));er=e,Ts.dependencies={lanes:0,firstContext:e}}else er=er.next=e;return t}var Tn=null;function ao(e){Tn===null?Tn=[e]:Tn.push(e)}function qa(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,ao(t)):(n.next=l.next,l.next=n),t.interleaved=n,Zt(e,r)}function Zt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var mn=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ba(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function en(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Le&2)!==0){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Zt(e,n)}return l=r.interleaved,l===null?(t.next=t,ao(r)):(t.next=l.next,l.next=t),r.interleaved=t,Zt(e,n)}function _s(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,jl(e,n)}}function Ua(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?l=u=f:u=u.next=f,n=n.next}while(n!==null);u===null?l=u=t:u=u.next=t}else l=u=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:u,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ls(e,t,n,r){var l=e.updateQueue;mn=!1;var u=l.firstBaseUpdate,f=l.lastBaseUpdate,x=l.shared.pending;if(x!==null){l.shared.pending=null;var k=x,L=k.next;k.next=null,f===null?u=L:f.next=L,f=k;var U=e.alternate;U!==null&&(U=U.updateQueue,x=U.lastBaseUpdate,x!==f&&(x===null?U.firstBaseUpdate=L:x.next=L,U.lastBaseUpdate=k))}if(u!==null){var V=l.baseState;f=0,U=L=k=null,x=u;do{var B=x.lane,re=x.eventTime;if((r&B)===B){U!==null&&(U=U.next={eventTime:re,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var le=e,oe=x;switch(B=t,re=n,oe.tag){case 1:if(le=oe.payload,typeof le=="function"){V=le.call(re,V,B);break e}V=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=oe.payload,B=typeof le=="function"?le.call(re,V,B):le,B==null)break e;V=Q({},V,B);break e;case 2:mn=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,B=l.effects,B===null?l.effects=[x]:B.push(x))}else re={eventTime:re,lane:B,tag:x.tag,payload:x.payload,callback:x.callback,next:null},U===null?(L=U=re,k=V):U=U.next=re,f|=B;if(x=x.next,x===null){if(x=l.shared.pending,x===null)break;B=x,x=B.next,B.next=null,l.lastBaseUpdate=B,l.shared.pending=null}}while(!0);if(U===null&&(k=V),l.baseState=k,l.firstBaseUpdate=L,l.lastBaseUpdate=U,t=l.shared.interleaved,t!==null){l=t;do f|=l.lane,l=l.next;while(l!==t)}else u===null&&(l.shared.lanes=0);On|=f,e.lanes=f,e.memoizedState=V}}function Ha(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(i(191,l));l.call(r)}}}var Rr={},Vt=fn(Rr),Ir=fn(Rr),Fr=fn(Rr);function _n(e){if(e===Rr)throw Error(i(174));return e}function co(e,t){switch(Fe(Fr,t),Fe(Ir,e),Fe(Vt,Rr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ie(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ie(t,e)}De(Vt),Fe(Vt,t)}function nr(){De(Vt),De(Ir),De(Fr)}function Wa(e){_n(Fr.current);var t=_n(Vt.current),n=Ie(t,e.type);t!==n&&(Fe(Ir,e),Fe(Vt,n))}function fo(e){Ir.current===e&&(De(Vt),De(Ir))}var Be=fn(0);function Os(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var po=[];function ho(){for(var e=0;e<po.length;e++)po[e]._workInProgressVersionPrimary=null;po.length=0}var Rs=q.ReactCurrentDispatcher,mo=q.ReactCurrentBatchConfig,Ln=0,Ue=null,Xe=null,Je=null,Is=!1,zr=!1,Dr=0,ef=0;function at(){throw Error(i(321))}function vo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zt(e[n],t[n]))return!1;return!0}function go(e,t,n,r,l,u){if(Ln=u,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Rs.current=e===null||e.memoizedState===null?sf:lf,e=n(r,l),zr){u=0;do{if(zr=!1,Dr=0,25<=u)throw Error(i(301));u+=1,Je=Xe=null,t.updateQueue=null,Rs.current=of,e=n(r,l)}while(zr)}if(Rs.current=Ds,t=Xe!==null&&Xe.next!==null,Ln=0,Je=Xe=Ue=null,Is=!1,t)throw Error(i(300));return e}function yo(){var e=Dr!==0;return Dr=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ue.memoizedState=Je=e:Je=Je.next=e,Je}function Tt(){if(Xe===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=Je===null?Ue.memoizedState:Je.next;if(t!==null)Je=t,Xe=e;else{if(e===null)throw Error(i(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Je===null?Ue.memoizedState=Je=e:Je=Je.next=e}return Je}function Ar(e,t){return typeof t=="function"?t(e):t}function xo(e){var t=Tt(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=Xe,l=r.baseQueue,u=n.pending;if(u!==null){if(l!==null){var f=l.next;l.next=u.next,u.next=f}r.baseQueue=l=u,n.pending=null}if(l!==null){u=l.next,r=r.baseState;var x=f=null,k=null,L=u;do{var U=L.lane;if((Ln&U)===U)k!==null&&(k=k.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),r=L.hasEagerState?L.eagerState:e(r,L.action);else{var V={lane:U,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};k===null?(x=k=V,f=r):k=k.next=V,Ue.lanes|=U,On|=U}L=L.next}while(L!==null&&L!==u);k===null?f=r:k.next=x,zt(r,t.memoizedState)||(gt=!0),t.memoizedState=r,t.baseState=f,t.baseQueue=k,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do u=l.lane,Ue.lanes|=u,On|=u,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wo(e){var t=Tt(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,u=t.memoizedState;if(l!==null){n.pending=null;var f=l=l.next;do u=e(u,f.action),f=f.next;while(f!==l);zt(u,t.memoizedState)||(gt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,r]}function Va(){}function $a(e,t){var n=Ue,r=Tt(),l=t(),u=!zt(r.memoizedState,l);if(u&&(r.memoizedState=l,gt=!0),r=r.queue,So(Ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||u||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,qr(9,Qa.bind(null,n,r,l,t),void 0,null),Ze===null)throw Error(i(349));(Ln&30)!==0||Ga(n,t,l)}return l}function Ga(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qa(e,t,n,r){t.value=n,t.getSnapshot=r,Xa(t)&&Ya(e)}function Ka(e,t,n){return n(function(){Xa(t)&&Ya(e)})}function Xa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zt(e,n)}catch{return!0}}function Ya(e){var t=Zt(e,1);t!==null&&Ut(t,e,1,-1)}function Ja(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:e},t.queue=e,e=e.dispatch=rf.bind(null,Ue,e),[t.memoizedState,e]}function qr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Za(){return Tt().memoizedState}function Fs(e,t,n,r){var l=$t();Ue.flags|=e,l.memoizedState=qr(1|t,n,void 0,r===void 0?null:r)}function zs(e,t,n,r){var l=Tt();r=r===void 0?null:r;var u=void 0;if(Xe!==null){var f=Xe.memoizedState;if(u=f.destroy,r!==null&&vo(r,f.deps)){l.memoizedState=qr(t,n,u,r);return}}Ue.flags|=e,l.memoizedState=qr(1|t,n,u,r)}function eu(e,t){return Fs(8390656,8,e,t)}function So(e,t){return zs(2048,8,e,t)}function tu(e,t){return zs(4,2,e,t)}function nu(e,t){return zs(4,4,e,t)}function ru(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function su(e,t,n){return n=n!=null?n.concat([e]):null,zs(4,4,ru.bind(null,t,e),n)}function ko(){}function lu(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ou(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function iu(e,t,n){return(Ln&21)===0?(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=n):(zt(n,t)||(n=zi(),Ue.lanes|=n,On|=n,e.baseState=!0),t)}function tf(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var r=mo.transition;mo.transition={};try{e(!1),t()}finally{Re=n,mo.transition=r}}function au(){return Tt().memoizedState}function nf(e,t,n){var r=wn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uu(e))cu(t,n);else if(n=qa(e,t,n,r),n!==null){var l=pt();Ut(n,e,r,l),du(n,t,r)}}function rf(e,t,n){var r=wn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uu(e))cu(t,l);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var f=t.lastRenderedState,x=u(f,n);if(l.hasEagerState=!0,l.eagerState=x,zt(x,f)){var k=t.interleaved;k===null?(l.next=l,ao(t)):(l.next=k.next,k.next=l),t.interleaved=l;return}}catch{}finally{}n=qa(e,t,l,r),n!==null&&(l=pt(),Ut(n,e,r,l),du(n,t,r))}}function uu(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function cu(e,t){zr=Is=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function du(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,jl(e,n)}}var Ds={readContext:Pt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},sf={readContext:Pt,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:eu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Fs(4194308,4,ru.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fs(4,2,e,t)},useMemo:function(e,t){var n=$t();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$t();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=nf.bind(null,Ue,e),[r.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:Ja,useDebugValue:ko,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=Ja(!1),t=e[0];return e=tf.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ue,l=$t();if(Ae){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Ze===null)throw Error(i(349));(Ln&30)!==0||Ga(r,t,n)}l.memoizedState=n;var u={value:n,getSnapshot:t};return l.queue=u,eu(Ka.bind(null,r,u,e),[e]),r.flags|=2048,qr(9,Qa.bind(null,r,u,n,t),void 0,null),n},useId:function(){var e=$t(),t=Ze.identifierPrefix;if(Ae){var n=Jt,r=Yt;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Dr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ef++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lf={readContext:Pt,useCallback:lu,useContext:Pt,useEffect:So,useImperativeHandle:su,useInsertionEffect:tu,useLayoutEffect:nu,useMemo:ou,useReducer:xo,useRef:Za,useState:function(){return xo(Ar)},useDebugValue:ko,useDeferredValue:function(e){var t=Tt();return iu(t,Xe.memoizedState,e)},useTransition:function(){var e=xo(Ar)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:Va,useSyncExternalStore:$a,useId:au,unstable_isNewReconciler:!1},of={readContext:Pt,useCallback:lu,useContext:Pt,useEffect:So,useImperativeHandle:su,useInsertionEffect:tu,useLayoutEffect:nu,useMemo:ou,useReducer:wo,useRef:Za,useState:function(){return wo(Ar)},useDebugValue:ko,useDeferredValue:function(e){var t=Tt();return Xe===null?t.memoizedState=e:iu(t,Xe.memoizedState,e)},useTransition:function(){var e=wo(Ar)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:Va,useSyncExternalStore:$a,useId:au,unstable_isNewReconciler:!1};function At(e,t){if(e&&e.defaultProps){t=Q({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function jo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Q({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var As={isMounted:function(e){return(e=e._reactInternals)?En(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=pt(),l=wn(e),u=en(r,l);u.payload=t,n!=null&&(u.callback=n),t=vn(e,u,l),t!==null&&(Ut(t,e,l,r),_s(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=pt(),l=wn(e),u=en(r,l);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=vn(e,u,l),t!==null&&(Ut(t,e,l,r),_s(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pt(),r=wn(e),l=en(n,r);l.tag=2,t!=null&&(l.callback=t),t=vn(e,l,r),t!==null&&(Ut(t,e,r,n),_s(t,e,r))}};function fu(e,t,n,r,l,u,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,f):t.prototype&&t.prototype.isPureReactComponent?!Cr(n,r)||!Cr(l,u):!0}function pu(e,t,n){var r=!1,l=pn,u=t.contextType;return typeof u=="object"&&u!==null?u=Pt(u):(l=vt(t)?Nn:it.current,r=t.contextTypes,u=(r=r!=null)?Kn(e,l):pn),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=As,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=u),t}function hu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&As.enqueueReplaceState(t,t.state,null)}function Mo(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},uo(e);var u=t.contextType;typeof u=="object"&&u!==null?l.context=Pt(u):(u=vt(t)?Nn:it.current,l.context=Kn(e,u)),l.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(jo(e,t,u,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&As.enqueueReplaceState(l,l.state,null),Ls(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function rr(e,t){try{var n="",r=t;do n+=Se(r),r=r.return;while(r);var l=n}catch(u){l=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:l,digest:null}}function Eo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Co(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var af=typeof WeakMap=="function"?WeakMap:Map;function mu(e,t,n){n=en(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Bo=r),Co(e,t)},n}function vu(e,t,n){n=en(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Co(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){Co(e,t),typeof r!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function gu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new af;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=kf.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xu(e,t,n,r,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=en(-1,1),t.tag=2,vn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var uf=q.ReactCurrentOwner,gt=!1;function ft(e,t,n,r){t.child=e===null?Aa(t,null,n,r):Zn(t,e.child,n,r)}function wu(e,t,n,r,l){n=n.render;var u=t.ref;return tr(t,l),r=go(e,t,n,r,u,l),n=yo(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,tn(e,t,l)):(Ae&&n&&Zl(t),t.flags|=1,ft(e,t,r,l),t.child)}function Su(e,t,n,r,l){if(e===null){var u=n.type;return typeof u=="function"&&!Qo(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,ku(e,t,u,r,l)):(e=Js(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,(e.lanes&l)===0){var f=u.memoizedProps;if(n=n.compare,n=n!==null?n:Cr,n(f,r)&&e.ref===t.ref)return tn(e,t,l)}return t.flags|=1,e=kn(u,r),e.ref=t.ref,e.return=t,t.child=e}function ku(e,t,n,r,l){if(e!==null){var u=e.memoizedProps;if(Cr(u,r)&&e.ref===t.ref)if(gt=!1,t.pendingProps=r=u,(e.lanes&l)!==0)(e.flags&131072)!==0&&(gt=!0);else return t.lanes=e.lanes,tn(e,t,l)}return No(e,t,n,r,l)}function ju(e,t,n){var r=t.pendingProps,l=r.children,u=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(lr,Et),Et|=n;else{if((n&1073741824)===0)return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(lr,Et),Et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=u!==null?u.baseLanes:n,Fe(lr,Et),Et|=r}else u!==null?(r=u.baseLanes|n,t.memoizedState=null):r=n,Fe(lr,Et),Et|=r;return ft(e,t,l,n),t.child}function Mu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,l){var u=vt(n)?Nn:it.current;return u=Kn(t,u),tr(t,l),n=go(e,t,n,r,u,l),r=yo(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,tn(e,t,l)):(Ae&&r&&Zl(t),t.flags|=1,ft(e,t,n,l),t.child)}function Eu(e,t,n,r,l){if(vt(n)){var u=!0;js(t)}else u=!1;if(tr(t,l),t.stateNode===null)Bs(e,t),pu(t,n,r),Mo(t,n,r,l),r=!0;else if(e===null){var f=t.stateNode,x=t.memoizedProps;f.props=x;var k=f.context,L=n.contextType;typeof L=="object"&&L!==null?L=Pt(L):(L=vt(n)?Nn:it.current,L=Kn(t,L));var U=n.getDerivedStateFromProps,V=typeof U=="function"||typeof f.getSnapshotBeforeUpdate=="function";V||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==r||k!==L)&&hu(t,f,r,L),mn=!1;var B=t.memoizedState;f.state=B,Ls(t,r,f,l),k=t.memoizedState,x!==r||B!==k||mt.current||mn?(typeof U=="function"&&(jo(t,n,U,r),k=t.memoizedState),(x=mn||fu(t,n,x,r,B,k,L))?(V||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=k),f.props=r,f.state=k,f.context=L,r=x):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{f=t.stateNode,Ba(e,t),x=t.memoizedProps,L=t.type===t.elementType?x:At(t.type,x),f.props=L,V=t.pendingProps,B=f.context,k=n.contextType,typeof k=="object"&&k!==null?k=Pt(k):(k=vt(n)?Nn:it.current,k=Kn(t,k));var re=n.getDerivedStateFromProps;(U=typeof re=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==V||B!==k)&&hu(t,f,r,k),mn=!1,B=t.memoizedState,f.state=B,Ls(t,r,f,l);var le=t.memoizedState;x!==V||B!==le||mt.current||mn?(typeof re=="function"&&(jo(t,n,re,r),le=t.memoizedState),(L=mn||fu(t,n,L,r,B,le,k)||!1)?(U||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(r,le,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(r,le,k)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=le),f.props=r,f.state=le,f.context=k,r=L):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),r=!1)}return bo(e,t,n,r,u,l)}function bo(e,t,n,r,l,u){Mu(e,t);var f=(t.flags&128)!==0;if(!r&&!f)return l&&Ta(t,n,!1),tn(e,t,u);r=t.stateNode,uf.current=t;var x=f&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&f?(t.child=Zn(t,e.child,null,u),t.child=Zn(t,null,x,u)):ft(e,t,x,u),t.memoizedState=r.state,l&&Ta(t,n,!0),t.child}function Cu(e){var t=e.stateNode;t.pendingContext?ba(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ba(e,t.context,!1),co(e,t.containerInfo)}function Nu(e,t,n,r,l){return Jn(),ro(l),t.flags|=256,ft(e,t,n,r),t.child}var Po={dehydrated:null,treeContext:null,retryLane:0};function To(e){return{baseLanes:e,cachePool:null,transitions:null}}function bu(e,t,n){var r=t.pendingProps,l=Be.current,u=!1,f=(t.flags&128)!==0,x;if((x=f)||(x=e!==null&&e.memoizedState===null?!1:(l&2)!==0),x?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Fe(Be,l&1),e===null)return no(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(f=r.children,e=r.fallback,u?(r=t.mode,u=t.child,f={mode:"hidden",children:f},(r&1)===0&&u!==null?(u.childLanes=0,u.pendingProps=f):u=Zs(f,r,0,null),e=zn(e,r,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=To(n),t.memoizedState=Po,e):_o(t,f));if(l=e.memoizedState,l!==null&&(x=l.dehydrated,x!==null))return cf(e,t,f,r,x,l,n);if(u){u=r.fallback,f=t.mode,l=e.child,x=l.sibling;var k={mode:"hidden",children:r.children};return(f&1)===0&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=k,t.deletions=null):(r=kn(l,k),r.subtreeFlags=l.subtreeFlags&14680064),x!==null?u=kn(x,u):(u=zn(u,f,n,null),u.flags|=2),u.return=t,r.return=t,r.sibling=u,t.child=r,r=u,u=t.child,f=e.child.memoizedState,f=f===null?To(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},u.memoizedState=f,u.childLanes=e.childLanes&~n,t.memoizedState=Po,r}return u=e.child,e=u.sibling,r=kn(u,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _o(e,t){return t=Zs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qs(e,t,n,r){return r!==null&&ro(r),Zn(t,e.child,null,n),e=_o(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cf(e,t,n,r,l,u,f){if(n)return t.flags&256?(t.flags&=-257,r=Eo(Error(i(422))),qs(e,t,f,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=r.fallback,l=t.mode,r=Zs({mode:"visible",children:r.children},l,0,null),u=zn(u,l,f,null),u.flags|=2,r.return=t,u.return=t,r.sibling=u,t.child=r,(t.mode&1)!==0&&Zn(t,e.child,null,f),t.child.memoizedState=To(f),t.memoizedState=Po,u);if((t.mode&1)===0)return qs(e,t,f,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var x=r.dgst;return r=x,u=Error(i(419)),r=Eo(u,r,void 0),qs(e,t,f,r)}if(x=(f&e.childLanes)!==0,gt||x){if(r=Ze,r!==null){switch(f&-f){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(r.suspendedLanes|f))!==0?0:l,l!==0&&l!==u.retryLane&&(u.retryLane=l,Zt(e,l),Ut(r,e,l,-1))}return Go(),r=Eo(Error(i(421))),qs(e,t,f,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=jf.bind(null,e),l._reactRetry=t,null):(e=u.treeContext,Mt=dn(l.nextSibling),jt=t,Ae=!0,Dt=null,e!==null&&(Nt[bt++]=Yt,Nt[bt++]=Jt,Nt[bt++]=bn,Yt=e.id,Jt=e.overflow,bn=t),t=_o(t,r.children),t.flags|=4096,t)}function Pu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),io(e.return,t,n)}function Lo(e,t,n,r,l){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailMode=l)}function Tu(e,t,n){var r=t.pendingProps,l=r.revealOrder,u=r.tail;if(ft(e,t,r.children,n),r=Be.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pu(e,n,t);else if(e.tag===19)Pu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(Be,r),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Os(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Lo(t,!1,l,n,u);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Os(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Lo(t,!0,n,null,u);break;case"together":Lo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),On|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function df(e,t,n){switch(t.tag){case 3:Cu(t),Jn();break;case 5:Wa(t);break;case 1:vt(t.type)&&js(t);break;case 4:co(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;Fe(Ps,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Be,Be.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?bu(e,t,n):(Fe(Be,Be.current&1),e=tn(e,t,n),e!==null?e.sibling:null);Fe(Be,Be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Tu(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Fe(Be,Be.current),r)break;return null;case 22:case 23:return t.lanes=0,ju(e,t,n)}return tn(e,t,n)}var _u,Oo,Lu,Ou;_u=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Lu=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,_n(Vt.current);var u=null;switch(n){case"input":l=dt(e,l),r=dt(e,r),u=[];break;case"select":l=Q({},l,{value:void 0}),r=Q({},r,{value:void 0}),u=[];break;case"textarea":l=ht(e,l),r=ht(e,r),u=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ws)}fl(n,r);var f;n=null;for(L in l)if(!r.hasOwnProperty(L)&&l.hasOwnProperty(L)&&l[L]!=null)if(L==="style"){var x=l[L];for(f in x)x.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else L!=="dangerouslySetInnerHTML"&&L!=="children"&&L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(d.hasOwnProperty(L)?u||(u=[]):(u=u||[]).push(L,null));for(L in r){var k=r[L];if(x=l?.[L],r.hasOwnProperty(L)&&k!==x&&(k!=null||x!=null))if(L==="style")if(x){for(f in x)!x.hasOwnProperty(f)||k&&k.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in k)k.hasOwnProperty(f)&&x[f]!==k[f]&&(n||(n={}),n[f]=k[f])}else n||(u||(u=[]),u.push(L,n)),n=k;else L==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,x=x?x.__html:void 0,k!=null&&x!==k&&(u=u||[]).push(L,k)):L==="children"?typeof k!="string"&&typeof k!="number"||(u=u||[]).push(L,""+k):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&(d.hasOwnProperty(L)?(k!=null&&L==="onScroll"&&ze("scroll",e),u||x===k||(u=[])):(u=u||[]).push(L,k))}n&&(u=u||[]).push("style",n);var L=u;(t.updateQueue=L)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};function Br(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ff(e,t,n){var r=t.pendingProps;switch(eo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return vt(t.type)&&ks(),ut(t),null;case 3:return r=t.stateNode,nr(),De(mt),De(it),ho(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ns(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dt!==null&&(Wo(Dt),Dt=null))),Oo(e,t),ut(t),null;case 5:fo(t);var l=_n(Fr.current);if(n=t.type,e!==null&&t.stateNode!=null)Lu(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(i(166));return ut(t),null}if(e=_n(Vt.current),Ns(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Wt]=t,r[_r]=u,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(l=0;l<br.length;l++)ze(br[l],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":Rt(r,u),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},ze("invalid",r);break;case"textarea":Qt(r,u),ze("invalid",r)}fl(n,u),l=null;for(var f in u)if(u.hasOwnProperty(f)){var x=u[f];f==="children"?typeof x=="string"?r.textContent!==x&&(u.suppressHydrationWarning!==!0&&xs(r.textContent,x,e),l=["children",x]):typeof x=="number"&&r.textContent!==""+x&&(u.suppressHydrationWarning!==!0&&xs(r.textContent,x,e),l=["children",""+x]):d.hasOwnProperty(f)&&x!=null&&f==="onScroll"&&ze("scroll",r)}switch(n){case"input":qe(r),ke(r,u,!0);break;case"textarea":qe(r),It(r);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(r.onclick=ws)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{f=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ct(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=f.createElement(n,{is:r.is}):(e=f.createElement(n),n==="select"&&(f=e,r.multiple?f.multiple=!0:r.size&&(f.size=r.size))):e=f.createElementNS(e,n),e[Wt]=t,e[_r]=r,_u(e,t,!1,!1),t.stateNode=e;e:{switch(f=pl(n,r),n){case"dialog":ze("cancel",e),ze("close",e),l=r;break;case"iframe":case"object":case"embed":ze("load",e),l=r;break;case"video":case"audio":for(l=0;l<br.length;l++)ze(br[l],e);l=r;break;case"source":ze("error",e),l=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),l=r;break;case"details":ze("toggle",e),l=r;break;case"input":Rt(e,r),l=dt(e,r),ze("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=Q({},r,{value:void 0}),ze("invalid",e);break;case"textarea":Qt(e,r),l=ht(e,r),ze("invalid",e);break;default:l=r}fl(n,l),x=l;for(u in x)if(x.hasOwnProperty(u)){var k=x[u];u==="style"?ki(e,k):u==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Mn(e,k)):u==="children"?typeof k=="string"?(n!=="textarea"||k!=="")&&ur(e,k):typeof k=="number"&&ur(e,""+k):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(d.hasOwnProperty(u)?k!=null&&u==="onScroll"&&ze("scroll",e):k!=null&&Y(e,u,k,f))}switch(n){case"input":qe(e),ke(e,r,!1);break;case"textarea":qe(e),It(e);break;case"option":r.value!=null&&e.setAttribute("value",""+je(r.value));break;case"select":e.multiple=!!r.multiple,u=r.value,u!=null?_e(e,!!r.multiple,u,!1):r.defaultValue!=null&&_e(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=ws)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)Ou(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(i(166));if(n=_n(Fr.current),_n(Vt.current),Ns(t)){if(r=t.stateNode,n=t.memoizedProps,r[Wt]=t,(u=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:xs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xs(r.nodeValue,n,(e.mode&1)!==0)}u&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wt]=t,t.stateNode=r}return ut(t),null;case 13:if(De(Be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&Mt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Fa(),Jn(),t.flags|=98560,u=!1;else if(u=Ns(t),r!==null&&r.dehydrated!==null){if(e===null){if(!u)throw Error(i(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));u[Wt]=t}else Jn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ut(t),u=!1}else Dt!==null&&(Wo(Dt),Dt=null),u=!0;if(!u)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Be.current&1)!==0?Ye===0&&(Ye=3):Go())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return nr(),Oo(e,t),e===null&&Pr(t.stateNode.containerInfo),ut(t),null;case 10:return oo(t.type._context),ut(t),null;case 17:return vt(t.type)&&ks(),ut(t),null;case 19:if(De(Be),u=t.memoizedState,u===null)return ut(t),null;if(r=(t.flags&128)!==0,f=u.rendering,f===null)if(r)Br(u,!1);else{if(Ye!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Os(e),f!==null){for(t.flags|=128,Br(u,!1),r=f.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)u=n,e=r,u.flags&=14680066,f=u.alternate,f===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=f.childLanes,u.lanes=f.lanes,u.child=f.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=f.memoizedProps,u.memoizedState=f.memoizedState,u.updateQueue=f.updateQueue,u.type=f.type,e=f.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(Be,Be.current&1|2),t.child}e=e.sibling}u.tail!==null&&$e()>or&&(t.flags|=128,r=!0,Br(u,!1),t.lanes=4194304)}else{if(!r)if(e=Os(f),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Br(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!Ae)return ut(t),null}else 2*$e()-u.renderingStartTime>or&&n!==1073741824&&(t.flags|=128,r=!0,Br(u,!1),t.lanes=4194304);u.isBackwards?(f.sibling=t.child,t.child=f):(n=u.last,n!==null?n.sibling=f:t.child=f,u.last=f)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=$e(),t.sibling=null,n=Be.current,Fe(Be,r?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return $o(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Et&1073741824)!==0&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function pf(e,t){switch(eo(t),t.tag){case 1:return vt(t.type)&&ks(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nr(),De(mt),De(it),ho(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return fo(t),null;case 13:if(De(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Jn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De(Be),null;case 4:return nr(),null;case 10:return oo(t.type._context),null;case 22:case 23:return $o(),null;case 24:return null;default:return null}}var Us=!1,ct=!1,hf=typeof WeakSet=="function"?WeakSet:Set,se=null;function sr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function Ro(e,t,n){try{n()}catch(r){We(e,t,r)}}var Ru=!1;function mf(e,t){if(Vl=as,e=fa(),zl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var f=0,x=-1,k=-1,L=0,U=0,V=e,B=null;t:for(;;){for(var re;V!==n||l!==0&&V.nodeType!==3||(x=f+l),V!==u||r!==0&&V.nodeType!==3||(k=f+r),V.nodeType===3&&(f+=V.nodeValue.length),(re=V.firstChild)!==null;)B=V,V=re;for(;;){if(V===e)break t;if(B===n&&++L===l&&(x=f),B===u&&++U===r&&(k=f),(re=V.nextSibling)!==null)break;V=B,B=V.parentNode}V=re}n=x===-1||k===-1?null:{start:x,end:k}}else n=null}n=n||{start:0,end:0}}else n=null;for($l={focusedElem:e,selectionRange:n},as=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var le=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var oe=le.memoizedProps,Ge=le.memoizedState,b=t.stateNode,M=b.getSnapshotBeforeUpdate(t.elementType===t.type?oe:At(t.type,oe),Ge);b.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(K){We(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return le=Ru,Ru=!1,le}function Ur(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var u=l.destroy;l.destroy=void 0,u!==void 0&&Ro(t,n,u)}l=l.next}while(l!==r)}}function Hs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Io(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Iu(e){var t=e.alternate;t!==null&&(e.alternate=null,Iu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wt],delete t[_r],delete t[Xl],delete t[Xd],delete t[Yd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fu(e){return e.tag===5||e.tag===3||e.tag===4}function zu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ws));else if(r!==4&&(e=e.child,e!==null))for(Fo(e,t,n),e=e.sibling;e!==null;)Fo(e,t,n),e=e.sibling}function zo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(zo(e,t,n),e=e.sibling;e!==null;)zo(e,t,n),e=e.sibling}var rt=null,qt=!1;function gn(e,t,n){for(n=n.child;n!==null;)Du(e,t,n),n=n.sibling}function Du(e,t,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(ns,n)}catch{}switch(n.tag){case 5:ct||sr(n,t);case 6:var r=rt,l=qt;rt=null,gn(e,t,n),rt=r,qt=l,rt!==null&&(qt?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(qt?(e=rt,n=n.stateNode,e.nodeType===8?Kl(e.parentNode,n):e.nodeType===1&&Kl(e,n),wr(e)):Kl(rt,n.stateNode));break;case 4:r=rt,l=qt,rt=n.stateNode.containerInfo,qt=!0,gn(e,t,n),rt=r,qt=l;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var u=l,f=u.destroy;u=u.tag,f!==void 0&&((u&2)!==0||(u&4)!==0)&&Ro(n,t,f),l=l.next}while(l!==r)}gn(e,t,n);break;case 1:if(!ct&&(sr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(x){We(n,t,x)}gn(e,t,n);break;case 21:gn(e,t,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,gn(e,t,n),ct=r):gn(e,t,n);break;default:gn(e,t,n)}}function Au(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hf),t.forEach(function(r){var l=Mf.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function Bt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var u=e,f=t,x=f;e:for(;x!==null;){switch(x.tag){case 5:rt=x.stateNode,qt=!1;break e;case 3:rt=x.stateNode.containerInfo,qt=!0;break e;case 4:rt=x.stateNode.containerInfo,qt=!0;break e}x=x.return}if(rt===null)throw Error(i(160));Du(u,f,l),rt=null,qt=!1;var k=l.alternate;k!==null&&(k.return=null),l.return=null}catch(L){We(l,t,L)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qu(t,e),t=t.sibling}function qu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bt(t,e),Gt(e),r&4){try{Ur(3,e,e.return),Hs(3,e)}catch(oe){We(e,e.return,oe)}try{Ur(5,e,e.return)}catch(oe){We(e,e.return,oe)}}break;case 1:Bt(t,e),Gt(e),r&512&&n!==null&&sr(n,n.return);break;case 5:if(Bt(t,e),Gt(e),r&512&&n!==null&&sr(n,n.return),e.flags&32){var l=e.stateNode;try{ur(l,"")}catch(oe){We(e,e.return,oe)}}if(r&4&&(l=e.stateNode,l!=null)){var u=e.memoizedProps,f=n!==null?n.memoizedProps:u,x=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{x==="input"&&u.type==="radio"&&u.name!=null&&W(l,u),pl(x,f);var L=pl(x,u);for(f=0;f<k.length;f+=2){var U=k[f],V=k[f+1];U==="style"?ki(l,V):U==="dangerouslySetInnerHTML"?Mn(l,V):U==="children"?ur(l,V):Y(l,U,V,L)}switch(x){case"input":pe(l,u);break;case"textarea":Ce(l,u);break;case"select":var B=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!u.multiple;var re=u.value;re!=null?_e(l,!!u.multiple,re,!1):B!==!!u.multiple&&(u.defaultValue!=null?_e(l,!!u.multiple,u.defaultValue,!0):_e(l,!!u.multiple,u.multiple?[]:"",!1))}l[_r]=u}catch(oe){We(e,e.return,oe)}}break;case 6:if(Bt(t,e),Gt(e),r&4){if(e.stateNode===null)throw Error(i(162));l=e.stateNode,u=e.memoizedProps;try{l.nodeValue=u}catch(oe){We(e,e.return,oe)}}break;case 3:if(Bt(t,e),Gt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wr(t.containerInfo)}catch(oe){We(e,e.return,oe)}break;case 4:Bt(t,e),Gt(e);break;case 13:Bt(t,e),Gt(e),l=e.child,l.flags&8192&&(u=l.memoizedState!==null,l.stateNode.isHidden=u,!u||l.alternate!==null&&l.alternate.memoizedState!==null||(qo=$e())),r&4&&Au(e);break;case 22:if(U=n!==null&&n.memoizedState!==null,e.mode&1?(ct=(L=ct)||U,Bt(t,e),ct=L):Bt(t,e),Gt(e),r&8192){if(L=e.memoizedState!==null,(e.stateNode.isHidden=L)&&!U&&(e.mode&1)!==0)for(se=e,U=e.child;U!==null;){for(V=se=U;se!==null;){switch(B=se,re=B.child,B.tag){case 0:case 11:case 14:case 15:Ur(4,B,B.return);break;case 1:sr(B,B.return);var le=B.stateNode;if(typeof le.componentWillUnmount=="function"){r=B,n=B.return;try{t=r,le.props=t.memoizedProps,le.state=t.memoizedState,le.componentWillUnmount()}catch(oe){We(r,n,oe)}}break;case 5:sr(B,B.return);break;case 22:if(B.memoizedState!==null){Hu(V);continue}}re!==null?(re.return=B,se=re):Hu(V)}U=U.sibling}e:for(U=null,V=e;;){if(V.tag===5){if(U===null){U=V;try{l=V.stateNode,L?(u=l.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(x=V.stateNode,k=V.memoizedProps.style,f=k!=null&&k.hasOwnProperty("display")?k.display:null,x.style.display=Si("display",f))}catch(oe){We(e,e.return,oe)}}}else if(V.tag===6){if(U===null)try{V.stateNode.nodeValue=L?"":V.memoizedProps}catch(oe){We(e,e.return,oe)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===e)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===e)break e;for(;V.sibling===null;){if(V.return===null||V.return===e)break e;U===V&&(U=null),V=V.return}U===V&&(U=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:Bt(t,e),Gt(e),r&4&&Au(e);break;case 21:break;default:Bt(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Fu(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(ur(l,""),r.flags&=-33);var u=zu(e);zo(e,u,l);break;case 3:case 4:var f=r.stateNode.containerInfo,x=zu(e);Fo(e,x,f);break;default:throw Error(i(161))}}catch(k){We(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vf(e,t,n){se=e,Bu(e)}function Bu(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var l=se,u=l.child;if(l.tag===22&&r){var f=l.memoizedState!==null||Us;if(!f){var x=l.alternate,k=x!==null&&x.memoizedState!==null||ct;x=Us;var L=ct;if(Us=f,(ct=k)&&!L)for(se=l;se!==null;)f=se,k=f.child,f.tag===22&&f.memoizedState!==null?Wu(l):k!==null?(k.return=f,se=k):Wu(l);for(;u!==null;)se=u,Bu(u),u=u.sibling;se=l,Us=x,ct=L}Uu(e)}else(l.subtreeFlags&8772)!==0&&u!==null?(u.return=l,se=u):Uu(e)}}function Uu(e){for(;se!==null;){var t=se;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ct||Hs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ct)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:At(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&Ha(t,u,r);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ha(t,f,n)}break;case 5:var x=t.stateNode;if(n===null&&t.flags&4){n=x;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&n.focus();break;case"img":k.src&&(n.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var L=t.alternate;if(L!==null){var U=L.memoizedState;if(U!==null){var V=U.dehydrated;V!==null&&wr(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}ct||t.flags&512&&Io(t)}catch(B){We(t,t.return,B)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function Hu(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function Wu(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Hs(4,t)}catch(k){We(t,n,k)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(k){We(t,l,k)}}var u=t.return;try{Io(t)}catch(k){We(t,u,k)}break;case 5:var f=t.return;try{Io(t)}catch(k){We(t,f,k)}}}catch(k){We(t,t.return,k)}if(t===e){se=null;break}var x=t.sibling;if(x!==null){x.return=t.return,se=x;break}se=t.return}}var gf=Math.ceil,Ws=q.ReactCurrentDispatcher,Do=q.ReactCurrentOwner,_t=q.ReactCurrentBatchConfig,Le=0,Ze=null,Qe=null,st=0,Et=0,lr=fn(0),Ye=0,Hr=null,On=0,Vs=0,Ao=0,Wr=null,yt=null,qo=0,or=1/0,nn=null,$s=!1,Bo=null,yn=null,Gs=!1,xn=null,Qs=0,Vr=0,Uo=null,Ks=-1,Xs=0;function pt(){return(Le&6)!==0?$e():Ks!==-1?Ks:Ks=$e()}function wn(e){return(e.mode&1)===0?1:(Le&2)!==0&&st!==0?st&-st:Zd.transition!==null?(Xs===0&&(Xs=zi()),Xs):(e=Re,e!==0||(e=window.event,e=e===void 0?16:$i(e.type)),e)}function Ut(e,t,n,r){if(50<Vr)throw Vr=0,Uo=null,Error(i(185));mr(e,n,r),((Le&2)===0||e!==Ze)&&(e===Ze&&((Le&2)===0&&(Vs|=n),Ye===4&&Sn(e,st)),xt(e,r),n===1&&Le===0&&(t.mode&1)===0&&(or=$e()+500,Ms&&hn()))}function xt(e,t){var n=e.callbackNode;Zc(e,t);var r=ls(e,e===Ze?st:0);if(r===0)n!==null&&Ri(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ri(n),t===1)e.tag===0?Jd($u.bind(null,e)):_a($u.bind(null,e)),Qd(function(){(Le&6)===0&&hn()}),n=null;else{switch(Di(r)){case 1:n=wl;break;case 4:n=Ii;break;case 16:n=ts;break;case 536870912:n=Fi;break;default:n=ts}n=ec(n,Vu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Vu(e,t){if(Ks=-1,Xs=0,(Le&6)!==0)throw Error(i(327));var n=e.callbackNode;if(ir()&&e.callbackNode!==n)return null;var r=ls(e,e===Ze?st:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Ys(e,r);else{t=r;var l=Le;Le|=2;var u=Qu();(Ze!==e||st!==t)&&(nn=null,or=$e()+500,In(e,t));do try{wf();break}catch(x){Gu(e,x)}while(!0);lo(),Ws.current=u,Le=l,Qe!==null?t=0:(Ze=null,st=0,t=Ye)}if(t!==0){if(t===2&&(l=Sl(e),l!==0&&(r=l,t=Ho(e,l))),t===1)throw n=Hr,In(e,0),Sn(e,r),xt(e,$e()),n;if(t===6)Sn(e,r);else{if(l=e.current.alternate,(r&30)===0&&!yf(l)&&(t=Ys(e,r),t===2&&(u=Sl(e),u!==0&&(r=u,t=Ho(e,u))),t===1))throw n=Hr,In(e,0),Sn(e,r),xt(e,$e()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:Fn(e,yt,nn);break;case 3:if(Sn(e,r),(r&130023424)===r&&(t=qo+500-$e(),10<t)){if(ls(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){pt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ql(Fn.bind(null,e,yt,nn),t);break}Fn(e,yt,nn);break;case 4:if(Sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var f=31-Ft(r);u=1<<f,f=t[f],f>l&&(l=f),r&=~u}if(r=l,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gf(r/1960))-r,10<r){e.timeoutHandle=Ql(Fn.bind(null,e,yt,nn),r);break}Fn(e,yt,nn);break;case 5:Fn(e,yt,nn);break;default:throw Error(i(329))}}}return xt(e,$e()),e.callbackNode===n?Vu.bind(null,e):null}function Ho(e,t){var n=Wr;return e.current.memoizedState.isDehydrated&&(In(e,t).flags|=256),e=Ys(e,t),e!==2&&(t=yt,yt=n,t!==null&&Wo(t)),e}function Wo(e){yt===null?yt=e:yt.push.apply(yt,e)}function yf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],u=l.getSnapshot;l=l.value;try{if(!zt(u(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sn(e,t){for(t&=~Ao,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ft(t),r=1<<n;e[n]=-1,t&=~r}}function $u(e){if((Le&6)!==0)throw Error(i(327));ir();var t=ls(e,0);if((t&1)===0)return xt(e,$e()),null;var n=Ys(e,t);if(e.tag!==0&&n===2){var r=Sl(e);r!==0&&(t=r,n=Ho(e,r))}if(n===1)throw n=Hr,In(e,0),Sn(e,t),xt(e,$e()),n;if(n===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,yt,nn),xt(e,$e()),null}function Vo(e,t){var n=Le;Le|=1;try{return e(t)}finally{Le=n,Le===0&&(or=$e()+500,Ms&&hn())}}function Rn(e){xn!==null&&xn.tag===0&&(Le&6)===0&&ir();var t=Le;Le|=1;var n=_t.transition,r=Re;try{if(_t.transition=null,Re=1,e)return e()}finally{Re=r,_t.transition=n,Le=t,(Le&6)===0&&hn()}}function $o(){Et=lr.current,De(lr)}function In(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Gd(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(eo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ks();break;case 3:nr(),De(mt),De(it),ho();break;case 5:fo(r);break;case 4:nr();break;case 13:De(Be);break;case 19:De(Be);break;case 10:oo(r.type._context);break;case 22:case 23:$o()}n=n.return}if(Ze=e,Qe=e=kn(e.current,null),st=Et=t,Ye=0,Hr=null,Ao=Vs=On=0,yt=Wr=null,Tn!==null){for(t=0;t<Tn.length;t++)if(n=Tn[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,u=n.pending;if(u!==null){var f=u.next;u.next=l,r.next=f}n.pending=r}Tn=null}return e}function Gu(e,t){do{var n=Qe;try{if(lo(),Rs.current=Ds,Is){for(var r=Ue.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Is=!1}if(Ln=0,Je=Xe=Ue=null,zr=!1,Dr=0,Do.current=null,n===null||n.return===null){Ye=1,Hr=t,Qe=null;break}e:{var u=e,f=n.return,x=n,k=t;if(t=st,x.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var L=k,U=x,V=U.tag;if((U.mode&1)===0&&(V===0||V===11||V===15)){var B=U.alternate;B?(U.updateQueue=B.updateQueue,U.memoizedState=B.memoizedState,U.lanes=B.lanes):(U.updateQueue=null,U.memoizedState=null)}var re=yu(f);if(re!==null){re.flags&=-257,xu(re,f,x,u,t),re.mode&1&&gu(u,L,t),t=re,k=L;var le=t.updateQueue;if(le===null){var oe=new Set;oe.add(k),t.updateQueue=oe}else le.add(k);break e}else{if((t&1)===0){gu(u,L,t),Go();break e}k=Error(i(426))}}else if(Ae&&x.mode&1){var Ge=yu(f);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),xu(Ge,f,x,u,t),ro(rr(k,x));break e}}u=k=rr(k,x),Ye!==4&&(Ye=2),Wr===null?Wr=[u]:Wr.push(u),u=f;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var b=mu(u,k,t);Ua(u,b);break e;case 1:x=k;var M=u.type,P=u.stateNode;if((u.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(yn===null||!yn.has(P)))){u.flags|=65536,t&=-t,u.lanes|=t;var K=vu(u,x,t);Ua(u,K);break e}}u=u.return}while(u!==null)}Xu(n)}catch(ie){t=ie,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function Qu(){var e=Ws.current;return Ws.current=Ds,e===null?Ds:e}function Go(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Ze===null||(On&268435455)===0&&(Vs&268435455)===0||Sn(Ze,st)}function Ys(e,t){var n=Le;Le|=2;var r=Qu();(Ze!==e||st!==t)&&(nn=null,In(e,t));do try{xf();break}catch(l){Gu(e,l)}while(!0);if(lo(),Le=n,Ws.current=r,Qe!==null)throw Error(i(261));return Ze=null,st=0,Ye}function xf(){for(;Qe!==null;)Ku(Qe)}function wf(){for(;Qe!==null&&!Wc();)Ku(Qe)}function Ku(e){var t=Zu(e.alternate,e,Et);e.memoizedProps=e.pendingProps,t===null?Xu(e):Qe=t,Do.current=null}function Xu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=ff(n,t,Et),n!==null){Qe=n;return}}else{if(n=pf(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Qe=null;return}}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);Ye===0&&(Ye=5)}function Fn(e,t,n){var r=Re,l=_t.transition;try{_t.transition=null,Re=1,Sf(e,t,n,r)}finally{_t.transition=l,Re=r}return null}function Sf(e,t,n,r){do ir();while(xn!==null);if((Le&6)!==0)throw Error(i(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var u=n.lanes|n.childLanes;if(ed(e,u),e===Ze&&(Qe=Ze=null,st=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Gs||(Gs=!0,ec(ts,function(){return ir(),null})),u=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||u){u=_t.transition,_t.transition=null;var f=Re;Re=1;var x=Le;Le|=4,Do.current=null,mf(e,n),qu(n,e),qd($l),as=!!Vl,$l=Vl=null,e.current=n,vf(n),Vc(),Le=x,Re=f,_t.transition=u}else e.current=n;if(Gs&&(Gs=!1,xn=e,Qs=l),u=e.pendingLanes,u===0&&(yn=null),Qc(n.stateNode),xt(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if($s)throw $s=!1,e=Bo,Bo=null,e;return(Qs&1)!==0&&e.tag!==0&&ir(),u=e.pendingLanes,(u&1)!==0?e===Uo?Vr++:(Vr=0,Uo=e):Vr=0,hn(),null}function ir(){if(xn!==null){var e=Di(Qs),t=_t.transition,n=Re;try{if(_t.transition=null,Re=16>e?16:e,xn===null)var r=!1;else{if(e=xn,xn=null,Qs=0,(Le&6)!==0)throw Error(i(331));var l=Le;for(Le|=4,se=e.current;se!==null;){var u=se,f=u.child;if((se.flags&16)!==0){var x=u.deletions;if(x!==null){for(var k=0;k<x.length;k++){var L=x[k];for(se=L;se!==null;){var U=se;switch(U.tag){case 0:case 11:case 15:Ur(8,U,u)}var V=U.child;if(V!==null)V.return=U,se=V;else for(;se!==null;){U=se;var B=U.sibling,re=U.return;if(Iu(U),U===L){se=null;break}if(B!==null){B.return=re,se=B;break}se=re}}}var le=u.alternate;if(le!==null){var oe=le.child;if(oe!==null){le.child=null;do{var Ge=oe.sibling;oe.sibling=null,oe=Ge}while(oe!==null)}}se=u}}if((u.subtreeFlags&2064)!==0&&f!==null)f.return=u,se=f;else e:for(;se!==null;){if(u=se,(u.flags&2048)!==0)switch(u.tag){case 0:case 11:case 15:Ur(9,u,u.return)}var b=u.sibling;if(b!==null){b.return=u.return,se=b;break e}se=u.return}}var M=e.current;for(se=M;se!==null;){f=se;var P=f.child;if((f.subtreeFlags&2064)!==0&&P!==null)P.return=f,se=P;else e:for(f=M;se!==null;){if(x=se,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Hs(9,x)}}catch(ie){We(x,x.return,ie)}if(x===f){se=null;break e}var K=x.sibling;if(K!==null){K.return=x.return,se=K;break e}se=x.return}}if(Le=l,hn(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(ns,e)}catch{}r=!0}return r}finally{Re=n,_t.transition=t}}return!1}function Yu(e,t,n){t=rr(n,t),t=mu(e,t,1),e=vn(e,t,1),t=pt(),e!==null&&(mr(e,1,t),xt(e,t))}function We(e,t,n){if(e.tag===3)Yu(e,e,n);else for(;t!==null;){if(t.tag===3){Yu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yn===null||!yn.has(r))){e=rr(n,e),e=vu(t,e,1),t=vn(t,e,1),e=pt(),t!==null&&(mr(t,1,e),xt(t,e));break}}t=t.return}}function kf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&n,Ze===e&&(st&n)===n&&(Ye===4||Ye===3&&(st&130023424)===st&&500>$e()-qo?In(e,0):Ao|=n),xt(e,t)}function Ju(e,t){t===0&&((e.mode&1)===0?t=1:(t=ss,ss<<=1,(ss&130023424)===0&&(ss=4194304)));var n=pt();e=Zt(e,t),e!==null&&(mr(e,t,n),xt(e,n))}function jf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ju(e,n)}function Mf(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}r!==null&&r.delete(t),Ju(e,n)}var Zu;Zu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)gt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return gt=!1,df(e,t,n);gt=(e.flags&131072)!==0}else gt=!1,Ae&&(t.flags&1048576)!==0&&La(t,Cs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var l=Kn(t,it.current);tr(t,n),l=go(null,t,r,e,l,n);var u=yo();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(r)?(u=!0,js(t)):u=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,uo(t),l.updater=As,t.stateNode=l,l._reactInternals=t,Mo(t,r,e,n),t=bo(null,t,r,!0,u,n)):(t.tag=0,Ae&&u&&Zl(t),ft(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Cf(r),e=At(r,e),l){case 0:t=No(null,t,r,e,n);break e;case 1:t=Eu(null,t,r,e,n);break e;case 11:t=wu(null,t,r,e,n);break e;case 14:t=Su(null,t,r,At(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:At(r,l),No(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:At(r,l),Eu(e,t,r,l,n);case 3:e:{if(Cu(t),e===null)throw Error(i(387));r=t.pendingProps,u=t.memoizedState,l=u.element,Ba(e,t),Ls(t,r,null,n);var f=t.memoizedState;if(r=f.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){l=rr(Error(i(423)),t),t=Nu(e,t,r,n,l);break e}else if(r!==l){l=rr(Error(i(424)),t),t=Nu(e,t,r,n,l);break e}else for(Mt=dn(t.stateNode.containerInfo.firstChild),jt=t,Ae=!0,Dt=null,n=Aa(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jn(),r===l){t=tn(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 5:return Wa(t),e===null&&no(t),r=t.type,l=t.pendingProps,u=e!==null?e.memoizedProps:null,f=l.children,Gl(r,l)?f=null:u!==null&&Gl(r,u)&&(t.flags|=32),Mu(e,t),ft(e,t,f,n),t.child;case 6:return e===null&&no(t),null;case 13:return bu(e,t,n);case 4:return co(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zn(t,null,r,n):ft(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:At(r,l),wu(e,t,r,l,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,u=t.memoizedProps,f=l.value,Fe(Ps,r._currentValue),r._currentValue=f,u!==null)if(zt(u.value,f)){if(u.children===l.children&&!mt.current){t=tn(e,t,n);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var x=u.dependencies;if(x!==null){f=u.child;for(var k=x.firstContext;k!==null;){if(k.context===r){if(u.tag===1){k=en(-1,n&-n),k.tag=2;var L=u.updateQueue;if(L!==null){L=L.shared;var U=L.pending;U===null?k.next=k:(k.next=U.next,U.next=k),L.pending=k}}u.lanes|=n,k=u.alternate,k!==null&&(k.lanes|=n),io(u.return,n,t),x.lanes|=n;break}k=k.next}}else if(u.tag===10)f=u.type===t.type?null:u.child;else if(u.tag===18){if(f=u.return,f===null)throw Error(i(341));f.lanes|=n,x=f.alternate,x!==null&&(x.lanes|=n),io(f,n,t),f=u.sibling}else f=u.child;if(f!==null)f.return=u;else for(f=u;f!==null;){if(f===t){f=null;break}if(u=f.sibling,u!==null){u.return=f.return,f=u;break}f=f.return}u=f}ft(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,tr(t,n),l=Pt(l),r=r(l),t.flags|=1,ft(e,t,r,n),t.child;case 14:return r=t.type,l=At(r,t.pendingProps),l=At(r.type,l),Su(e,t,r,l,n);case 15:return ku(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:At(r,l),Bs(e,t),t.tag=1,vt(r)?(e=!0,js(t)):e=!1,tr(t,n),pu(t,r,l),Mo(t,r,l,n),bo(null,t,r,!0,e,n);case 19:return Tu(e,t,n);case 22:return ju(e,t,n)}throw Error(i(156,t.tag))};function ec(e,t){return Oi(e,t)}function Ef(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,n,r){return new Ef(e,t,n,r)}function Qo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cf(e){if(typeof e=="function")return Qo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===H)return 11;if(e===J)return 14}return 2}function kn(e,t){var n=e.alternate;return n===null?(n=Lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Js(e,t,n,r,l,u){var f=2;if(r=e,typeof e=="function")Qo(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case F:return zn(n.children,l,u,t);case I:f=8,l|=8;break;case X:return e=Lt(12,n,t,l|2),e.elementType=X,e.lanes=u,e;case z:return e=Lt(13,n,t,l),e.elementType=z,e.lanes=u,e;case ee:return e=Lt(19,n,t,l),e.elementType=ee,e.lanes=u,e;case xe:return Zs(n,l,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ye:f=10;break e;case Ee:f=9;break e;case H:f=11;break e;case J:f=14;break e;case fe:f=16,r=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=Lt(f,n,t,l),t.elementType=e,t.type=r,t.lanes=u,t}function zn(e,t,n,r){return e=Lt(7,e,r,t),e.lanes=n,e}function Zs(e,t,n,r){return e=Lt(22,e,r,t),e.elementType=xe,e.lanes=n,e.stateNode={isHidden:!1},e}function Ko(e,t,n){return e=Lt(6,e,null,t),e.lanes=n,e}function Xo(e,t,n){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nf(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kl(0),this.expirationTimes=kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kl(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Yo(e,t,n,r,l,u,f,x,k){return e=new Nf(e,t,n,x,k),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Lt(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uo(u),e}function bf(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function tc(e){if(!e)return pn;e=e._reactInternals;e:{if(En(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var n=e.type;if(vt(n))return Pa(e,n,t)}return t}function nc(e,t,n,r,l,u,f,x,k){return e=Yo(n,r,!0,e,l,u,f,x,k),e.context=tc(null),n=e.current,r=pt(),l=wn(n),u=en(r,l),u.callback=t??null,vn(n,u,l),e.current.lanes=l,mr(e,l,r),xt(e,r),e}function el(e,t,n,r){var l=t.current,u=pt(),f=wn(l);return n=tc(n),t.context===null?t.context=n:t.pendingContext=n,t=en(u,f),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=vn(l,t,f),e!==null&&(Ut(e,l,f,u),_s(e,l,f)),f}function tl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Jo(e,t){rc(e,t),(e=e.alternate)&&rc(e,t)}function Pf(){return null}var sc=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zo(e){this._internalRoot=e}nl.prototype.render=Zo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));el(e,t,null,null)},nl.prototype.unmount=Zo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rn(function(){el(null,e,null,null)}),t[Kt]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bi();e={blockedOn:null,target:e,priority:t};for(var n=0;n<an.length&&t!==0&&t<an[n].priority;n++);an.splice(n,0,e),n===0&&Wi(e)}};function ei(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lc(){}function Tf(e,t,n,r,l){if(l){if(typeof r=="function"){var u=r;r=function(){var L=tl(f);u.call(L)}}var f=nc(t,r,e,0,null,!1,!1,"",lc);return e._reactRootContainer=f,e[Kt]=f.current,Pr(e.nodeType===8?e.parentNode:e),Rn(),f}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var x=r;r=function(){var L=tl(k);x.call(L)}}var k=Yo(e,0,!1,null,null,!1,!1,"",lc);return e._reactRootContainer=k,e[Kt]=k.current,Pr(e.nodeType===8?e.parentNode:e),Rn(function(){el(t,k,n,r)}),k}function sl(e,t,n,r,l){var u=n._reactRootContainer;if(u){var f=u;if(typeof l=="function"){var x=l;l=function(){var k=tl(f);x.call(k)}}el(t,f,e,l)}else f=Tf(n,t,e,l,r);return tl(f)}Ai=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hr(t.pendingLanes);n!==0&&(jl(t,n|1),xt(t,$e()),(Le&6)===0&&(or=$e()+500,hn()))}break;case 13:Rn(function(){var r=Zt(e,1);if(r!==null){var l=pt();Ut(r,e,1,l)}}),Jo(e,1)}},Ml=function(e){if(e.tag===13){var t=Zt(e,134217728);if(t!==null){var n=pt();Ut(t,e,134217728,n)}Jo(e,134217728)}},qi=function(e){if(e.tag===13){var t=wn(e),n=Zt(e,t);if(n!==null){var r=pt();Ut(n,e,t,r)}Jo(e,t)}},Bi=function(){return Re},Ui=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}},vl=function(e,t,n){switch(t){case"input":if(pe(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Ss(r);if(!l)throw Error(i(90));Ve(r),pe(r,l)}}}break;case"textarea":Ce(e,n);break;case"select":t=n.value,t!=null&&_e(e,!!n.multiple,t,!1)}},Ci=Vo,Ni=Rn;var _f={usingClientEntryPoint:!1,Events:[Lr,Gn,Ss,Mi,Ei,Vo]},$r={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lf={bundleType:$r.bundleType,version:$r.version,rendererPackageName:$r.rendererPackageName,rendererConfig:$r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_i(e),e===null?null:e.stateNode},findFiberByHostInstance:$r.findFiberByHostInstance||Pf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ll.isDisabled&&ll.supportsFiber)try{ns=ll.inject(Lf),Ht=ll}catch{}}return wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_f,wt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ei(t))throw Error(i(200));return bf(e,t,null,n)},wt.createRoot=function(e,t){if(!ei(e))throw Error(i(299));var n=!1,r="",l=sc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Yo(e,1,!1,null,null,n,!1,r,l),e[Kt]=t.current,Pr(e.nodeType===8?e.parentNode:e),new Zo(t)},wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=_i(t),e=e===null?null:e.stateNode,e},wt.flushSync=function(e){return Rn(e)},wt.hydrate=function(e,t,n){if(!rl(t))throw Error(i(200));return sl(null,e,t,!0,n)},wt.hydrateRoot=function(e,t,n){if(!ei(e))throw Error(i(405));var r=n!=null&&n.hydratedSources||null,l=!1,u="",f=sc;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=nc(t,null,e,1,n??null,l,!1,u,f),e[Kt]=t.current,Pr(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new nl(t)},wt.render=function(e,t,n){if(!rl(t))throw Error(i(200));return sl(null,e,t,!1,n)},wt.unmountComponentAtNode=function(e){if(!rl(e))throw Error(i(40));return e._reactRootContainer?(Rn(function(){sl(null,null,e,!1,function(){e._reactRootContainer=null,e[Kt]=null})}),!0):!1},wt.unstable_batchedUpdates=Vo,wt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!rl(n))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return sl(e,t,n,!1,r)},wt.version="18.3.1-next-f1338f8080-20240426",wt}var pc;function qf(){if(pc)return ri.exports;pc=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),ri.exports=Af(),ri.exports}var hc;function Bf(){if(hc)return ol;hc=1;var s=qf();return ol.createRoot=s.createRoot,ol.hydrateRoot=s.hydrateRoot,ol}var Uf=Bf(),$=Jr();const He=Oc($),Xr=Math.PI*2,mc=(s,a,i)=>s<a?a:s>i?i:s,Hf=s=>{let a=1;for(;a<s;)a<<=1;return a},Wf=s=>{const a=new Uint32Array(s);let i=0;for(;1<<i<s;)i++;for(let c=0;c<s;c++){let d=0,p=c;for(let v=0;v<i;v++)d=d<<1|p&1,p>>=1;a[c]=d}return a},Vf=s=>{const a=new Float32Array(s),i=Xr/(s-1);for(let c=0;c<s;c++)a[c]=.5*(1-Math.cos(i*c));return a};class $f{size;permutation;twiddleReal;twiddleImag;constructor(a){this.size=a,this.permutation=Wf(a),this.twiddleReal=[],this.twiddleImag=[];for(let i=2;i<=a;i<<=1){const c=i>>1,d=Xr/i,p=new Float32Array(c),v=new Float32Array(c);for(let S=0;S<c;S++)p[S]=Math.cos(d*S),v[S]=Math.sin(d*S);this.twiddleReal.push(p),this.twiddleImag.push(v)}}fft(a,i,c){const{size:d,permutation:p,twiddleReal:v,twiddleImag:S}=this;for(let g=0;g<d;g++){const m=p[g];if(m>g){const w=a[g],y=i[g];a[g]=a[m],i[g]=i[m],a[m]=w,i[m]=y}}let h=0;for(let g=2;g<=d;g<<=1){const m=g>>1,w=v[h],y=S[h];for(let N=0;N<d;N+=g)for(let j=0;j<m;j++){const T=N+j,_=T+m,O=w[j],A=c?-y[j]:y[j],Y=a[_],q=i[_],ne=O*Y-A*q,C=O*q+A*Y,F=a[T],I=i[T];a[_]=F-ne,i[_]=I-C,a[T]=F+ne,i[T]=I+C}h++}if(c){const g=1/d;for(let m=0;m<d;m++)a[m]*=g,i[m]*=g}}}const Gf=2048,Qf=512,Kf=(s,a,i)=>s<=0?0:s<=a?1:Math.ceil((s-a)/i)+1,Xf=s=>((s>Math.PI||s<-Math.PI)&&(s-=Xr*Math.round(s/Xr)),s),Yf=s=>{const{channels:a,pitchRatio:i}=s,c=Hf(mc(s.windowSize??Gf,256,8192)),d=mc(s.hopSize??Qf,1,c>>1);if(!a.length)return[];const p=Number.isFinite(i)&&i>0?i:1;if(Math.abs(p-1)<1e-6)return a.map(F=>new Float32Array(F));const v=a[0].length;if(v===0)return a.map(()=>new Float32Array(0));const S=Vf(c),h=new $f(c),g=(c>>1)+1,m=Kf(v,c,d),w=v+c,y=a.map(()=>new Float32Array(w)),N=new Float32Array(w),j=new Float32Array(c),T=new Float32Array(c),_=new Float32Array(c),O=new Float32Array(c),A=new Float32Array(g),Y=new Float32Array(g),q=a.map(()=>new Float32Array(g)),ne=a.map(()=>new Float32Array(g));for(let F=0;F<m;F++){const I=F*d;for(let X=0;X<a.length;X++){const ye=a[X];j.fill(0),T.fill(0);for(let z=0;z<c;z++){const ee=I+z,J=ee<v?ye[ee]:0;j[z]=J*S[z]}h.fft(j,T,!1);const Ee=q[X],H=ne[X];for(let z=0;z<g;z++){const ee=j[z],J=T[z],fe=Math.hypot(ee,J),xe=Math.atan2(J,ee),G=Xr*d*z/c,Z=Xf(xe-Ee[z]-G),Q=G+Z;A[z]=fe,Y[z]=Q,Ee[z]=xe}_.fill(0),O.fill(0);for(let z=0;z<g;z++){const ee=z/p;let J=0,fe=0;if(ee<=0)J=A[0],fe=Y[0]*p;else if(ee>=g-1){const Q=g-1;J=A[Q],fe=Y[Q]*p}else{const Q=Math.floor(ee),E=Q+1,D=ee-Q,ge=A[Q],me=A[E],Se=Y[Q],ue=Y[E];J=ge+D*(me-ge),fe=(Se+D*(ue-Se))*p}H[z]+=fe;const xe=H[z],G=J*Math.cos(xe),Z=J*Math.sin(xe);if(_[z]=G,O[z]=Z,z>0&&z<g-1){const Q=c-z;_[Q]=G,O[Q]=-Z}}O[0]=0,O[g-1]=0,h.fft(_,O,!0);for(let z=0;z<c;z++){const ee=I+z;if(ee>=w)break;const J=S[z];y[X][ee]+=_[z]*J,X===0&&(N[ee]+=J*J)}}}return y.map(F=>{const I=F.subarray(0,v);for(let X=0;X<I.length;X++){const ye=N[X];ye>1e-6&&(I[X]/=ye)}return Float32Array.from(I)})},Ot={model:"va",harmonics:.6,timbre:.5,morph:.5,level:1},St={id:null,name:"Empty",dataUrl:null,rootMidi:60,loop:!0,recordedAt:void 0,durationSec:0,trimStartSec:0,trimEndSec:0},vc=s=>({...s,mode:s.mode??"analog",macro:{...Ot,...s.macro??{}},sampler:{...St,...s.sampler??{}}}),R={osc1:{wave:"sawtooth",detune:0,detuneFine:0,octave:0,mode:"analog",macro:{...Ot},sampler:{...St}},osc2:{wave:"square",detune:0,detuneFine:0,octave:0,mode:"analog",macro:{...Ot},sampler:{...St}},mix:0,fm:{enabled:!1,ratio:2,amount:0},sub:{enabled:!1,octave:1,level:0,wave:"square"},ring:{enabled:!1,amount:1},filter:{type:"lowpass",cutoff:1200,q:.8},envelope:{attack:.01,decay:.2,sustain:.7,release:.3},master:{gain:.2},sampler:{...St},engineMode:"classic",macro:{...Ot},effects:{delay:{enabled:!1,time:.25,feedback:.3,mix:.2},reverb:{enabled:!1,size:.5,decay:.5,mix:.25}},lfo1:{enabled:!1,wave:"sine",rateHz:5,amount:.2,dest:"pitch"},lfo2:{enabled:!1,wave:"triangle",rateHz:.5,amount:.4,dest:"filter"},arp:{enabled:!1,rateHz:8,bpmSync:!1,bpm:120,division:"1/8",gate:.6,chordSource:"preset",mode:"up",octaves:1,chord:"none",latch:!1,swingPct:0,repeats:1,patternLen:0},sequencer:{enabled:!1,playing:!1,bpm:120,division:"1/16",swingPct:0,gate:.6,rootMidi:60,length:16,steps:Array.from({length:16},()=>({on:!1,offset:0,velocity:1}))},expression:{x:"filter.cutoff",y:"master.gain"}},lt=(s,a)=>Number.isFinite(s)?s:a,il=(s,a)=>s.patch[a]??R[a],al=s=>s.patch.macro??R.macro,ul={"filter.cutoff":{getBase:s=>lt(s.patch.filter.cutoff,R.filter.cutoff),range:(s,a)=>{const i=Ne(a*.25,80,12e3),c=Ne(a*4,i+20,14e3);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({filter:{cutoff:a}},{fromExpression:!0})},"filter.q":{getBase:s=>lt(s.patch.filter.q,R.filter.q),range:(s,a)=>{const i=Ne(a*.5,.1,20),c=Ne(a*2.5,i+.1,20);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({filter:{q:a}},{fromExpression:!0})},"master.gain":{getBase:s=>lt(s.patch.master.gain,R.master.gain),range:(s,a)=>{const i=Ne(a*.4,.01,1),c=Ne(a*1.6,i+.01,1);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({master:{gain:a}},{fromExpression:!0})},mix:{getBase:s=>lt(s.patch.mix,R.mix),range:()=>({min:0,max:1}),apply:(s,a)=>s.applyPatch({mix:Ne(a,0,1)},{fromExpression:!0})},"osc1.detune":{getBase:s=>lt(s.patch.osc1.detune,R.osc1.detune),range:(s,a)=>{const i=Ne(a-120,-2400,2400),c=Ne(a+120,i+1,2400);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({osc1:{detune:a}},{fromExpression:!0})},"osc2.detune":{getBase:s=>lt(s.patch.osc2.detune,R.osc2.detune),range:(s,a)=>{const i=Ne(a-120,-2400,2400),c=Ne(a+120,i+1,2400);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({osc2:{detune:a}},{fromExpression:!0})},"fm.amount":{getBase:s=>lt(s.patch.fm.amount,R.fm.amount),range:(s,a)=>{const i=Ne(a*.5,0,4e3),c=Ne(Math.max(a+400,400),i+10,4e3);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({fm:{amount:Ne(a,0,4e3)}},{fromExpression:!0})},"envelope.attack":{getBase:s=>lt(s.patch.envelope.attack,R.envelope.attack),range:(s,a)=>{const i=Ne(a*.2,.001,4),c=Ne(a*3,i+.01,4);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({envelope:{attack:a}},{fromExpression:!0})},"envelope.release":{getBase:s=>lt(s.patch.envelope.release,R.envelope.release),range:(s,a)=>{const i=Ne(a*.5,.03,6),c=Ne(a*3,i+.05,6);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({envelope:{release:a}},{fromExpression:!0})},"macro.harmonics":{getBase:s=>lt(al(s).harmonics,R.macro.harmonics),range:()=>({min:0,max:1}),apply:(s,a)=>s.applyPatch({macro:{harmonics:Ne(a,0,1)}},{fromExpression:!0})},"macro.timbre":{getBase:s=>lt(al(s).timbre,R.macro.timbre),range:()=>({min:0,max:1}),apply:(s,a)=>s.applyPatch({macro:{timbre:Ne(a,0,1)}},{fromExpression:!0})},"macro.morph":{getBase:s=>lt(al(s).morph,R.macro.morph),range:()=>({min:0,max:1}),apply:(s,a)=>s.applyPatch({macro:{morph:Ne(a,0,1)}},{fromExpression:!0})},"macro.level":{getBase:s=>lt(al(s).level,R.macro.level),range:()=>({min:0,max:1}),apply:(s,a)=>s.applyPatch({macro:{level:Ne(a,0,1)}},{fromExpression:!0})},"lfo1.rateHz":{getBase:s=>lt(il(s,"lfo1").rateHz,R.lfo1.rateHz),range:(s,a)=>{const i=Ne(a*.25,.05,30),c=Ne(a*4,i+.05,40);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({lfo1:{rateHz:a}},{fromExpression:!0})},"lfo1.amount":{getBase:s=>lt(il(s,"lfo1").amount,R.lfo1.amount),range:()=>({min:0,max:1}),apply:(s,a)=>s.applyPatch({lfo1:{amount:Ne(a,0,1)}},{fromExpression:!0})},"lfo2.rateHz":{getBase:s=>lt(il(s,"lfo2").rateHz,R.lfo2.rateHz),range:(s,a)=>{const i=Ne(a*.25,.02,20),c=Ne(a*4,i+.05,30);return{min:i,max:c}},apply:(s,a)=>s.applyPatch({lfo2:{rateHz:a}},{fromExpression:!0})},"lfo2.amount":{getBase:s=>lt(il(s,"lfo2").amount,R.lfo2.amount),range:()=>({min:0,max:1}),apply:(s,a)=>s.applyPatch({lfo2:{amount:Ne(a,0,1)}},{fromExpression:!0})}},oi=["x","y"],Ne=(s,a,i)=>Math.min(i,Math.max(a,s));function gc(s){const a=s.sampleRate*1,i=s.createBuffer(1,a,s.sampleRate),c=i.getChannelData(0);for(let d=0;d<a;d++)c[d]=Math.random()*2-1;return i}class mi{ctx;master;filter;analyser;noiseBuffer;activeVoices=new Map;fxInput;fxOutput;currentFxTap=null;lfos;expression2D={active:!1,x:.5,y:.5};expressionAxisTargets={x:R.expression.x,y:R.expression.y};expressionSnapshot={x:null,y:null};expressionApplying=!1;samplerBuffer=null;samplerMeta={...R.sampler};samplerLoadToken=0;samplerPitchCache=new Map;patch;arpHeld=new Set;arpIndex=0;arpTimer=null;arpLastNote=null;arpBypass=!1;arpPhase=0;arpRepeatCounter=0;arpCurrentStepMs=0;seqTimer=null;seqPhase=0;seqCurrentStepMs=0;seqStepIndex=0;seqLastNote=null;constructor(a){this.ctx=a??new(window.AudioContext||window.webkitAudioContext),this.master=this.ctx.createGain(),this.filter=this.ctx.createBiquadFilter(),this.analyser=this.ctx.createAnalyser(),this.fxInput=this.ctx.createGain(),this.fxOutput=this.ctx.createGain(),this.filter.connect(this.fxInput),this.fxInput.connect(this.fxOutput),this.fxOutput.connect(this.master),this.master.connect(this.ctx.destination);try{this.filter.connect(this.analyser)}catch{}this.analyser.smoothingTimeConstant=0,this.lfos=[];for(let i=0;i<2;i++){const c=this.ctx.createOscillator();c.type="sine",c.frequency.value=5;const d=this.ctx.createGain();d.gain.value=0,c.connect(d),c.start(),this.lfos.push({osc:c,noise:null,noiseFilter:null,gain:d,dest:"none",wave:"sine"})}this.patch={...R},this.applyPatch(),this.samplerMeta=this.normalizeSamplerMeta(this.patch.sampler,null)}get audioContext(){return this.ctx}getAnalyser(){return this.analyser}getWaveform(){const a=this.analyser.fftSize,i=new Uint8Array(a);return this.analyser.getByteTimeDomainData(i),i}async resume(){this.ctx.state!=="running"&&await this.ctx.resume()}normalizeSamplerMeta(a,i){const c=i?.duration??(Number.isFinite(a.durationSec)?a.durationSec:0);if(!(c>0))return{...a,durationSec:0,trimStartSec:0,trimEndSec:0};const d=.005,p=Math.max(0,c-d),v=Number(a.trimStartSec),S=Ne(Number.isFinite(v)?v:0,0,p),h=Number(a.trimEndSec);let g=Number.isFinite(h)?h:c;return g=Ne(g,S+d,c),g-S<d&&(g=Math.min(c,S+d)),{...a,durationSec:c,trimStartSec:S,trimEndSec:g}}async updateSamplerBuffer(a){const i=this.samplerMeta.id===a.id&&this.samplerMeta.dataUrl===a.dataUrl;if(this.samplerMeta=this.normalizeSamplerMeta({...a},i?this.samplerBuffer:null),!a.dataUrl){this.samplerBuffer=null,this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,null),this.samplerPitchCache.clear();return}if(i&&this.samplerBuffer)return;const c=++this.samplerLoadToken;try{const p=await(await fetch(a.dataUrl)).arrayBuffer(),v=await this.ctx.decodeAudioData(p.slice(0));c===this.samplerLoadToken&&(this.samplerBuffer=v,this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,v),this.samplerPitchCache.clear())}catch(d){c===this.samplerLoadToken&&(this.samplerBuffer=null,this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,null),this.samplerPitchCache.clear()),console.warn("Failed to decode sampler buffer",d)}}getSamplerBaseFrequency(){const a=Number.isFinite(this.samplerMeta.rootMidi)?this.samplerMeta.rootMidi:60;return 440*Math.pow(2,(a-69)/12)}getDetuneCents(a){if(a==="osc1"){const i=this.patch.osc1.detune||0,c=this.patch.osc1.detuneFine??0;return i+c}return this.patch.osc2.detune||0}mapNoiseLfoCutoff(a){const i=Ne(a,.01,20);return Ne(i*12,.5,600)}updateLfoSource(a,i){const c=this.lfos[a];if(!c)return;const d=this.ctx.currentTime,p=i.wave;if(p==="noise"){if(this.noiseBuffer||(this.noiseBuffer=gc(this.ctx)),c.osc){try{c.osc.stop(d)}catch{}try{c.osc.disconnect()}catch{}c.osc=null}if(!c.noise){const v=this.ctx.createBufferSource();v.buffer=this.noiseBuffer,v.loop=!0;const S=this.ctx.createBiquadFilter();S.type="lowpass",S.Q.value=1e-4,v.connect(S),S.connect(c.gain),v.start(),c.noise=v,c.noiseFilter=S}if(c.noiseFilter){const v=this.mapNoiseLfoCutoff(i.rateHz);c.noiseFilter.frequency.setTargetAtTime(v,d,.05)}}else{if(c.osc)c.osc.type=p,c.osc.frequency.setValueAtTime(Math.max(.01,i.rateHz),d);else{const v=this.ctx.createOscillator();v.type=p,v.frequency.value=Math.max(.01,i.rateHz),v.connect(c.gain),v.start(),c.osc=v}if(c.noise){try{c.noise.stop(d)}catch{}try{c.noise.disconnect()}catch{}c.noise=null}if(c.noiseFilter){try{c.noiseFilter.disconnect()}catch{}c.noiseFilter=null}}c.wave=p}getPitchedSamplerBuffer(a){if(!this.samplerBuffer)return null;const i=this.samplerBuffer.sampleRate,c=this.samplerMeta.trimStartSec??0,d=this.samplerMeta.trimEndSec??this.samplerBuffer.duration,p=Ne(c,0,this.samplerBuffer.duration),v=Ne(d,p+.005,this.samplerBuffer.duration),S=Math.max(0,Math.floor(p*i)),h=Math.max(S+1,Math.min(this.samplerBuffer.length,Math.floor(v*i)));if(h-S<=0)return null;const w=`${this.samplerMeta.id??"inline"}|${this.samplerMeta.dataUrl??"data"}|${S}|${h}`,y=Number.isFinite(a)&&a>0?a:1,N=y.toFixed(6),j=`${w}|${N}|${i}|${this.samplerBuffer.numberOfChannels}`,T=this.samplerPitchCache.get(j);if(T)return T;const _=this.samplerBuffer.numberOfChannels,O=[];for(let q=0;q<_;q++){const C=this.samplerBuffer.getChannelData(q).subarray(S,h);O.push(new Float32Array(C))}const A=Math.abs(y-1)<1e-4?O:Yf({channels:O,pitchRatio:y});if(!A.length||A[0].length===0)return null;const Y=this.ctx.createBuffer(A.length,A[0].length,i);for(let q=0;q<A.length;q++)Y.copyToChannel(A[q],q,0);return this.samplerPitchCache.set(j,Y),Y}createSamplerSource(a,i,c={}){const{autoStart:d=!0,allowLoop:p=!0}=c;if(!this.samplerBuffer)return null;this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,this.samplerBuffer);const v=this.getSamplerBaseFrequency(),S=this.getDetuneCents(i),h=Math.pow(2,S/1200),g=v>0?a/v*h:h,m=this.getPitchedSamplerBuffer(g);if(!m)return null;const w=m.duration,y=p&&!!this.samplerMeta.loop&&w>.01,N=this.ctx.createBufferSource();if(N.buffer=m,N.loop=y,y&&(N.loopStart=0,N.loopEnd=w),d){if(y)N.start(0);else{const j=Math.max(.005,w);N.start(0,0,j)}N._autoStarted=!0}return N}applyPatch(a={},i={}){const{fromExpression:c=!1}=i,d=this.patch,p=a.osc1??{},v=a.osc2??{},S=vc({...this.patch.osc1,...p}),h=vc({...this.patch.osc2,...v}),g={...this.patch,...a,osc1:S,osc2:h,fm:{...this.patch.fm,...a.fm??{}},sub:{...this.patch.sub,...a.sub??{}},ring:{...this.patch.ring,...a.ring??{}},filter:{...this.patch.filter,...a.filter??{}},envelope:{...this.patch.envelope,...a.envelope??{}},master:{...this.patch.master,...a.master??{}},mix:a.mix!=null?a.mix:this.patch.mix,engineMode:a.engineMode??this.patch.engineMode??"classic",sampler:{...this.patch.sampler??R.sampler,...a.sampler??{}},macro:{...this.patch.macro??Ot,...a.macro??{}},effects:{...this.patch.effects??R.effects,...a.effects??{}},lfo1:{...this.patch.lfo1??R.lfo1,...a.lfo1??{}},lfo2:{...this.patch.lfo2??R.lfo2,...a.lfo2??{}},arp:{...this.patch.arp??R.arp,...a.arp??{}},sequencer:{...this.patch.sequencer??R.sequencer,...a.sequencer??{}},expression:{...this.patch.expression??R.expression,...a.expression??{}}};if(this.patch=g,a.sampler!==void 0?this.updateSamplerBuffer(g.sampler):a.osc1?.sampler!==void 0?this.updateSamplerBuffer(g.osc1.sampler??R.sampler):a.osc2?.sampler!==void 0&&this.updateSamplerBuffer(g.osc2.sampler??R.sampler),this.configureExpressionRouting(g.expression),a.mix!==void 0&&g.mix!==d.mix){const m=Ne(1-g.mix,0,1),w=Ne(g.mix,0,1),y=this.ctx.currentTime;for(const N of this.activeVoices.values())N.osc1Mix&&N.osc1Mix.gain.setTargetAtTime(m,y,.01),N.osc2Mix&&N.osc2Mix.gain.setTargetAtTime(w,y,.01)}if(g.master.gain!==d.master.gain&&this.master.gain.setTargetAtTime(g.master.gain,this.ctx.currentTime,.01),g.filter.type!==d.filter.type&&(this.filter.type=g.filter.type),g.filter.q!==d.filter.q&&this.filter.Q.setTargetAtTime(g.filter.q,this.ctx.currentTime,.02),g.filter.cutoff!==d.filter.cutoff&&this.filter.frequency.setTargetAtTime(g.filter.cutoff,this.ctx.currentTime,.015),this.noiseBuffer||(this.noiseBuffer=gc(this.ctx)),a.effects!==void 0&&this.buildFxChain(),a.lfo1!==void 0||a.lfo2!==void 0||a.master?.gain!==void 0){const m=[this.patch.lfo1,this.patch.lfo2];for(let w=0;w<this.lfos.length;w++){const y=this.lfos[w],N=m[w];this.updateLfoSource(w,N);try{y.gain.disconnect()}catch{}if(y.dest="none",y.gain.gain.value=0,N.enabled)if(N.dest==="filter")y.dest="filter",y.gain.gain.value=Math.max(0,N.amount)*2e3,y.gain.connect(this.filter.frequency);else if(N.dest==="amp"){y.dest="amp";const j=this.patch.master.gain;y.gain.gain.value=Math.max(0,N.amount)*Math.max(0,j)*.8,y.gain.connect(this.master.gain)}else N.dest==="pitch"&&(y.dest="pitch",y.gain.gain.value=Math.max(0,N.amount)*50)}}if(a.arp!==void 0&&this.updateArpScheduler({forceRestart:!0}),a.sequencer!==void 0&&this.updateSeqScheduler(),a.osc1?.detune!==void 0||a.osc1?.detuneFine!==void 0){const m=this.ctx.currentTime,w=(g.osc1.detune||0)+(g.osc1.detuneFine??0);for(const y of this.activeVoices.values())if(y.osc1Detune)try{y.osc1Detune.setTargetAtTime(w,m,.01)}catch{}}if(a.osc2?.detune!==void 0){const m=this.ctx.currentTime;for(const w of this.activeVoices.values())if(w.osc2Detune)try{w.osc2Detune.setTargetAtTime(g.osc2.detune||0,m,.01)}catch{}}this.expression2D.active&&!c&&this.applyExpression2D()}async previewSampler(a){const i=this.patch[a].sampler??R.sampler;if(!i?.dataUrl||(await this.updateSamplerBuffer(i),!this.samplerBuffer))return;const c=Number.isFinite(i.rootMidi)?i.rootMidi:60,d=440*Math.pow(2,(c-69)/12),p=this.createSamplerSource(d,a,{autoStart:!1,allowLoop:!1});if(!p)return;const v=this.ctx.createGain();v.gain.value=.8,p.connect(v),v.connect(this.master);const S=this.ctx.currentTime,h=Math.max(.05,Math.min(p.buffer?.duration??.5,5));let g=!1;try{p.start(S),g=!0,p.stop(S+h)}catch(w){if(!g){try{p.disconnect()}catch{}try{v.disconnect()}catch{}return}throw w}const m=()=>{try{p.disconnect()}catch{}try{v.disconnect()}catch{}};p.addEventListener("ended",m,{once:!0})}buildFxChain(){try{this.fxInput.disconnect()}catch{}if(this.currentFxTap){try{this.currentFxTap.disconnect(this.fxOutput)}catch{}this.currentFxTap=null}let a=this.fxInput;const i=this.patch.effects;i?.delay?.enabled&&(a=this.applyDelayEffect(a,i.delay)),i?.reverb?.enabled&&(a=this.applyReverbEffect(a,i.reverb)),a.connect(this.fxOutput),this.currentFxTap=a}clamp01(a){return Math.min(1,Math.max(0,a))}setExpression2D(a,i){const c=this.clamp01(a),d=this.clamp01(i);this.expression2D.active||this.captureExpressionBase(),this.expression2D={active:!0,x:c,y:d},this.applyExpression2D()}clearExpression2D(){if(this.expression2D.active){this.expressionApplying=!0;try{for(const a of oi)this.resetExpressionAxis(a)}finally{this.expressionApplying=!1,this.expression2D={active:!1,x:.5,y:.5},this.expressionSnapshot={x:null,y:null}}}}configureExpressionRouting(a=this.patch.expression??R.expression){const i=R.expression??{x:"filter.cutoff",y:"master.gain"};for(const c of oi){const d=a?.[c]??i[c],p=ul[d]?d:i[c];(this.expressionAxisTargets[c]!==p||!this.expression2D.active)&&(this.expressionSnapshot[c]=null),this.expressionAxisTargets[c]=p}}captureExpressionBase(){for(const a of oi){const i=this.expressionAxisTargets[a],c=ul[i];if(!c)continue;const d=c.getBase(this);this.expressionSnapshot[a]=Number.isFinite(d)?d:0}}applyExpressionAxis(a,i){const c=this.expressionAxisTargets[a],d=ul[c];if(!d)return;let p=this.expressionSnapshot[a];(p==null||Number.isNaN(p))&&(p=d.getBase(this),this.expressionSnapshot[a]=p);const{min:v,max:S}=d.range(this,p),h=S-v,g=h<=0?p:v+h*this.clamp01(i);d.apply(this,g)}resetExpressionAxis(a){const i=this.expressionSnapshot[a],c=this.expressionAxisTargets[a],d=ul[c];d&&i!=null&&Number.isFinite(i)&&d.apply(this,i),this.expressionSnapshot[a]=null}applyExpression2D(){if(!(!this.expression2D.active||this.expressionApplying)){this.expressionApplying=!0;try{this.applyExpressionAxis("x",this.expression2D.x),this.applyExpressionAxis("y",this.expression2D.y)}finally{this.expressionApplying=!1}}}applyDelayEffect(a,i){const c=this.clamp01(i.mix),d=Math.max(0,Math.min(1.5,i.time)),p=Math.max(0,Math.min(.95,i.feedback)),v=this.ctx.createDelay(2);v.delayTime.value=d;const S=this.ctx.createGain();S.gain.value=p,v.connect(S),S.connect(v);const h=this.ctx.createGain();h.gain.value=1-c;const g=this.ctx.createGain();g.gain.value=c;const m=this.ctx.createGain();return a.connect(h),a.connect(v),v.connect(g),h.connect(m),g.connect(m),m}makeImpulse(a,i){const c=Math.max(1,Math.floor(this.ctx.sampleRate*Math.max(.05,a))),d=this.ctx.createBuffer(2,c,this.ctx.sampleRate);for(let p=0;p<d.numberOfChannels;p++){const v=d.getChannelData(p);for(let S=0;S<c;S++){const h=S/c;v[S]=(Math.random()*2-1)*Math.pow(1-h,2+i*6)}}return d}applyReverbEffect(a,i){const c=this.clamp01(i.mix),d=.1+this.clamp01(i.size)*3,p=this.clamp01(i.decay),v=this.ctx.createConvolver();v.normalize=!0,v.buffer=this.makeImpulse(d,p);const S=this.ctx.createGain();S.gain.value=1-c;const h=this.ctx.createGain();h.gain.value=c;const g=this.ctx.createGain();return a.connect(S),a.connect(v),v.connect(h),S.connect(g),h.connect(g),g}makeWavefolderCurve(a,i,c=2048){const d=new Float32Array(c),p=Math.max(1e-4,a)*6,v=(i-.5)*2;for(let S=0;S<c;S++){let h=S/(c-1)*2-1;h+=v*.5;const g=Math.tanh(p*h)/Math.tanh(p);d[S]=g}return d}buildMacroVoice(a,i){switch(i.model){case"fold":return this.createMacroFold(a,i);case"pluck":return this.createMacroPluck(a,i);case"supersaw":return this.createMacroSuperSaw(a,i);case"pwm":return this.createMacroPWM(a,i);case"fm2op":return this.createMacroFM2Op(a,i);case"wavetable":return this.createMacroWavetable(a,i);case"harmonic":return this.createMacroHarmonic(a,i);case"chord":return this.createMacroChord(a,i);case"va":default:return this.createMacroVA(a,i)}}createMacroSuperSaw(a,i){const d=this.ctx.createGain(),p=this.ctx.createBiquadFilter();p.type="lowpass",p.frequency.value=800+i.timbre*12e3,p.Q.value=.3;const v=0+i.harmonics*30,S=[-1,-.6,-.2,.2,.6,1],h=[];for(let m=0;m<6;m++){const w=this.ctx.createOscillator();w.type="sawtooth",w.frequency.value=a,w.detune.value=S[m]*v;const y=this.ctx.createGain();y.gain.value=1/6;const N=this.ctx.createStereoPanner(),j=(i.morph-.5)*2,T=S[m]/Math.max(1,Math.max(...S.map(Math.abs)))*j;N.pan.value=T,w.connect(y).connect(N).connect(d),h.push({osc:w,pan:N}),w.start()}d.connect(p);const g=this.ctx.createGain();return g.gain.value=i.level,p.connect(g),{output:g,stop:m=>h.forEach(({osc:w})=>w.stop(m)),pitched:h.map(m=>m.osc)}}createMacroWavetable(a,i){const c=["sine","triangle","sawtooth","square"],d=Math.min(3,Math.max(0,Math.floor(i.morph*3.00001))),p=Math.min(1,Math.max(0,i.morph*3-d)),v=(y,N)=>{const j=this.ctx.createOscillator();j.type=y,j.frequency.value=a;const T=this.ctx.createGain();return T.gain.value=N,j.connect(T),{osc:j,g:T}},S=v(c[d],d===3?1:1-p),h=d<3?v(c[d+1],p):null,g=this.ctx.createBiquadFilter();g.type="lowpass",g.frequency.value=800+i.harmonics*15e3,g.Q.value=.1+i.timbre*.6;const m=this.ctx.createGain();m.gain.value=i.level,S.g.connect(g),h&&h.g.connect(g),g.connect(m),S.osc.start(),h&&h.osc.start();const w=[S.osc];return h&&w.push(h.osc),{output:m,stop:y=>{S.osc.stop(y),h&&h.osc.stop(y)},pitched:w}}createMacroHarmonic(a,i){const p=Math.round(2+i.harmonics*14),v=.5+(1-i.timbre)*2,S=(i.morph-.5)*2,h=this.ctx.createGain(),g=[];for(let y=1;y<=p;y++){const N=this.ctx.createOscillator();N.type="sine",N.frequency.value=a*y;let j=1/Math.pow(y,v);const _=y%2===0?Math.max(.1,(S+1)/2):Math.max(.1,(1-S)/2);j*=_;const O=this.ctx.createGain();O.gain.value=j,N.connect(O).connect(h),N.start(),g.push(N)}const m=this.ctx.createBiquadFilter();m.type="lowpass",m.frequency.value=1e3+i.timbre*15e3,m.Q.value=.2;const w=this.ctx.createGain();return w.gain.value=i.level,h.connect(m).connect(w),{output:w,stop:y=>{for(const N of g)N.stop(y)},pitched:g}}createMacroChord(a,i){const c=[[0,4,7],[0,3,7],[0,5,7],[0,2,7],[0,4,7,10],[0,3,7,10],[0,4,7,11],[0,3,6,9],[0,4,8],[-12,0,7,12]],d=Math.max(0,Math.min(c.length-1,Math.floor(i.harmonics*c.length))),p=c[d],v=(i.morph-.5)*2,S=this.ctx.createGain(),h=this.ctx.createBiquadFilter();h.type="lowpass",h.frequency.value=900+i.timbre*15e3,h.Q.value=.3;const g=this.ctx.createGain();g.gain.value=i.level;const m=[],w=[-1,-.3,.3,1];return p.forEach((y,N)=>{const j=this.ctx.createOscillator();j.type="sawtooth";const T=440*Math.pow(2,Math.log2(a/440)+y/12);j.frequency.value=T;const _=w[N%w.length]*v*15;j.detune.value=_;const O=this.ctx.createGain();O.gain.value=1/p.length;const A=this.ctx.createStereoPanner();A.pan.value=w[N%w.length]*v,j.connect(O).connect(A).connect(S),j.start(),m.push(j)}),S.connect(h).connect(g),{output:g,stop:y=>{for(const N of m)N.stop(y)},pitched:m}}createMacroPWM(a,i){const c=this.ctx.createOscillator();c.type="sawtooth",c.frequency.value=a;const d=this.ctx.createGain();d.gain.value=1;const p=this.ctx.createConstantSource(),v=(i.morph-.5)*1.6;p.offset.value=v,p.start(),c.connect(d),p.connect(d);const S=this.ctx.createWaveShaper(),h=1+i.harmonics*24,g=2048,m=new Float32Array(g);for(let N=0;N<g;N++){const j=N/(g-1)*2-1;m[N]=Math.tanh(h*j)}S.curve=m,S.oversample="4x";const w=this.ctx.createBiquadFilter();w.type="lowpass",w.frequency.value=2e3+i.timbre*14e3,w.Q.value=.2;const y=this.ctx.createGain();return y.gain.value=i.level,d.connect(S).connect(w).connect(y),c.start(),{output:y,stop:N=>{c.stop(N),p.stop(N)},pitched:[c]}}createMacroFM2Op(a,i){const c=this.ctx.createOscillator();c.type="sine",c.frequency.value=a;const d=this.ctx.createOscillator();d.type="sine";const p=.25+i.harmonics*7.75;d.frequency.value=a*p;const v=this.ctx.createGain();v.gain.value=Math.max(0,i.timbre)*a*2,d.connect(v).connect(c.frequency);const S=this.ctx.createBiquadFilter();S.type="lowpass",S.frequency.value=1e3+i.morph*15e3,S.Q.value=.1;const h=this.ctx.createGain();return h.gain.value=i.level,c.connect(S).connect(h),c.start(),d.start(),{output:h,stop:g=>{c.stop(g),d.stop(g)},pitched:[c]}}createMacroVA(a,i){const c=this.ctx.createOscillator(),d=this.ctx.createOscillator();c.type="sawtooth",d.type="triangle",c.frequency.value=a,d.frequency.value=a;const p=this.ctx.createGain(),v=this.ctx.createGain();p.gain.value=1-i.timbre,v.gain.value=i.timbre;const S=this.ctx.createGain(),h=this.ctx.createBiquadFilter();return h.type="lowpass",h.frequency.value=1e3+i.harmonics*15e3,h.Q.value=.5,d.connect(p).connect(S),c.connect(v).connect(S),S.connect(h),d.start(),c.start(),{output:h,stop:g=>{d.stop(g),c.stop(g)},pitched:[d,c]}}createMacroFold(a,i){const c=this.ctx.createOscillator();c.type="sine",c.frequency.value=a;const d=this.ctx.createGain(),p=this.ctx.createWaveShaper(),v=this.ctx.createGain(),S=.2+i.harmonics*1.6,h=i.morph;p.curve=this.makeWavefolderCurve(S,h),p.oversample="4x",d.gain.value=1,v.gain.value=i.level;const g=this.ctx.createBiquadFilter();return g.type="lowpass",g.frequency.value=4e3+i.timbre*16e3,g.Q.value=.2,c.connect(d).connect(p).connect(g).connect(v),c.start(),{output:v,stop:m=>c.stop(m),pitched:[c]}}createMacroPluck(a,i){const c=this.ctx.createGain(),d=this.ctx.createBufferSource(),p=Math.floor(this.ctx.sampleRate*.02),v=this.ctx.createBuffer(1,p,this.ctx.sampleRate),S=v.getChannelData(0);for(let N=0;N<p;N++)S[N]=(Math.random()*2-1)*(1-N/p);d.buffer=v,d.loop=!1;const h=1/Math.max(20,a),g=this.ctx.createDelay(1);g.delayTime.value=h;const m=this.ctx.createGain();m.gain.value=.85+i.harmonics*.14;const w=this.ctx.createBiquadFilter();w.type="lowpass",w.frequency.value=1e3+i.timbre*8e3,w.Q.value=0;const y=this.ctx.createBiquadFilter();return y.type="highpass",y.frequency.value=50+i.morph*400,d.connect(y).connect(g).connect(c),g.connect(w).connect(m).connect(g),c.gain.value=i.level,d.start(),{output:c,stop:N=>{},pitched:[]}}makeVoice(a){const i=this.ctx.currentTime,c=this.patch.envelope,d=this.ctx.createGain();d.gain.value=0,d.connect(this.filter);const p=this.activeVoices.size,S=.65/Math.max(1,Math.sqrt(p+1)),g=(H=>{const z=Number(H??0);return Number.isFinite(z)?Math.max(-3,Math.min(3,Math.round(z))):0})(this.patch.osc1.octave),m=a*Math.pow(2,g),w=this.patch.engineMode??"classic",y=H=>H==="macro"?"macro":H==="sampler"?"sampler":"analog",N=this.patch.osc1.mode??y(w),j=this.patch.osc2.mode??y(w),T=this.ctx.createGain(),_=this.ctx.createGain(),O=Math.max(0,Math.min(1,this.patch.mix));T.gain.value=1-O,_.gain.value=O;const A=this.ctx.createGain();A.gain.value=1,T.connect(A),_.connect(A),A.connect(d);const Y=[];let q=null,ne=null,C=null;const F=[],I=[];if(N==="macro"){const H=this.patch.osc1.macro??this.patch.macro??Ot,z=this.buildMacroVoice(m,H);if(z.output.connect(T),I.push(z),C||(C=z.output),z.pitched&&z.pitched.length)for(const ee of z.pitched)for(const J of this.lfos)J.dest==="pitch"&&this.patch[this.lfos.indexOf(J)===0?"lfo1":"lfo2"]?.enabled&&(J.gain.connect(ee.detune),F.push({g:J.gain,p:ee.detune}))}else if(N==="sampler"){const H=this.createSamplerSource(m,"osc1");H&&(H.connect(T),Y.push(H),C=H)}else{let H=null;if(this.patch.osc1.wave==="noise"){const z=this.ctx.createBufferSource();z.buffer=this.noiseBuffer,z.loop=!0,H=z}else if(this.patch.osc1.wave==="sample")H=this.createSamplerSource(m,"osc1");else{const z=this.ctx.createOscillator();z.type=this.patch.osc1.wave,z.frequency.setValueAtTime(m,i);const ee=this.patch.osc1.detuneFine??0;z.detune.value=(this.patch.osc1.detune||0)+ee,H=z,q=z}if(H&&(H.connect(T),Y.push(H),C=H),H&&this.patch.fm.enabled&&"frequency"in H){const z=H,ee=this.ctx.createOscillator();ee.type=this.patch.osc2.wave;const J=Math.max(.01,this.patch.fm.ratio||1);ee.frequency.setValueAtTime(a*J,i),ee.detune.value=this.patch.osc2.detune||0;const fe=this.ctx.createGain();fe.gain.value=Math.max(0,this.patch.fm.amount||0),ee.connect(fe),fe.connect(z.frequency),Y.push(ee)}if(H&&"detune"in H)for(const z of this.lfos)z.dest==="pitch"&&this.patch[this.lfos.indexOf(z)===0?"lfo1":"lfo2"]?.enabled&&(z.gain.connect(H.detune),F.push({g:z.gain,p:H.detune}))}if(j==="macro"){const H=this.patch.osc2.macro??this.patch.macro??Ot,z=this.buildMacroVoice(a,H);if(z.output.connect(_),I.push(z),z.pitched&&z.pitched.length)for(const ee of z.pitched)for(const J of this.lfos)J.dest==="pitch"&&this.patch[this.lfos.indexOf(J)===0?"lfo1":"lfo2"]?.enabled&&(J.gain.connect(ee.detune),F.push({g:J.gain,p:ee.detune}))}else if(j==="sampler"){const H=this.createSamplerSource(a,"osc2");H&&(H.connect(_),Y.push(H))}else{let H=null;if(this.patch.osc2.wave==="noise"){const z=this.ctx.createBufferSource();z.buffer=this.noiseBuffer,z.loop=!0,H=z}else{const z=this.ctx.createOscillator();z.type=this.patch.osc2.wave,z.frequency.setValueAtTime(a,i),z.detune.value=this.patch.osc2.detune,H=z,ne=z}if(H&&(H.connect(_),Y.push(H)),this.patch.ring.enabled&&C&&H){const z=this.ctx.createGain();z.gain.value=0,C.connect(z);const ee=this.ctx.createGain();ee.gain.value=1,H.connect(ee),ee.connect(z.gain);const J=Math.max(0,Math.min(1,this.patch.ring.amount));A.gain.value=1-J;const fe=this.ctx.createGain();fe.gain.value=J,z.connect(fe),fe.connect(d)}if(H&&"detune"in H)for(const z of this.lfos)z.dest==="pitch"&&this.patch[this.lfos.indexOf(z)===0?"lfo1":"lfo2"]?.enabled&&(z.gain.connect(H.detune),F.push({g:z.gain,p:H.detune}))}const X=d.gain;X.cancelScheduledValues(i),X.setValueAtTime(0,i),X.linearRampToValueAtTime(S,i+Math.max(.001,c.attack)),X.linearRampToValueAtTime(c.sustain*S,i+c.attack+Math.max(.001,c.decay));for(const H of Y)"start"in H&&!H._autoStarted&&H.start();if(this.patch.sub.enabled){const H=this.ctx.createOscillator();H.type=this.patch.sub.wave||"square";const z=a/Math.pow(2,Math.max(1,Math.min(2,this.patch.sub.octave)));H.frequency.setValueAtTime(z,i);const ee=this.ctx.createGain();ee.gain.value=Math.max(0,Math.min(1,this.patch.sub.level)),H.connect(ee),ee.connect(d),Y.push(H);for(const J of this.lfos)J.dest==="pitch"&&this.patch[this.lfos.indexOf(J)===0?"lfo1":"lfo2"]?.enabled&&(J.gain.connect(H.detune),F.push({g:J.gain,p:H.detune}))}const Ee={stop:H=>{const z=Math.max(this.ctx.currentTime,H);X.cancelScheduledValues(z),X.setValueAtTime(X.value,z),X.linearRampToValueAtTime(0,z+Math.max(.001,c.release));for(const ee of Y)"stop"in ee&&ee.stop(z+c.release+.05);for(const ee of I)try{ee.stop(z+c.release+.05)}catch{}for(const ee of F)try{ee.g.disconnect(ee.p)}catch{}},osc1Mix:T,osc2Mix:_};return q&&(Ee.osc1Detune=q.detune),ne&&(Ee.osc2Detune=ne.detune),Ee}allNotesOff(){const a=this.ctx.currentTime;for(const i of this.activeVoices.values())i.stop(a);this.activeVoices.clear()}getArpChordOffsets(){const a=this.patch.arp??R.arp;if((a.chordSource??"preset")==="sequencer"){const d=this.patch.sequencer??R.sequencer,p=d.steps??[],v=Math.max(1,Math.min(p.length,d.length)),S=new Set;for(let h=0;h<v;h++){const g=p[h];if(g?.on){const m=Math.round(g.offset??0);Number.isFinite(m)&&S.add(m)}}return S.size>0?Array.from(S).sort((h,g)=>h-g):[0]}switch(a.chord??R.arp.chord??"none"){case"power":return[0,7];case"major":return[0,4,7];case"minor":return[0,3,7];case"sus2":return[0,2,7];case"sus4":return[0,5,7];case"maj7":return[0,4,7,11];case"min7":return[0,3,7,10];default:return[0]}}buildArpPool(){if(this.arpHeld.size===0)return[];const a=this.patch.arp?.mode??"up",i=a==="asplayed"?Array.from(this.arpHeld.values()):Array.from(this.arpHeld.values()).sort((v,S)=>v-S),c=Math.max(1,Math.min(4,this.patch.arp?.octaves??1)),d=[],p=this.getArpChordOffsets();for(let v=0;v<c;v++)for(const S of i){const h=S+v*12;for(const g of p){const m=h+g;m<0||m>127||d.push(m)}}if(a==="down")return d.slice().sort((v,S)=>S-v);if(a==="random")return d.slice().sort(()=>Math.random()-.5);if(a==="updown"){const v=d.slice().sort((h,g)=>h-g),S=v.slice().reverse().slice(1,-1);return v.concat(S)}return d}updateArpScheduler(a={}){const{forceRestart:i=!1}=a;if(!!this.patch.arp?.enabled&&this.arpHeld.size>0){const d=i||this.arpTimer==null;if(d&&this.arpTimer!=null&&(clearTimeout(this.arpTimer),this.arpTimer=null),d){this.arpPhase=0,this.arpRepeatCounter=0;const p=this.getArpStepMs(),v=this.computeArpAlignmentDelay(p);this.scheduleNextArpTick(v)}}else{if(this.arpTimer!=null&&(clearTimeout(this.arpTimer),this.arpTimer=null),this.arpLastNote!=null){const d=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(d)}finally{this.arpBypass=!1}this.arpLastNote=null}this.arpIndex=0,this.arpRepeatCounter=0}}computeArpAlignmentDelay(a){if(!(a>0))return 0;const c=this.ctx.currentTime*1e3%a;return c<1?0:a-c}scheduleNextArpTick(a){const i=this.getArpStepMs();let c=0;if(this.patch.arp?.bpmSync){const S=this.patch.arp?.division,h=Math.max(0,Math.min(1,this.patch.arp?.swingPct??0));S==="1/8"?c=h:S==="1/16"?c=h*.5:c=0}const d=this.arpPhase===0?1+c*.5:1-c*.5,p=i*d,v=a??p;this.arpCurrentStepMs=p,this.arpTimer=setTimeout(()=>{if(!this.patch.arp?.enabled||this.arpHeld.size===0){this.updateArpScheduler();return}this.arpTick(),this.arpPhase=this.arpPhase?0:1,this.scheduleNextArpTick()},Math.max(0,v))}getArpStepMs(){const a=this.patch.arp;if(a?.bpmSync){const c=6e4/Math.max(20,Math.min(300,a.bpm||120)),d=a.division||"1/8",p=d==="1/4"?1:d==="1/8"?.5:d==="1/8T"?1/3:d==="1/16"?.25:1/6;return c*p}else return 1e3/Math.max(.1,a?.rateHz??8)}arpTick(){let a=this.buildArpPool();if(a.length===0){if(this.arpLastNote!=null){const g=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(g)}finally{this.arpBypass=!1}this.arpLastNote=null}return}const i=Math.max(0,this.patch.arp?.patternLen??0);i>0&&a.length>i&&(a=a.slice(0,i)),this.arpIndex>=a.length&&(this.arpIndex=0);const c=a[this.arpIndex++],d=Math.max(1,Math.min(8,this.patch.arp?.repeats??1));this.arpRepeatCounter<d-1?(this.arpIndex=(this.arpIndex-1+a.length)%a.length,this.arpRepeatCounter++):this.arpRepeatCounter=0,this.arpLastNote!=null&&(this.patch.arp?.gate??.6)>=1,this.arpBypass=!0;try{this.noteOn(c)}finally{this.arpBypass=!1}this.arpLastNote=c;const p=this.arpCurrentStepMs||this.getArpStepMs(),v=Math.max(.05,Math.min(1,this.patch.arp?.gate??.6)),S=p*v,h=c;setTimeout(()=>{this.arpBypass=!0;try{this.noteOff(h)}finally{this.arpBypass=!1}},S)}getArpStatus(){const a=!!this.patch.arp?.enabled;let i=0,c=0;if(a){const d=this.buildArpPool().length,p=Math.max(0,this.patch.arp?.patternLen??0);if(i=p>0?Math.min(p,d):d,i<=0&&(i=0),i>0){const v=(this.arpIndex-1+i)%i;c=v<0?0:v}}return{enabled:a,stepIndex:c,length:i}}getSeqStepMs(){const a=this.patch.sequencer,c=6e4/Math.max(20,Math.min(300,a.bpm||120)),d=a.division,p=d==="1/4"?1:d==="1/8"?.5:d==="1/8T"?1/3:d==="1/16"?.25:1/6;return c*p}updateSeqScheduler(){const a=this.patch.sequencer;if(!!a.enabled&&!!a.playing)this.seqTimer!=null&&(clearTimeout(this.seqTimer),this.seqTimer=null),this.seqPhase=0,this.seqStepIndex=0,this.scheduleNextSeqTick();else if(this.seqTimer!=null&&(clearTimeout(this.seqTimer),this.seqTimer=null),this.seqLastNote!=null){const c=this.seqLastNote;this.arpBypass=!0;try{this.noteOff(c)}finally{this.arpBypass=!1}this.seqLastNote=null}}scheduleNextSeqTick(){const a=this.getSeqStepMs(),i=this.patch.sequencer?.division;let c=Math.max(0,Math.min(1,this.patch.sequencer?.swingPct??0));i==="1/16"&&(c*=.5),i==="1/8"&&(c=c),(i==="1/4"||i?.endsWith("T"))&&(c=0);const d=this.seqPhase===0?1+c*.5:1-c*.5,p=a*d;this.seqCurrentStepMs=p,this.seqTimer=setTimeout(()=>{if(!this.patch.sequencer?.enabled||!this.patch.sequencer?.playing){this.updateSeqScheduler();return}this.seqTick(),this.seqPhase=this.seqPhase?0:1,this.scheduleNextSeqTick()},p)}seqTick(){const a=this.patch.sequencer,i=Math.max(1,Math.min(a.steps.length,a.length)),c=this.seqStepIndex%i,d=a.steps[c]||{on:!1,offset:0};if(this.seqStepIndex=(this.seqStepIndex+1)%i,this.seqLastNote!=null&&(a.gate??.6)>=1){const p=this.seqLastNote;this.arpBypass=!0;try{this.noteOff(p)}finally{this.arpBypass=!1}this.seqLastNote=null}if(d.on){const p=Math.round((a.rootMidi||60)+(d.offset||0));this.arpBypass=!0;try{this.noteOn(p)}finally{this.arpBypass=!1}this.seqLastNote=p;const v=Math.max(.05,Math.min(1,a.gate??.6)),S=(this.seqCurrentStepMs||this.getSeqStepMs())*v;setTimeout(()=>{this.arpBypass=!0;try{this.noteOff(p)}finally{this.arpBypass=!1}},S)}}getSequencerStatus(){const a=this.patch.sequencer,i=!!a.enabled&&!!a.playing,c=Math.max(0,Math.min(a.steps.length,a.length)),d=i&&c>0?(this.seqStepIndex+c-1)%c:0;return{enabled:i,stepIndex:d,length:c}}previewNote(a,i=150){this.arpBypass=!0;try{this.noteOn(a)}finally{this.arpBypass=!1}setTimeout(()=>{this.arpBypass=!0;try{this.noteOff(a)}finally{this.arpBypass=!1}},Math.max(20,i))}noteOn(a){if(this.patch.arp?.enabled&&!this.arpBypass){this.arpHeld.add(a),this.updateArpScheduler();return}const i=440*Math.pow(2,(a-69)/12),c=this.makeVoice(i);this.activeVoices.set(a,c)}noteOff(a){if(this.patch.arp?.enabled&&!this.arpBypass){if(this.patch.arp?.latch||(this.arpHeld.delete(a),this.arpHeld.size===0&&this.updateArpScheduler()),this.arpLastNote===a){const c=this.activeVoices.get(a);c&&c.stop(this.ctx.currentTime),this.activeVoices.delete(a),this.arpLastNote===a&&(this.arpLastNote=null)}return}const i=this.activeVoices.get(a);i&&(i.stop(this.ctx.currentTime),this.activeVoices.delete(a))}arpClear(){if(this.arpHeld.clear(),this.arpIndex=0,this.arpTimer!=null&&(clearInterval(this.arpTimer),this.arpTimer=null),this.arpLastNote!=null){const a=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(a)}finally{this.arpBypass=!1}this.arpLastNote=null}}}const Jf={},yc=s=>{let a;const i=new Set,c=(m,w)=>{const y=typeof m=="function"?m(a):m;if(!Object.is(y,a)){const N=a;a=w??(typeof y!="object"||y===null)?y:Object.assign({},a,y),i.forEach(j=>j(a,N))}},d=()=>a,h={setState:c,getState:d,getInitialState:()=>g,subscribe:m=>(i.add(m),()=>i.delete(m)),destroy:()=>{(Jf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},g=a=s(c,d,h);return h},Zf=s=>s?yc(s):yc;var ii={exports:{}},ai={},ui={exports:{}},ci={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xc;function ep(){if(xc)return ci;xc=1;var s=Jr();function a(w,y){return w===y&&(w!==0||1/w===1/y)||w!==w&&y!==y}var i=typeof Object.is=="function"?Object.is:a,c=s.useState,d=s.useEffect,p=s.useLayoutEffect,v=s.useDebugValue;function S(w,y){var N=y(),j=c({inst:{value:N,getSnapshot:y}}),T=j[0].inst,_=j[1];return p(function(){T.value=N,T.getSnapshot=y,h(T)&&_({inst:T})},[w,N,y]),d(function(){return h(T)&&_({inst:T}),w(function(){h(T)&&_({inst:T})})},[w]),v(N),N}function h(w){var y=w.getSnapshot;w=w.value;try{var N=y();return!i(w,N)}catch{return!0}}function g(w,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:S;return ci.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:m,ci}var wc;function tp(){return wc||(wc=1,ui.exports=ep()),ui.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sc;function np(){if(Sc)return ai;Sc=1;var s=Jr(),a=tp();function i(g,m){return g===m&&(g!==0||1/g===1/m)||g!==g&&m!==m}var c=typeof Object.is=="function"?Object.is:i,d=a.useSyncExternalStore,p=s.useRef,v=s.useEffect,S=s.useMemo,h=s.useDebugValue;return ai.useSyncExternalStoreWithSelector=function(g,m,w,y,N){var j=p(null);if(j.current===null){var T={hasValue:!1,value:null};j.current=T}else T=j.current;j=S(function(){function O(C){if(!A){if(A=!0,Y=C,C=y(C),N!==void 0&&T.hasValue){var F=T.value;if(N(F,C))return q=F}return q=C}if(F=q,c(Y,C))return F;var I=y(C);return N!==void 0&&N(F,I)?F:(Y=C,q=I)}var A=!1,Y,q,ne=w===void 0?null:w;return[function(){return O(m())},ne===null?void 0:function(){return O(ne())}]},[m,w,y,N]);var _=d(g,j[0],j[1]);return v(function(){T.hasValue=!0,T.value=_},[_]),h(_),_},ai}var kc;function rp(){return kc||(kc=1,ii.exports=np()),ii.exports}var sp=rp();const lp=Oc(sp),Rc={},{useDebugValue:op}=He,{useSyncExternalStoreWithSelector:ip}=lp;let jc=!1;const ap=s=>s;function up(s,a=ap,i){(Rc?"production":void 0)!=="production"&&i&&!jc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),jc=!0);const c=ip(s.subscribe,s.getState,s.getServerState||s.getInitialState,a,i);return op(c),c}const cp=s=>{(Rc?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const a=typeof s=="function"?Zf(s):s,i=(c,d)=>up(a,c,d);return Object.assign(i,a),i},dp=s=>cp,fp={};function pp(s,a){let i;try{i=s()}catch{return}return{getItem:d=>{var p;const v=h=>h===null?null:JSON.parse(h,void 0),S=(p=i.getItem(d))!=null?p:null;return S instanceof Promise?S.then(v):v(S)},setItem:(d,p)=>i.setItem(d,JSON.stringify(p,void 0)),removeItem:d=>i.removeItem(d)}}const Yr=s=>a=>{try{const i=s(a);return i instanceof Promise?i:{then(c){return Yr(c)(i)},catch(c){return this}}}catch(i){return{then(c){return this},catch(c){return Yr(c)(i)}}}},hp=(s,a)=>(i,c,d)=>{let p={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,O)=>({...O,..._}),...a},v=!1;const S=new Set,h=new Set;let g;try{g=p.getStorage()}catch{}if(!g)return s((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),i(..._)},c,d);const m=Yr(p.serialize),w=()=>{const _=p.partialize({...c()});let O;const A=m({state:_,version:p.version}).then(Y=>g.setItem(p.name,Y)).catch(Y=>{O=Y});if(O)throw O;return A},y=d.setState;d.setState=(_,O)=>{y(_,O),w()};const N=s((..._)=>{i(..._),w()},c,d);let j;const T=()=>{var _;if(!g)return;v=!1,S.forEach(A=>A(c()));const O=((_=p.onRehydrateStorage)==null?void 0:_.call(p,c()))||void 0;return Yr(g.getItem.bind(g))(p.name).then(A=>{if(A)return p.deserialize(A)}).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==p.version){if(p.migrate)return p.migrate(A.state,A.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return A.state}).then(A=>{var Y;return j=p.merge(A,(Y=c())!=null?Y:N),i(j,!0),w()}).then(()=>{O?.(j,void 0),v=!0,h.forEach(A=>A(j))}).catch(A=>{O?.(void 0,A)})};return d.persist={setOptions:_=>{p={...p,..._},_.getStorage&&(g=_.getStorage())},clearStorage:()=>{g?.removeItem(p.name)},getOptions:()=>p,rehydrate:()=>T(),hasHydrated:()=>v,onHydrate:_=>(S.add(_),()=>{S.delete(_)}),onFinishHydration:_=>(h.add(_),()=>{h.delete(_)})},T(),j||N},mp=(s,a)=>(i,c,d)=>{let p={storage:pp(()=>localStorage),partialize:T=>T,version:0,merge:(T,_)=>({..._,...T}),...a},v=!1;const S=new Set,h=new Set;let g=p.storage;if(!g)return s((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),i(...T)},c,d);const m=()=>{const T=p.partialize({...c()});return g.setItem(p.name,{state:T,version:p.version})},w=d.setState;d.setState=(T,_)=>{w(T,_),m()};const y=s((...T)=>{i(...T),m()},c,d);d.getInitialState=()=>y;let N;const j=()=>{var T,_;if(!g)return;v=!1,S.forEach(A=>{var Y;return A((Y=c())!=null?Y:y)});const O=((_=p.onRehydrateStorage)==null?void 0:_.call(p,(T=c())!=null?T:y))||void 0;return Yr(g.getItem.bind(g))(p.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==p.version){if(p.migrate)return[!0,p.migrate(A.state,A.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var Y;const[q,ne]=A;if(N=p.merge(ne,(Y=c())!=null?Y:y),i(N,!0),q)return m()}).then(()=>{O?.(N,void 0),N=c(),v=!0,h.forEach(A=>A(N))}).catch(A=>{O?.(void 0,A)})};return d.persist={setOptions:T=>{p={...p,...T},T.storage&&(g=T.storage)},clearStorage:()=>{g?.removeItem(p.name)},getOptions:()=>p,rehydrate:()=>j(),hasHydrated:()=>v,onHydrate:T=>(S.add(T),()=>{S.delete(T)}),onFinishHydration:T=>(h.add(T),()=>{h.delete(T)})},p.skipHydration||j(),N||y},vp=(s,a)=>"getStorage"in a||"serialize"in a||"deserialize"in a?((fp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),hp(s,a)):mp(s,a),gp=vp,rn=s=>({...s,mode:s.mode??"analog",macro:{...Ot,...s.macro??{}},sampler:{...St,...s.sampler??{}}}),yp=(s,a)=>s==="sampler"||a==="sampler"?"sampler":s==="macro"||a==="macro"?"macro":"classic",xp=s=>s.osc1.mode==="macro"&&s.osc1.macro?s.osc1.macro:s.osc2.mode==="macro"&&s.osc2.macro?s.osc2.macro:s.macro??Ot,te=dp()(gp((s,a)=>({engine:null,patch:R,samplerLibrary:[],layoutOrder:[],oscilloscope:{fftSize:4096},tempo:110,transport:{tempo:110,playing:!1,tick:0},midi:{supported:null,status:"idle",enabled:!1,inputs:[],selectedInputId:null,lastError:null,activeNotes:[]},setEngine:i=>s({engine:i}),updatePatch:i=>{const c=a().patch,d={...c,...i,osc1:{...c.osc1,...i.osc1},osc2:{...c.osc2,...i.osc2},fm:{...c.fm,...i.fm},sub:{...c.sub,...i.sub},ring:{...c.ring,...i.ring},filter:{...c.filter,...i.filter},envelope:{...c.envelope,...i.envelope},master:{...c.master,...i.master},sampler:{...c.sampler,...i.sampler},macro:{...c.macro||R.macro,...i.macro},effects:{...c.effects||R.effects,...i.effects},lfo1:{...c.lfo1||R.lfo1,...i.lfo1},lfo2:{...c.lfo2||R.lfo2,...i.lfo2},arp:{...c.arp||R.arp,...i.arp},sequencer:{...c.sequencer||R.sequencer,...i.sequencer},mix:i.mix!=null?i.mix:c.mix,expression:{...c.expression||R.expression,...i.expression}};d.osc1=rn(d.osc1),d.osc2=rn(d.osc2);const p=i.engineMode,v=p??yp(d.osc1.mode??"analog",d.osc2.mode??"analog");d.engineMode=v;const S={...i};(p!==void 0||(c.engineMode??"classic")!==v)&&(S.engineMode=v);const h=xp(d),g={...Ot,...h??{}};d.macro=g,(v==="macro"||i.macro!==void 0||i.osc1?.macro!==void 0||i.osc2?.macro!==void 0)&&(S.macro=g),a().engine?.applyPatch(S),s({patch:d})},setLayoutOrder:i=>s({layoutOrder:i}),setTempo:i=>s(c=>({tempo:i,transport:{...c.transport,tempo:i}})),setTransportPlaying:i=>s(c=>({transport:{...c.transport,playing:i,tick:0}})),bumpTransportTick:()=>s(i=>({transport:{...i.transport,tick:i.transport.tick+1}})),importPatch:i=>{const c=JSON.parse(i),d={...a().patch,...c,osc1:{...a().patch.osc1,...c.osc1},osc2:{...a().patch.osc2,...c.osc2},fm:{...a().patch.fm,...c.fm},sub:{...a().patch.sub,...c.sub},ring:{...a().patch.ring,...c.ring},filter:{...a().patch.filter,...c.filter},envelope:{...a().patch.envelope,...c.envelope},master:{...a().patch.master,...c.master},sampler:{...a().patch.sampler,...c.sampler},macro:{...a().patch.macro||R.macro,...c.macro},effects:{...a().patch.effects||R.effects,...c.effects},lfo1:{...a().patch.lfo1||R.lfo1,...c.lfo1},lfo2:{...a().patch.lfo2||R.lfo2,...c.lfo2},arp:{...a().patch.arp||R.arp,...c.arp},sequencer:{...a().patch.sequencer||R.sequencer,...c.sequencer},mix:c.mix!=null?c.mix:a().patch.mix,expression:{...a().patch.expression||R.expression,...c.expression}};d.osc1=rn(d.osc1),d.osc2=rn(d.osc2),a().engine?.applyPatch(d),s({patch:d})},exportPatch:()=>JSON.stringify(a().patch,null,2),setMidiSupported:i=>s(c=>({midi:{...c.midi,supported:i}})),setMidiStatus:(i,c=null)=>s(d=>({midi:{...d.midi,status:i,lastError:c}})),setMidiEnabled:i=>s(c=>({midi:{...c.midi,enabled:i}})),setMidiInputs:i=>s(c=>({midi:{...c.midi,inputs:i}})),setMidiSelectedInput:i=>s(c=>({midi:{...c.midi,selectedInputId:i}})),setMidiActiveNotes:i=>s(c=>({midi:{...c.midi,activeNotes:i}})),setOscilloscopeFftSize:i=>s(c=>({oscilloscope:{fftSize:i}})),saveSamplerSample:(i,c)=>s(d=>{const p=c.id??`sample-${Date.now()}`,v={...St,...c,id:p},S=d.samplerLibrary.filter(m=>m.id!==p).concat(v),h={...d.patch,[i]:rn({...d.patch[i],mode:"sampler",sampler:v})},g={[i]:{mode:"sampler",sampler:v}};return h.sampler=v,g.sampler=v,d.engine?.applyPatch(g),{samplerLibrary:S,patch:h}}),deleteSamplerSample:i=>s(c=>{const d=c.samplerLibrary.filter(S=>S.id!==i),p={...c.patch},v={};if(["osc1","osc2"].forEach(S=>{if(p[S].sampler?.id===i){const h={...St};p[S]=rn({...p[S],sampler:h}),v[S]={sampler:h}}}),p.sampler?.id===i){const S={...St};p.sampler=S,v.sampler=S}return Object.keys(v).length>0&&c.engine?.applyPatch(v),{samplerLibrary:d,patch:p}}),setSamplerFromLibrary:(i,c)=>s(d=>{const p=d.samplerLibrary.find(g=>g.id===c);if(!p)return{};const v={...St,...p},S={...d.patch,[i]:rn({...d.patch[i],mode:"sampler",sampler:v})},h={[i]:{mode:"sampler",sampler:v}};return S.sampler=v,h.sampler=v,d.engine?.applyPatch(h),{patch:S}}),updateCurrentSampler:(i,c)=>s(d=>{const v={...{...St,...d.patch[i].sampler??{}},...c},S={...d.patch,[i]:rn({...d.patch[i],sampler:v})},h={[i]:{sampler:v}};S.sampler=v,h.sampler=v,d.engine?.applyPatch(h);const g=v.id?d.samplerLibrary.map(m=>m.id===v.id?{...m,...c}:m):d.samplerLibrary;return{patch:S,samplerLibrary:g}}),renameSamplerSample:(i,c)=>s(d=>{const p=c.trim();if(!p)return{};let v=!1;const S=d.samplerLibrary.map(m=>m.id!==i?m:(v=!0,{...m,name:p}));if(!v)return{};const h={...d.patch},g={};if(["osc1","osc2"].forEach(m=>{if(h[m].sampler?.id===i){const w={...h[m].sampler,name:p};h[m]=rn({...h[m],sampler:w}),g[m]={sampler:w}}}),h.sampler?.id===i){const m={...h.sampler,name:p};h.sampler=m,g.sampler=m}return Object.keys(g).length>0&&d.engine?.applyPatch(g),{samplerLibrary:S,patch:h}}),playSamplerPreview:i=>{const c=a().engine;c&&c.previewSampler(i)},resetPatch:()=>s(i=>(i.engine?.applyPatch(R),{patch:R,samplerLibrary:i.samplerLibrary}))}),{name:"websynth-patch",partialize:s=>({patch:{...s.patch,sequencer:s.patch.sequencer?{...s.patch.sequencer,playing:!1}:s.patch.sequencer,arp:s.patch.arp?{...s.patch.arp,bpmSync:s.patch.arp.bpmSync??!0}:s.patch.arp},samplerLibrary:s.samplerLibrary,layoutOrder:s.layoutOrder,tempo:s.tempo,transport:{tempo:s.transport.tempo,playing:!1,tick:0},midi:{enabled:s.midi.enabled,selectedInputId:s.midi.selectedInputId},oscilloscope:s.oscilloscope}),version:11,migrate:(s,a)=>{const i=s?.patch;if(!i)return s;const c=i.osc1||{},{finePct:d,...p}=c,v={...R,...i,osc1:{...R.osc1,...p},osc2:{...R.osc2,...i.osc2||{}},fm:{...R.fm,...i.fm||{}},sub:{...R.sub,...i.sub||{}},ring:{...R.ring,...i.ring||{}},filter:{...R.filter,...i.filter||{}},envelope:{...R.envelope,...i.envelope||{}},master:{...R.master,...i.master||{}},sampler:{...R.sampler,...i.sampler||{}},macro:{...R.macro,...i.macro||{}},effects:{...R.effects,...i.effects||{}},lfo1:{...R.lfo1,...i.lfo1||{}},lfo2:{...R.lfo2,...i.lfo2||{}},arp:{...R.arp,...i.arp||{}},sequencer:{...R.sequencer,...i.sequencer||{}},mix:typeof i.mix=="number"?i.mix:R.mix,expression:{...R.expression,...i.expression||{}}},S=Array.isArray(s?.layoutOrder)?s.layoutOrder.filter(O=>typeof O=="string"):[],h=typeof s?.tempo=="number"?s.tempo:110,g=s?.transport,m=g?{tempo:g.tempo??h,playing:!1,tick:0}:{tempo:h,playing:!1,tick:0},w=s?.midi,y={supported:null,status:"idle",enabled:w?.enabled??!1,inputs:[],selectedInputId:w?.selectedInputId??null,lastError:null,activeNotes:[]},N=Array.isArray(s?.samplerLibrary)?s.samplerLibrary.map((O,A)=>({...R.sampler,...O??{},id:typeof O?.id=="string"?O.id:`legacy-${Date.now()}-${A}`})):[],j=[1024,2048,4096,8192],T=s?.oscilloscope?.fftSize,_=j.includes(T)?T:4096;return{...s,patch:v,samplerLibrary:N,layoutOrder:S,tempo:h,transport:m,midi:y,oscilloscope:{fftSize:_}}},onRehydrateStorage:()=>s=>{s&&(s.engine=null,(!s.oscilloscope||![1024,2048,4096,8192].includes(s.oscilloscope.fftSize))&&(s.oscilloscope={fftSize:4096}),Array.isArray(s.layoutOrder)||(s.layoutOrder=[]),typeof s.tempo!="number"&&(s.tempo=110),s.transport||(s.transport={tempo:s.tempo,playing:!1,tick:0}),s.midi?s.midi={supported:null,status:"idle",enabled:!!s.midi.enabled,inputs:[],selectedInputId:s.midi.selectedInputId??null,lastError:null,activeNotes:[]}:s.midi={supported:null,status:"idle",enabled:!1,inputs:[],selectedInputId:null,lastError:null,activeNotes:[]})}}));function Te({value:s,min:a,max:i,step:c=.01,size:d=56,label:p,formatValue:v,onChange:S,disabled:h=!1,showValue:g=!0}){const[m,w]=$.useState(!1),y=$.useRef(null),N=$.useCallback(ee=>Math.min(i,Math.max(a,ee)),[a,i]),j=i-a,T=j===0?0:(s-a)/j,_=$.useMemo(()=>-135+T*270,[T]),O=v?v(s):wp(s),A=ee=>{h||(ee.currentTarget.setPointerCapture(ee.pointerId),y.current={y:ee.clientY,v:s},w(!0))},Y=ee=>{if(!y.current||h)return;if(ee.buttons===0){y.current=null,w(!1);try{ee.currentTarget.releasePointerCapture(ee.pointerId)}catch{}return}const fe=(y.current.y-ee.clientY)/150*j,xe=N(y.current.v+fe);S(di(xe,c))},q=ee=>{if(!h){try{ee.currentTarget.releasePointerCapture(ee.pointerId)}catch{}y.current=null,w(!1)}},ne=ee=>{if(h)return;const J=c;(ee.key==="ArrowUp"||ee.key==="ArrowRight")&&S(N(di(s+J,J))),(ee.key==="ArrowDown"||ee.key==="ArrowLeft")&&S(N(di(s-J,J)))},C=d/2-6,F=d/2,I=d/2,X=-135,ye=F+Math.cos(X*Math.PI/180)*(C+6),Ee=I+Math.sin(X*Math.PI/180)*(C+6),H=F+Math.cos(_*Math.PI/180)*(C-6),z=I+Math.sin(_*Math.PI/180)*(C-6);return o.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:6,opacity:h?.4:1,pointerEvents:h?"none":"auto",width:d},children:[o.jsxs("svg",{width:d,height:d,onPointerDown:A,onPointerMove:Y,onPointerUp:q,onKeyDown:ne,role:"slider","aria-label":p,"aria-valuemin":a,"aria-valuemax":i,"aria-valuenow":s,"aria-valuetext":O,tabIndex:h?-1:0,style:{cursor:h?"default":"ns-resize",outline:m?"1px solid var(--accent)":"none",borderRadius:8},children:[o.jsx("circle",{cx:F,cy:I,r:C,fill:"#0f1217",stroke:"#2a3040"}),o.jsx("circle",{cx:F,cy:I,r:C-8,fill:"#161a22",stroke:"#202635"}),o.jsx("circle",{cx:ye,cy:Ee,r:2.4,fill:"#3dd973",stroke:"#12161f",strokeWidth:.8}),o.jsx("line",{x1:F,y1:I,x2:H,y2:z,stroke:"var(--accent)",strokeWidth:3,strokeLinecap:"round"})]}),(p||g)&&o.jsxs("div",{className:"knob-legend",children:[p?o.jsx("span",{className:"label",children:p}):null,g?o.jsx("span",{className:"value",children:O}):null]})]})}function di(s,a){const i=1/a;return Math.round(s*i)/i}function wp(s){return Math.abs(s)>=100?s.toFixed(0):Math.abs(s)>=10?s.toFixed(1):s.toFixed(2)}const Sp=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],ar=10,kp=Array.from({length:61},(s,a)=>{const i=36+a,c=Sp[i%12],d=Math.floor(i/12)-1;return{midi:i,label:`${c}${d}`}}),jp=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`sample-${Date.now()}-${Math.random().toString(16).slice(2)}`,Mc=(s,a)=>{const i=(s??"").trim();return i?i.slice(0,ar):a},Mp=()=>`REC-${Math.floor(Date.now()%1e6).toString(36).toUpperCase().padStart(4,"0")}`.slice(0,ar),Ep=s=>{const i=s.replace(/\.[^/.]+$/,"").replace(/[^A-Za-z0-9_-]/g,"").toUpperCase();return i?i.slice(0,ar):"SAMPLE"},Cp=s=>{const a={...St,...s??{}},i=typeof a.durationSec=="number"&&a.durationSec>0?a.durationSec:0;if(i===0)return{...a,durationSec:0,trimStartSec:0,trimEndSec:0};const c=.005,d=Math.max(0,i-c),p=Number(a.trimStartSec),v=Math.min(Math.max(Number.isFinite(p)?p:0,0),d),S=Number(a.trimEndSec);let h=Number.isFinite(S)?S:i;return h-v<c&&(h=i),h=Math.min(Math.max(h,v+c),i),{...a,durationSec:i,trimStartSec:v,trimEndSec:h}},cl=s=>{const a=Math.max(0,s),i=Math.floor(a/60),c=Math.floor(a%60);return`${String(i).padStart(2,"0")}:${String(c).padStart(2,"0")}`};function Np({oscillator:s="osc1"}){const a=te(W=>W.patch[s].sampler),i=te(W=>W.samplerLibrary),c=te(W=>W.saveSamplerSample),d=te(W=>W.deleteSamplerSample),p=te(W=>W.setSamplerFromLibrary),v=te(W=>W.updateCurrentSampler),S=te(W=>W.renameSamplerSample),h=te(W=>W.playSamplerPreview),[g,m]=$.useState(null),[w,y]=$.useState(!1),[N,j]=$.useState(!1),[T,_]=$.useState(0),[O,A]=$.useState(!1),Y=$.useRef(null),q=$.useRef(null),ne=$.useRef(null),C=$.useRef([]),F=$.useRef(null),I=$.useRef(null),X=$.useRef(null),[ye,Ee]=$.useState(null),[H,z]=$.useState(""),J=$.useMemo(()=>typeof window<"u"?typeof window.MediaRecorder<"u":!1,[])&&typeof navigator<"u"&&!!navigator.mediaDevices?.getUserMedia,fe=$.useCallback(()=>{ne.current&&(ne.current.getTracks().forEach(W=>{try{W.stop()}catch{}}),ne.current=null),q.current=null},[]),xe=$.useCallback(async()=>{if(typeof window>"u")return null;if(!X.current)try{X.current=new AudioContext}catch(pe){return m(pe instanceof Error?pe.message:"Unable to create AudioContext"),null}const W=X.current;if(W&&W.state==="suspended")try{await W.resume()}catch{}return W},[]),G=$.useCallback(async W=>{const pe=await xe();if(!pe)return null;try{const ve=await(await fetch(W)).arrayBuffer();return(await pe.decodeAudioData(ve.slice(0))).duration}catch(ke){return m(ke instanceof Error?ke.message:"Unable to decode audio"),null}},[xe]),Z=Cp(a),Q=$.useCallback(async(W,pe)=>{y(!0),m(null);try{const ke=await G(W);if(ke==null)return;const ve=ke>0?ke:0,be={id:jp(),name:Mc(pe,"SAMPLE"),dataUrl:W,recordedAt:Date.now(),durationSec:ve,trimStartSec:0,trimEndSec:ve,loop:Z.loop,rootMidi:Z.rootMidi};c(s,be)}finally{y(!1)}},[s,Z.loop,Z.rootMidi,G,c]),E=$.useCallback((W,pe)=>{const ke=new FileReader;ke.onloadend=()=>{const ve=ke.result;typeof ve=="string"?Q(ve,pe):m("Unable to read recording data")},ke.onerror=()=>{m("Failed to read recorded audio")},ke.readAsDataURL(W)},[Q]),D=$.useCallback(()=>{const W=q.current;if(W&&W.state!=="inactive"){try{W.stop()}catch{}j(!1),F.current=null}},[]),ge=async()=>{if(!(!J||N||w)){m(null);try{const W=await navigator.mediaDevices.getUserMedia({audio:!0}),pe=window.MediaRecorder,ke=new pe(W);C.current=[],ke.ondataavailable=ve=>{ve.data&&ve.data.size>0&&C.current.push(ve.data)},ke.onerror=ve=>{const be=ve?.error?.message??"Recording error";m(be),D()},ke.onstop=()=>{j(!1);const ve=new Blob(C.current,{type:C.current[0]?.type||"audio/webm"});C.current=[],fe(),ve.size>0&&E(ve,Mp())},ke.start(),q.current=ke,ne.current=W,j(!0),F.current=performance.now(),_(0),A(!0)}catch(W){fe(),j(!1),F.current=null,m(W instanceof Error?W.message:"Microphone access denied")}}},me=$.useCallback(W=>{const pe=new FileReader;pe.onloadend=()=>{const ke=pe.result;typeof ke=="string"?Q(ke,Ep(W.name)):m("Unable to read file")},pe.onerror=()=>m("Unable to load file"),pe.readAsDataURL(W)},[Q]),Se=W=>{const pe=W.target.files?.[0];pe&&me(pe),W.target&&(W.target.value="")};$.useEffect(()=>()=>{D(),fe()},[fe,D]),$.useEffect(()=>(N?(I.current!=null&&window.clearInterval(I.current),I.current=window.setInterval(()=>{if(F.current!=null){const W=(performance.now()-F.current)/1e3;_(W),A(pe=>!pe)}},500)):(I.current!=null&&(window.clearInterval(I.current),I.current=null),_(0),A(!1)),()=>{I.current!=null&&(window.clearInterval(I.current),I.current=null)}),[N]);const ue=Z.durationSec??0,we=!!Z.dataUrl&&ue>0,je=Z.trimStartSec??0,Pe=Z.trimEndSec??ue,ae=W=>{if(!we)return;const pe=Math.max(0,Math.min(W,ue)),ve=Math.max(pe+.005,Pe);v(s,{trimStartSec:pe,trimEndSec:Math.min(ve,ue)})},qe=W=>{if(!we)return;const pe=Math.max(0,Math.min(W,ue)),ke=.005,ve=Math.min(je,pe-ke),be=Math.max(0,Math.min(ve,ue)),_e=Math.min(ue,Math.max(pe,ke));v(s,{trimStartSec:Math.max(be,0),trimEndSec:_e})},Ve=$.useCallback(W=>{if(typeof window>"u"||!W.dataUrl)return;const pe=document.createElement("a");pe.href=W.dataUrl;const ke=W.dataUrl.split(";")[0]?.split(":")[1]??"audio/webm",ve=ke.includes("/")?ke.split("/")[1]:"webm",be=(W.name||"sample").replace(/[^a-z0-9_\-]+/gi,"_");pe.download=`${be}.${ve}`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe)},[]),Ke=$.useCallback(()=>{if(typeof window>"u"||i.length===0)return;const W=JSON.stringify(i.map(be=>({...be,recordedAt:be.recordedAt??null})),null,2),pe=new Blob([W],{type:"application/json"}),ke=URL.createObjectURL(pe),ve=document.createElement("a");ve.href=ke,ve.download=`sampler-library-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(ke)},[i]),dt=$.useCallback(()=>{Ee(null),z("")},[]),Rt=$.useCallback(()=>{if(!ye)return;const W=H.trim();W&&(S(ye,Mc(W,"SAMPLE")),Ee(null),z(""))},[ye,H,S]);return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,padding:"0 0 8px"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.jsx("div",{className:"label",children:"Sampler"}),o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[o.jsx("button",{type:"button",onClick:()=>Y.current?.click(),disabled:w,children:w?"Loading...":"Load Sample"}),o.jsx("button",{type:"button",onClick:()=>h(s),disabled:!Z.dataUrl||w,children:"Play"}),o.jsx("button",{type:"button",onClick:N?D:ge,disabled:!J||w,children:N?"Stop Recording":"Record"}),o.jsx("button",{type:"button",onClick:()=>{v(s,{id:null,name:St.name,dataUrl:null,recordedAt:void 0,durationSec:0,trimStartSec:0,trimEndSec:0,loop:St.loop,rootMidi:St.rootMidi}),m(null)},disabled:!Z.dataUrl,children:"Clear"})]}),o.jsx("input",{ref:Y,type:"file",accept:"audio/*",style:{display:"none"},onChange:Se,disabled:w})]}),N&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("span",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:O?"#ff4d4f":"#ffb3b8",boxShadow:O?"0 0 8px rgba(255,77,79,0.8)":"none",transition:"background-color 0.2s linear, box-shadow 0.2s linear"}}),o.jsxs("span",{style:{fontFamily:"monospace",fontSize:12},children:["Recording ",cl(T)]})]}),o.jsxs("div",{style:{fontSize:12,color:"var(--muted)",display:"flex",flexWrap:"wrap",gap:8},children:[o.jsxs("span",{children:[o.jsx("span",{className:"label",style:{marginRight:4},children:"Current"}),o.jsx("span",{style:{maxWidth:`${ar}ch`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"bottom"},title:Z.dataUrl?Z.name:void 0,children:Z.dataUrl?Z.name:"No sample loaded"})]}),we&&o.jsxs("span",{children:["Length ",cl(ue)," · Window ",cl(Pe-je)]}),!J&&o.jsx("span",{children:"(Recording unsupported in this browser)"})]}),g&&o.jsx("div",{style:{color:"var(--danger, #d14343)",fontSize:12},children:g}),o.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",alignItems:"center"},children:[o.jsxs("label",{children:[o.jsx("span",{className:"label",children:"Root Note"}),o.jsx("select",{value:Z.rootMidi,onChange:W=>v(s,{rootMidi:Number(W.target.value)}),children:kp.map(W=>o.jsx("option",{value:W.midi,children:W.label},W.midi))})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:!!Z.loop,onChange:W=>v(s,{loop:W.target.checked})}),"Loop playback"]})]}),we&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[o.jsx("div",{className:"label",children:"Trim"}),o.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:[o.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:4},children:[o.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:["Start ",Math.round(je*1e3)," ms"]}),o.jsx("input",{type:"range",min:0,max:Math.max(ue*1e3,5),step:5,value:Math.round(je*1e3),onChange:W=>ae(Number(W.target.value)/1e3)})]}),o.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:4},children:[o.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:["End ",Math.round(Pe*1e3)," ms"]}),o.jsx("input",{type:"range",min:5,max:Math.max(ue*1e3,5),step:5,value:Math.round(Pe*1e3),onChange:W=>qe(Number(W.target.value)/1e3)})]})]})]}),i.length>0&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[o.jsx("div",{className:"label",children:"Library"}),o.jsx("button",{type:"button",onClick:Ke,style:{fontSize:12},children:"Export Library"})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:i.map(W=>{if(!W.id)return null;const pe=W.id===Z.id,ke=ye===W.id;return o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 8px",borderRadius:6,background:pe?"rgba(255, 77, 79, 0.1)":"rgba(255,255,255,0.04)"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:160},children:[ke?o.jsx("input",{value:H,onChange:ve=>z(ve.target.value),onKeyDown:ve=>{ve.key==="Enter"&&(ve.preventDefault(),Rt()),ve.key==="Escape"&&(ve.preventDefault(),dt())},autoFocus:!0,maxLength:ar}):o.jsx("span",{style:{fontWeight:600,maxWidth:`${ar}ch`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:W.name||"Sample",children:W.name||"Sample"}),o.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:[cl(W.durationSec??0)," ",pe?"· Active":""]})]}),o.jsx("div",{style:{display:"flex",gap:8},children:ke?o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",onClick:Rt,disabled:!H.trim(),children:"Save"}),o.jsx("button",{type:"button",onClick:dt,children:"Cancel"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",onClick:()=>p(s,W.id),disabled:pe,children:pe?"In Use":"Use"}),o.jsx("button",{type:"button",onClick:()=>{Ee(W.id),z(W.name||"")},children:"Rename"}),o.jsx("button",{type:"button",onClick:()=>Ve(W),disabled:!W.dataUrl,children:"Export"}),o.jsx("button",{type:"button",onClick:()=>d(W.id),style:{color:"var(--danger, #d14343)"},children:"Delete"})]})})]},W.id)})})]})]})}const bp=[{value:"analog",label:"Analog"},{value:"macro",label:"Macro"},{value:"sampler",label:"Sampler"}],Pp=[{value:"sine",label:"Sine"},{value:"square",label:"Square"},{value:"sawtooth",label:"Saw"},{value:"triangle",label:"Triangle"},{value:"noise",label:"Noise"}],Tp={osc1:"ENG1",osc2:"ENG2"};function _p(){const s=te(m=>m.patch),a=te(m=>m.updatePatch),i=He.useCallback((m,w)=>{a({[m]:w})},[a]),c=He.useCallback((m,w)=>{i(m,{mode:w})},[i]),d=He.useCallback((m,w)=>{const y=s[m].macro??Ot;i(m,{macro:{...y,...w}})},[s,i]),p=m=>{const w=s[m],y=w.mode??"analog",N=w.macro??Ot;return o.jsxs("div",{className:"osc-section",style:{display:"grid",gap:12},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[o.jsx("h4",{className:"settings-heading",style:{margin:0},children:Tp[m]}),o.jsx("select",{value:y,onChange:j=>c(m,j.target.value),children:bp.map(j=>o.jsx("option",{value:j.value,children:j.label},j.value))})]}),y==="analog"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("div",{className:"label",children:"Wave"}),o.jsx("select",{value:w.wave??"sawtooth",onChange:j=>i(m,{wave:j.target.value}),children:Pp.map(j=>o.jsx("option",{value:j.value,children:j.label},j.value))})]}),o.jsxs("div",{className:"osc-knob-row",children:[o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Octave",min:-2,max:2,step:1,value:w.octave??0,onChange:j=>i(m,{octave:Math.round(j)}),formatValue:j=>`${Math.round(j)}`})}),o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Detune",min:-1200,max:1200,step:1,value:w.detune,onChange:j=>i(m,{detune:j}),formatValue:j=>`${Math.round(j)}¢`})}),o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Fine",min:-10,max:10,step:.1,value:w.detuneFine??0,onChange:j=>i(m,{detuneFine:Number(j.toFixed(1))}),formatValue:j=>`${j.toFixed(1)}¢`})})]})]}),y==="macro"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("div",{className:"label",children:"Model"}),o.jsx("select",{value:N.model??"va",onChange:j=>d(m,{model:j.target.value}),children:["va","fold","pluck","supersaw","pwm","fm2op","wavetable","harmonic","chord"].map(j=>o.jsx("option",{value:j,children:j.toUpperCase()},j))})]}),o.jsxs("div",{className:"osc-knob-row",children:[o.jsx(Te,{label:"Harmonics",min:0,max:1,step:.001,value:N.harmonics??.6,onChange:j=>d(m,{harmonics:j})}),o.jsx(Te,{label:"Timbre",min:0,max:1,step:.001,value:N.timbre??.5,onChange:j=>d(m,{timbre:j})}),o.jsx(Te,{label:"Morph",min:0,max:1,step:.001,value:N.morph??.5,onChange:j=>d(m,{morph:j})}),o.jsx(Te,{label:"Level",min:0,max:1,step:.001,value:N.level??1,onChange:j=>d(m,{level:j})})]})]}),y==="sampler"&&o.jsx(Np,{oscillator:m})]},m)},v=s.osc1.mode??"analog",S=s.osc2.mode??"analog",h=v==="analog"&&S==="analog",g=h;return o.jsxs("div",{style:{display:"grid",gap:16},children:[o.jsx("div",{className:"controls-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:16},children:["osc1","osc2"].map(p)}),o.jsxs("div",{className:"osc-knob-row",style:{justifyContent:"flex-start"},children:[o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Mix",min:0,max:1,step:.01,value:s.mix,onChange:m=>a({mix:m}),formatValue:m=>`${Math.round(m*100)}%`})}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,minWidth:120,opacity:h?1:.5},children:[o.jsx("input",{type:"checkbox",checked:s.fm.enabled&&h,disabled:!h,onChange:m=>a({fm:{...s.fm,enabled:m.target.checked}})}),o.jsx("span",{className:"label",children:"FM"})]}),o.jsx(Te,{label:"Ratio",min:.1,max:8,step:.1,value:s.fm.ratio,onChange:m=>a({fm:{...s.fm,ratio:m}}),disabled:!h||!s.fm.enabled}),o.jsx(Te,{label:"Amount (Hz)",min:0,max:1e3,step:1,value:s.fm.amount,onChange:m=>a({fm:{...s.fm,amount:m}}),disabled:!h||!s.fm.enabled}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,minWidth:120,opacity:g?1:.5},children:[o.jsx("input",{type:"checkbox",checked:s.ring.enabled&&g,disabled:!g,onChange:m=>a({ring:{...s.ring,enabled:m.target.checked}})}),o.jsx("span",{className:"label",children:"Ring"})]}),o.jsx(Te,{label:"Amount",min:0,max:1,step:.01,value:s.ring.amount,onChange:m=>a({ring:{...s.ring,amount:m}}),disabled:!g||!s.ring.enabled})]})]})}function Lp(){const s=te(d=>d.patch),a=te(d=>d.updatePatch),i=d=>{a({filter:{...s.filter,...d}})},c=s.master.gain;return o.jsxs("div",{className:"filter-panel",children:[o.jsxs("label",{className:"filter-type",children:[o.jsx("span",{className:"label",children:"Filter Type"}),o.jsxs("select",{value:s.filter.type,onChange:d=>i({type:d.target.value}),children:[o.jsx("option",{value:"lowpass",children:"Low-pass"}),o.jsx("option",{value:"highpass",children:"High-pass"}),o.jsx("option",{value:"bandpass",children:"Band-pass"}),o.jsx("option",{value:"notch",children:"Notch"})]})]}),o.jsxs("div",{className:"filter-knobs",children:[o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Cutoff",min:40,max:8e3,step:10,value:s.filter.cutoff,onChange:d=>i({cutoff:d}),formatValue:d=>`${Math.round(d)} Hz`})}),o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Resonance",min:0,max:10,step:.1,value:s.filter.q,onChange:d=>i({q:d}),formatValue:d=>d.toFixed(2)})}),o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Master",min:0,max:1,step:.01,value:c,onChange:d=>a({master:{...s.master,gain:d}}),formatValue:d=>d.toFixed(2)})})]})]})}function Op(){const s=te(c=>c.patch),a=te(c=>c.updatePatch),i=s.envelope;return o.jsx("div",{className:"envelope-panel",children:o.jsxs("div",{className:"envelope-knobs",children:[o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Attack",min:0,max:2,step:.01,value:i.attack,onChange:c=>a({envelope:{...i,attack:c}})})}),o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Decay",min:0,max:2,step:.01,value:i.decay,onChange:c=>a({envelope:{...i,decay:c}})})}),o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Sustain",min:0,max:1,step:.01,value:i.sustain,onChange:c=>a({envelope:{...i,sustain:c}})})}),o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Release",min:0,max:3,step:.01,value:i.release,onChange:c=>a({envelope:{...i,release:c}})})})]})})}const Rp=[0,2,4,5,7,9,11],Ip={0:1,1:3,2:null,3:6,4:8,5:10,6:null};function Fp(s,a=60){const i=Math.floor(s/7),c=Rp[s%7];return a+i*12+c}function zp(s,a=60){const i=Math.floor(s/7),c=Ip[s%7];return c==null?null:a+i*12+c}const vi={a:0,w:1,s:2,e:3,d:4,f:5,t:6,g:7,y:8,h:9,u:10,j:11,k:12,o:13,l:14,p:15,";":16,"'":17},Ec=Object.fromEntries(Object.entries(vi).map(([s,a])=>[a,s.length===1?s.toUpperCase():s]));function Dp(){const s=te(q=>q.engine),a=te(q=>q.midi.activeNotes),[i,c]=$.useState(()=>new Set),[d,p]=$.useState(60),v=$.useRef(new Map),S=$.useMemo(()=>{const q=new Set(i);for(const ne of a)q.add(ne);return q},[i,a]),h=q=>{s?.noteOn(q),c(ne=>new Set(ne).add(q))},g=q=>{s?.noteOff(q),c(ne=>{const C=new Set(ne);return C.delete(q),C})};$.useEffect(()=>{const q=new Set,ne=I=>I.length===1?I.toLowerCase():I,C=I=>{if(I.repeat)return;const X=ne(I.key);if(X==="z"){p(H=>Math.max(24,H-12));return}if(X==="x"){p(H=>Math.min(96,H+12));return}const ye=vi[X],Ee=ye!=null?d+ye:void 0;Ee!=null&&!q.has(X)&&(q.add(X),h(Ee))},F=I=>{const X=ne(I.key),ye=vi[X],Ee=ye!=null?d+ye:void 0;Ee!=null&&(q.delete(X),g(Ee))};return window.addEventListener("keydown",C),window.addEventListener("keyup",F),()=>{window.removeEventListener("keydown",C),window.removeEventListener("keyup",F)}},[s,d]);const m=14,w=$.useMemo(()=>Array.from({length:m},(q,ne)=>Fp(ne,d)),[m,d]),y=28,j=y+2,T=Math.floor(d/12)-1,_=T-4,O=(q,ne)=>{q.currentTarget.setPointerCapture(q.pointerId),q.preventDefault(),v.current.set(q.pointerId,ne),h(ne)},A=q=>{if(!v.current.has(q.pointerId))return;const ne=v.current.get(q.pointerId),F=document.elementFromPoint(q.clientX,q.clientY)?.dataset?.midi,I=F!=null?Number(F):void 0;if(I==null){ne!=null&&(g(ne),v.current.delete(q.pointerId));return}I!==ne&&(ne!=null&&g(ne),v.current.set(q.pointerId,I),h(I))},Y=q=>{const ne=v.current.get(q.pointerId);ne!=null&&(g(ne),v.current.delete(q.pointerId))};return o.jsxs("div",{className:"keyboard",children:[o.jsx("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between"},children:o.jsxs("div",{className:"octave-indicator",children:[o.jsx("span",{className:"badge",children:"Octave"}),o.jsxs("span",{className:"value",style:{color:_===0?"var(--text)":"var(--accent)"},children:[T," ",_!==0?`(${_>0?"+":""}${_})`:""]})]})}),o.jsxs("div",{className:"keys-and-help",children:[o.jsxs("div",{className:"keys-row",style:{touchAction:"none"},children:[w.map((q,ne)=>o.jsx("div",{className:"key",style:{background:S.has(q)?"#d1d5db":"#f8fafc"},"data-midi":q,onPointerDown:C=>O(C,q),onPointerMove:A,onPointerUp:Y,onPointerCancel:Y,children:o.jsx("span",{className:"key-label",children:Ec[q-d]??""})},ne)),Array.from({length:m}).map((q,ne)=>{const C=zp(ne,d);if(C==null)return null;const F=ne*j+Math.floor(y*.7);return o.jsx("div",{className:"key black",style:{left:F,background:S.has(C)?"#111827":"#0b0f16"},"data-midi":C,onPointerDown:I=>O(I,C),onPointerMove:A,onPointerUp:Y,onPointerCancel:Y,children:o.jsx("span",{className:"key-label",children:Ec[C-d]??""})},`b-${ne}`)})]}),o.jsxs("div",{className:"kbd-help",children:[o.jsx("div",{className:"badge",style:{alignSelf:"flex-start"},children:"Octave shift"}),o.jsxs("button",{className:"kbd-row keyboard-shift-button",onClick:()=>p(q=>Math.max(24,q-12)),type:"button",children:[o.jsx("span",{className:"kbd",children:"Z"}),o.jsx("span",{className:"hint-text",children:"Octave Down"})]}),o.jsxs("button",{className:"kbd-row keyboard-shift-button",onClick:()=>p(q=>Math.min(96,q+12)),type:"button",children:[o.jsx("span",{className:"kbd",children:"X"}),o.jsx("span",{className:"hint-text",children:"Octave Up"})]})]})]})]})}const Qr={highPct:2,lowPct:2,windowPct:25,holdOff:3,corrRefresh:.5};function Ap(){const s=te(m=>m.engine),a=$.useRef(null),i=$.useRef(),c=$.useRef(0),d=$.useRef(0),p=$.useRef(0),v=$.useRef(0),S=$.useRef(null),h=$.useRef(128),g=te(m=>m.oscilloscope.fftSize);return $.useEffect(()=>{const m=a.current;if(!m||!s||typeof s.getAnalyser!="function")return;const w=m.getContext("2d"),y=s.getAnalyser();y.fftSize=g,y.smoothingTimeConstant=0;const N=()=>{const j=s.getWaveform,T=typeof j=="function"?j.call(s):new Uint8Array(y.fftSize),_=window.devicePixelRatio||1,O=m.clientWidth||600,A=m.clientHeight||160,Y=Math.floor(O*_),q=Math.floor(A*_);(m.width!==Y||m.height!==q)&&(m.width=Y,m.height=q);const ne=m.width,C=m.height;w.clearRect(0,0,ne,C),w.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--viz-bg")||"#05070b",w.fillRect(0,0,ne,C),w.save(),w.strokeStyle="rgba(255,255,255,0.06)",w.lineWidth=1,w.beginPath(),w.moveTo(0,C/2),w.lineTo(ne,C/2),w.stroke();const F=6;for(let J=1;J<F;J++){const fe=J*ne/F;w.beginPath(),w.moveTo(fe,0),w.lineTo(fe,C),w.stroke()}w.restore();const I=T.length,X=new Float32Array(I);let ye=0;for(let J=0;J<I;J++)ye+=T[J];ye/=I;let Ee=0;for(let J=0;J<I;J++){const fe=(T[J]-ye)/128;X[J]=fe,Ee+=fe*fe}let H=c.current||0;if(Ee>.001){const J=Math.max(.001,Qr.highPct/100),fe=-Math.max(.001,Qr.lowPct/100);let xe=!1;const G=[];for(let ae=1;ae<I;ae++){const qe=X[ae-1],Ve=X[ae];!xe&&qe<fe&&(xe=!0),xe&&qe<J&&Ve>=J&&(G.push(ae),xe=!1)}if(G.length>=2){const ae=[];for(let _e=1;_e<G.length;_e++)ae.push(G[_e]-G[_e-1]);ae.sort((_e,ht)=>_e-ht);const qe=ae[Math.floor(ae.length/2)];let Ve=0,Ke=0;for(const _e of ae)Math.abs(_e-qe)<=.2*qe&&(Ve+=_e,Ke++);const dt=Ke>0?Ve/Ke:qe,Rt=p.current||dt,W=Math.max(6,Math.min(I,Rt*.6+dt*.4));p.current=W;const pe=((c.current||G[0])+W)%I,ke=Math.max(6,Math.floor(Qr.windowPct/100*W)),ve=[];for(const _e of G)Math.abs(_e-pe)<=ke&&ve.push(_e);ve.length===0&&ve.push(Math.round(pe));const be=Math.max(32,Math.min(256,Math.floor(W)));if(h.current=be,!S.current){const _e=new Float32Array(be);for(let Ce=0;Ce<be;Ce++)_e[Ce]=X[(ve[0]+Ce)%I];let ht=0;for(let Ce=0;Ce<be;Ce++)ht+=_e[Ce];ht/=be;let Qt=0;for(let Ce=0;Ce<be;Ce++)_e[Ce]=_e[Ce]-ht,Qt+=_e[Ce]*_e[Ce];Qt=Math.sqrt(Math.max(Qt,1e-12));for(let Ce=0;Ce<be;Ce++)_e[Ce]/=Qt;S.current=_e}{let _e=ve[0],ht=-1/0;const Qt=S.current;for(const Ce of ve){let It=0;for(let nt=0;nt<be;nt++)It+=X[(Ce+nt)%I];It/=be;let Ct=0,Ie=0;for(let nt=0;nt<be;nt++){const Mn=X[(Ce+nt)%I]-It;Ct+=Mn*Mn}Ct=Math.sqrt(Math.max(Ct,1e-12));for(let nt=0;nt<be;nt++){const Mn=(X[(Ce+nt)%I]-It)/Ct;Ie+=Mn*Qt[nt]}Ie>ht&&(ht=Ie,_e=Ce)}if(H=_e,ht<Qr.corrRefresh){const Ce=new Float32Array(be);for(let Ie=0;Ie<be;Ie++)Ce[Ie]=X[(H+Ie)%I];let It=0;for(let Ie=0;Ie<be;Ie++)It+=Ce[Ie];It/=be;let Ct=0;for(let Ie=0;Ie<be;Ie++)Ce[Ie]=Ce[Ie]-It,Ct+=Ce[Ie]*Ce[Ie];Ct=Math.sqrt(Math.max(Ct,1e-12));for(let Ie=0;Ie<be;Ie++)Ce[Ie]/=Ct;S.current=Ce}}}else if(G.length===1)H=G[0];else{let ae=0,qe=0;for(let Ve=1;Ve<I;Ve++){const Ke=X[Ve]-X[Ve-1];Ke>ae&&(ae=Ke,qe=Ve)}H=qe}const Z=c.current||0,Q=p.current||0,E=Q?(Z+Q)%I:Z,D=Math.abs(H-E);if(Q&&D>.6*Q||v.current>=Qr.holdOff){const ae=Math.round(Z*.4+H*.6);c.current=ae,v.current=0}else v.current+=1;let me=c.current;const Se=12;for(let ae=-Se;ae<=Se;ae++){const qe=(me+ae+I)%I,Ve=(qe+1)%I,Ke=X[qe],dt=X[Ve];if(Ke<J&&dt>=J){const Rt=(J-Ke)/Math.max(dt-Ke,1e-6);me=qe+Rt;break}}d.current=me;const ue=h.current,we=new Float32Array(ue);for(let ae=0;ae<ue;ae++){const qe=(me+ae)%I,Ve=Math.floor(qe),Ke=(Ve+1)%I,dt=qe-Ve,Rt=X[Ve]*(1-dt)+X[Ke]*dt;we[ae]=Rt}let je=0;for(let ae=0;ae<ue;ae++)je+=we[ae];je/=ue;let Pe=0;for(let ae=0;ae<ue;ae++)we[ae]=we[ae]-je,Pe+=we[ae]*we[ae];Pe=Math.sqrt(Math.max(Pe,1e-12));for(let ae=0;ae<ue;ae++)we[ae]/=Pe;S.current=we}const z=d.current||c.current||0,ee=ne/I;w.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--viz-stroke")||"#00ffd5",w.lineWidth=2,w.shadowColor=w.strokeStyle,w.shadowBlur=8,w.beginPath();for(let J=0;J<I;J++){const fe=(J+z)%I,xe=Math.floor(fe),G=(xe+1)%I,Z=fe-xe,E=((X[xe]*(1-Z)+X[G]*Z)*.5+.5)*C,D=J*ee;J===0?w.moveTo(D,E):w.lineTo(D,E)}w.stroke(),w.shadowBlur=0,i.current=requestAnimationFrame(N)};return i.current=requestAnimationFrame(N),()=>{i.current&&cancelAnimationFrame(i.current)}},[s,g]),o.jsx("div",{children:o.jsx("canvas",{ref:a,width:600,height:300,style:{width:"100%",height:300,borderRadius:8,border:"1px solid #222631"}})})}function qp(){const s=te(c=>c.patch),a=te(c=>c.updatePatch),i=s.effects??{delay:{enabled:!1,time:.25,feedback:.3,mix:.2},reverb:{enabled:!1,size:.5,decay:.5,mix:.25}};return o.jsxs("div",{className:"effects-panel",children:[o.jsxs("div",{className:"effects-row",children:[o.jsx("div",{className:"effects-heading",children:"Delay"}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:i.delay.enabled,onChange:c=>a({effects:{...i,delay:{...i.delay,enabled:c.target.checked}}})}),o.jsx("span",{className:"label",children:"Enabled"})]}),o.jsxs("div",{className:"effects-knobs",children:[o.jsx(Te,{label:"Time",min:0,max:1.5,step:.01,value:i.delay.time,onChange:c=>a({effects:{...i,delay:{...i.delay,time:c}}}),disabled:!i.delay.enabled}),o.jsx(Te,{label:"Feedback",min:0,max:.95,step:.01,value:i.delay.feedback,onChange:c=>a({effects:{...i,delay:{...i.delay,feedback:c}}}),disabled:!i.delay.enabled}),o.jsx(Te,{label:"Mix",min:0,max:1,step:.01,value:i.delay.mix,onChange:c=>a({effects:{...i,delay:{...i.delay,mix:c}}}),disabled:!i.delay.enabled})]})]}),o.jsxs("div",{className:"effects-row",style:{marginTop:12},children:[o.jsx("div",{className:"effects-heading",children:"Reverb"}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:i.reverb.enabled,onChange:c=>a({effects:{...i,reverb:{...i.reverb,enabled:c.target.checked}}})}),o.jsx("span",{className:"label",children:"Enabled"})]}),o.jsxs("div",{className:"effects-knobs",children:[o.jsx(Te,{label:"Size",min:0,max:1,step:.01,value:i.reverb.size,onChange:c=>a({effects:{...i,reverb:{...i.reverb,size:c}}}),disabled:!i.reverb.enabled}),o.jsx(Te,{label:"Decay",min:0,max:1,step:.01,value:i.reverb.decay,onChange:c=>a({effects:{...i,reverb:{...i.reverb,decay:c}}}),disabled:!i.reverb.enabled}),o.jsx(Te,{label:"Mix",min:0,max:1,step:.01,value:i.reverb.mix,onChange:c=>a({effects:{...i,reverb:{...i.reverb,mix:c}}}),disabled:!i.reverb.enabled})]})]})]})}function Cc({idx:s}){const a=te(p=>p.patch),i=te(p=>p.updatePatch),c=s===1?"lfo1":"lfo2",d=a[c]||{enabled:!1,wave:"sine",rateHz:5,amount:.2,dest:"pitch"};return o.jsxs("div",{className:"lfo-row",children:[o.jsxs("label",{className:"lfo-toggle",children:[o.jsx("input",{type:"checkbox",checked:d.enabled,onChange:p=>i({[c]:{...d,enabled:p.target.checked}})}),o.jsxs("span",{className:"label",children:["LFO ",s]})]}),o.jsxs("label",{className:"lfo-select",children:[o.jsx("span",{className:"label",children:"Wave"}),o.jsxs("select",{value:d.wave,onChange:p=>i({[c]:{...d,wave:p.target.value}}),children:[o.jsx("option",{value:"sine",children:"Sine"}),o.jsx("option",{value:"triangle",children:"Triangle"}),o.jsx("option",{value:"square",children:"Square"}),o.jsx("option",{value:"sawtooth",children:"Saw"}),o.jsx("option",{value:"noise",children:"Noise"})]})]}),o.jsxs("label",{className:"lfo-select",children:[o.jsx("span",{className:"label",children:"Dest"}),o.jsxs("select",{value:d.dest,onChange:p=>i({[c]:{...d,dest:p.target.value}}),children:[o.jsx("option",{value:"pitch",children:"Pitch"}),o.jsx("option",{value:"filter",children:"Filter"}),o.jsx("option",{value:"amp",children:"Amp"})]})]}),o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Rate",min:.01,max:20,step:.01,value:d.rateHz,onChange:p=>i({[c]:{...d,rateHz:p}}),disabled:!d.enabled,formatValue:p=>`${p.toFixed(2)} Hz`})}),o.jsx("div",{className:"knob-group",children:o.jsx(Te,{label:"Amount",min:0,max:1,step:.01,value:d.amount,onChange:p=>i({[c]:{...d,amount:p}}),disabled:!d.enabled,formatValue:p=>`${Math.round(p*100)}%`})})]})}function Bp(){return o.jsxs("div",{style:{display:"grid",gap:12},children:[o.jsx(Cc,{idx:1}),o.jsx(Cc,{idx:2})]})}function Up(){const s=te(y=>y.patch),a=te(y=>y.updatePatch),i=te(y=>y.engine),c=te(y=>y.transport.tempo),d=te(y=>y.setTempo),p=s.arp??R.arp,v=s.sequencer??R.sequencer,[S,h]=He.useState({enabled:!1,stepIndex:0,length:0}),g=y=>{a({arp:{...p,...y}})},m=p.chordSource??"preset",w=He.useMemo(()=>{const y=v.steps??[],N=Math.max(1,Math.min(y.length,v.length)),j=new Set;for(let T=0;T<N;T++){const _=y[T];_?.on&&j.add(Math.round(_.offset??0))}return j.size},[v]);return He.useEffect(()=>{if(!i)return;const y=setInterval(()=>{const N=i.getArpStatus?.();N&&h(N)},120);return()=>clearInterval(y)},[i]),o.jsxs("div",{className:"controls-grid",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:p.enabled,onChange:y=>a({arp:{...p,enabled:y.target.checked}})}),o.jsx("span",{className:"label",children:"Enabled"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:p.latch||!1,onChange:y=>a({arp:{...p,latch:y.target.checked}}),disabled:!p.enabled}),o.jsx("span",{className:"label",children:"Latch"})]}),o.jsx("button",{onClick:()=>i?.arpClear(),disabled:!p.enabled,style:{justifySelf:"start",alignSelf:"end",padding:"6px 10px",fontSize:12,borderRadius:6,background:"transparent",border:"1px solid var(--border, #2a3040)",color:"var(--text)"},children:"Clear"}),o.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:12,alignItems:"end"},children:[o.jsxs("label",{children:[o.jsx("div",{className:"label",children:"Mode"}),o.jsxs("select",{value:p.mode,onChange:y=>a({arp:{...p,mode:y.target.value}}),disabled:!p.enabled,children:[o.jsx("option",{value:"up",children:"Up"}),o.jsx("option",{value:"down",children:"Down"}),o.jsx("option",{value:"updown",children:"Up-Down"}),o.jsx("option",{value:"random",children:"Random"}),o.jsx("option",{value:"asplayed",children:"As Played"})]})]}),o.jsxs("label",{children:[o.jsx("div",{className:"label",children:"Octaves"}),o.jsxs("select",{value:p.octaves,onChange:y=>a({arp:{...p,octaves:Number(y.target.value)}}),disabled:!p.enabled,children:[o.jsx("option",{value:1,children:"1"}),o.jsx("option",{value:2,children:"2"}),o.jsx("option",{value:3,children:"3"}),o.jsx("option",{value:4,children:"4"})]})]}),o.jsxs("label",{children:[o.jsx("div",{className:"label",children:"Chord"}),o.jsxs("select",{value:m==="sequencer"?"sequencer":p.chord??"none",onChange:y=>{const N=y.target.value;g(N==="sequencer"?{chordSource:"sequencer"}:{chordSource:"preset",chord:N})},disabled:!p.enabled,children:[o.jsx("option",{value:"none",children:"Single"}),o.jsx("option",{value:"power",children:"Power (5th)"}),o.jsx("option",{value:"major",children:"Major Triad"}),o.jsx("option",{value:"minor",children:"Minor Triad"}),o.jsx("option",{value:"sus2",children:"Sus2"}),o.jsx("option",{value:"sus4",children:"Sus4"}),o.jsx("option",{value:"maj7",children:"Major 7th"}),o.jsx("option",{value:"min7",children:"Minor 7th"}),o.jsx("option",{value:"sequencer",children:"Sequencer Pattern"})]})]}),o.jsxs("label",{children:[o.jsx("div",{className:"label",children:"Division"}),o.jsxs("select",{value:p.division,onChange:y=>g({division:y.target.value}),disabled:!p.enabled,children:[o.jsx("option",{value:"1/4",children:"1/4"}),o.jsx("option",{value:"1/8",children:"1/8"}),o.jsx("option",{value:"1/8T",children:"1/8T"}),o.jsx("option",{value:"1/16",children:"1/16"}),o.jsx("option",{value:"1/16T",children:"1/16T"})]})]})]}),m==="sequencer"&&o.jsxs("div",{className:"hint-text",style:{gridColumn:"1 / -1",fontSize:12,opacity:.8,alignSelf:"start"},children:["Sequencer pattern",w>0?` • ${w} interval${w===1?"":"s"}`:" • no active steps yet"]}),o.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:20,alignItems:"center",justifyContent:"flex-start",padding:"6px 0"},children:[o.jsx(Te,{label:"Tempo",min:40,max:240,step:1,value:c,onChange:y=>{d(y),g({bpm:y,bpmSync:!0})},disabled:!p.enabled}),o.jsx(Te,{label:"Gate",min:.05,max:1,step:.01,value:p.gate,onChange:y=>a({arp:{...p,gate:y}}),disabled:!p.enabled}),o.jsx(Te,{label:"Swing",min:0,max:.75,step:.01,value:p.swingPct??0,onChange:y=>a({arp:{...p,swingPct:y}}),disabled:!p.enabled||!p.bpmSync})]}),o.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[o.jsxs("label",{children:[o.jsx("div",{className:"label",children:"Repeats"}),o.jsx("select",{value:p.repeats??1,onChange:y=>a({arp:{...p,repeats:Number(y.target.value)}}),disabled:!p.enabled,children:[1,2,3,4].map(y=>o.jsxs("option",{value:y,children:[y,"x"]},y))})]}),o.jsxs("label",{children:[o.jsx("div",{className:"label",children:"Length"}),o.jsxs("select",{value:p.patternLen??0,onChange:y=>a({arp:{...p,patternLen:Number(y.target.value)}}),disabled:!p.enabled,children:[o.jsx("option",{value:0,children:"Auto"}),Array.from({length:16},(y,N)=>N+1).map(y=>o.jsx("option",{value:y,children:y},y))]})]})]})]})}function Hp(){const s=te(C=>C.patch),a=te(C=>C.updatePatch),i=te(C=>C.engine),c=te(C=>C.transport.tempo),d=te(C=>C.transport.playing),p=te(C=>C.transport.tick),v=te(C=>C.setTempo),S=te(C=>C.setTransportPlaying),h=s.sequencer??R.sequencer,g=C=>{const F=s.sequencer??R.sequencer;a({sequencer:{...F,...C}})},m=h.steps||[],w=Math.max(1,Math.min(m.length,h.length)),[y,N]=He.useState({enabled:!1,stepIndex:0,length:0});He.useEffect(()=>{if(!i)return;const C=setInterval(()=>{const F=i.getSequencerStatus?.();F&&N(F)},100);return()=>clearInterval(C)},[i]);const j=(C,F)=>{const I=m.slice();I[C]={...I[C],...F},g({steps:I})},T={a:0,w:1,s:2,e:3,d:4,f:5,t:6,g:7,y:8,h:9,u:10,j:11,k:12,o:13,l:14,p:15,";":16,"'":17},_=He.useRef(null),[O,A]=He.useState(0),[Y,q]=He.useState(!1);He.useEffect(()=>{A(C=>Math.min(Math.max(0,C),w-1))},[w]),He.useEffect(()=>{Y&&_.current?.focus()},[Y]),He.useEffect(()=>{h.enabled&&h.bpm!==c&&g({bpm:c})},[c]),He.useEffect(()=>{h.enabled&&h.playing!==d&&g({playing:d})},[d,h.playing,h.enabled]);const ne=C=>{if(!Y||!h.enabled)return;const F=C.key,I=F.length===1?F.toLowerCase():F;if(I in T){C.preventDefault();const X=T[I];j(O,{on:!0,offset:X}),A(ye=>(ye+1)%w);return}F==="ArrowRight"?(C.preventDefault(),A(X=>(X+1)%w)):F==="ArrowLeft"?(C.preventDefault(),A(X=>(X-1+w)%w)):F==="ArrowUp"?(C.preventDefault(),j(O,{on:!0,offset:Math.min(24,(m[O]?.offset||0)+1)})):F==="ArrowDown"?(C.preventDefault(),j(O,{on:!0,offset:Math.max(-24,(m[O]?.offset||0)-1)})):F==="Enter"?(C.preventDefault(),j(O,{on:!m[O]?.on})):F==="Backspace"||F==="Delete"?(C.preventDefault(),j(O,{on:!1})):F==="+"||F==="="?(C.preventDefault(),j(O,{on:!0,offset:Math.min(24,(m[O]?.offset||0)+1)})):F==="-"||F==="_"?(C.preventDefault(),j(O,{on:!0,offset:Math.max(-24,(m[O]?.offset||0)-1)})):I==="z"?(C.preventDefault(),g({rootMidi:Math.max(24,h.rootMidi-12)})):I==="x"?(C.preventDefault(),g({rootMidi:Math.min(96,h.rootMidi+12)})):F===" "&&(C.preventDefault(),S(!d))};return o.jsxs("div",{className:"sequence-panel",children:[o.jsxs("div",{className:"sequence-controls",children:[o.jsx("button",{className:"play-button",onClick:()=>S(!d),disabled:!h.enabled,children:d?"Stop":"Play"}),o.jsxs("label",{className:"sequence-toggle",children:[o.jsx("input",{type:"checkbox",checked:h.enabled,onChange:C=>g({enabled:C.target.checked})}),o.jsx("span",{children:"Enabled"})]}),o.jsxs("label",{className:"sequence-toggle",children:[o.jsx("span",{children:"Division"}),o.jsxs("select",{value:h.division,onChange:C=>g({division:C.target.value}),disabled:!h.enabled,children:[o.jsx("option",{value:"1/4",children:"1/4"}),o.jsx("option",{value:"1/8",children:"1/8"}),o.jsx("option",{value:"1/8T",children:"1/8T"}),o.jsx("option",{value:"1/16",children:"1/16"}),o.jsx("option",{value:"1/16T",children:"1/16T"})]})]})]}),o.jsx("div",{className:"sequence-body",children:o.jsxs("div",{className:"controls-grid",style:{gridTemplateColumns:"repeat(5, 1fr)"},children:[o.jsxs("label",{children:[o.jsx("div",{className:"label",children:"Length"}),o.jsx("select",{value:h.length,onChange:C=>g({length:Number(C.target.value)}),disabled:!h.enabled,children:Array.from({length:m.length},(C,F)=>F+1).map(C=>o.jsx("option",{value:C,children:C},C))})]}),o.jsx(Te,{label:"Tempo",min:40,max:240,step:1,value:c,onChange:C=>{v(C),g({bpm:C})},disabled:!h.enabled}),o.jsx(Te,{label:"Gate",min:.05,max:1,step:.01,value:h.gate,onChange:C=>g({gate:C}),disabled:!h.enabled}),o.jsx(Te,{label:"Swing",min:0,max:.75,step:.01,value:h.swingPct??0,onChange:C=>g({swingPct:C}),disabled:!h.enabled||h.division.endsWith("T")||h.division==="1/4"}),o.jsx(Te,{label:"Root",min:36,max:84,step:1,value:h.rootMidi,onChange:C=>g({rootMidi:C}),disabled:!h.enabled}),o.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:12,alignItems:"center"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:Y,onChange:C=>q(C.target.checked)}),o.jsx("span",{className:"label",children:"Edit Notes (Keyboard)"})]}),o.jsx("div",{className:"hint-text",style:{opacity:.8},children:"Keys: A/W/S... set notes • Arrows move • Z/X root ±1 oct • Space play/pause • +/- semitone • Backspace clear"})]}),o.jsx("div",{ref:_,tabIndex:0,onKeyDown:ne,style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"repeat(16, 1fr)",gap:6,outline:Y?"1px dashed #2a3040":"none",borderRadius:6,padding:2},children:m.map((C,F)=>{const I=F<w,X=C.on&&I,ye=w>0?p%w:0,Ee=y.enabled&&d&&I&&ye===F;return o.jsx("div",{onClick:H=>{H.altKey?j(F,{offset:Math.max(-24,Math.min(24,(C.offset||0)+1))}):j(F,{on:!C.on}),A(F)},onContextMenu:H=>{H.preventDefault(),j(F,{offset:Math.max(-24,Math.min(24,(C.offset||0)-1))})},title:`Step ${F+1}${C.offset?`, ${C.offset>0?"+":""}${C.offset}`:""}`,style:{height:44,borderRadius:6,border:`1px solid ${Ee||F===O&&Y?"var(--accent)":"#2a3040"}`,background:X?Ee?"var(--accent)":"#1d2432":"#0f1217",color:X?Ee?"#0f1217":"var(--text)":"#556",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none"},children:o.jsx("span",{style:{fontSize:11,opacity:.9},children:C.offset===0?"0":C.offset>0?`+${C.offset}`:`${C.offset}`})},F)})})]})})]})}const gi=[{id:"filter.cutoff",label:"Filter Cutoff",category:"Filter",description:"Move the filter cutoff frequency"},{id:"filter.q",label:"Filter Resonance",category:"Filter",description:"Adjust filter Q / resonance"},{id:"master.gain",label:"Master Gain",category:"Master",description:"Scale the master volume"},{id:"mix",label:"Osc Mix",category:"Oscillators",description:"Crossfade between Osc 1 and Osc 2"},{id:"osc1.detune",label:"Osc 1 Detune",category:"Oscillators",description:"Offset oscillator 1 pitch in cents"},{id:"osc2.detune",label:"Osc 2 Detune",category:"Oscillators",description:"Offset oscillator 2 pitch in cents"},{id:"fm.amount",label:"FM Amount",category:"FM",description:"Modulation index for FM routing"},{id:"envelope.attack",label:"Env Attack",category:"Envelope",description:"Envelope attack time"},{id:"envelope.release",label:"Env Release",category:"Envelope",description:"Envelope release time"},{id:"macro.harmonics",label:"Macro Harmonics",category:"Macro",description:"Macro engine harmonics"},{id:"macro.timbre",label:"Macro Timbre",category:"Macro",description:"Macro engine timbre"},{id:"macro.morph",label:"Macro Morph",category:"Macro",description:"Macro engine morph"},{id:"macro.level",label:"Macro Level",category:"Macro",description:"Macro engine output level"},{id:"lfo1.rateHz",label:"LFO 1 Rate",category:"LFO",description:"LFO1 rate in Hz"},{id:"lfo1.amount",label:"LFO 1 Amount",category:"LFO",description:"LFO1 depth"},{id:"lfo2.rateHz",label:"LFO 2 Rate",category:"LFO",description:"LFO2 rate in Hz"},{id:"lfo2.amount",label:"LFO 2 Amount",category:"LFO",description:"LFO2 depth"}],Nc=Object.fromEntries(gi.map(s=>[s.id,s.label]));function Wp(){const s=te(j=>j.engine),i=te(j=>j.patch.expression)??R.expression,c=Nc[i.x]??"X Axis",d=Nc[i.y]??"Y Axis",p=$.useRef(s),[v,S]=$.useState(!1),[h,g]=$.useState(null),m=$.useRef(!1),w=$.useRef(null),y=$.useRef(null);$.useEffect(()=>{p.current=s},[s]);const N=$.useCallback(j=>{m.current=j,S(j),j||(y.current=null,w.current!=null&&(cancelAnimationFrame(w.current),w.current=null),p.current?.clearExpression2D(),g(null))},[]);return $.useEffect(()=>{const j=_=>{_.key==="CapsLock"?N(_.getModifierState("CapsLock")):!_.getModifierState("CapsLock")&&m.current&&N(!1)},T=()=>N(!1);return window.addEventListener("keydown",j),window.addEventListener("keyup",j),window.addEventListener("blur",T),()=>{window.removeEventListener("keydown",j),window.removeEventListener("keyup",j),window.removeEventListener("blur",T)}},[N]),$.useEffect(()=>{const j=()=>{if(w.current=null,!m.current)return;const A=y.current;A&&(y.current=null,p.current?.setExpression2D(A.x,A.y),g(A))},T=()=>{w.current==null&&(w.current=requestAnimationFrame(j))},_=A=>{if(!p.current)return;const Y=A.getModifierState?.("CapsLock")??m.current;if(Y!==m.current&&N(Y),!Y||!["mouse","touch","pen"].includes(A.pointerType))return;const q=Math.min(1,Math.max(0,A.clientX/window.innerWidth)),ne=Math.min(1,Math.max(0,1-A.clientY/window.innerHeight));y.current={x:q,y:ne},T()},O=()=>N(!1);return window.addEventListener("pointermove",_,{passive:!0}),window.addEventListener("pointerdown",_,{passive:!0}),window.addEventListener("pointerup",_,{passive:!0}),window.addEventListener("pointercancel",O),window.addEventListener("mouseleave",O),()=>{window.removeEventListener("pointermove",_),window.removeEventListener("pointerdown",_),window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",O),window.removeEventListener("mouseleave",O),w.current!=null&&(cancelAnimationFrame(w.current),w.current=null)}},[N]),s?o.jsxs("div",{className:`expression-overlay${v?" active":""}`,"aria-hidden":"true",children:[o.jsx("div",{className:"expression-label",children:"CapsLock XY Expression"}),v?o.jsxs("div",{className:"expression-status",children:["Active · ",c," ",((h?.x??.5)*100).toFixed(0),"% · ",d," ",((h?.y??.5)*100).toFixed(0),"%"]}):o.jsxs("div",{className:"expression-status",children:["Engage CapsLock and move on the trackpad to modulate ",c," / ",d]})]}):null}const bc="application/x-websynth-panel";function Pc(s,a,i){if(!s.includes(a))return s;const c=s.filter(p=>p!==a),d=Math.max(0,Math.min(i,c.length));return[...c.slice(0,d),a,...c.slice(d)]}function Vp({panels:s,order:a,onOrderChange:i,onRequestHelp:c}){const[d,p]=$.useState(null),[v,S]=$.useState(null),[h,g]=$.useState(!1),m=$.useMemo(()=>new Map(s.map(C=>[C.id,C])),[s]),w=$.useMemo(()=>s.map(C=>C.id),[s]),y=$.useMemo(()=>{const C=(a.length?a:w).filter(X=>m.has(X)),F=new Set(C),I=s.filter(X=>!F.has(X.id)).map(X=>X.id);return[...C,...I]},[a,w,m,s]),N=C=>F=>{F.dataTransfer.effectAllowed="move";try{F.dataTransfer.setData(bc,C)}catch{F.dataTransfer.setData("text/plain",C)}p(C),S(null),g(!1)},j=()=>{p(null),S(null),g(!1)},T=C=>{let F="";try{F=C.dataTransfer.getData(bc)}catch{F=C.dataTransfer.getData("text/plain")}return F||d},_=(C,F)=>I=>{if(I.preventDefault(),I.stopPropagation(),!d)return;const X=I.currentTarget.getBoundingClientRect(),ye=I.clientY<X.top+X.height/2;S({id:C,position:ye?"before":"after"}),g(!1)},O=(C,F)=>I=>{I.preventDefault(),I.stopPropagation();const X=T(I);if(!X)return;const ye=I.currentTarget.getBoundingClientRect(),H=I.clientY<ye.top+ye.height/2?F:F+1,z=Pc(y,X,H);i(z),S(null),g(!1)},A=C=>F=>{F.stopPropagation(),v?.id===C&&S(null)},Y=C=>{d&&(C.preventDefault(),S(null),g(!0))},q=C=>{C.preventDefault();const F=T(C);if(!F)return;const I=Pc(y,F,y.length);i(I),S(null),g(!1)},ne=C=>F=>{F.preventDefault(),F.stopPropagation(),c?.(C)};return o.jsx("div",{className:`dashboard-grid${h?" drop-end":""}`,onDragOver:Y,onDrop:q,children:y.map((C,F)=>{const I=m.get(C);if(!I)return null;const X=I.span??1,ye=d===C,Ee=v?.id===C&&v.position==="before",H=v?.id===C&&v.position==="after",z=["panel","dashboard-panel",ye?"dragging":"",Ee?"drop-before":"",H?"drop-after":""].filter(Boolean).join(" ");return o.jsx("section",{className:z,style:{gridColumn:X>1?`span ${X}`:void 0},onDragOver:_(I.id),onDrop:O(I.id,F),onDragLeave:A(I.id),children:o.jsxs("div",{className:"panel-body",children:[o.jsxs("div",{className:"panel-header",children:[o.jsx("h3",{className:"panel-title",children:I.title}),o.jsxs("div",{className:"panel-actions",children:[c?o.jsx("button",{type:"button",className:"panel-help-button",onClick:ne(I.id),"aria-label":`Show help for ${I.title}`,children:"?"}):null,o.jsx("span",{className:"panel-drag-hint","aria-hidden":"true",draggable:!0,onDragStart:N(I.id),onDragEnd:j,children:"⋮⋮"})]})]}),I.render()]})},I.id)})})}const $p=()=>JSON.parse(JSON.stringify(R)),ot=s=>(s.effects||(s.effects=JSON.parse(JSON.stringify(R.effects))),s.effects),Gp=s=>s.endsWith("/")?s:`${s}/`,Qp=Gp("./"),tt=(s,a,i,c,d={})=>{const p=$p();c(p);const v=d.tags??[],S=d.image??`${Qp}presets/${s}.png`;return{id:s,name:a,description:i,tags:v,image:S,patch:p}},Kp={id:"essentials",name:"Essentials",description:"Foundation tones that show the core oscillators, filter, and envelopes.",presets:[tt("init","Init Saw","Clean slate patch: saw + square with neutral envelope.",()=>{},{tags:["init"]}),tt("warm-pad","Warm Pad","Gently detuned analog pad with slow attack and soft filter motion.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="triangle",s.osc1.detune=-4,s.osc1.detuneFine=-2,s.osc1.octave=0,s.osc2.mode="analog",s.osc2.wave="sawtooth",s.osc2.detune=5,s.osc2.detuneFine=1,s.osc2.octave=0,s.mix=.42,s.sub.enabled=!0,s.sub.wave="sine",s.sub.octave=1,s.sub.level=.35,s.fm.enabled=!1,s.ring.enabled=!1,s.filter.type="lowpass",s.filter.cutoff=880,s.filter.q=.85,s.envelope.attack=.6,s.envelope.decay=.85,s.envelope.sustain=.78,s.envelope.release=1.9,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.18,amount:.38},s.lfo2={...s.lfo2??R.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:.4,amount:.1};const a=ot(s);a.delay={enabled:!1,time:.32,feedback:.28,mix:.18},a.reverb={enabled:!0,size:.72,decay:.85,mix:.33},s.master.gain=.22},{tags:["pad","analog"]}),tt("bright-pluck","Bright Pluck","Snappy analog pluck with a touch of FM and tempo-friendly delay.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="square",s.osc1.detune=2,s.osc1.detuneFine=0,s.osc1.octave=0,s.osc2.mode="analog",s.osc2.wave="sawtooth",s.osc2.detune=-6,s.osc2.detuneFine=0,s.osc2.octave=0,s.mix=.5,s.fm.enabled=!0,s.fm.ratio=1.25,s.fm.amount=90,s.sub.enabled=!1,s.ring.enabled=!1,s.filter.type="lowpass",s.filter.cutoff=1500,s.filter.q=.95,s.envelope.attack=.008,s.envelope.decay=.18,s.envelope.sustain=.12,s.envelope.release=.22,s.lfo1={...s.lfo1??R.lfo1,enabled:!1,wave:"triangle",dest:"pitch",rateHz:5.5,amount:.06},s.lfo2={...s.lfo2??R.lfo2,enabled:!1,wave:"sine",dest:"amp",rateHz:.6,amount:0};const a=ot(s);a.delay={enabled:!0,time:.26,feedback:.32,mix:.24},a.reverb={enabled:!1,size:.4,decay:.4,mix:.18},s.master.gain=.23},{tags:["lead","pluck"]})]},Xp={id:"basslines",name:"Basslines",description:"Low-end starters that demonstrate sub layering, resonance, and FM growl.",presets:[tt("sub-driver","Sub Driver","Focused sub bass with a sine layer and tight envelope.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="sawtooth",s.osc1.octave=-1,s.osc1.detune=-2,s.osc1.detuneFine=0,s.osc2.mode="analog",s.osc2.wave="square",s.osc2.octave=-1,s.osc2.detune=3,s.osc2.detuneFine=0,s.mix=.25,s.sub.enabled=!0,s.sub.wave="sine",s.sub.octave=1,s.sub.level=.7,s.fm.enabled=!1,s.ring.enabled=!1,s.filter.type="lowpass",s.filter.cutoff=220,s.filter.q=1.2,s.envelope.attack=.01,s.envelope.decay=.2,s.envelope.sustain=.75,s.envelope.release=.32,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:.28,amount:.05},s.lfo2={...s.lfo2??R.lfo2,enabled:!1,wave:"sine",dest:"filter",rateHz:.6,amount:0};const a=ot(s);a.delay={enabled:!1,time:.2,feedback:.2,mix:.1},a.reverb={enabled:!1,size:.3,decay:.2,mix:.1},s.master.gain=.28},{tags:["bass"]}),tt("acid-line","Acid Line","Classic resonant saw bass ready for sequences and filter tweaks.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="sawtooth",s.osc1.octave=-1,s.osc1.detune=0,s.osc1.detuneFine=0,s.osc2.mode="analog",s.osc2.wave="sawtooth",s.osc2.octave=0,s.osc2.detune=7,s.osc2.detuneFine=0,s.mix=.55,s.sub.enabled=!1,s.fm.enabled=!1,s.ring.enabled=!1,s.filter.type="lowpass",s.filter.cutoff=520,s.filter.q=8.5,s.envelope.attack=.01,s.envelope.decay=.25,s.envelope.sustain=.3,s.envelope.release=.18,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"triangle",dest:"filter",rateHz:6,amount:.14},s.lfo2={...s.lfo2??R.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:3.5,amount:.04};const a=ot(s);a.delay={enabled:!0,time:.18,feedback:.22,mix:.18},a.reverb={enabled:!1,size:.35,decay:.25,mix:.12},s.master.gain=.25},{tags:["bass","resonant"]}),tt("fm-growl","FM Growl","Two-operator FM for gritty bass leads with animated mids.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="sawtooth",s.osc1.octave=0,s.osc1.detune=0,s.osc1.detuneFine=0,s.osc2.mode="analog",s.osc2.wave="square",s.osc2.octave=0,s.osc2.detune=0,s.osc2.detuneFine=0,s.mix=.4,s.fm.enabled=!0,s.fm.ratio=2,s.fm.amount=180,s.sub.enabled=!1,s.ring.enabled=!1,s.filter.type="bandpass",s.filter.cutoff=540,s.filter.q=2.8,s.envelope.attack=.012,s.envelope.decay=.22,s.envelope.sustain=.4,s.envelope.release=.3,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"triangle",dest:"filter",rateHz:1.2,amount:.25},s.lfo2={...s.lfo2??R.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:3,amount:.05};const a=ot(s);a.delay={enabled:!1,time:.2,feedback:.2,mix:.1},a.reverb={enabled:!1,size:.4,decay:.25,mix:.12},s.master.gain=.24},{tags:["bass","fm"]})]},Yp={id:"macro",name:"Macro Voices",description:"Presets that lean on the macro engine for hybrid keys, pads, and textures.",presets:[tt("glass-keys","Glass Keys","Macro pluck blended with a triangle support for bell-like keys.",s=>{s.engineMode="macro",s.osc1.mode="macro",s.osc1.macro={...s.osc1.macro??R.osc1.macro,model:"pluck",harmonics:.45,timbre:.6,morph:.35,level:.9},s.osc2.mode="analog",s.osc2.wave="triangle",s.osc2.detune=-2,s.osc2.detuneFine=0,s.osc2.octave=0,s.mix=.35,s.filter.type="lowpass",s.filter.cutoff=1800,s.filter.q=.7,s.envelope.attack=.02,s.envelope.decay=.25,s.envelope.sustain=.6,s.envelope.release=.55,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:5,amount:.04},s.lfo2={...s.lfo2??R.lfo2,enabled:!1,wave:"sine",dest:"amp",rateHz:.4,amount:0};const a=ot(s);a.delay={enabled:!0,time:.3,feedback:.25,mix:.22},a.reverb={enabled:!0,size:.55,decay:.6,mix:.28},s.master.gain=.21},{tags:["macro","keys"]}),tt("supersaw-pad","Supersaw Pad","Wide, macro-driven supersaw with evolving filter movement.",s=>{s.engineMode="macro",s.osc1.mode="macro",s.osc1.macro={...s.osc1.macro??R.osc1.macro,model:"supersaw",harmonics:.68,timbre:.5,morph:.52,level:1},s.osc2.mode="macro",s.osc2.macro={...s.osc2.macro??R.osc2.macro,model:"va",harmonics:.4,timbre:.5,morph:.5,level:.5},s.mix=.5,s.filter.type="lowpass",s.filter.cutoff=720,s.filter.q=.8,s.envelope.attack=.5,s.envelope.decay=.9,s.envelope.sustain=.82,s.envelope.release=2.4,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.12,amount:.5},s.lfo2={...s.lfo2??R.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:.4,amount:0};const a=ot(s);a.delay={enabled:!0,time:.36,feedback:.32,mix:.22},a.reverb={enabled:!0,size:.82,decay:1.2,mix:.4},s.master.gain=.2},{tags:["macro","pad"]}),tt("harmonic-motion","Harmonic Motion","Evolving harmonic macro texture with slow motion and shimmer.",s=>{s.engineMode="macro",s.osc1.mode="macro",s.osc1.macro={...s.osc1.macro??R.osc1.macro,model:"harmonic",harmonics:.55,timbre:.68,morph:.45,level:1},s.osc2.mode="macro",s.osc2.macro={...s.osc2.macro??R.osc2.macro,model:"fm2op",harmonics:.4,timbre:.6,morph:.35,level:.6},s.mix=.6,s.filter.type="bandpass",s.filter.cutoff=680,s.filter.q=1.6,s.envelope.attack=1.2,s.envelope.decay=1.1,s.envelope.sustain=.65,s.envelope.release=3.2,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.1,amount:.55},s.lfo2={...s.lfo2??R.lfo2,enabled:!0,wave:"noise",dest:"pitch",rateHz:1.2,amount:.08};const a=ot(s);a.delay={enabled:!0,time:.5,feedback:.4,mix:.28},a.reverb={enabled:!0,size:.9,decay:1.5,mix:.45},s.master.gain=.18},{tags:["macro","texture"]})]},Jp={id:"motion",name:"Motion & FX",description:"Rhythmic and ambient presets highlighting LFO routing, noise modulation, and space.",presets:[tt("noisy-motion","Noisy Motion","Analog layers with the new noise LFO pushing the filter for organic movement.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="sawtooth",s.osc1.detune=-7,s.osc1.detuneFine=-2,s.osc1.octave=0,s.osc2.mode="analog",s.osc2.wave="triangle",s.osc2.detune=6,s.osc2.detuneFine=2,s.osc2.octave=0,s.mix=.48,s.filter.type="bandpass",s.filter.cutoff=950,s.filter.q=1.4,s.envelope.attack=.12,s.envelope.decay=.6,s.envelope.sustain=.55,s.envelope.release=.8,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"noise",dest:"filter",rateHz:3.2,amount:.24},s.lfo2={...s.lfo2??R.lfo2,enabled:!0,wave:"sine",dest:"amp",rateHz:.55,amount:.35};const a=ot(s);a.delay={enabled:!0,time:.4,feedback:.42,mix:.26},a.reverb={enabled:!0,size:.75,decay:1.1,mix:.36},s.master.gain=.21},{tags:["motion","noise"]}),tt("pulsar-gate","Pulsar Gate","Square-wave LFO chops the amp while a slow triangle sweeps the filter.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="sawtooth",s.osc1.detune=-3,s.osc1.detuneFine=0,s.osc2.mode="analog",s.osc2.wave="square",s.osc2.detune=3,s.osc2.detuneFine=0,s.mix=.5,s.filter.type="lowpass",s.filter.cutoff=1400,s.filter.q=.9,s.envelope.attack=.03,s.envelope.decay=.4,s.envelope.sustain=.6,s.envelope.release=.6,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"square",dest:"amp",rateHz:6,amount:.7},s.lfo2={...s.lfo2??R.lfo2,enabled:!0,wave:"triangle",dest:"filter",rateHz:.25,amount:.4};const a=ot(s);a.delay={enabled:!0,time:.33,feedback:.35,mix:.24},a.reverb={enabled:!0,size:.6,decay:.7,mix:.28},s.master.gain=.22,s.arp={...s.arp??R.arp,enabled:!0,gate:.45,bpmSync:!0,bpm:120,division:"1/8",mode:"updown",octaves:1,latch:!1}},{tags:["motion","arp"]}),tt("space-drone","Space Drone","Long-release drone with ring modulation and cavernous ambience.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="triangle",s.osc1.detune=-6,s.osc1.detuneFine=-3,s.osc2.mode="analog",s.osc2.wave="sine",s.osc2.detune=6,s.osc2.detuneFine=3,s.mix=.5,s.sub.enabled=!0,s.sub.wave="sine",s.sub.octave=2,s.sub.level=.4,s.ring.enabled=!0,s.ring.amount=.6,s.filter.type="bandpass",s.filter.cutoff=420,s.filter.q=2.2,s.envelope.attack=1.5,s.envelope.decay=1.2,s.envelope.sustain=.65,s.envelope.release=4.5,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.08,amount:.45},s.lfo2={...s.lfo2??R.lfo2,enabled:!0,wave:"noise",dest:"pitch",rateHz:1.5,amount:.08};const a=ot(s);a.delay={enabled:!0,time:.6,feedback:.48,mix:.3},a.reverb={enabled:!0,size:.95,decay:2.4,mix:.55},s.master.gain=.18},{tags:["drone","fx"]})]},Zp={id:"keys-leads",name:"Keys & Leads",description:"Playable patches that highlight melodic work—keys, brass, and expressive leads.",presets:[tt("dream-keys","Dream Keys","Soft keys with gentle vibrato and a shimmering tail.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="triangle",s.osc1.detune=-3,s.osc1.detuneFine=-1,s.osc2.mode="analog",s.osc2.wave="sine",s.osc2.detune=4,s.osc2.detuneFine=1,s.mix=.46,s.filter.type="lowpass",s.filter.cutoff=1450,s.filter.q=.75,s.envelope.attack=.05,s.envelope.decay=.4,s.envelope.sustain=.65,s.envelope.release=.9,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:5.8,amount:.08},s.lfo2={...s.lfo2??R.lfo2,enabled:!1,wave:"sine",dest:"amp",rateHz:.5,amount:0};const a=ot(s);a.delay={enabled:!0,time:.28,feedback:.22,mix:.2},a.reverb={enabled:!0,size:.6,decay:.85,mix:.3},s.master.gain=.23},{tags:["keys","vibrato"]}),tt("poly-brass","Poly Brass","Brassy synth stack with macro morphing and expressive filter.",s=>{s.engineMode="macro",s.osc1.mode="macro",s.osc1.macro={...s.osc1.macro??R.osc1.macro,model:"va",harmonics:.72,timbre:.48,morph:.62,level:1},s.osc2.mode="analog",s.osc2.wave="sawtooth",s.osc2.detune=-8,s.osc2.detuneFine=-1,s.mix=.58,s.filter.type="lowpass",s.filter.cutoff=980,s.filter.q=1.05,s.envelope.attack=.03,s.envelope.decay=.36,s.envelope.sustain=.58,s.envelope.release=.44,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"triangle",dest:"filter",rateHz:.45,amount:.32};const a=ot(s);a.delay={enabled:!1,time:.3,feedback:.2,mix:.1},a.reverb={enabled:!0,size:.5,decay:.65,mix:.24},s.master.gain=.24},{tags:["macro","brass"]}),tt("shimmer-lead","Shimmer Lead","Cutting lead with harmonics shimmer and subtle glide.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="sawtooth",s.osc1.detune=7,s.osc1.detuneFine=1,s.osc2.mode="macro",s.osc2.macro={...s.osc2.macro??R.osc2.macro,model:"harmonic",harmonics:.58,timbre:.62,morph:.4,level:.7},s.mix=.48,s.filter.type="bandpass",s.filter.cutoff=2100,s.filter.q=1.1,s.envelope.attack=.01,s.envelope.decay=.22,s.envelope.sustain=.45,s.envelope.release=.28,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:6.5,amount:.12},s.lfo2={...s.lfo2??R.lfo2,enabled:!0,wave:"noise",dest:"filter",rateHz:2.8,amount:.18};const a=ot(s);a.delay={enabled:!0,time:.24,feedback:.27,mix:.2},a.reverb={enabled:!0,size:.48,decay:.6,mix:.22},s.master.gain=.23},{tags:["lead"]})]},eh={id:"percussion-fx",name:"Percussion & FX",description:"Hits, plucks, and sound design starters for rhythm tracks and atmospheres.",presets:[tt("fm-bell","FM Bell","Metallic bell with quick shimmer and lingering tail.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="sine",s.osc1.octave=1,s.osc2.mode="analog",s.osc2.wave="sine",s.osc2.octave=1,s.fm.enabled=!0,s.fm.ratio=3,s.fm.amount=210,s.mix=.5,s.filter.type="lowpass",s.filter.cutoff=1700,s.filter.q=1.4,s.envelope.attack=.002,s.envelope.decay=.42,s.envelope.sustain=0,s.envelope.release=1.2,s.lfo1={...s.lfo1??R.lfo1,enabled:!1,wave:"sine",dest:"pitch",rateHz:6,amount:0};const a=ot(s);a.delay={enabled:!1,time:.22,feedback:.25,mix:.18},a.reverb={enabled:!0,size:.7,decay:1.4,mix:.4},s.master.gain=.2},{tags:["percussion","fm"]}),tt("noise-hit","Noise Hit","Short noise burst shaped with looping sampler trim—ideal for snares or whooshes.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="noise",s.osc2.mode="analog",s.osc2.wave="sine",s.osc2.detune=-12,s.osc2.octave=-1,s.mix=.32,s.filter.type="bandpass",s.filter.cutoff=1800,s.filter.q=5,s.envelope.attack=.001,s.envelope.decay=.28,s.envelope.sustain=0,s.envelope.release=.18,s.lfo1={...s.lfo1??R.lfo1,enabled:!0,wave:"noise",dest:"filter",rateHz:8,amount:.2};const a=ot(s);a.delay={enabled:!1,time:.12,feedback:.1,mix:.08},a.reverb={enabled:!0,size:.55,decay:.6,mix:.28},s.master.gain=.22},{tags:["percussion","noise"]}),tt("chiptune-click","Chiptune Click","Retro 8-bit percussive blip with sequencer-ready envelope.",s=>{s.engineMode="classic",s.osc1.mode="analog",s.osc1.wave="square",s.osc1.octave=1,s.osc2.mode="analog",s.osc2.wave="square",s.osc2.detune=7,s.osc2.octave=1,s.mix=.45,s.filter.type="highpass",s.filter.cutoff=600,s.filter.q=.7,s.envelope.attack=.001,s.envelope.decay=.12,s.envelope.sustain=0,s.envelope.release=.08,s.lfo1={...s.lfo1??R.lfo1,enabled:!1,wave:"square",dest:"pitch",rateHz:12,amount:0};const a=ot(s);a.delay={enabled:!1,time:.08,feedback:.1,mix:.05},a.reverb={enabled:!1,size:.3,decay:.3,mix:.08},s.master.gain=.2},{tags:["percussion","retro"]})]},xi=[Kp,Xp,Yp,Jp,Zp,eh],wi=xi.flatMap(s=>s.presets.map(a=>({...a,groupId:s.id}))),yi=Object.fromEntries(wi.map(s=>[s.id,s])),Tc=Object.fromEntries(wi.map(s=>[s.id,s.patch]));wi.map(s=>s.id);const fi="init";function th(){const s=te(m=>m.updatePatch),a=te(m=>m.exportPatch),i=te(m=>m.importPatch),c=$.useRef(null),[d,p]=$.useState(fi),v=()=>{const m=a(),w=new Blob([m],{type:"application/json"}),y=URL.createObjectURL(w),N=document.createElement("a");N.href=y,N.download="patch.json",N.click(),URL.revokeObjectURL(y)},S=m=>{const w=m.target.files?.[0];if(!w)return;const y=new FileReader;y.onload=()=>{i(String(y.result))},y.readAsText(w)},h=$.useMemo(()=>yi[d],[d]),g=m=>{const w=m.target.value;p(w),m.target.blur();const y=Tc[w];y&&s(y)};return o.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[o.jsxs("div",{className:"row",style:{gap:8},children:[o.jsx("select",{value:d,onChange:g,children:xi.map(m=>o.jsx("optgroup",{label:m.name,children:m.presets.map(w=>o.jsx("option",{value:w.id,title:w.description,children:w.name},w.id))},m.id))}),o.jsx("button",{onClick:()=>c.current?.click(),children:"Import"}),o.jsx("input",{ref:c,type:"file",accept:"application/json",style:{display:"none"},onChange:S}),o.jsx("button",{onClick:v,children:"Export"}),o.jsx("button",{onClick:()=>{p(fi),s(Tc[fi])},children:"Reset"}),o.jsx("button",{title:"Clears local patches to recover from incompatible versions",onClick:()=>{localStorage.removeItem("websynth-patch"),location.reload()},children:"Clear Local"})]}),o.jsxs("div",{className:"preset-panel-meta",children:[o.jsx("div",{className:"label",children:"Presets & Patch IO"}),h&&o.jsxs("div",{className:"preset-description",children:[o.jsx("p",{children:h.description}),h.tags&&h.tags.length>0&&o.jsx("div",{className:"preset-tags",children:h.tags.map(m=>o.jsx("span",{className:"preset-tag",children:m},m))})]})]})]})}function nh(){const a=te(v=>v.patch.expression)??R.expression,i=te(v=>v.updatePatch),c=$.useMemo(()=>{const v=new Map;for(const S of gi){const h=v.get(S.category)??[];h.push(S),v.set(S.category,h)}return Array.from(v.entries())},[]),d=v=>S=>{const h=S.target.value,g=v==="x"?{x:h,y:a.y}:{x:a.x,y:h};i({expression:g})},p=v=>{const S=a?.[v];return gi.find(g=>g.id===S)?.description??"Select a destination to be controlled by the XY surface."};return o.jsxs("div",{className:"expression-panel",children:[o.jsxs("div",{className:"expression-row",children:[o.jsxs("label",{children:[o.jsx("span",{className:"label",children:"X Axis Target"}),o.jsx("select",{value:a?.x??R.expression.x,onChange:d("x"),children:c.map(([v,S])=>o.jsx("optgroup",{label:v,children:S.map(h=>o.jsx("option",{value:h.id,children:h.label},h.id))},v))})]}),o.jsx("p",{className:"hint-text",children:p("x")})]}),o.jsxs("div",{className:"expression-row",children:[o.jsxs("label",{children:[o.jsx("span",{className:"label",children:"Y Axis Target"}),o.jsx("select",{value:a?.y??R.expression.y,onChange:d("y"),children:c.map(([v,S])=>o.jsx("optgroup",{label:v,children:S.map(h=>o.jsx("option",{value:h.id,children:h.label},h.id))},v))})]}),o.jsx("p",{className:"hint-text",children:p("y")})]})]})}function pi({open:s,onClose:a,children:i,title:c="Settings",closeLabel:d="Close settings"}){return $.useEffect(()=>{if(!s)return;const p=v=>{v.key==="Escape"&&a()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[s,a]),s?o.jsxs("div",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"modal-backdrop",onClick:a}),o.jsxs("div",{className:"modal",children:[o.jsxs("header",{className:"modal-header",children:[o.jsx("h3",{className:"modal-title",children:c}),o.jsx("button",{className:"modal-close",onClick:a,"aria-label":d,children:"×"})]}),o.jsx("div",{className:"modal-body",children:i})]})]}):null}const Ic=16,dl=[{id:"kick",label:"Kick",midi:36,patch:{osc1:{wave:"sine",detune:-24},osc2:{wave:"sine",detune:0},mix:0,envelope:{attack:.001,decay:.18,sustain:0,release:.08},filter:{type:"lowpass",cutoff:380,q:.8},master:{gain:.35}}},{id:"snare",label:"Snare",midi:38,patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"triangle",detune:12},mix:.55,envelope:{attack:.001,decay:.22,sustain:0,release:.12},filter:{type:"bandpass",cutoff:1800,q:2.8},master:{gain:.28}}},{id:"hat",label:"Hat",midi:42,patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"triangle",detune:24},mix:.7,envelope:{attack:.001,decay:.08,sustain:0,release:.05},filter:{type:"highpass",cutoff:5e3,q:.9},master:{gain:.22}}}];function rh(){const s={};for(const a of dl)s[a.id]=Array.from({length:Ic},()=>!1);return s.kick[0]=!0,s.kick[8]=!0,s.snare[4]=!0,s.snare[12]=!0,s.hat=s.hat.map((a,i)=>i%2===0),s}function sh(){const s=te(j=>j.transport.tempo),a=te(j=>j.transport.playing),i=te(j=>j.transport.tick),c=te(j=>j.setTempo),d=te(j=>j.setTransportPlaying),[p,v]=$.useState(()=>rh()),[S,h]=$.useState(0),g=$.useRef({}),m=$.useRef(p);$.useEffect(()=>{m.current=p},[p]);const w=async j=>{let T=g.current[j];T||(T=new mi,g.current[j]=T),await T.resume();const _=dl.find(O=>O.id===j)?.patch;return _&&T.applyPatch({...R,..._}),T},y=async j=>{const T=m.current,_=dl.filter(O=>T[O.id]?.[j]);for(const O of _)(await w(O.id)).previewNote(O.midi,180)};$.useEffect(()=>{if(!a){h(0);return}const j=i%Ic;h(j),y(j)},[i,a]),$.useEffect(()=>()=>{for(const j of Object.values(g.current))try{j.audioContext.close()}catch{}g.current={}},[]);const N=(j,T)=>{v(_=>{const O={..._,[j]:[..._[j]]};return O[j][T]=!O[j][T],O})};return o.jsxs("div",{className:"drum-machine",children:[o.jsxs("div",{className:"drum-controls",children:[o.jsx("button",{className:"play-button",onClick:()=>d(!a),children:a?"Stop":"Play"}),o.jsx(Te,{label:"Tempo",min:60,max:180,step:1,value:s,onChange:j=>c(j)})]}),o.jsx("div",{className:"drum-grid",children:dl.map(j=>o.jsxs("div",{className:"drum-row",children:[o.jsx("div",{className:"drum-label",children:j.label}),o.jsx("div",{className:"drum-steps",children:p[j.id]?.map((T,_)=>{const O=a&&S===_;return o.jsx("button",{className:`drum-step${T?" active":""}${O?" current":""}`,onClick:()=>N(j.id,_)},_)})})]},j.id))})]})}const lh=4;function oh(){const s=te(p=>p.transport.tempo),a=te(p=>p.transport.playing),i=te(p=>p.bumpTransportTick),c=te(p=>p.patch),d=te(p=>p.updatePatch);return $.useEffect(()=>{if(!a)return;const p=6e4/s/lh,v=window.setInterval(()=>i(),p);return()=>window.clearInterval(v)},[a,s,i]),$.useEffect(()=>{const p=c.sequencer??R.sequencer;p?.enabled&&p.playing!==a&&d({sequencer:{...p,playing:a}})},[a,c.sequencer,d]),$.useEffect(()=>{const p=c.sequencer??R.sequencer;p?.enabled&&p.bpm!==s&&d({sequencer:{...p,bpm:s}});const v=c.arp??R.arp;v?.enabled&&(v.bpm!==s||!v.bpmSync)&&d({arp:{...v,bpm:s,bpmSync:!0}})},[s,c.sequencer,c.arp,d]),null}const _c=144,ih=128;function ah(s){return Array.from(s.inputs.values()).map(a=>({id:a.id,name:a.name??"Unknown input",manufacturer:a.manufacturer??null}))}let Kr=null;function Fc(){return Kr||(typeof navigator>"u"||typeof navigator.requestMIDIAccess!="function"?Promise.reject(new Error("Web MIDI API is not supported in this environment")):(Kr=navigator.requestMIDIAccess({sysex:!1}).finally(()=>{Kr=null}),Kr))}function uh(){const s=te(m=>m.engine),a=te(m=>m.midi),i=te(m=>m.setMidiSupported),c=te(m=>m.setMidiStatus),d=te(m=>m.setMidiInputs),p=te(m=>m.setMidiSelectedInput),v=te(m=>m.setMidiActiveNotes),S=$.useRef(null),h=$.useRef(null),g=$.useRef(new Set);return $.useEffect(()=>{if(!a.enabled){const w=Array.from(g.current);w.length&&s&&w.forEach(N=>s.noteOff(N)),g.current.clear(),v([]);const y=a.supported===!1?"unsupported":"idle";a.status!==y&&c(y),d([]),S.current&&(S.current.onstatechange=null);return}if(typeof navigator>"u"||typeof navigator.requestMIDIAccess!="function"){i(!1),c("unsupported");return}let m=!1;return i(!0),c("requesting"),Fc().then(w=>{if(m)return;S.current=w;const y=()=>{const N=ah(w);d(N);const{selectedInputId:j}=te.getState().midi;N.length===0&&(g.current.clear(),v([])),N.length>0?N.some(_=>_.id===j)||p(N[0]?.id??null):j&&p(null)};y(),w.onstatechange=()=>y(),c("ready")}).catch(w=>{if(m)return;const y=w instanceof Error?w.message:"Failed to access MIDI devices";c("error",y)}),()=>{m=!0,S.current&&(S.current.onstatechange=null),S.current=null}},[s,a.enabled,v,d,p,c,i]),$.useEffect(()=>{if(!a.enabled){h.current&&(h.current.onmidimessage=null,h.current=null);return}const m=S.current;if(!m)return;const w=a.selectedInputId,y=w?Array.from(m.inputs.values()).find(j=>j.id===w):null;if(h.current&&h.current!==y){h.current.onmidimessage=null,h.current=null;const j=Array.from(g.current);j.length&&s&&j.forEach(T=>s.noteOff(T)),g.current.clear(),v([])}if(!y)return;const N=j=>{const T=j.data;if(!T||T.length<2)return;const _=T[0],O=T[1],A=T[2]??0,Y=_&240,q=O;if(Y===_c&&A>0){s&&s.noteOn(q),g.current.add(q),v(Array.from(g.current));return}(Y===ih||Y===_c&&A===0)&&(s&&s.noteOff(q),g.current.delete(q),v(Array.from(g.current)))};return y.onmidimessage=N,h.current=y,()=>{y.onmidimessage===N&&(y.onmidimessage=null);const j=Array.from(g.current);j.length&&s&&j.forEach(T=>s.noteOff(T)),g.current.clear(),v([])}},[s,a.enabled,a.selectedInputId,v]),null}const ch={idle:"Not connected",requesting:"Awaiting browser permission...",ready:"Connected",error:"Connection error",unsupported:"Not supported"};function dh(){const s=te(h=>h.midi),a=te(h=>h.setMidiEnabled),i=te(h=>h.setMidiSelectedInput),c=te(h=>h.setMidiStatus),d=te(h=>h.setMidiSupported),p=$.useMemo(()=>{const h=ch[s.status]??"Unknown";return s.status==="error"&&s.lastError?`${h}: ${s.lastError}`:s.status==="ready"&&s.inputs.length===0?"Connected - no inputs detected":h},[s.inputs.length,s.lastError,s.status]),v=s.supported===!1,S=$.useCallback(h=>{if(!h.target.checked){a(!1);return}c("requesting"),a(!0),Fc().then(()=>{d(!0)}).catch(m=>{const w=m instanceof Error?m.message:"Failed to access MIDI devices";if(m instanceof Error&&/not supported/i.test(m.message)){d(!1),c("unsupported"),a(!1);return}d(!0),c("error",w)})},[a,c,d]);return o.jsxs("div",{className:"settings-card",children:[o.jsxs("div",{className:"settings-row",children:[o.jsx("label",{className:"settings-label",htmlFor:"midi-enabled",children:"Enable MIDI input"}),o.jsx("input",{id:"midi-enabled",type:"checkbox",checked:s.enabled,onChange:S,disabled:v})]}),o.jsxs("div",{className:"settings-row",children:[o.jsx("span",{className:"settings-label",children:"Status"}),o.jsx("span",{className:"settings-value","data-status":s.status,children:p})]}),s.status==="unsupported"?o.jsx("p",{className:"settings-help",children:"This browser does not expose the Web MIDI API. Try Chrome or Edge on desktop."}):null,o.jsxs("div",{className:"settings-row",children:[o.jsx("label",{className:"settings-label",htmlFor:"midi-input",children:"MIDI input device"}),o.jsxs("select",{id:"midi-input",value:s.selectedInputId??"",onChange:h=>{const g=h.target.value;i(g.length?g:null)},disabled:!s.enabled||s.inputs.length===0,children:[s.inputs.length===0?o.jsx("option",{value:"",children:"No inputs detected"}):null,s.inputs.map(h=>o.jsxs("option",{value:h.id,children:[h.name,h.manufacturer?` (${h.manufacturer})`:""]},h.id))]})]}),s.enabled&&s.inputs.length===0?o.jsx("p",{className:"settings-help",children:"Plug in a controller or check browser permissions."}):null]})}function fh({href:s="https://github.com/szabadkai/synth-demo"}){return o.jsxs("a",{className:"github-corner",href:s,"aria-label":"View WebSynth Studio on GitHub",target:"_blank",rel:"noreferrer noopener",children:[o.jsx("span",{className:"sr-only",children:"View the project repository on GitHub"}),o.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M12 0a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58 0-.29-.01-1.05-.02-2.05-3.34.73-4.04-1.61-4.04-1.61-.55-1.4-1.35-1.78-1.35-1.78-1.11-.76.08-.75.08-.75 1.22.09 1.87 1.26 1.87 1.26 1.09 1.86 2.86 1.32 3.56 1 .11-.79.43-1.32.78-1.62-2.66-.3-5.47-1.33-5.47-5.9 0-1.3.47-2.37 1.24-3.21-.12-.3-.54-1.51.12-3.15 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.3-1.55 3.3-1.23 3.3-1.23.66 1.64.24 2.85.12 3.15.77.84 1.24 1.9 1.24 3.21 0 4.58-2.82 5.6-5.5 5.9.44.39.83 1.16.83 2.34 0 1.69-.02 3.05-.02 3.47 0 .32.22.69.83.57A12 12 0 0 0 12 0Z"})})]})}const ph=[{title:"Power On + Audio Check",points:["Click Power On (or press any key) to resume the audio engine – browsers block sound until you interact.","Hold a note on the on-screen keyboard or your computer keys (A/W/S…) to confirm audio output.","Watch the Audio Ready badge so you know the synth engine is live and responsive."]},{title:"Dashboard Basics",points:["Each panel can be dragged by the ⋮⋮ handle to personalise your layout.","Use the Oscilloscope panel to visualise how the engines, filter, and envelope tweaks shape the signal.","Dive into the Engine panel (ENG1/ENG2), plus Filter, Envelope, and Effects modules to sculpt tone, dynamics, and ambience."]},{title:"Modulation Playground",points:["Assign LFOs to pitch, filter, or effect targets for evolving textures – adjust rate, shape, sync, and depth.","Flip on the Arpeggiator to latch held notes, experiment with patterns, octave ranges, and tempo sync.","Program riffs in the Sequencer, toggle steps live, and shape groove with direction and swing."]},{title:"Rhythm Layer",points:["Open the Drum Machine to sequence kick, snare, and hat voices using the shared global transport.","Hit Play/Stop in the Drum Machine (or space bar in the Sequencer) to drive every tempo-aware module.","Adjust BPM from either panel – the Transport keeps LFO sync, sequencer rate, and arps locked in."]},{title:"Expressive Performance",points:["Engage CapsLock to activate the 2D expression surface; glide a trackpad, mouse, or pen for live modulation.","Check the overlay label to see which parameters the X/Y axes control and their real-time values.","Customise X/Y destinations under Settings → Expression to map filter sweeps, macro blends, and more."]},{title:"Patch Workflow",points:["Browse the top-bar Preset menu or Settings → Patches to explore curated starting points.","Export your patch as JSON to share, import saved patches, or reset to the init patch at any time.","Use Clear Local if you ever need to wipe cached patches after upgrading the app."]},{title:"Hardware MIDI",points:["Toggle Enable MIDI input in Settings → MIDI to request browser permission for your controller.","Select a detected device and play – incoming notes route straight into the synth voice engine.","Status hints show permission prompts, errors, or a friendly ready state so you know what to expect."]},{title:"Next Steps",points:["Layer Sequencer, Arpeggiator, Drum Machine, and expression surface for full arrangements.","Save favourite patches into src/patches/ to share with your team or future sessions.","Before shipping changes, run npm run lint, npm run typecheck, npm test, and npm run build to keep QA tight."]}];function hh({onFinish:s}){return o.jsxs("div",{className:"onboarding-guide",children:[o.jsx("p",{className:"onboarding-intro",children:"New to WebSynth Studio? Work through the highlights below, tweaking the live app as you go. Each section points you to the panels and controls that define the instrument."}),o.jsx("ol",{className:"onboarding-list",children:ph.map(a=>o.jsxs("li",{className:"onboarding-section",children:[o.jsx("h4",{children:a.title}),o.jsx("ul",{children:a.points.map(i=>o.jsx("li",{children:i},i))})]},a.title))}),o.jsx("button",{type:"button",className:"onboarding-cta",onClick:()=>{s?.()},children:"Let's go"})]})}const mh="https://buymeacoffee.com/szabadkai",vh="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png",hi="buy-coffee-collapsed";function gh(){const[s,a]=$.useState(!1);return $.useEffect(()=>{try{window.localStorage.getItem(hi)==="1"&&a(!0)}catch{}},[]),$.useEffect(()=>{try{s?window.localStorage.setItem(hi,"1"):window.localStorage.removeItem(hi)}catch{}},[s]),s?o.jsx("div",{className:"buy-coffee collapsed",children:o.jsx("button",{type:"button",className:"buy-coffee-icon","aria-label":"Show Buy Me a Coffee support button",onClick:()=>a(!1),children:o.jsx("span",{"aria-hidden":"true",children:"☕"})})}):o.jsxs("div",{className:"buy-coffee",children:[o.jsxs("a",{className:"buy-coffee-link",href:mh,target:"_blank",rel:"noreferrer noopener","aria-label":"Support WebSynth Studio via Buy Me a Coffee",children:[o.jsx("span",{className:"sr-only",children:"Support WebSynth Studio on Buy Me a Coffee"}),o.jsx("img",{src:vh,alt:"",loading:"lazy",width:220,height:62})]}),o.jsx("button",{type:"button",className:"buy-coffee-dismiss","aria-label":"Hide Buy Me a Coffee support button",onClick:()=>a(!0),children:o.jsx("span",{"aria-hidden":"true",children:"×"})})]})}const yh=[{label:"1024",value:1024,description:"Fastest response, lowest resolution"},{label:"2048",value:2048,description:"Balanced speed and detail"},{label:"4096",value:4096,description:"Default detail"},{label:"8192",value:8192,description:"Highest resolution, slowest refresh"}];function xh(){const s=te(i=>i.oscilloscope.fftSize),a=te(i=>i.setOscilloscopeFftSize);return o.jsxs("div",{className:"settings-group",children:[o.jsx("h5",{className:"settings-subheading",children:"Oscilloscope"}),o.jsxs("div",{className:"settings-row",children:[o.jsx("span",{className:"label",children:"FFT Size"}),o.jsx("div",{className:"fft-options",children:yh.map(i=>{const c=s===i.value;return o.jsxs("button",{type:"button",className:`fft-option${c?" active":""}`,"aria-pressed":c,onClick:()=>a(i.value),children:[o.jsx("span",{className:"fft-option__label",children:i.label}),o.jsx("span",{className:"fft-option__hint",children:i.description})]},i.value)})})]})]})}function wh(){const s=te(w=>w.updatePatch),[a,i]=He.useState(null),[c,d]=He.useState(!1),p=He.useRef(null),v=He.useRef(null),S=a?yi[a]:null,h=He.useCallback(()=>{d(!1),p.current?.blur()},[]),g=He.useCallback(w=>{i(w),h();const y=yi[w];y&&s(y.patch)},[h,s]);He.useEffect(()=>{if(!c)return;const w=N=>{!p.current?.contains(N.target)&&!v.current?.contains(N.target)&&h()},y=N=>{N.key==="Escape"&&(N.preventDefault(),h())};return document.addEventListener("pointerdown",w),document.addEventListener("keydown",y),()=>{document.removeEventListener("pointerdown",w),document.removeEventListener("keydown",y)}},[c,h]);const m=()=>{d(w=>!w),c&&h()};return o.jsxs("div",{className:"preset-selector","data-open":c?"true":"false",children:[o.jsxs("button",{type:"button",ref:p,className:"preset-selector-trigger",onClick:m,"aria-haspopup":"listbox","aria-expanded":c,children:[S?o.jsxs("span",{className:"preset-selector-label",children:[o.jsx("span",{className:"preset-selector-thumb",style:{backgroundImage:`url(${S.image})`}}),o.jsx("span",{children:S.name})]}):o.jsx("span",{className:"preset-selector-placeholder",children:"Presets"}),o.jsx("span",{className:"preset-selector-caret","aria-hidden":"true",children:"▾"})]}),c&&o.jsx("div",{className:"preset-selector-popover",ref:v,role:"listbox","aria-label":"Preset library",children:xi.map(w=>o.jsxs("div",{className:"preset-selector-group",children:[o.jsx("div",{className:"preset-selector-group-title",children:w.name}),o.jsx("div",{className:"preset-selector-options",children:w.presets.map(y=>o.jsx("button",{type:"button",role:"option","aria-selected":y.id===a,className:"preset-option",style:{backgroundImage:`url(${y.image})`},onClick:()=>g(y.id),children:o.jsxs("div",{className:"preset-option-overlay",children:[o.jsx("div",{className:"preset-option-name",children:y.name}),o.jsx("div",{className:"preset-option-description",children:y.description})]})},y.id))})]},w.id))})]})}const Lc="websynth-guide-seen",Sh=["oscilloscope","oscillator","effects","lfos","arp","sequencer","drum","keyboard"];function kh(s){return Sh.includes(s)}function jh(){const s=te(O=>O.engine),a=te(O=>O.setEngine),i=te(O=>O.patch),[c,d]=$.useState(!1),[p,v]=$.useState(!1),[S,h]=$.useState(null);$.useEffect(()=>{try{localStorage.getItem(Lc)||v(!0)}catch{}},[]),$.useEffect(()=>{const O=async()=>{if(!te.getState().engine){const A=new mi;await A.resume(),A.applyPatch(i),a(A)}window.removeEventListener("pointerdown",O),window.removeEventListener("keydown",O)};return window.addEventListener("pointerdown",O),window.addEventListener("keydown",O),()=>{window.removeEventListener("pointerdown",O),window.removeEventListener("keydown",O)}},[i,a]);const g=async()=>{if(!s){const O=new mi;await O.resume(),O.applyPatch(i),a(O)}},m=[{id:"oscilloscope",title:"Oscilloscope",span:2,render:()=>o.jsxs("div",{className:"oscilloscope-stack",children:[o.jsx(Ap,{}),o.jsxs("div",{className:"oscilloscope-row",children:[o.jsx(Lp,{}),o.jsx(Op,{})]})]})},{id:"oscillator",title:"Oscillator",span:2,render:()=>o.jsx(_p,{})},{id:"effects",title:"Effects",span:2,render:()=>o.jsx(qp,{})},{id:"lfos",title:"LFOs",span:2,render:()=>o.jsx(Bp,{})},{id:"arp",title:"Arpeggiator",span:2,render:()=>o.jsx(Up,{})},{id:"sequencer",title:"Sequencer",span:2,render:()=>o.jsx(Hp,{})},{id:"drum",title:"Drum Machine",span:2,render:()=>o.jsx(sh,{})},{id:"keyboard",title:"Keyboard",span:2,render:()=>o.jsx(Dp,{})}],w=te(O=>O.layoutOrder),y=te(O=>O.setLayoutOrder),N=te(O=>O.resetPatch),j=$.useMemo(()=>({oscilloscope:{title:"Oscilloscope & Signal Shaping",body:o.jsxs("div",{className:"module-help",children:[o.jsx("p",{children:"This column stacks the live scope with the filter and envelope controls so you can see and hear how each tweak reshapes the voice in real time."}),o.jsx("h5",{children:"Oscilloscope"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Live waveform"})," shows the post-filter signal—watch for clipping, phase inversion, or DC offset."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Visual feedback"})," makes it easy to dial envelope curves or modulation depth by eye."]})]}),o.jsx("h5",{children:"Filter"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Filter Type"}),": switch between low-pass, high-pass, band-pass, or notch responses."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Cutoff"}),": set the corner frequency (40–8 kHz)."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Resonance"}),": emphasise frequencies around the cutoff for squelchy tones or formants."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Master"}),": trim the synth output to prevent overload after heavy resonance or drive."]})]}),o.jsx("h5",{children:"Envelope"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Attack/Decay"}),": tune how quickly the note ramps up and falls back."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Sustain"}),": set the plateau level while a key is held."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Release"}),": control how long the tail rings once the note stops."]})]}),o.jsx("h5",{children:"Workflow Tips"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Start with moderate sustain and adjust cutoff until the oscilloscope shows a balanced waveform."}),o.jsx("li",{children:"Use short attacks with high resonance for plucky stabs, or longer releases for pads."})]})]})},oscillator:{title:"ENG Voice Engine",body:o.jsxs("div",{className:"module-help",children:[o.jsx("p",{children:"The engine panel builds the raw tone. Switch between the classic dual-engine stack (ENG1/ENG2) and the macro voice engine."}),o.jsx("h5",{children:"Classic Mode"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Mode"}),": choose Classic to expose ENG1 and ENG2 controls; Macro flips to the multi-model engine."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Wave"}),": pick saw, square, triangle, sine, or noise per engine."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Detune/Fine"}),": detune ENG1 in cents for chorus movement; fine tune provides subtle offsets."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Mix"}),": blend ENG1 against ENG2 to balance the tone."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"FM toggle"}),": enable frequency modulation, then set ",o.jsx("strong",{children:"Ratio"})," for the modulator harmonic and ",o.jsx("strong",{children:"Amount"})," for depth."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Ring toggle"}),": engage ring modulation and scale its ",o.jsx("strong",{children:"Amount"})," for metallic textures."]})]}),o.jsx("h5",{children:"Macro Mode"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Model"}),": jump between macro-oscillator flavours (VA, wavefold, pluck, FM 2-Op, etc.)."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Harmonics/Timbre/Morph"}),": scan each model’s parameter set—great for morphing wavetables or shaping plucks."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Level"}),": trim the macro engine output when layering with other voices."]})]}),o.jsx("h5",{children:"Sound Design Tips"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Stack slight detune plus a touch of ring modulation for wide analog pads."}),o.jsx("li",{children:"Macro models respond well to LFO or expression assignments—map CapsLock X/Y to Morph or Timbre for live movement."})]})]})},effects:{title:"Effects Rack",body:o.jsxs("div",{className:"module-help",children:[o.jsx("p",{children:"Delay and reverb live here so you can finish a patch without leaving the synth view."}),o.jsx("h5",{children:"Delay"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Enabled"}),": toggle the bucket-brigade style delay."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Time"}),": set delay time in seconds (0–1.5s). Syncs nicely with tempo divisions."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Feedback"}),": control repeats; keep under ~0.7 for stable feedback."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Mix"}),": blend the wet signal back with the dry synth."]})]}),o.jsx("h5",{children:"Reverb"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Enabled"}),": load the convolution reverb stage."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Size"}),": pick the impulse “room” length."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Decay"}),": shape how long the tail sustains."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Mix"}),": balance ambience without washing out the dry signal."]})]}),o.jsx("h5",{children:"Tips"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Short delay times with low mix create slapback for bass and plucks."}),o.jsx("li",{children:"Cut delay feedback when engaging heavy reverb to avoid muddiness."})]})]})},lfos:{title:"LFO Modulators",body:o.jsxs("div",{className:"module-help",children:[o.jsx("p",{children:"Two low-frequency oscillators inject motion into almost any destination in the patch."}),o.jsx("h5",{children:"LFO Controls"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Enabled"}),": arm the modulation path for each LFO."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Wave"}),": choose sine, triangle, square, saw, or noise for the modulation shape."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Dest"}),": route to pitch, filter, or amp—tie depth to macros or expression for more routings."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Rate"}),": set frequency in Hz (0.01–20); syncs with tempo when combined with the transport."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Amount"}),": scale modulation depth; automate this with the Sequencer or expression surface for evolving sounds."]})]}),o.jsx("h5",{children:"Tips"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Use LFO1 for slow filter sweeps and LFO2 for faster vibrato or tremolo."}),o.jsx("li",{children:"Disable the checkbox to park an LFO without losing its configuration."})]})]})},arp:{title:"Arpeggiator",body:o.jsxs("div",{className:"module-help",children:[o.jsx("p",{children:"Turn held chords into rhythmic runs that follow the global transport."}),o.jsx("h5",{children:"Playback"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Enabled"}),": start capturing held notes."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Latch"}),": keep notes running after you release the keys."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Clear"}),": flush the current latched chord without toggling the arp off."]})]}),o.jsx("h5",{children:"Timing"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Mode"}),": set traversal (up, down, up/down, random, as played)."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Octaves"}),": extend the pattern across 1–4 octaves."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Chord"}),": fold power chords, triads, or sevenths into each step."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Division"}),": choose rhythmic value (1/4–1/16T)."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"BPM"}),": the slider writes to the global tempo so drums and sequencer stay in sync."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Gate/Swing"}),": tighten note length and groove feel."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Repeats/Length"}),": loop steps multiple times or clamp the pattern length."]})]}),o.jsx("h5",{children:"Tips"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Combine Latch with the Sequencer for counterpoint—that way the arp handles chords while the sequencer drives lead lines."}),o.jsx("li",{children:"Use the expression surface to modulate filter cutoff while the arp runs for dynamic sweeps."})]})]})},sequencer:{title:"Step Sequencer",body:o.jsxs("div",{className:"module-help",children:[o.jsx("p",{children:"Program note offsets and modulation lanes across up to 16 steps—perfect for basslines or evolving textures."}),o.jsx("h5",{children:"Transport & Timing"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Play"}),": toggles the shared transport; the button mirrors the space-bar shortcut."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Enabled"}),": arm the sequencer without nuking your pattern."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Tempo"}),": linked to the global BPM so drums and arp line up."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Division"}),": set step rate (quarter to triplet sixteenths)."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Length"}),": choose how many steps play before looping."]})]}),o.jsx("h5",{children:"Shape the Pattern"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Gate"}),": change note length; great for staccato acid lines."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Swing"}),": add shuffle (disabled for triplets and quarter notes)."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Root"}),": slide the entire sequence up or down in pitch."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Edit Notes (Keyboard)"}),": enable to type notes with A/W/S…; +/- nudges semitones, Z/X shifts the root octave."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Step grid"}),": click to toggle notes, ",o.jsx("strong",{children:"Alt+click"})," raises semitone offset, right-click lowers it."]})]}),o.jsx("h5",{children:"Visual Feedback"}),o.jsxs("ul",{children:[o.jsx("li",{children:"The highlighted cell shows the playhead; cursor outlines follow keyboard edit focus."}),o.jsx("li",{children:"Offsets in the cells (+/- values) represent semitone shifts relative to Root."})]})]})},drum:{title:"Drum Machine",body:o.jsxs("div",{className:"module-help",children:[o.jsx("p",{children:"Create percussive backbeats that share tempo and transport with the synth voice."}),o.jsx("h5",{children:"Transport"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Play/Stop"}),": drives the global clock, so sequencer and arp follow the same BPM."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Tempo"}),": change BPM with the slider—applies everywhere."]})]}),o.jsx("h5",{children:"Programming"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Step buttons"}),": click to toggle hits for kick, snare, and hat; glowing steps are active."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Current step highlight"}),": a brighter cell shows the beat currently firing."]}),o.jsx("li",{children:"Each instrument has its own SynthEngine voice with curated patches for punchy drums."})]}),o.jsx("h5",{children:"Tips"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Start with the default 4-on-the-floor kick and build snare/hat syncopation around it."}),o.jsx("li",{children:"Layer sequencer basslines with hats on offbeats for instant groove."})]})]})},keyboard:{title:"Keyboard & Performance",body:o.jsxs("div",{className:"module-help",children:[o.jsx("p",{children:"Play and monitor incoming notes from both the computer keyboard and external MIDI controllers."}),o.jsx("h5",{children:"Computer Keys"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Mapping"}),": A/W/S/D/F/G… map to white and black keys; apostrophe reaches two octaves up."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Z / X"}),": shift the octave indicator down or up in 12-semitone jumps."]}),o.jsx("li",{children:"Held keys appear highlighted so you always know what is sustaining."})]}),o.jsx("h5",{children:"Pointer & Touch"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Click or drag for glissando; multi-touch (trackpad/tablet) keeps parallel notes held."}),o.jsx("li",{children:"Black keys float above the whites for accurate gliss transitions."})]}),o.jsx("h5",{children:"MIDI Integration"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Notes triggered from external hardware light up alongside local keys—great for debugging MIDI routing."}),o.jsx("li",{children:"The octave badge shows the base MIDI note and offset so you can align hardware controllers quickly."})]})]})}}),[]),T=S?j[S]:null,_=()=>{try{localStorage.setItem(Lc,"1")}catch{}v(!1)};return o.jsxs("div",{className:"app",children:[o.jsx(fh,{}),o.jsx(gh,{}),o.jsx(uh,{}),o.jsxs("header",{className:"header",children:[o.jsx("h2",{children:"WebSynth Studio"}),o.jsxs("div",{className:"row",children:[o.jsx(wh,{}),o.jsx("button",{onClick:g,children:s?"Audio Ready":"Power On"}),o.jsx("button",{onClick:()=>{N()},children:"Reset Patch"}),o.jsx("button",{onClick:()=>{v(!0)},children:"Help"}),o.jsx("button",{onClick:()=>d(!0),children:"Settings"})]})]}),o.jsx("main",{children:o.jsx(Vp,{panels:m,order:w,onOrderChange:y,onRequestHelp:O=>{kh(O)&&h(O)}})}),o.jsx(Wp,{}),o.jsx(pi,{open:S!=null,onClose:()=>h(null),title:T?.title??"Module Help",closeLabel:"Close module help",children:T?.body??o.jsx("p",{children:"Help content coming soon."})}),o.jsx(pi,{open:p,onClose:_,title:"Onboarding Guide",closeLabel:"Close help overlay",children:o.jsx(hh,{onFinish:_})}),o.jsxs(pi,{open:c,onClose:()=>d(!1),children:[o.jsxs("section",{className:"settings-section",children:[o.jsx("h4",{className:"settings-heading",children:"Patches"}),o.jsx(th,{})]}),o.jsxs("section",{className:"settings-section",children:[o.jsx("h4",{className:"settings-heading",children:"Expression"}),o.jsx(nh,{})]}),o.jsxs("section",{className:"settings-section",children:[o.jsx("h4",{className:"settings-heading",children:"Visualization"}),o.jsx(xh,{})]}),o.jsxs("section",{className:"settings-section",children:[o.jsx("h4",{className:"settings-heading",children:"MIDI"}),o.jsx(dh,{})]})]}),o.jsx(oh,{})]})}const Mh=Uf.createRoot(document.getElementById("root"));Mh.render(o.jsx(jh,{}));
