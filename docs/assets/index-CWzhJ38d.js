(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function i(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(d){if(d.ep)return;d.ep=!0;const f=i(d);fetch(d.href,f)}})();function Gu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var dl={exports:{}},ts={},fl={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vu;function Yf(){if(vu)return Ee;vu=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function M(_){return _===null||typeof _!="object"?null:(_=y&&_[y]||_["@@iterator"],typeof _=="function"?_:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,j={};function k(_,H,Se){this.props=_,this.context=H,this.refs=j,this.updater=Se||N}k.prototype.isReactComponent={},k.prototype.setState=function(_,H){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,H,"setState")},k.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function L(){}L.prototype=k.prototype;function R(_,H,Se){this.props=_,this.context=H,this.refs=j,this.updater=Se||N}var W=R.prototype=new L;W.constructor=R,w(W,k.prototype),W.isPureReactComponent=!0;var X=Array.isArray,q=Object.prototype.hasOwnProperty,P={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function z(_,H,Se){var xe,be={},me=null,Me=null;if(H!=null)for(xe in H.ref!==void 0&&(Me=H.ref),H.key!==void 0&&(me=""+H.key),H)q.call(H,xe)&&!B.hasOwnProperty(xe)&&(be[xe]=H[xe]);var Ce=arguments.length-2;if(Ce===1)be.children=Se;else if(1<Ce){for(var _e=Array(Ce),fe=0;fe<Ce;fe++)_e[fe]=arguments[fe+2];be.children=_e}if(_&&_.defaultProps)for(xe in Ce=_.defaultProps,Ce)be[xe]===void 0&&(be[xe]=Ce[xe]);return{$$typeof:r,type:_,key:me,ref:Me,props:be,_owner:P.current}}function U(_,H){return{$$typeof:r,type:_.type,key:H,ref:_.ref,props:_.props,_owner:_._owner}}function D(_){return typeof _=="object"&&_!==null&&_.$$typeof===r}function ee(_){var H={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(Se){return H[Se]})}var C=/\/+/g;function I(_,H){return typeof _=="object"&&_!==null&&_.key!=null?ee(""+_.key):H.toString(36)}function Q(_,H,Se,xe,be){var me=typeof _;(me==="undefined"||me==="boolean")&&(_=null);var Me=!1;if(_===null)Me=!0;else switch(me){case"string":case"number":Me=!0;break;case"object":switch(_.$$typeof){case r:case o:Me=!0}}if(Me)return Me=_,be=be(Me),_=xe===""?"."+I(Me,0):xe,X(be)?(Se="",_!=null&&(Se=_.replace(C,"$&/")+"/"),Q(be,H,Se,"",function(fe){return fe})):be!=null&&(D(be)&&(be=U(be,Se+(!be.key||Me&&Me.key===be.key?"":(""+be.key).replace(C,"$&/")+"/")+_)),H.push(be)),1;if(Me=0,xe=xe===""?".":xe+":",X(_))for(var Ce=0;Ce<_.length;Ce++){me=_[Ce];var _e=xe+I(me,Ce);Me+=Q(me,H,Se,_e,be)}else if(_e=M(_),typeof _e=="function")for(_=_e.call(_),Ce=0;!(me=_.next()).done;)me=me.value,_e=xe+I(me,Ce++),Me+=Q(me,H,Se,_e,be);else if(me==="object")throw H=String(_),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Me}function $(_,H,Se){if(_==null)return _;var xe=[],be=0;return Q(_,xe,"","",function(me){return H.call(Se,me,be++)}),xe}function ie(_){if(_._status===-1){var H=_._result;H=H(),H.then(function(Se){(_._status===0||_._status===-1)&&(_._status=1,_._result=Se)},function(Se){(_._status===0||_._status===-1)&&(_._status=2,_._result=Se)}),_._status===-1&&(_._status=0,_._result=H)}if(_._status===1)return _._result.default;throw _._result}var de={current:null},Y={transition:null},se={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:Y,ReactCurrentOwner:P};function te(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:$,forEach:function(_,H,Se){$(_,function(){H.apply(this,arguments)},Se)},count:function(_){var H=0;return $(_,function(){H++}),H},toArray:function(_){return $(_,function(H){return H})||[]},only:function(_){if(!D(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},Ee.Component=k,Ee.Fragment=i,Ee.Profiler=d,Ee.PureComponent=R,Ee.StrictMode=u,Ee.Suspense=h,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Ee.act=te,Ee.cloneElement=function(_,H,Se){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var xe=w({},_.props),be=_.key,me=_.ref,Me=_._owner;if(H!=null){if(H.ref!==void 0&&(me=H.ref,Me=P.current),H.key!==void 0&&(be=""+H.key),_.type&&_.type.defaultProps)var Ce=_.type.defaultProps;for(_e in H)q.call(H,_e)&&!B.hasOwnProperty(_e)&&(xe[_e]=H[_e]===void 0&&Ce!==void 0?Ce[_e]:H[_e])}var _e=arguments.length-2;if(_e===1)xe.children=Se;else if(1<_e){Ce=Array(_e);for(var fe=0;fe<_e;fe++)Ce[fe]=arguments[fe+2];xe.children=Ce}return{$$typeof:r,type:_.type,key:be,ref:me,props:xe,_owner:Me}},Ee.createContext=function(_){return _={$$typeof:p,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:f,_context:_},_.Consumer=_},Ee.createElement=z,Ee.createFactory=function(_){var H=z.bind(null,_);return H.type=_,H},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(_){return{$$typeof:x,render:_}},Ee.isValidElement=D,Ee.lazy=function(_){return{$$typeof:v,_payload:{_status:-1,_result:_},_init:ie}},Ee.memo=function(_,H){return{$$typeof:g,type:_,compare:H===void 0?null:H}},Ee.startTransition=function(_){var H=Y.transition;Y.transition={};try{_()}finally{Y.transition=H}},Ee.unstable_act=te,Ee.useCallback=function(_,H){return de.current.useCallback(_,H)},Ee.useContext=function(_){return de.current.useContext(_)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(_){return de.current.useDeferredValue(_)},Ee.useEffect=function(_,H){return de.current.useEffect(_,H)},Ee.useId=function(){return de.current.useId()},Ee.useImperativeHandle=function(_,H,Se){return de.current.useImperativeHandle(_,H,Se)},Ee.useInsertionEffect=function(_,H){return de.current.useInsertionEffect(_,H)},Ee.useLayoutEffect=function(_,H){return de.current.useLayoutEffect(_,H)},Ee.useMemo=function(_,H){return de.current.useMemo(_,H)},Ee.useReducer=function(_,H,Se){return de.current.useReducer(_,H,Se)},Ee.useRef=function(_){return de.current.useRef(_)},Ee.useState=function(_){return de.current.useState(_)},Ee.useSyncExternalStore=function(_,H,Se){return de.current.useSyncExternalStore(_,H,Se)},Ee.useTransition=function(){return de.current.useTransition()},Ee.version="18.3.1",Ee}var yu;function is(){return yu||(yu=1,fl.exports=Yf()),fl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xu;function Jf(){if(xu)return ts;xu=1;var r=is(),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,d=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function p(x,h,g){var v,y={},M=null,N=null;g!==void 0&&(M=""+g),h.key!==void 0&&(M=""+h.key),h.ref!==void 0&&(N=h.ref);for(v in h)u.call(h,v)&&!f.hasOwnProperty(v)&&(y[v]=h[v]);if(x&&x.defaultProps)for(v in h=x.defaultProps,h)y[v]===void 0&&(y[v]=h[v]);return{$$typeof:o,type:x,key:M,ref:N,props:y,_owner:d.current}}return ts.Fragment=i,ts.jsx=p,ts.jsxs=p,ts}var wu;function Zf(){return wu||(wu=1,dl.exports=Jf()),dl.exports}var l=Zf(),ho={},pl={exports:{}},St={},ml={exports:{}},hl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su;function ep(){return Su||(Su=1,(function(r){function o(Y,se){var te=Y.length;Y.push(se);e:for(;0<te;){var _=te-1>>>1,H=Y[_];if(0<d(H,se))Y[_]=se,Y[te]=H,te=_;else break e}}function i(Y){return Y.length===0?null:Y[0]}function u(Y){if(Y.length===0)return null;var se=Y[0],te=Y.pop();if(te!==se){Y[0]=te;e:for(var _=0,H=Y.length,Se=H>>>1;_<Se;){var xe=2*(_+1)-1,be=Y[xe],me=xe+1,Me=Y[me];if(0>d(be,te))me<H&&0>d(Me,be)?(Y[_]=Me,Y[me]=te,_=me):(Y[_]=be,Y[xe]=te,_=xe);else if(me<H&&0>d(Me,te))Y[_]=Me,Y[me]=te,_=me;else break e}}return se}function d(Y,se){var te=Y.sortIndex-se.sortIndex;return te!==0?te:Y.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var p=Date,x=p.now();r.unstable_now=function(){return p.now()-x}}var h=[],g=[],v=1,y=null,M=3,N=!1,w=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(Y){for(var se=i(g);se!==null;){if(se.callback===null)u(g);else if(se.startTime<=Y)u(g),se.sortIndex=se.expirationTime,o(h,se);else break;se=i(g)}}function X(Y){if(j=!1,W(Y),!w)if(i(h)!==null)w=!0,ie(q);else{var se=i(g);se!==null&&de(X,se.startTime-Y)}}function q(Y,se){w=!1,j&&(j=!1,L(z),z=-1),N=!0;var te=M;try{for(W(se),y=i(h);y!==null&&(!(y.expirationTime>se)||Y&&!ee());){var _=y.callback;if(typeof _=="function"){y.callback=null,M=y.priorityLevel;var H=_(y.expirationTime<=se);se=r.unstable_now(),typeof H=="function"?y.callback=H:y===i(h)&&u(h),W(se)}else u(h);y=i(h)}if(y!==null)var Se=!0;else{var xe=i(g);xe!==null&&de(X,xe.startTime-se),Se=!1}return Se}finally{y=null,M=te,N=!1}}var P=!1,B=null,z=-1,U=5,D=-1;function ee(){return!(r.unstable_now()-D<U)}function C(){if(B!==null){var Y=r.unstable_now();D=Y;var se=!0;try{se=B(!0,Y)}finally{se?I():(P=!1,B=null)}}else P=!1}var I;if(typeof R=="function")I=function(){R(C)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,$=Q.port2;Q.port1.onmessage=C,I=function(){$.postMessage(null)}}else I=function(){k(C,0)};function ie(Y){B=Y,P||(P=!0,I())}function de(Y,se){z=k(function(){Y(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_continueExecution=function(){w||N||(w=!0,ie(q))},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_getFirstCallbackNode=function(){return i(h)},r.unstable_next=function(Y){switch(M){case 1:case 2:case 3:var se=3;break;default:se=M}var te=M;M=se;try{return Y()}finally{M=te}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var te=M;M=Y;try{return se()}finally{M=te}},r.unstable_scheduleCallback=function(Y,se,te){var _=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?_+te:_):te=_,Y){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=te+H,Y={id:v++,callback:se,priorityLevel:Y,startTime:te,expirationTime:H,sortIndex:-1},te>_?(Y.sortIndex=te,o(g,Y),i(h)===null&&Y===i(g)&&(j?(L(z),z=-1):j=!0,de(X,te-_))):(Y.sortIndex=H,o(h,Y),w||N||(w=!0,ie(q))),Y},r.unstable_shouldYield=ee,r.unstable_wrapCallback=function(Y){var se=M;return function(){var te=M;M=se;try{return Y.apply(this,arguments)}finally{M=te}}}})(hl)),hl}var ku;function tp(){return ku||(ku=1,ml.exports=ep()),ml.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mu;function np(){if(Mu)return St;Mu=1;var r=is(),o=tp();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,d={};function f(e,t){p(e,t),p(e+"Capture",t)}function p(e,t){for(d[e]=t,e=0;e<t.length;e++)u.add(t[e])}var x=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},y={};function M(e){return h.call(y,e)?!0:h.call(v,e)?!1:g.test(e)?y[e]=!0:(v[e]=!0,!1)}function N(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w(e,t,n,s){if(t===null||typeof t>"u"||N(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function j(e,t,n,s,a,c,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=m}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){k[e]=new j(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];k[t]=new j(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){k[e]=new j(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){k[e]=new j(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){k[e]=new j(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){k[e]=new j(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){k[e]=new j(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){k[e]=new j(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){k[e]=new j(e,5,!1,e.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function R(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(L,R);k[t]=new j(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(L,R);k[t]=new j(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(L,R);k[t]=new j(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){k[e]=new j(e,1,!1,e.toLowerCase(),null,!1,!1)}),k.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){k[e]=new j(e,1,!1,e.toLowerCase(),null,!0,!0)});function W(e,t,n,s){var a=k.hasOwnProperty(t)?k[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(w(t,n,a,s)&&(n=null),s||a===null?M(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),P=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),ee=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),Y=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=Y&&e[Y]||e["@@iterator"],typeof e=="function"?e:null)}var te=Object.assign,_;function H(e){if(_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||""}return`
`+_+e}var Se=!1;function xe(e,t){if(!e||Se)return"";Se=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(F){var s=F}Reflect.construct(e,[],t)}else{try{t.call()}catch(F){s=F}e.call(t.prototype)}else{try{throw Error()}catch(F){s=F}e()}}catch(F){if(F&&s&&typeof F.stack=="string"){for(var a=F.stack.split(`
`),c=s.stack.split(`
`),m=a.length-1,S=c.length-1;1<=m&&0<=S&&a[m]!==c[S];)S--;for(;1<=m&&0<=S;m--,S--)if(a[m]!==c[S]){if(m!==1||S!==1)do if(m--,S--,0>S||a[m]!==c[S]){var b=`
`+a[m].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=m&&0<=S);break}}}finally{Se=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function be(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=xe(e.type,!1),e;case 11:return e=xe(e.type.render,!1),e;case 1:return e=xe(e.type,!0),e;default:return""}}function me(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case P:return"Portal";case U:return"Profiler";case z:return"StrictMode";case I:return"Suspense";case Q:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ee:return(e.displayName||"Context")+".Consumer";case D:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case ie:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}function Me(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(t);case 8:return t===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ce(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fe(e){var t=_e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(m){s=""+m,c.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Be(e){e._valueTracker||(e._valueTracker=fe(e))}function $e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=_e(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Xe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dt(e,t){var n=t.checked;return te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function At(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Ce(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function J(e,t){t=t.checked,t!=null&&W(e,"checked",t,!1)}function ve(e,t){J(e,t);var n=Ce(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?we(e,t.type,n):t.hasOwnProperty("defaultValue")&&we(e,t.type,Ce(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function je(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function we(e,t,n){(t!=="number"||Xe(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Pe=Array.isArray;function Re(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Ce(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ht(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yt(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(i(92));if(Pe(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ce(n)}}function Ne(e,t){var n=Ce(t.value),s=Ce(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Ft(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ae(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nt(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rt,En=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rt=rt||document.createElement("div"),rt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ed=["Webkit","ms","Moz","O"];Object.keys(yr).forEach(function(e){ed.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yr[t]=yr[e]})});function Tl(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yr.hasOwnProperty(e)&&yr[e]?(""+t).trim():t+"px"}function Ll(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=Tl(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var td=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mo(e,t){if(t){if(td[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function bo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jo=null;function Co(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Eo=null,Vn=null,Hn=null;function Ol(e){if(e=qr(e)){if(typeof Eo!="function")throw Error(i(280));var t=e.stateNode;t&&(t=Ps(t),Eo(e.stateNode,e.type,t))}}function Il(e){Vn?Hn?Hn.push(e):Hn=[e]:Vn=e}function Al(){if(Vn){var e=Vn,t=Hn;if(Hn=Vn=null,Ol(e),t)for(e=0;e<t.length;e++)Ol(t[e])}}function Fl(e,t){return e(t)}function Dl(){}var No=!1;function zl(e,t,n){if(No)return e(t,n);No=!0;try{return Fl(e,t,n)}finally{No=!1,(Vn!==null||Hn!==null)&&(Dl(),Al())}}function xr(e,t){var n=e.stateNode;if(n===null)return null;var s=Ps(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(i(231,t,typeof n));return n}var Po=!1;if(x)try{var wr={};Object.defineProperty(wr,"passive",{get:function(){Po=!0}}),window.addEventListener("test",wr,wr),window.removeEventListener("test",wr,wr)}catch{Po=!1}function nd(e,t,n,s,a,c,m,S,b){var F=Array.prototype.slice.call(arguments,3);try{t.apply(n,F)}catch(K){this.onError(K)}}var Sr=!1,ls=null,as=!1,_o=null,rd={onError:function(e){Sr=!0,ls=e}};function sd(e,t,n,s,a,c,m,S,b){Sr=!1,ls=null,nd.apply(rd,arguments)}function od(e,t,n,s,a,c,m,S,b){if(sd.apply(this,arguments),Sr){if(Sr){var F=ls;Sr=!1,ls=null}else throw Error(i(198));as||(as=!0,_o=F)}}function Nn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ql(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bl(e){if(Nn(e)!==e)throw Error(i(188))}function id(e){var t=e.alternate;if(!t){if(t=Nn(e),t===null)throw Error(i(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return Bl(a),e;if(c===s)return Bl(a),t;c=c.sibling}throw Error(i(188))}if(n.return!==s.return)n=a,s=c;else{for(var m=!1,S=a.child;S;){if(S===n){m=!0,n=a,s=c;break}if(S===s){m=!0,s=a,n=c;break}S=S.sibling}if(!m){for(S=c.child;S;){if(S===n){m=!0,n=c,s=a;break}if(S===s){m=!0,s=c,n=a;break}S=S.sibling}if(!m)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function Ul(e){return e=id(e),e!==null?Vl(e):null}function Vl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Vl(e);if(t!==null)return t;e=e.sibling}return null}var Hl=o.unstable_scheduleCallback,$l=o.unstable_cancelCallback,ld=o.unstable_shouldYield,ad=o.unstable_requestPaint,We=o.unstable_now,cd=o.unstable_getCurrentPriorityLevel,Ro=o.unstable_ImmediatePriority,Wl=o.unstable_UserBlockingPriority,cs=o.unstable_NormalPriority,ud=o.unstable_LowPriority,Gl=o.unstable_IdlePriority,us=null,Wt=null;function dd(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(us,e,void 0,(e.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:md,fd=Math.log,pd=Math.LN2;function md(e){return e>>>=0,e===0?32:31-(fd(e)/pd|0)|0}var ds=64,fs=4194304;function kr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ps(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,c=e.pingedLanes,m=n&268435455;if(m!==0){var S=m&~a;S!==0?s=kr(S):(c&=m,c!==0&&(s=kr(c)))}else m=n&~a,m!==0?s=kr(m):c!==0&&(s=kr(c));if(s===0)return 0;if(t!==0&&t!==s&&(t&a)===0&&(a=s&-s,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if((s&4)!==0&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Dt(t),a=1<<n,s|=e[n],t&=~a;return s}function hd(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gd(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var m=31-Dt(c),S=1<<m,b=a[m];b===-1?((S&n)===0||(S&s)!==0)&&(a[m]=hd(S,t)):b<=t&&(e.expiredLanes|=S),c&=~S}}function To(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ql(){var e=ds;return ds<<=1,(ds&4194240)===0&&(ds=64),e}function Lo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Dt(t),e[t]=n}function vd(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Dt(n),c=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~c}}function Oo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Dt(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var Oe=0;function Kl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Xl,Io,Yl,Jl,Zl,Ao=!1,ms=[],an=null,cn=null,un=null,br=new Map,jr=new Map,dn=[],yd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ea(e,t){switch(e){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":br.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jr.delete(t.pointerId)}}function Cr(e,t,n,s,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:c,targetContainers:[a]},t!==null&&(t=qr(t),t!==null&&Io(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function xd(e,t,n,s,a){switch(t){case"focusin":return an=Cr(an,e,t,n,s,a),!0;case"dragenter":return cn=Cr(cn,e,t,n,s,a),!0;case"mouseover":return un=Cr(un,e,t,n,s,a),!0;case"pointerover":var c=a.pointerId;return br.set(c,Cr(br.get(c)||null,e,t,n,s,a)),!0;case"gotpointercapture":return c=a.pointerId,jr.set(c,Cr(jr.get(c)||null,e,t,n,s,a)),!0}return!1}function ta(e){var t=Pn(e.target);if(t!==null){var n=Nn(t);if(n!==null){if(t=n.tag,t===13){if(t=ql(n),t!==null){e.blockedOn=t,Zl(e.priority,function(){Yl(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Do(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);jo=s,n.target.dispatchEvent(s),jo=null}else return t=qr(n),t!==null&&Io(t),e.blockedOn=n,!1;t.shift()}return!0}function na(e,t,n){hs(e)&&n.delete(t)}function wd(){Ao=!1,an!==null&&hs(an)&&(an=null),cn!==null&&hs(cn)&&(cn=null),un!==null&&hs(un)&&(un=null),br.forEach(na),jr.forEach(na)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,Ao||(Ao=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,wd)))}function Nr(e){function t(a){return Er(a,e)}if(0<ms.length){Er(ms[0],e);for(var n=1;n<ms.length;n++){var s=ms[n];s.blockedOn===e&&(s.blockedOn=null)}}for(an!==null&&Er(an,e),cn!==null&&Er(cn,e),un!==null&&Er(un,e),br.forEach(t),jr.forEach(t),n=0;n<dn.length;n++)s=dn[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<dn.length&&(n=dn[0],n.blockedOn===null);)ta(n),n.blockedOn===null&&dn.shift()}var $n=X.ReactCurrentBatchConfig,gs=!0;function Sd(e,t,n,s){var a=Oe,c=$n.transition;$n.transition=null;try{Oe=1,Fo(e,t,n,s)}finally{Oe=a,$n.transition=c}}function kd(e,t,n,s){var a=Oe,c=$n.transition;$n.transition=null;try{Oe=4,Fo(e,t,n,s)}finally{Oe=a,$n.transition=c}}function Fo(e,t,n,s){if(gs){var a=Do(e,t,n,s);if(a===null)ti(e,t,s,vs,n),ea(e,s);else if(xd(a,e,t,n,s))s.stopPropagation();else if(ea(e,s),t&4&&-1<yd.indexOf(e)){for(;a!==null;){var c=qr(a);if(c!==null&&Xl(c),c=Do(e,t,n,s),c===null&&ti(e,t,s,vs,n),c===a)break;a=c}a!==null&&s.stopPropagation()}else ti(e,t,s,null,n)}}var vs=null;function Do(e,t,n,s){if(vs=null,e=Co(s),e=Pn(e),e!==null)if(t=Nn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ql(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vs=e,null}function ra(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cd()){case Ro:return 1;case Wl:return 4;case cs:case ud:return 16;case Gl:return 536870912;default:return 16}default:return 16}}var fn=null,zo=null,ys=null;function sa(){if(ys)return ys;var e,t=zo,n=t.length,s,a="value"in fn?fn.value:fn.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var m=n-e;for(s=1;s<=m&&t[n-s]===a[c-s];s++);return ys=a.slice(e,1<s?1-s:void 0)}function xs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ws(){return!0}function oa(){return!1}function bt(e){function t(n,s,a,c,m){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=c,this.target=m,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(n=e[S],this[S]=n?n(c):c[S]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?ws:oa,this.isPropagationStopped=oa,this}return te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),t}var Wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=bt(Wn),Pr=te({},Wn,{view:0,detail:0}),Md=bt(Pr),Bo,Uo,_r,Ss=te({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ho,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_r&&(_r&&e.type==="mousemove"?(Bo=e.screenX-_r.screenX,Uo=e.screenY-_r.screenY):Uo=Bo=0,_r=e),Bo)},movementY:function(e){return"movementY"in e?e.movementY:Uo}}),ia=bt(Ss),bd=te({},Ss,{dataTransfer:0}),jd=bt(bd),Cd=te({},Pr,{relatedTarget:0}),Vo=bt(Cd),Ed=te({},Wn,{animationName:0,elapsedTime:0,pseudoElement:0}),Nd=bt(Ed),Pd=te({},Wn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_d=bt(Pd),Rd=te({},Wn,{data:0}),la=bt(Rd),Td={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ld={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Id(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Od[e])?!!t[e]:!1}function Ho(){return Id}var Ad=te({},Pr,{key:function(e){if(e.key){var t=Td[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ld[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ho,charCode:function(e){return e.type==="keypress"?xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fd=bt(Ad),Dd=te({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=bt(Dd),zd=te({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ho}),qd=bt(zd),Bd=te({},Wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ud=bt(Bd),Vd=te({},Ss,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hd=bt(Vd),$d=[9,13,27,32],$o=x&&"CompositionEvent"in window,Rr=null;x&&"documentMode"in document&&(Rr=document.documentMode);var Wd=x&&"TextEvent"in window&&!Rr,ca=x&&(!$o||Rr&&8<Rr&&11>=Rr),ua=" ",da=!1;function fa(e,t){switch(e){case"keyup":return $d.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gn=!1;function Gd(e,t){switch(e){case"compositionend":return pa(t);case"keypress":return t.which!==32?null:(da=!0,ua);case"textInput":return e=t.data,e===ua&&da?null:e;default:return null}}function Qd(e,t){if(Gn)return e==="compositionend"||!$o&&fa(e,t)?(e=sa(),ys=zo=fn=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ca&&t.locale!=="ko"?null:t.data;default:return null}}var Kd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kd[e.type]:t==="textarea"}function ha(e,t,n,s){Il(s),t=Cs(t,"onChange"),0<t.length&&(n=new qo("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Tr=null,Lr=null;function Xd(e){La(e,0)}function ks(e){var t=Jn(e);if($e(t))return e}function Yd(e,t){if(e==="change")return t}var ga=!1;if(x){var Wo;if(x){var Go="oninput"in document;if(!Go){var va=document.createElement("div");va.setAttribute("oninput","return;"),Go=typeof va.oninput=="function"}Wo=Go}else Wo=!1;ga=Wo&&(!document.documentMode||9<document.documentMode)}function ya(){Tr&&(Tr.detachEvent("onpropertychange",xa),Lr=Tr=null)}function xa(e){if(e.propertyName==="value"&&ks(Lr)){var t=[];ha(t,Lr,e,Co(e)),zl(Xd,t)}}function Jd(e,t,n){e==="focusin"?(ya(),Tr=t,Lr=n,Tr.attachEvent("onpropertychange",xa)):e==="focusout"&&ya()}function Zd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ks(Lr)}function ef(e,t){if(e==="click")return ks(t)}function tf(e,t){if(e==="input"||e==="change")return ks(t)}function nf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:nf;function Or(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!h.call(t,a)||!zt(e[a],t[a]))return!1}return!0}function wa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sa(e,t){var n=wa(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wa(n)}}function ka(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ka(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ma(){for(var e=window,t=Xe();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xe(e.document)}return t}function Qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rf(e){var t=Ma(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ka(n.ownerDocument.documentElement,n)){if(s!==null&&Qo(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(s.start,a);s=s.end===void 0?c:Math.min(s.end,a),!e.extend&&c>s&&(a=s,s=c,c=a),a=Sa(n,c);var m=Sa(n,s);a&&m&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>s?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sf=x&&"documentMode"in document&&11>=document.documentMode,Qn=null,Ko=null,Ir=null,Xo=!1;function ba(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xo||Qn==null||Qn!==Xe(s)||(s=Qn,"selectionStart"in s&&Qo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ir&&Or(Ir,s)||(Ir=s,s=Cs(Ko,"onSelect"),0<s.length&&(t=new qo("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Qn)))}function Ms(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kn={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionend:Ms("Transition","TransitionEnd")},Yo={},ja={};x&&(ja=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function bs(e){if(Yo[e])return Yo[e];if(!Kn[e])return e;var t=Kn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ja)return Yo[e]=t[n];return e}var Ca=bs("animationend"),Ea=bs("animationiteration"),Na=bs("animationstart"),Pa=bs("transitionend"),_a=new Map,Ra="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(e,t){_a.set(e,t),f(t,[e])}for(var Jo=0;Jo<Ra.length;Jo++){var Zo=Ra[Jo],of=Zo.toLowerCase(),lf=Zo[0].toUpperCase()+Zo.slice(1);pn(of,"on"+lf)}pn(Ca,"onAnimationEnd"),pn(Ea,"onAnimationIteration"),pn(Na,"onAnimationStart"),pn("dblclick","onDoubleClick"),pn("focusin","onFocus"),pn("focusout","onBlur"),pn(Pa,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),af=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Ta(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,od(s,t,void 0,e),e.currentTarget=null}function La(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var c=void 0;if(t)for(var m=s.length-1;0<=m;m--){var S=s[m],b=S.instance,F=S.currentTarget;if(S=S.listener,b!==c&&a.isPropagationStopped())break e;Ta(a,S,F),c=b}else for(m=0;m<s.length;m++){if(S=s[m],b=S.instance,F=S.currentTarget,S=S.listener,b!==c&&a.isPropagationStopped())break e;Ta(a,S,F),c=b}}}if(as)throw e=_o,as=!1,_o=null,e}function De(e,t){var n=t[li];n===void 0&&(n=t[li]=new Set);var s=e+"__bubble";n.has(s)||(Oa(t,e,2,!1),n.add(s))}function ei(e,t,n){var s=0;t&&(s|=4),Oa(n,e,s,t)}var js="_reactListening"+Math.random().toString(36).slice(2);function Fr(e){if(!e[js]){e[js]=!0,u.forEach(function(n){n!=="selectionchange"&&(af.has(n)||ei(n,!1,e),ei(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[js]||(t[js]=!0,ei("selectionchange",!1,t))}}function Oa(e,t,n,s){switch(ra(t)){case 1:var a=Sd;break;case 4:a=kd;break;default:a=Fo}n=a.bind(null,t,n,e),a=void 0,!Po||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ti(e,t,n,s,a){var c=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var S=s.stateNode.containerInfo;if(S===a||S.nodeType===8&&S.parentNode===a)break;if(m===4)for(m=s.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===a||b.nodeType===8&&b.parentNode===a))return;m=m.return}for(;S!==null;){if(m=Pn(S),m===null)return;if(b=m.tag,b===5||b===6){s=c=m;continue e}S=S.parentNode}}s=s.return}zl(function(){var F=c,K=Co(n),Z=[];e:{var G=_a.get(e);if(G!==void 0){var oe=qo,ae=e;switch(e){case"keypress":if(xs(n)===0)break e;case"keydown":case"keyup":oe=Fd;break;case"focusin":ae="focus",oe=Vo;break;case"focusout":ae="blur",oe=Vo;break;case"beforeblur":case"afterblur":oe=Vo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=jd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=qd;break;case Ca:case Ea:case Na:oe=Nd;break;case Pa:oe=Ud;break;case"scroll":oe=Md;break;case"wheel":oe=Hd;break;case"copy":case"cut":case"paste":oe=_d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=aa}var ce=(t&4)!==0,Ge=!ce&&e==="scroll",T=ce?G!==null?G+"Capture":null:G;ce=[];for(var E=F,O;E!==null;){O=E;var ne=O.stateNode;if(O.tag===5&&ne!==null&&(O=ne,T!==null&&(ne=xr(E,T),ne!=null&&ce.push(Dr(E,ne,O)))),Ge)break;E=E.return}0<ce.length&&(G=new oe(G,ae,null,n,K),Z.push({event:G,listeners:ce}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",oe=e==="mouseout"||e==="pointerout",G&&n!==jo&&(ae=n.relatedTarget||n.fromElement)&&(Pn(ae)||ae[Jt]))break e;if((oe||G)&&(G=K.window===K?K:(G=K.ownerDocument)?G.defaultView||G.parentWindow:window,oe?(ae=n.relatedTarget||n.toElement,oe=F,ae=ae?Pn(ae):null,ae!==null&&(Ge=Nn(ae),ae!==Ge||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(oe=null,ae=F),oe!==ae)){if(ce=ia,ne="onMouseLeave",T="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(ce=aa,ne="onPointerLeave",T="onPointerEnter",E="pointer"),Ge=oe==null?G:Jn(oe),O=ae==null?G:Jn(ae),G=new ce(ne,E+"leave",oe,n,K),G.target=Ge,G.relatedTarget=O,ne=null,Pn(K)===F&&(ce=new ce(T,E+"enter",ae,n,K),ce.target=O,ce.relatedTarget=Ge,ne=ce),Ge=ne,oe&&ae)t:{for(ce=oe,T=ae,E=0,O=ce;O;O=Xn(O))E++;for(O=0,ne=T;ne;ne=Xn(ne))O++;for(;0<E-O;)ce=Xn(ce),E--;for(;0<O-E;)T=Xn(T),O--;for(;E--;){if(ce===T||T!==null&&ce===T.alternate)break t;ce=Xn(ce),T=Xn(T)}ce=null}else ce=null;oe!==null&&Ia(Z,G,oe,ce,!1),ae!==null&&Ge!==null&&Ia(Z,Ge,ae,ce,!0)}}e:{if(G=F?Jn(F):window,oe=G.nodeName&&G.nodeName.toLowerCase(),oe==="select"||oe==="input"&&G.type==="file")var ue=Yd;else if(ma(G))if(ga)ue=tf;else{ue=Zd;var he=Jd}else(oe=G.nodeName)&&oe.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ue=ef);if(ue&&(ue=ue(e,F))){ha(Z,ue,n,K);break e}he&&he(e,G,F),e==="focusout"&&(he=G._wrapperState)&&he.controlled&&G.type==="number"&&we(G,"number",G.value)}switch(he=F?Jn(F):window,e){case"focusin":(ma(he)||he.contentEditable==="true")&&(Qn=he,Ko=F,Ir=null);break;case"focusout":Ir=Ko=Qn=null;break;case"mousedown":Xo=!0;break;case"contextmenu":case"mouseup":case"dragend":Xo=!1,ba(Z,n,K);break;case"selectionchange":if(sf)break;case"keydown":case"keyup":ba(Z,n,K)}var ge;if($o)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Gn?fa(e,n)&&(ye="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ye="onCompositionStart");ye&&(ca&&n.locale!=="ko"&&(Gn||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Gn&&(ge=sa()):(fn=K,zo="value"in fn?fn.value:fn.textContent,Gn=!0)),he=Cs(F,ye),0<he.length&&(ye=new la(ye,e,null,n,K),Z.push({event:ye,listeners:he}),ge?ye.data=ge:(ge=pa(n),ge!==null&&(ye.data=ge)))),(ge=Wd?Gd(e,n):Qd(e,n))&&(F=Cs(F,"onBeforeInput"),0<F.length&&(K=new la("onBeforeInput","beforeinput",null,n,K),Z.push({event:K,listeners:F}),K.data=ge))}La(Z,t)})}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cs(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=xr(e,n),c!=null&&s.unshift(Dr(e,c,a)),c=xr(e,t),c!=null&&s.push(Dr(e,c,a))),e=e.return}return s}function Xn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ia(e,t,n,s,a){for(var c=t._reactName,m=[];n!==null&&n!==s;){var S=n,b=S.alternate,F=S.stateNode;if(b!==null&&b===s)break;S.tag===5&&F!==null&&(S=F,a?(b=xr(n,c),b!=null&&m.unshift(Dr(n,b,S))):a||(b=xr(n,c),b!=null&&m.push(Dr(n,b,S)))),n=n.return}m.length!==0&&e.push({event:t,listeners:m})}var cf=/\r\n?/g,uf=/\u0000|\uFFFD/g;function Aa(e){return(typeof e=="string"?e:""+e).replace(cf,`
`).replace(uf,"")}function Es(e,t,n){if(t=Aa(t),Aa(e)!==t&&n)throw Error(i(425))}function Ns(){}var ni=null,ri=null;function si(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oi=typeof setTimeout=="function"?setTimeout:void 0,df=typeof clearTimeout=="function"?clearTimeout:void 0,Fa=typeof Promise=="function"?Promise:void 0,ff=typeof queueMicrotask=="function"?queueMicrotask:typeof Fa<"u"?function(e){return Fa.resolve(null).then(e).catch(pf)}:oi;function pf(e){setTimeout(function(){throw e})}function ii(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Nr(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Nr(t)}function mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Da(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Yn=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Yn,zr="__reactProps$"+Yn,Jt="__reactContainer$"+Yn,li="__reactEvents$"+Yn,mf="__reactListeners$"+Yn,hf="__reactHandles$"+Yn;function Pn(e){var t=e[Gt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jt]||n[Gt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Da(e);e!==null;){if(n=e[Gt])return n;e=Da(e)}return t}e=n,n=e.parentNode}return null}function qr(e){return e=e[Gt]||e[Jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Ps(e){return e[zr]||null}var ai=[],Zn=-1;function hn(e){return{current:e}}function ze(e){0>Zn||(e.current=ai[Zn],ai[Zn]=null,Zn--)}function Fe(e,t){Zn++,ai[Zn]=e.current,e.current=t}var gn={},lt=hn(gn),gt=hn(!1),_n=gn;function er(e,t){var n=e.type.contextTypes;if(!n)return gn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vt(e){return e=e.childContextTypes,e!=null}function _s(){ze(gt),ze(lt)}function za(e,t,n){if(lt.current!==gn)throw Error(i(168));Fe(lt,t),Fe(gt,n)}function qa(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(i(108,Me(e)||"Unknown",a));return te({},n,s)}function Rs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gn,_n=lt.current,Fe(lt,e),Fe(gt,gt.current),!0}function Ba(e,t,n){var s=e.stateNode;if(!s)throw Error(i(169));n?(e=qa(e,t,_n),s.__reactInternalMemoizedMergedChildContext=e,ze(gt),ze(lt),Fe(lt,e)):ze(gt),Fe(gt,n)}var Zt=null,Ts=!1,ci=!1;function Ua(e){Zt===null?Zt=[e]:Zt.push(e)}function gf(e){Ts=!0,Ua(e)}function vn(){if(!ci&&Zt!==null){ci=!0;var e=0,t=Oe;try{var n=Zt;for(Oe=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Zt=null,Ts=!1}catch(a){throw Zt!==null&&(Zt=Zt.slice(e+1)),Hl(Ro,vn),a}finally{Oe=t,ci=!1}}return null}var tr=[],nr=0,Ls=null,Os=0,Pt=[],_t=0,Rn=null,en=1,tn="";function Tn(e,t){tr[nr++]=Os,tr[nr++]=Ls,Ls=e,Os=t}function Va(e,t,n){Pt[_t++]=en,Pt[_t++]=tn,Pt[_t++]=Rn,Rn=e;var s=en;e=tn;var a=32-Dt(s)-1;s&=~(1<<a),n+=1;var c=32-Dt(t)+a;if(30<c){var m=a-a%5;c=(s&(1<<m)-1).toString(32),s>>=m,a-=m,en=1<<32-Dt(t)+a|n<<a|s,tn=c+e}else en=1<<c|n<<a|s,tn=e}function ui(e){e.return!==null&&(Tn(e,1),Va(e,1,0))}function di(e){for(;e===Ls;)Ls=tr[--nr],tr[nr]=null,Os=tr[--nr],tr[nr]=null;for(;e===Rn;)Rn=Pt[--_t],Pt[_t]=null,tn=Pt[--_t],Pt[_t]=null,en=Pt[--_t],Pt[_t]=null}var jt=null,Ct=null,qe=!1,qt=null;function Ha(e,t){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $a(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,Ct=mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,Ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rn!==null?{id:en,overflow:tn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,Ct=null,!0):!1;default:return!1}}function fi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pi(e){if(qe){var t=Ct;if(t){var n=t;if(!$a(e,t)){if(fi(e))throw Error(i(418));t=mn(n.nextSibling);var s=jt;t&&$a(e,t)?Ha(s,n):(e.flags=e.flags&-4097|2,qe=!1,jt=e)}}else{if(fi(e))throw Error(i(418));e.flags=e.flags&-4097|2,qe=!1,jt=e}}}function Wa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function Is(e){if(e!==jt)return!1;if(!qe)return Wa(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!si(e.type,e.memoizedProps)),t&&(t=Ct)){if(fi(e))throw Ga(),Error(i(418));for(;t;)Ha(e,t),t=mn(t.nextSibling)}if(Wa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ct=mn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ct=null}}else Ct=jt?mn(e.stateNode.nextSibling):null;return!0}function Ga(){for(var e=Ct;e;)e=mn(e.nextSibling)}function rr(){Ct=jt=null,qe=!1}function mi(e){qt===null?qt=[e]:qt.push(e)}var vf=X.ReactCurrentBatchConfig;function Br(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(i(309));var s=n.stateNode}if(!s)throw Error(i(147,e));var a=s,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(m){var S=a.refs;m===null?delete S[c]:S[c]=m},t._stringRef=c,t)}if(typeof e!="string")throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function As(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){var t=e._init;return t(e._payload)}function Ka(e){function t(T,E){if(e){var O=T.deletions;O===null?(T.deletions=[E],T.flags|=16):O.push(E)}}function n(T,E){if(!e)return null;for(;E!==null;)t(T,E),E=E.sibling;return null}function s(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function a(T,E){return T=jn(T,E),T.index=0,T.sibling=null,T}function c(T,E,O){return T.index=O,e?(O=T.alternate,O!==null?(O=O.index,O<E?(T.flags|=2,E):O):(T.flags|=2,E)):(T.flags|=1048576,E)}function m(T){return e&&T.alternate===null&&(T.flags|=2),T}function S(T,E,O,ne){return E===null||E.tag!==6?(E=ol(O,T.mode,ne),E.return=T,E):(E=a(E,O),E.return=T,E)}function b(T,E,O,ne){var ue=O.type;return ue===B?K(T,E,O.props.children,ne,O.key):E!==null&&(E.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===ie&&Qa(ue)===E.type)?(ne=a(E,O.props),ne.ref=Br(T,E,O),ne.return=T,ne):(ne=io(O.type,O.key,O.props,null,T.mode,ne),ne.ref=Br(T,E,O),ne.return=T,ne)}function F(T,E,O,ne){return E===null||E.tag!==4||E.stateNode.containerInfo!==O.containerInfo||E.stateNode.implementation!==O.implementation?(E=il(O,T.mode,ne),E.return=T,E):(E=a(E,O.children||[]),E.return=T,E)}function K(T,E,O,ne,ue){return E===null||E.tag!==7?(E=qn(O,T.mode,ne,ue),E.return=T,E):(E=a(E,O),E.return=T,E)}function Z(T,E,O){if(typeof E=="string"&&E!==""||typeof E=="number")return E=ol(""+E,T.mode,O),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case q:return O=io(E.type,E.key,E.props,null,T.mode,O),O.ref=Br(T,null,E),O.return=T,O;case P:return E=il(E,T.mode,O),E.return=T,E;case ie:var ne=E._init;return Z(T,ne(E._payload),O)}if(Pe(E)||se(E))return E=qn(E,T.mode,O,null),E.return=T,E;As(T,E)}return null}function G(T,E,O,ne){var ue=E!==null?E.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return ue!==null?null:S(T,E,""+O,ne);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case q:return O.key===ue?b(T,E,O,ne):null;case P:return O.key===ue?F(T,E,O,ne):null;case ie:return ue=O._init,G(T,E,ue(O._payload),ne)}if(Pe(O)||se(O))return ue!==null?null:K(T,E,O,ne,null);As(T,O)}return null}function oe(T,E,O,ne,ue){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return T=T.get(O)||null,S(E,T,""+ne,ue);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case q:return T=T.get(ne.key===null?O:ne.key)||null,b(E,T,ne,ue);case P:return T=T.get(ne.key===null?O:ne.key)||null,F(E,T,ne,ue);case ie:var he=ne._init;return oe(T,E,O,he(ne._payload),ue)}if(Pe(ne)||se(ne))return T=T.get(O)||null,K(E,T,ne,ue,null);As(E,ne)}return null}function ae(T,E,O,ne){for(var ue=null,he=null,ge=E,ye=E=0,nt=null;ge!==null&&ye<O.length;ye++){ge.index>ye?(nt=ge,ge=null):nt=ge.sibling;var Le=G(T,ge,O[ye],ne);if(Le===null){ge===null&&(ge=nt);break}e&&ge&&Le.alternate===null&&t(T,ge),E=c(Le,E,ye),he===null?ue=Le:he.sibling=Le,he=Le,ge=nt}if(ye===O.length)return n(T,ge),qe&&Tn(T,ye),ue;if(ge===null){for(;ye<O.length;ye++)ge=Z(T,O[ye],ne),ge!==null&&(E=c(ge,E,ye),he===null?ue=ge:he.sibling=ge,he=ge);return qe&&Tn(T,ye),ue}for(ge=s(T,ge);ye<O.length;ye++)nt=oe(ge,T,ye,O[ye],ne),nt!==null&&(e&&nt.alternate!==null&&ge.delete(nt.key===null?ye:nt.key),E=c(nt,E,ye),he===null?ue=nt:he.sibling=nt,he=nt);return e&&ge.forEach(function(Cn){return t(T,Cn)}),qe&&Tn(T,ye),ue}function ce(T,E,O,ne){var ue=se(O);if(typeof ue!="function")throw Error(i(150));if(O=ue.call(O),O==null)throw Error(i(151));for(var he=ue=null,ge=E,ye=E=0,nt=null,Le=O.next();ge!==null&&!Le.done;ye++,Le=O.next()){ge.index>ye?(nt=ge,ge=null):nt=ge.sibling;var Cn=G(T,ge,Le.value,ne);if(Cn===null){ge===null&&(ge=nt);break}e&&ge&&Cn.alternate===null&&t(T,ge),E=c(Cn,E,ye),he===null?ue=Cn:he.sibling=Cn,he=Cn,ge=nt}if(Le.done)return n(T,ge),qe&&Tn(T,ye),ue;if(ge===null){for(;!Le.done;ye++,Le=O.next())Le=Z(T,Le.value,ne),Le!==null&&(E=c(Le,E,ye),he===null?ue=Le:he.sibling=Le,he=Le);return qe&&Tn(T,ye),ue}for(ge=s(T,ge);!Le.done;ye++,Le=O.next())Le=oe(ge,T,ye,Le.value,ne),Le!==null&&(e&&Le.alternate!==null&&ge.delete(Le.key===null?ye:Le.key),E=c(Le,E,ye),he===null?ue=Le:he.sibling=Le,he=Le);return e&&ge.forEach(function(Xf){return t(T,Xf)}),qe&&Tn(T,ye),ue}function Ge(T,E,O,ne){if(typeof O=="object"&&O!==null&&O.type===B&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case q:e:{for(var ue=O.key,he=E;he!==null;){if(he.key===ue){if(ue=O.type,ue===B){if(he.tag===7){n(T,he.sibling),E=a(he,O.props.children),E.return=T,T=E;break e}}else if(he.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===ie&&Qa(ue)===he.type){n(T,he.sibling),E=a(he,O.props),E.ref=Br(T,he,O),E.return=T,T=E;break e}n(T,he);break}else t(T,he);he=he.sibling}O.type===B?(E=qn(O.props.children,T.mode,ne,O.key),E.return=T,T=E):(ne=io(O.type,O.key,O.props,null,T.mode,ne),ne.ref=Br(T,E,O),ne.return=T,T=ne)}return m(T);case P:e:{for(he=O.key;E!==null;){if(E.key===he)if(E.tag===4&&E.stateNode.containerInfo===O.containerInfo&&E.stateNode.implementation===O.implementation){n(T,E.sibling),E=a(E,O.children||[]),E.return=T,T=E;break e}else{n(T,E);break}else t(T,E);E=E.sibling}E=il(O,T.mode,ne),E.return=T,T=E}return m(T);case ie:return he=O._init,Ge(T,E,he(O._payload),ne)}if(Pe(O))return ae(T,E,O,ne);if(se(O))return ce(T,E,O,ne);As(T,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,E!==null&&E.tag===6?(n(T,E.sibling),E=a(E,O),E.return=T,T=E):(n(T,E),E=ol(O,T.mode,ne),E.return=T,T=E),m(T)):n(T,E)}return Ge}var sr=Ka(!0),Xa=Ka(!1),Fs=hn(null),Ds=null,or=null,hi=null;function gi(){hi=or=Ds=null}function vi(e){var t=Fs.current;ze(Fs),e._currentValue=t}function yi(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ir(e,t){Ds=e,hi=or=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(yt=!0),e.firstContext=null)}function Rt(e){var t=e._currentValue;if(hi!==e)if(e={context:e,memoizedValue:t,next:null},or===null){if(Ds===null)throw Error(i(308));or=e,Ds.dependencies={lanes:0,firstContext:e}}else or=or.next=e;return t}var Ln=null;function xi(e){Ln===null?Ln=[e]:Ln.push(e)}function Ya(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,xi(t)):(n.next=a.next,a.next=n),t.interleaved=n,nn(e,s)}function nn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yn=!1;function wi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ja(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Te&2)!==0){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,nn(e,n)}return a=s.interleaved,a===null?(t.next=t,xi(s)):(t.next=a.next,a.next=t),s.interleaved=t,nn(e,n)}function zs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Oo(e,n)}}function Za(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var m={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=m:c=c.next=m,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,s){var a=e.updateQueue;yn=!1;var c=a.firstBaseUpdate,m=a.lastBaseUpdate,S=a.shared.pending;if(S!==null){a.shared.pending=null;var b=S,F=b.next;b.next=null,m===null?c=F:m.next=F,m=b;var K=e.alternate;K!==null&&(K=K.updateQueue,S=K.lastBaseUpdate,S!==m&&(S===null?K.firstBaseUpdate=F:S.next=F,K.lastBaseUpdate=b))}if(c!==null){var Z=a.baseState;m=0,K=F=b=null,S=c;do{var G=S.lane,oe=S.eventTime;if((s&G)===G){K!==null&&(K=K.next={eventTime:oe,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ae=e,ce=S;switch(G=t,oe=n,ce.tag){case 1:if(ae=ce.payload,typeof ae=="function"){Z=ae.call(oe,Z,G);break e}Z=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ce.payload,G=typeof ae=="function"?ae.call(oe,Z,G):ae,G==null)break e;Z=te({},Z,G);break e;case 2:yn=!0}}S.callback!==null&&S.lane!==0&&(e.flags|=64,G=a.effects,G===null?a.effects=[S]:G.push(S))}else oe={eventTime:oe,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},K===null?(F=K=oe,b=Z):K=K.next=oe,m|=G;if(S=S.next,S===null){if(S=a.shared.pending,S===null)break;G=S,S=G.next,G.next=null,a.lastBaseUpdate=G,a.shared.pending=null}}while(!0);if(K===null&&(b=Z),a.baseState=b,a.firstBaseUpdate=F,a.lastBaseUpdate=K,t=a.shared.interleaved,t!==null){a=t;do m|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);An|=m,e.lanes=m,e.memoizedState=Z}}function ec(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(i(191,a));a.call(s)}}}var Ur={},Qt=hn(Ur),Vr=hn(Ur),Hr=hn(Ur);function On(e){if(e===Ur)throw Error(i(174));return e}function Si(e,t){switch(Fe(Hr,t),Fe(Vr,e),Fe(Qt,Ur),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ae(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ae(t,e)}ze(Qt),Fe(Qt,t)}function lr(){ze(Qt),ze(Vr),ze(Hr)}function tc(e){On(Hr.current);var t=On(Qt.current),n=Ae(t,e.type);t!==n&&(Fe(Vr,e),Fe(Qt,n))}function ki(e){Vr.current===e&&(ze(Qt),ze(Vr))}var Ue=hn(0);function Bs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mi=[];function bi(){for(var e=0;e<Mi.length;e++)Mi[e]._workInProgressVersionPrimary=null;Mi.length=0}var Us=X.ReactCurrentDispatcher,ji=X.ReactCurrentBatchConfig,In=0,Ve=null,Ye=null,et=null,Vs=!1,$r=!1,Wr=0,yf=0;function at(){throw Error(i(321))}function Ci(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zt(e[n],t[n]))return!1;return!0}function Ei(e,t,n,s,a,c){if(In=c,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Us.current=e===null||e.memoizedState===null?kf:Mf,e=n(s,a),$r){c=0;do{if($r=!1,Wr=0,25<=c)throw Error(i(301));c+=1,et=Ye=null,t.updateQueue=null,Us.current=bf,e=n(s,a)}while($r)}if(Us.current=Ws,t=Ye!==null&&Ye.next!==null,In=0,et=Ye=Ve=null,Vs=!1,t)throw Error(i(300));return e}function Ni(){var e=Wr!==0;return Wr=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ve.memoizedState=et=e:et=et.next=e,et}function Tt(){if(Ye===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=et===null?Ve.memoizedState:et.next;if(t!==null)et=t,Ye=e;else{if(e===null)throw Error(i(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Ve.memoizedState=et=e:et=et.next=e}return et}function Gr(e,t){return typeof t=="function"?t(e):t}function Pi(e){var t=Tt(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var s=Ye,a=s.baseQueue,c=n.pending;if(c!==null){if(a!==null){var m=a.next;a.next=c.next,c.next=m}s.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,s=s.baseState;var S=m=null,b=null,F=c;do{var K=F.lane;if((In&K)===K)b!==null&&(b=b.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),s=F.hasEagerState?F.eagerState:e(s,F.action);else{var Z={lane:K,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};b===null?(S=b=Z,m=s):b=b.next=Z,Ve.lanes|=K,An|=K}F=F.next}while(F!==null&&F!==c);b===null?m=s:b.next=S,zt(s,t.memoizedState)||(yt=!0),t.memoizedState=s,t.baseState=m,t.baseQueue=b,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do c=a.lane,Ve.lanes|=c,An|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _i(e){var t=Tt(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var m=a=a.next;do c=e(c,m.action),m=m.next;while(m!==a);zt(c,t.memoizedState)||(yt=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,s]}function nc(){}function rc(e,t){var n=Ve,s=Tt(),a=t(),c=!zt(s.memoizedState,a);if(c&&(s.memoizedState=a,yt=!0),s=s.queue,Ri(ic.bind(null,n,s,e),[e]),s.getSnapshot!==t||c||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Qr(9,oc.bind(null,n,s,a,t),void 0,null),tt===null)throw Error(i(349));(In&30)!==0||sc(n,t,a)}return a}function sc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function oc(e,t,n,s){t.value=n,t.getSnapshot=s,lc(t)&&ac(e)}function ic(e,t,n){return n(function(){lc(t)&&ac(e)})}function lc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zt(e,n)}catch{return!0}}function ac(e){var t=nn(e,1);t!==null&&Ht(t,e,1,-1)}function cc(e){var t=Kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:e},t.queue=e,e=e.dispatch=Sf.bind(null,Ve,e),[t.memoizedState,e]}function Qr(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function uc(){return Tt().memoizedState}function Hs(e,t,n,s){var a=Kt();Ve.flags|=e,a.memoizedState=Qr(1|t,n,void 0,s===void 0?null:s)}function $s(e,t,n,s){var a=Tt();s=s===void 0?null:s;var c=void 0;if(Ye!==null){var m=Ye.memoizedState;if(c=m.destroy,s!==null&&Ci(s,m.deps)){a.memoizedState=Qr(t,n,c,s);return}}Ve.flags|=e,a.memoizedState=Qr(1|t,n,c,s)}function dc(e,t){return Hs(8390656,8,e,t)}function Ri(e,t){return $s(2048,8,e,t)}function fc(e,t){return $s(4,2,e,t)}function pc(e,t){return $s(4,4,e,t)}function mc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hc(e,t,n){return n=n!=null?n.concat([e]):null,$s(4,4,mc.bind(null,t,e),n)}function Ti(){}function gc(e,t){var n=Tt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Ci(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function vc(e,t){var n=Tt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Ci(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function yc(e,t,n){return(In&21)===0?(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=n):(zt(n,t)||(n=Ql(),Ve.lanes|=n,An|=n,e.baseState=!0),t)}function xf(e,t){var n=Oe;Oe=n!==0&&4>n?n:4,e(!0);var s=ji.transition;ji.transition={};try{e(!1),t()}finally{Oe=n,ji.transition=s}}function xc(){return Tt().memoizedState}function wf(e,t,n){var s=Mn(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},wc(e))Sc(t,n);else if(n=Ya(e,t,n,s),n!==null){var a=pt();Ht(n,e,s,a),kc(n,t,s)}}function Sf(e,t,n){var s=Mn(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(wc(e))Sc(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var m=t.lastRenderedState,S=c(m,n);if(a.hasEagerState=!0,a.eagerState=S,zt(S,m)){var b=t.interleaved;b===null?(a.next=a,xi(t)):(a.next=b.next,b.next=a),t.interleaved=a;return}}catch{}finally{}n=Ya(e,t,a,s),n!==null&&(a=pt(),Ht(n,e,s,a),kc(n,t,s))}}function wc(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function Sc(e,t){$r=Vs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kc(e,t,n){if((n&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Oo(e,n)}}var Ws={readContext:Rt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},kf={readContext:Rt,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:Rt,useEffect:dc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hs(4194308,4,mc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hs(4,2,e,t)},useMemo:function(e,t){var n=Kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Kt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=wf.bind(null,Ve,e),[s.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:cc,useDebugValue:Ti,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=cc(!1),t=e[0];return e=xf.bind(null,e[1]),Kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ve,a=Kt();if(qe){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),tt===null)throw Error(i(349));(In&30)!==0||sc(s,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,dc(ic.bind(null,s,c,e),[e]),s.flags|=2048,Qr(9,oc.bind(null,s,c,n,t),void 0,null),n},useId:function(){var e=Kt(),t=tt.identifierPrefix;if(qe){var n=tn,s=en;n=(s&~(1<<32-Dt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Wr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mf={readContext:Rt,useCallback:gc,useContext:Rt,useEffect:Ri,useImperativeHandle:hc,useInsertionEffect:fc,useLayoutEffect:pc,useMemo:vc,useReducer:Pi,useRef:uc,useState:function(){return Pi(Gr)},useDebugValue:Ti,useDeferredValue:function(e){var t=Tt();return yc(t,Ye.memoizedState,e)},useTransition:function(){var e=Pi(Gr)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:nc,useSyncExternalStore:rc,useId:xc,unstable_isNewReconciler:!1},bf={readContext:Rt,useCallback:gc,useContext:Rt,useEffect:Ri,useImperativeHandle:hc,useInsertionEffect:fc,useLayoutEffect:pc,useMemo:vc,useReducer:_i,useRef:uc,useState:function(){return _i(Gr)},useDebugValue:Ti,useDeferredValue:function(e){var t=Tt();return Ye===null?t.memoizedState=e:yc(t,Ye.memoizedState,e)},useTransition:function(){var e=_i(Gr)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:nc,useSyncExternalStore:rc,useId:xc,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=te({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Li(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:te({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Gs={isMounted:function(e){return(e=e._reactInternals)?Nn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=pt(),a=Mn(e),c=rn(s,a);c.payload=t,n!=null&&(c.callback=n),t=xn(e,c,a),t!==null&&(Ht(t,e,a,s),zs(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=pt(),a=Mn(e),c=rn(s,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=xn(e,c,a),t!==null&&(Ht(t,e,a,s),zs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pt(),s=Mn(e),a=rn(n,s);a.tag=2,t!=null&&(a.callback=t),t=xn(e,a,s),t!==null&&(Ht(t,e,s,n),zs(t,e,s))}};function Mc(e,t,n,s,a,c,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,c,m):t.prototype&&t.prototype.isPureReactComponent?!Or(n,s)||!Or(a,c):!0}function bc(e,t,n){var s=!1,a=gn,c=t.contextType;return typeof c=="object"&&c!==null?c=Rt(c):(a=vt(t)?_n:lt.current,s=t.contextTypes,c=(s=s!=null)?er(e,a):gn),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gs,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function jc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Gs.enqueueReplaceState(t,t.state,null)}function Oi(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},wi(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=Rt(c):(c=vt(t)?_n:lt.current,a.context=er(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(Li(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Gs.enqueueReplaceState(a,a.state,null),qs(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ar(e,t){try{var n="",s=t;do n+=be(s),s=s.return;while(s);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function Ii(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ai(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var jf=typeof WeakMap=="function"?WeakMap:Map;function Cc(e,t,n){n=rn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){eo||(eo=!0,Yi=s),Ai(e,t)},n}function Ec(e,t,n){n=rn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){Ai(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){Ai(e,t),typeof s!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),n}function Nc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new jf;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=zf.bind(null,e,t,n),t.then(e,e))}function Pc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _c(e,t,n,s,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=rn(-1,1),t.tag=2,xn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var Cf=X.ReactCurrentOwner,yt=!1;function ft(e,t,n,s){t.child=e===null?Xa(t,null,n,s):sr(t,e.child,n,s)}function Rc(e,t,n,s,a){n=n.render;var c=t.ref;return ir(t,a),s=Ei(e,t,n,s,c,a),n=Ni(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,sn(e,t,a)):(qe&&n&&ui(t),t.flags|=1,ft(e,t,s,a),t.child)}function Tc(e,t,n,s,a){if(e===null){var c=n.type;return typeof c=="function"&&!sl(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,Lc(e,t,c,s,a)):(e=io(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,(e.lanes&a)===0){var m=c.memoizedProps;if(n=n.compare,n=n!==null?n:Or,n(m,s)&&e.ref===t.ref)return sn(e,t,a)}return t.flags|=1,e=jn(c,s),e.ref=t.ref,e.return=t,t.child=e}function Lc(e,t,n,s,a){if(e!==null){var c=e.memoizedProps;if(Or(c,s)&&e.ref===t.ref)if(yt=!1,t.pendingProps=s=c,(e.lanes&a)!==0)(e.flags&131072)!==0&&(yt=!0);else return t.lanes=e.lanes,sn(e,t,a)}return Fi(e,t,n,s,a)}function Oc(e,t,n){var s=t.pendingProps,a=s.children,c=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(ur,Et),Et|=n;else{if((n&1073741824)===0)return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(ur,Et),Et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=c!==null?c.baseLanes:n,Fe(ur,Et),Et|=s}else c!==null?(s=c.baseLanes|n,t.memoizedState=null):s=n,Fe(ur,Et),Et|=s;return ft(e,t,a,n),t.child}function Ic(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fi(e,t,n,s,a){var c=vt(n)?_n:lt.current;return c=er(t,c),ir(t,a),n=Ei(e,t,n,s,c,a),s=Ni(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,sn(e,t,a)):(qe&&s&&ui(t),t.flags|=1,ft(e,t,n,a),t.child)}function Ac(e,t,n,s,a){if(vt(n)){var c=!0;Rs(t)}else c=!1;if(ir(t,a),t.stateNode===null)Ks(e,t),bc(t,n,s),Oi(t,n,s,a),s=!0;else if(e===null){var m=t.stateNode,S=t.memoizedProps;m.props=S;var b=m.context,F=n.contextType;typeof F=="object"&&F!==null?F=Rt(F):(F=vt(n)?_n:lt.current,F=er(t,F));var K=n.getDerivedStateFromProps,Z=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function";Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==s||b!==F)&&jc(t,m,s,F),yn=!1;var G=t.memoizedState;m.state=G,qs(t,s,m,a),b=t.memoizedState,S!==s||G!==b||gt.current||yn?(typeof K=="function"&&(Li(t,n,K,s),b=t.memoizedState),(S=yn||Mc(t,n,S,s,G,b,F))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=b),m.props=s,m.state=b,m.context=F,s=S):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{m=t.stateNode,Ja(e,t),S=t.memoizedProps,F=t.type===t.elementType?S:Bt(t.type,S),m.props=F,Z=t.pendingProps,G=m.context,b=n.contextType,typeof b=="object"&&b!==null?b=Rt(b):(b=vt(n)?_n:lt.current,b=er(t,b));var oe=n.getDerivedStateFromProps;(K=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==Z||G!==b)&&jc(t,m,s,b),yn=!1,G=t.memoizedState,m.state=G,qs(t,s,m,a);var ae=t.memoizedState;S!==Z||G!==ae||gt.current||yn?(typeof oe=="function"&&(Li(t,n,oe,s),ae=t.memoizedState),(F=yn||Mc(t,n,F,s,G,ae,b)||!1)?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(s,ae,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(s,ae,b)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=ae),m.props=s,m.state=ae,m.context=b,s=F):(typeof m.componentDidUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),s=!1)}return Di(e,t,n,s,c,a)}function Di(e,t,n,s,a,c){Ic(e,t);var m=(t.flags&128)!==0;if(!s&&!m)return a&&Ba(t,n,!1),sn(e,t,c);s=t.stateNode,Cf.current=t;var S=m&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&m?(t.child=sr(t,e.child,null,c),t.child=sr(t,null,S,c)):ft(e,t,S,c),t.memoizedState=s.state,a&&Ba(t,n,!0),t.child}function Fc(e){var t=e.stateNode;t.pendingContext?za(e,t.pendingContext,t.pendingContext!==t.context):t.context&&za(e,t.context,!1),Si(e,t.containerInfo)}function Dc(e,t,n,s,a){return rr(),mi(a),t.flags|=256,ft(e,t,n,s),t.child}var zi={dehydrated:null,treeContext:null,retryLane:0};function qi(e){return{baseLanes:e,cachePool:null,transitions:null}}function zc(e,t,n){var s=t.pendingProps,a=Ue.current,c=!1,m=(t.flags&128)!==0,S;if((S=m)||(S=e!==null&&e.memoizedState===null?!1:(a&2)!==0),S?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Fe(Ue,a&1),e===null)return pi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=s.children,e=s.fallback,c?(s=t.mode,c=t.child,m={mode:"hidden",children:m},(s&1)===0&&c!==null?(c.childLanes=0,c.pendingProps=m):c=lo(m,s,0,null),e=qn(e,s,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=qi(n),t.memoizedState=zi,e):Bi(t,m));if(a=e.memoizedState,a!==null&&(S=a.dehydrated,S!==null))return Ef(e,t,m,s,S,a,n);if(c){c=s.fallback,m=t.mode,a=e.child,S=a.sibling;var b={mode:"hidden",children:s.children};return(m&1)===0&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=b,t.deletions=null):(s=jn(a,b),s.subtreeFlags=a.subtreeFlags&14680064),S!==null?c=jn(S,c):(c=qn(c,m,n,null),c.flags|=2),c.return=t,s.return=t,s.sibling=c,t.child=s,s=c,c=t.child,m=e.child.memoizedState,m=m===null?qi(n):{baseLanes:m.baseLanes|n,cachePool:null,transitions:m.transitions},c.memoizedState=m,c.childLanes=e.childLanes&~n,t.memoizedState=zi,s}return c=e.child,e=c.sibling,s=jn(c,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Bi(e,t){return t=lo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qs(e,t,n,s){return s!==null&&mi(s),sr(t,e.child,null,n),e=Bi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ef(e,t,n,s,a,c,m){if(n)return t.flags&256?(t.flags&=-257,s=Ii(Error(i(422))),Qs(e,t,m,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=s.fallback,a=t.mode,s=lo({mode:"visible",children:s.children},a,0,null),c=qn(c,a,m,null),c.flags|=2,s.return=t,c.return=t,s.sibling=c,t.child=s,(t.mode&1)!==0&&sr(t,e.child,null,m),t.child.memoizedState=qi(m),t.memoizedState=zi,c);if((t.mode&1)===0)return Qs(e,t,m,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var S=s.dgst;return s=S,c=Error(i(419)),s=Ii(c,s,void 0),Qs(e,t,m,s)}if(S=(m&e.childLanes)!==0,yt||S){if(s=tt,s!==null){switch(m&-m){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(s.suspendedLanes|m))!==0?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,nn(e,a),Ht(s,e,a,-1))}return rl(),s=Ii(Error(i(421))),Qs(e,t,m,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=qf.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,Ct=mn(a.nextSibling),jt=t,qe=!0,qt=null,e!==null&&(Pt[_t++]=en,Pt[_t++]=tn,Pt[_t++]=Rn,en=e.id,tn=e.overflow,Rn=t),t=Bi(t,s.children),t.flags|=4096,t)}function qc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),yi(e.return,t,n)}function Ui(e,t,n,s,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=n,c.tailMode=a)}function Bc(e,t,n){var s=t.pendingProps,a=s.revealOrder,c=s.tail;if(ft(e,t,s.children,n),s=Ue.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qc(e,n,t);else if(e.tag===19)qc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Fe(Ue,s),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Bs(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ui(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Bs(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ui(t,!0,n,null,c);break;case"together":Ui(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ks(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),An|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=jn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Nf(e,t,n){switch(t.tag){case 3:Fc(t),rr();break;case 5:tc(t);break;case 1:vt(t.type)&&Rs(t);break;case 4:Si(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Fe(Fs,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Fe(Ue,Ue.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?zc(e,t,n):(Fe(Ue,Ue.current&1),e=sn(e,t,n),e!==null?e.sibling:null);Fe(Ue,Ue.current&1);break;case 19:if(s=(n&t.childLanes)!==0,(e.flags&128)!==0){if(s)return Bc(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Fe(Ue,Ue.current),s)break;return null;case 22:case 23:return t.lanes=0,Oc(e,t,n)}return sn(e,t,n)}var Uc,Vi,Vc,Hc;Uc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Vi=function(){},Vc=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,On(Qt.current);var c=null;switch(n){case"input":a=dt(e,a),s=dt(e,s),c=[];break;case"select":a=te({},a,{value:void 0}),s=te({},s,{value:void 0}),c=[];break;case"textarea":a=ht(e,a),s=ht(e,s),c=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ns)}Mo(n,s);var m;n=null;for(F in a)if(!s.hasOwnProperty(F)&&a.hasOwnProperty(F)&&a[F]!=null)if(F==="style"){var S=a[F];for(m in S)S.hasOwnProperty(m)&&(n||(n={}),n[m]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(d.hasOwnProperty(F)?c||(c=[]):(c=c||[]).push(F,null));for(F in s){var b=s[F];if(S=a?.[F],s.hasOwnProperty(F)&&b!==S&&(b!=null||S!=null))if(F==="style")if(S){for(m in S)!S.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(n||(n={}),n[m]="");for(m in b)b.hasOwnProperty(m)&&S[m]!==b[m]&&(n||(n={}),n[m]=b[m])}else n||(c||(c=[]),c.push(F,n)),n=b;else F==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,S=S?S.__html:void 0,b!=null&&S!==b&&(c=c||[]).push(F,b)):F==="children"?typeof b!="string"&&typeof b!="number"||(c=c||[]).push(F,""+b):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(d.hasOwnProperty(F)?(b!=null&&F==="onScroll"&&De("scroll",e),c||S===b||(c=[])):(c=c||[]).push(F,b))}n&&(c=c||[]).push("style",n);var F=c;(t.updateQueue=F)&&(t.flags|=4)}},Hc=function(e,t,n,s){n!==s&&(t.flags|=4)};function Kr(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Pf(e,t,n){var s=t.pendingProps;switch(di(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return vt(t.type)&&_s(),ct(t),null;case 3:return s=t.stateNode,lr(),ze(gt),ze(lt),bi(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Is(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,qt!==null&&(el(qt),qt=null))),Vi(e,t),ct(t),null;case 5:ki(t);var a=On(Hr.current);if(n=t.type,e!==null&&t.stateNode!=null)Vc(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(i(166));return ct(t),null}if(e=On(Qt.current),Is(t)){s=t.stateNode,n=t.type;var c=t.memoizedProps;switch(s[Gt]=t,s[zr]=c,e=(t.mode&1)!==0,n){case"dialog":De("cancel",s),De("close",s);break;case"iframe":case"object":case"embed":De("load",s);break;case"video":case"audio":for(a=0;a<Ar.length;a++)De(Ar[a],s);break;case"source":De("error",s);break;case"img":case"image":case"link":De("error",s),De("load",s);break;case"details":De("toggle",s);break;case"input":At(s,c),De("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!c.multiple},De("invalid",s);break;case"textarea":Yt(s,c),De("invalid",s)}Mo(n,c),a=null;for(var m in c)if(c.hasOwnProperty(m)){var S=c[m];m==="children"?typeof S=="string"?s.textContent!==S&&(c.suppressHydrationWarning!==!0&&Es(s.textContent,S,e),a=["children",S]):typeof S=="number"&&s.textContent!==""+S&&(c.suppressHydrationWarning!==!0&&Es(s.textContent,S,e),a=["children",""+S]):d.hasOwnProperty(m)&&S!=null&&m==="onScroll"&&De("scroll",s)}switch(n){case"input":Be(s),je(s,c,!0);break;case"textarea":Be(s),Ft(s);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(s.onclick=Ns)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{m=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nt(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=m.createElement(n,{is:s.is}):(e=m.createElement(n),n==="select"&&(m=e,s.multiple?m.multiple=!0:s.size&&(m.size=s.size))):e=m.createElementNS(e,n),e[Gt]=t,e[zr]=s,Uc(e,t,!1,!1),t.stateNode=e;e:{switch(m=bo(n,s),n){case"dialog":De("cancel",e),De("close",e),a=s;break;case"iframe":case"object":case"embed":De("load",e),a=s;break;case"video":case"audio":for(a=0;a<Ar.length;a++)De(Ar[a],e);a=s;break;case"source":De("error",e),a=s;break;case"img":case"image":case"link":De("error",e),De("load",e),a=s;break;case"details":De("toggle",e),a=s;break;case"input":At(e,s),a=dt(e,s),De("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=te({},s,{value:void 0}),De("invalid",e);break;case"textarea":Yt(e,s),a=ht(e,s),De("invalid",e);break;default:a=s}Mo(n,a),S=a;for(c in S)if(S.hasOwnProperty(c)){var b=S[c];c==="style"?Ll(e,b):c==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&En(e,b)):c==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&vr(e,b):typeof b=="number"&&vr(e,""+b):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(d.hasOwnProperty(c)?b!=null&&c==="onScroll"&&De("scroll",e):b!=null&&W(e,c,b,m))}switch(n){case"input":Be(e),je(e,s,!1);break;case"textarea":Be(e),Ft(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ce(s.value));break;case"select":e.multiple=!!s.multiple,c=s.value,c!=null?Re(e,!!s.multiple,c,!1):s.defaultValue!=null&&Re(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ns)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ct(t),null;case 6:if(e&&t.stateNode!=null)Hc(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(n=On(Hr.current),On(Qt.current),Is(t)){if(s=t.stateNode,n=t.memoizedProps,s[Gt]=t,(c=s.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:Es(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Es(s.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Gt]=t,t.stateNode=s}return ct(t),null;case 13:if(ze(Ue),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Ct!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ga(),rr(),t.flags|=98560,c=!1;else if(c=Is(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(i(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));c[Gt]=t}else rr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ct(t),c=!1}else qt!==null&&(el(qt),qt=null),c=!0;if(!c)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ue.current&1)!==0?Je===0&&(Je=3):rl())),t.updateQueue!==null&&(t.flags|=4),ct(t),null);case 4:return lr(),Vi(e,t),e===null&&Fr(t.stateNode.containerInfo),ct(t),null;case 10:return vi(t.type._context),ct(t),null;case 17:return vt(t.type)&&_s(),ct(t),null;case 19:if(ze(Ue),c=t.memoizedState,c===null)return ct(t),null;if(s=(t.flags&128)!==0,m=c.rendering,m===null)if(s)Kr(c,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Bs(e),m!==null){for(t.flags|=128,Kr(c,!1),s=m.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)c=n,e=s,c.flags&=14680066,m=c.alternate,m===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,e=m.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(Ue,Ue.current&1|2),t.child}e=e.sibling}c.tail!==null&&We()>dr&&(t.flags|=128,s=!0,Kr(c,!1),t.lanes=4194304)}else{if(!s)if(e=Bs(m),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Kr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!qe)return ct(t),null}else 2*We()-c.renderingStartTime>dr&&n!==1073741824&&(t.flags|=128,s=!0,Kr(c,!1),t.lanes=4194304);c.isBackwards?(m.sibling=t.child,t.child=m):(n=c.last,n!==null?n.sibling=m:t.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=We(),t.sibling=null,n=Ue.current,Fe(Ue,s?n&1|2:n&1),t):(ct(t),null);case 22:case 23:return nl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Et&1073741824)!==0&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function _f(e,t){switch(di(t),t.tag){case 1:return vt(t.type)&&_s(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return lr(),ze(gt),ze(lt),bi(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return ki(t),null;case 13:if(ze(Ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Ue),null;case 4:return lr(),null;case 10:return vi(t.type._context),null;case 22:case 23:return nl(),null;case 24:return null;default:return null}}var Xs=!1,ut=!1,Rf=typeof WeakSet=="function"?WeakSet:Set,le=null;function cr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){He(e,t,s)}else n.current=null}function Hi(e,t,n){try{n()}catch(s){He(e,t,s)}}var $c=!1;function Tf(e,t){if(ni=gs,e=Ma(),Qo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var m=0,S=-1,b=-1,F=0,K=0,Z=e,G=null;t:for(;;){for(var oe;Z!==n||a!==0&&Z.nodeType!==3||(S=m+a),Z!==c||s!==0&&Z.nodeType!==3||(b=m+s),Z.nodeType===3&&(m+=Z.nodeValue.length),(oe=Z.firstChild)!==null;)G=Z,Z=oe;for(;;){if(Z===e)break t;if(G===n&&++F===a&&(S=m),G===c&&++K===s&&(b=m),(oe=Z.nextSibling)!==null)break;Z=G,G=Z.parentNode}Z=oe}n=S===-1||b===-1?null:{start:S,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(ri={focusedElem:e,selectionRange:n},gs=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var ae=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ce=ae.memoizedProps,Ge=ae.memoizedState,T=t.stateNode,E=T.getSnapshotBeforeUpdate(t.elementType===t.type?ce:Bt(t.type,ce),Ge);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(ne){He(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return ae=$c,$c=!1,ae}function Xr(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&Hi(t,n,c)}a=a.next}while(a!==s)}}function Ys(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function $i(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Wc(e){var t=e.alternate;t!==null&&(e.alternate=null,Wc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Gt],delete t[zr],delete t[li],delete t[mf],delete t[hf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gc(e){return e.tag===5||e.tag===3||e.tag===4}function Qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ns));else if(s!==4&&(e=e.child,e!==null))for(Wi(e,t,n),e=e.sibling;e!==null;)Wi(e,t,n),e=e.sibling}function Gi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Gi(e,t,n),e=e.sibling;e!==null;)Gi(e,t,n),e=e.sibling}var st=null,Ut=!1;function wn(e,t,n){for(n=n.child;n!==null;)Kc(e,t,n),n=n.sibling}function Kc(e,t,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(us,n)}catch{}switch(n.tag){case 5:ut||cr(n,t);case 6:var s=st,a=Ut;st=null,wn(e,t,n),st=s,Ut=a,st!==null&&(Ut?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(Ut?(e=st,n=n.stateNode,e.nodeType===8?ii(e.parentNode,n):e.nodeType===1&&ii(e,n),Nr(e)):ii(st,n.stateNode));break;case 4:s=st,a=Ut,st=n.stateNode.containerInfo,Ut=!0,wn(e,t,n),st=s,Ut=a;break;case 0:case 11:case 14:case 15:if(!ut&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var c=a,m=c.destroy;c=c.tag,m!==void 0&&((c&2)!==0||(c&4)!==0)&&Hi(n,t,m),a=a.next}while(a!==s)}wn(e,t,n);break;case 1:if(!ut&&(cr(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(S){He(n,t,S)}wn(e,t,n);break;case 21:wn(e,t,n);break;case 22:n.mode&1?(ut=(s=ut)||n.memoizedState!==null,wn(e,t,n),ut=s):wn(e,t,n);break;default:wn(e,t,n)}}function Xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Rf),t.forEach(function(s){var a=Bf.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Vt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var c=e,m=t,S=m;e:for(;S!==null;){switch(S.tag){case 5:st=S.stateNode,Ut=!1;break e;case 3:st=S.stateNode.containerInfo,Ut=!0;break e;case 4:st=S.stateNode.containerInfo,Ut=!0;break e}S=S.return}if(st===null)throw Error(i(160));Kc(c,m,a),st=null,Ut=!1;var b=a.alternate;b!==null&&(b.return=null),a.return=null}catch(F){He(a,t,F)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Yc(t,e),t=t.sibling}function Yc(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vt(t,e),Xt(e),s&4){try{Xr(3,e,e.return),Ys(3,e)}catch(ce){He(e,e.return,ce)}try{Xr(5,e,e.return)}catch(ce){He(e,e.return,ce)}}break;case 1:Vt(t,e),Xt(e),s&512&&n!==null&&cr(n,n.return);break;case 5:if(Vt(t,e),Xt(e),s&512&&n!==null&&cr(n,n.return),e.flags&32){var a=e.stateNode;try{vr(a,"")}catch(ce){He(e,e.return,ce)}}if(s&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,m=n!==null?n.memoizedProps:c,S=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{S==="input"&&c.type==="radio"&&c.name!=null&&J(a,c),bo(S,m);var F=bo(S,c);for(m=0;m<b.length;m+=2){var K=b[m],Z=b[m+1];K==="style"?Ll(a,Z):K==="dangerouslySetInnerHTML"?En(a,Z):K==="children"?vr(a,Z):W(a,K,Z,F)}switch(S){case"input":ve(a,c);break;case"textarea":Ne(a,c);break;case"select":var G=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var oe=c.value;oe!=null?Re(a,!!c.multiple,oe,!1):G!==!!c.multiple&&(c.defaultValue!=null?Re(a,!!c.multiple,c.defaultValue,!0):Re(a,!!c.multiple,c.multiple?[]:"",!1))}a[zr]=c}catch(ce){He(e,e.return,ce)}}break;case 6:if(Vt(t,e),Xt(e),s&4){if(e.stateNode===null)throw Error(i(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(ce){He(e,e.return,ce)}}break;case 3:if(Vt(t,e),Xt(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Nr(t.containerInfo)}catch(ce){He(e,e.return,ce)}break;case 4:Vt(t,e),Xt(e);break;case 13:Vt(t,e),Xt(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(Xi=We())),s&4&&Xc(e);break;case 22:if(K=n!==null&&n.memoizedState!==null,e.mode&1?(ut=(F=ut)||K,Vt(t,e),ut=F):Vt(t,e),Xt(e),s&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!K&&(e.mode&1)!==0)for(le=e,K=e.child;K!==null;){for(Z=le=K;le!==null;){switch(G=le,oe=G.child,G.tag){case 0:case 11:case 14:case 15:Xr(4,G,G.return);break;case 1:cr(G,G.return);var ae=G.stateNode;if(typeof ae.componentWillUnmount=="function"){s=G,n=G.return;try{t=s,ae.props=t.memoizedProps,ae.state=t.memoizedState,ae.componentWillUnmount()}catch(ce){He(s,n,ce)}}break;case 5:cr(G,G.return);break;case 22:if(G.memoizedState!==null){eu(Z);continue}}oe!==null?(oe.return=G,le=oe):eu(Z)}K=K.sibling}e:for(K=null,Z=e;;){if(Z.tag===5){if(K===null){K=Z;try{a=Z.stateNode,F?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(S=Z.stateNode,b=Z.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,S.style.display=Tl("display",m))}catch(ce){He(e,e.return,ce)}}}else if(Z.tag===6){if(K===null)try{Z.stateNode.nodeValue=F?"":Z.memoizedProps}catch(ce){He(e,e.return,ce)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===e)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===e)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===e)break e;K===Z&&(K=null),Z=Z.return}K===Z&&(K=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Vt(t,e),Xt(e),s&4&&Xc(e);break;case 21:break;default:Vt(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Gc(n)){var s=n;break e}n=n.return}throw Error(i(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(vr(a,""),s.flags&=-33);var c=Qc(e);Gi(e,c,a);break;case 3:case 4:var m=s.stateNode.containerInfo,S=Qc(e);Wi(e,S,m);break;default:throw Error(i(161))}}catch(b){He(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lf(e,t,n){le=e,Jc(e)}function Jc(e,t,n){for(var s=(e.mode&1)!==0;le!==null;){var a=le,c=a.child;if(a.tag===22&&s){var m=a.memoizedState!==null||Xs;if(!m){var S=a.alternate,b=S!==null&&S.memoizedState!==null||ut;S=Xs;var F=ut;if(Xs=m,(ut=b)&&!F)for(le=a;le!==null;)m=le,b=m.child,m.tag===22&&m.memoizedState!==null?tu(a):b!==null?(b.return=m,le=b):tu(a);for(;c!==null;)le=c,Jc(c),c=c.sibling;le=a,Xs=S,ut=F}Zc(e)}else(a.subtreeFlags&8772)!==0&&c!==null?(c.return=a,le=c):Zc(e)}}function Zc(e){for(;le!==null;){var t=le;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ut||Ys(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ut)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Bt(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&ec(t,c,s);break;case 3:var m=t.updateQueue;if(m!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ec(t,m,n)}break;case 5:var S=t.stateNode;if(n===null&&t.flags&4){n=S;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var F=t.alternate;if(F!==null){var K=F.memoizedState;if(K!==null){var Z=K.dehydrated;Z!==null&&Nr(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}ut||t.flags&512&&$i(t)}catch(G){He(t,t.return,G)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function eu(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function tu(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ys(4,t)}catch(b){He(t,n,b)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(b){He(t,a,b)}}var c=t.return;try{$i(t)}catch(b){He(t,c,b)}break;case 5:var m=t.return;try{$i(t)}catch(b){He(t,m,b)}}}catch(b){He(t,t.return,b)}if(t===e){le=null;break}var S=t.sibling;if(S!==null){S.return=t.return,le=S;break}le=t.return}}var Of=Math.ceil,Js=X.ReactCurrentDispatcher,Qi=X.ReactCurrentOwner,Lt=X.ReactCurrentBatchConfig,Te=0,tt=null,Qe=null,ot=0,Et=0,ur=hn(0),Je=0,Yr=null,An=0,Zs=0,Ki=0,Jr=null,xt=null,Xi=0,dr=1/0,on=null,eo=!1,Yi=null,Sn=null,to=!1,kn=null,no=0,Zr=0,Ji=null,ro=-1,so=0;function pt(){return(Te&6)!==0?We():ro!==-1?ro:ro=We()}function Mn(e){return(e.mode&1)===0?1:(Te&2)!==0&&ot!==0?ot&-ot:vf.transition!==null?(so===0&&(so=Ql()),so):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:ra(e.type)),e)}function Ht(e,t,n,s){if(50<Zr)throw Zr=0,Ji=null,Error(i(185));Mr(e,n,s),((Te&2)===0||e!==tt)&&(e===tt&&((Te&2)===0&&(Zs|=n),Je===4&&bn(e,ot)),wt(e,s),n===1&&Te===0&&(t.mode&1)===0&&(dr=We()+500,Ts&&vn()))}function wt(e,t){var n=e.callbackNode;gd(e,t);var s=ps(e,e===tt?ot:0);if(s===0)n!==null&&$l(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&$l(n),t===1)e.tag===0?gf(ru.bind(null,e)):Ua(ru.bind(null,e)),ff(function(){(Te&6)===0&&vn()}),n=null;else{switch(Kl(s)){case 1:n=Ro;break;case 4:n=Wl;break;case 16:n=cs;break;case 536870912:n=Gl;break;default:n=cs}n=du(n,nu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nu(e,t){if(ro=-1,so=0,(Te&6)!==0)throw Error(i(327));var n=e.callbackNode;if(fr()&&e.callbackNode!==n)return null;var s=ps(e,e===tt?ot:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=oo(e,s);else{t=s;var a=Te;Te|=2;var c=ou();(tt!==e||ot!==t)&&(on=null,dr=We()+500,Dn(e,t));do try{Ff();break}catch(S){su(e,S)}while(!0);gi(),Js.current=c,Te=a,Qe!==null?t=0:(tt=null,ot=0,t=Je)}if(t!==0){if(t===2&&(a=To(e),a!==0&&(s=a,t=Zi(e,a))),t===1)throw n=Yr,Dn(e,0),bn(e,s),wt(e,We()),n;if(t===6)bn(e,s);else{if(a=e.current.alternate,(s&30)===0&&!If(a)&&(t=oo(e,s),t===2&&(c=To(e),c!==0&&(s=c,t=Zi(e,c))),t===1))throw n=Yr,Dn(e,0),bn(e,s),wt(e,We()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(i(345));case 2:zn(e,xt,on);break;case 3:if(bn(e,s),(s&130023424)===s&&(t=Xi+500-We(),10<t)){if(ps(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){pt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=oi(zn.bind(null,e,xt,on),t);break}zn(e,xt,on);break;case 4:if(bn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var m=31-Dt(s);c=1<<m,m=t[m],m>a&&(a=m),s&=~c}if(s=a,s=We()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Of(s/1960))-s,10<s){e.timeoutHandle=oi(zn.bind(null,e,xt,on),s);break}zn(e,xt,on);break;case 5:zn(e,xt,on);break;default:throw Error(i(329))}}}return wt(e,We()),e.callbackNode===n?nu.bind(null,e):null}function Zi(e,t){var n=Jr;return e.current.memoizedState.isDehydrated&&(Dn(e,t).flags|=256),e=oo(e,t),e!==2&&(t=xt,xt=n,t!==null&&el(t)),e}function el(e){xt===null?xt=e:xt.push.apply(xt,e)}function If(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],c=a.getSnapshot;a=a.value;try{if(!zt(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bn(e,t){for(t&=~Ki,t&=~Zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Dt(t),s=1<<n;e[n]=-1,t&=~s}}function ru(e){if((Te&6)!==0)throw Error(i(327));fr();var t=ps(e,0);if((t&1)===0)return wt(e,We()),null;var n=oo(e,t);if(e.tag!==0&&n===2){var s=To(e);s!==0&&(t=s,n=Zi(e,s))}if(n===1)throw n=Yr,Dn(e,0),bn(e,t),wt(e,We()),n;if(n===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zn(e,xt,on),wt(e,We()),null}function tl(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(dr=We()+500,Ts&&vn())}}function Fn(e){kn!==null&&kn.tag===0&&(Te&6)===0&&fr();var t=Te;Te|=1;var n=Lt.transition,s=Oe;try{if(Lt.transition=null,Oe=1,e)return e()}finally{Oe=s,Lt.transition=n,Te=t,(Te&6)===0&&vn()}}function nl(){Et=ur.current,ze(ur)}function Dn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,df(n)),Qe!==null)for(n=Qe.return;n!==null;){var s=n;switch(di(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&_s();break;case 3:lr(),ze(gt),ze(lt),bi();break;case 5:ki(s);break;case 4:lr();break;case 13:ze(Ue);break;case 19:ze(Ue);break;case 10:vi(s.type._context);break;case 22:case 23:nl()}n=n.return}if(tt=e,Qe=e=jn(e.current,null),ot=Et=t,Je=0,Yr=null,Ki=Zs=An=0,xt=Jr=null,Ln!==null){for(t=0;t<Ln.length;t++)if(n=Ln[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,c=n.pending;if(c!==null){var m=c.next;c.next=a,s.next=m}n.pending=s}Ln=null}return e}function su(e,t){do{var n=Qe;try{if(gi(),Us.current=Ws,Vs){for(var s=Ve.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Vs=!1}if(In=0,et=Ye=Ve=null,$r=!1,Wr=0,Qi.current=null,n===null||n.return===null){Je=1,Yr=t,Qe=null;break}e:{var c=e,m=n.return,S=n,b=t;if(t=ot,S.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var F=b,K=S,Z=K.tag;if((K.mode&1)===0&&(Z===0||Z===11||Z===15)){var G=K.alternate;G?(K.updateQueue=G.updateQueue,K.memoizedState=G.memoizedState,K.lanes=G.lanes):(K.updateQueue=null,K.memoizedState=null)}var oe=Pc(m);if(oe!==null){oe.flags&=-257,_c(oe,m,S,c,t),oe.mode&1&&Nc(c,F,t),t=oe,b=F;var ae=t.updateQueue;if(ae===null){var ce=new Set;ce.add(b),t.updateQueue=ce}else ae.add(b);break e}else{if((t&1)===0){Nc(c,F,t),rl();break e}b=Error(i(426))}}else if(qe&&S.mode&1){var Ge=Pc(m);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),_c(Ge,m,S,c,t),mi(ar(b,S));break e}}c=b=ar(b,S),Je!==4&&(Je=2),Jr===null?Jr=[c]:Jr.push(c),c=m;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var T=Cc(c,b,t);Za(c,T);break e;case 1:S=b;var E=c.type,O=c.stateNode;if((c.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Sn===null||!Sn.has(O)))){c.flags|=65536,t&=-t,c.lanes|=t;var ne=Ec(c,S,t);Za(c,ne);break e}}c=c.return}while(c!==null)}lu(n)}catch(ue){t=ue,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function ou(){var e=Js.current;return Js.current=Ws,e===null?Ws:e}function rl(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||(An&268435455)===0&&(Zs&268435455)===0||bn(tt,ot)}function oo(e,t){var n=Te;Te|=2;var s=ou();(tt!==e||ot!==t)&&(on=null,Dn(e,t));do try{Af();break}catch(a){su(e,a)}while(!0);if(gi(),Te=n,Js.current=s,Qe!==null)throw Error(i(261));return tt=null,ot=0,Je}function Af(){for(;Qe!==null;)iu(Qe)}function Ff(){for(;Qe!==null&&!ld();)iu(Qe)}function iu(e){var t=uu(e.alternate,e,Et);e.memoizedProps=e.pendingProps,t===null?lu(e):Qe=t,Qi.current=null}function lu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Pf(n,t,Et),n!==null){Qe=n;return}}else{if(n=_f(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Qe=null;return}}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);Je===0&&(Je=5)}function zn(e,t,n){var s=Oe,a=Lt.transition;try{Lt.transition=null,Oe=1,Df(e,t,n,s)}finally{Lt.transition=a,Oe=s}return null}function Df(e,t,n,s){do fr();while(kn!==null);if((Te&6)!==0)throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(vd(e,c),e===tt&&(Qe=tt=null,ot=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||to||(to=!0,du(cs,function(){return fr(),null})),c=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||c){c=Lt.transition,Lt.transition=null;var m=Oe;Oe=1;var S=Te;Te|=4,Qi.current=null,Tf(e,n),Yc(n,e),rf(ri),gs=!!ni,ri=ni=null,e.current=n,Lf(n),ad(),Te=S,Oe=m,Lt.transition=c}else e.current=n;if(to&&(to=!1,kn=e,no=a),c=e.pendingLanes,c===0&&(Sn=null),dd(n.stateNode),wt(e,We()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(eo)throw eo=!1,e=Yi,Yi=null,e;return(no&1)!==0&&e.tag!==0&&fr(),c=e.pendingLanes,(c&1)!==0?e===Ji?Zr++:(Zr=0,Ji=e):Zr=0,vn(),null}function fr(){if(kn!==null){var e=Kl(no),t=Lt.transition,n=Oe;try{if(Lt.transition=null,Oe=16>e?16:e,kn===null)var s=!1;else{if(e=kn,kn=null,no=0,(Te&6)!==0)throw Error(i(331));var a=Te;for(Te|=4,le=e.current;le!==null;){var c=le,m=c.child;if((le.flags&16)!==0){var S=c.deletions;if(S!==null){for(var b=0;b<S.length;b++){var F=S[b];for(le=F;le!==null;){var K=le;switch(K.tag){case 0:case 11:case 15:Xr(8,K,c)}var Z=K.child;if(Z!==null)Z.return=K,le=Z;else for(;le!==null;){K=le;var G=K.sibling,oe=K.return;if(Wc(K),K===F){le=null;break}if(G!==null){G.return=oe,le=G;break}le=oe}}}var ae=c.alternate;if(ae!==null){var ce=ae.child;if(ce!==null){ae.child=null;do{var Ge=ce.sibling;ce.sibling=null,ce=Ge}while(ce!==null)}}le=c}}if((c.subtreeFlags&2064)!==0&&m!==null)m.return=c,le=m;else e:for(;le!==null;){if(c=le,(c.flags&2048)!==0)switch(c.tag){case 0:case 11:case 15:Xr(9,c,c.return)}var T=c.sibling;if(T!==null){T.return=c.return,le=T;break e}le=c.return}}var E=e.current;for(le=E;le!==null;){m=le;var O=m.child;if((m.subtreeFlags&2064)!==0&&O!==null)O.return=m,le=O;else e:for(m=E;le!==null;){if(S=le,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Ys(9,S)}}catch(ue){He(S,S.return,ue)}if(S===m){le=null;break e}var ne=S.sibling;if(ne!==null){ne.return=S.return,le=ne;break e}le=S.return}}if(Te=a,vn(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(us,e)}catch{}s=!0}return s}finally{Oe=n,Lt.transition=t}}return!1}function au(e,t,n){t=ar(n,t),t=Cc(e,t,1),e=xn(e,t,1),t=pt(),e!==null&&(Mr(e,1,t),wt(e,t))}function He(e,t,n){if(e.tag===3)au(e,e,n);else for(;t!==null;){if(t.tag===3){au(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Sn===null||!Sn.has(s))){e=ar(n,e),e=Ec(t,e,1),t=xn(t,e,1),e=pt(),t!==null&&(Mr(t,1,e),wt(t,e));break}}t=t.return}}function zf(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(ot&n)===n&&(Je===4||Je===3&&(ot&130023424)===ot&&500>We()-Xi?Dn(e,0):Ki|=n),wt(e,t)}function cu(e,t){t===0&&((e.mode&1)===0?t=1:(t=fs,fs<<=1,(fs&130023424)===0&&(fs=4194304)));var n=pt();e=nn(e,t),e!==null&&(Mr(e,t,n),wt(e,n))}function qf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cu(e,n)}function Bf(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}s!==null&&s.delete(t),cu(e,n)}var uu;uu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||gt.current)yt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return yt=!1,Nf(e,t,n);yt=(e.flags&131072)!==0}else yt=!1,qe&&(t.flags&1048576)!==0&&Va(t,Os,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ks(e,t),e=t.pendingProps;var a=er(t,lt.current);ir(t,n),a=Ei(null,t,s,e,a,n);var c=Ni();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(s)?(c=!0,Rs(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,wi(t),a.updater=Gs,t.stateNode=a,a._reactInternals=t,Oi(t,s,e,n),t=Di(null,t,s,!0,c,n)):(t.tag=0,qe&&c&&ui(t),ft(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Ks(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=Vf(s),e=Bt(s,e),a){case 0:t=Fi(null,t,s,e,n);break e;case 1:t=Ac(null,t,s,e,n);break e;case 11:t=Rc(null,t,s,e,n);break e;case 14:t=Tc(null,t,s,Bt(s.type,e),n);break e}throw Error(i(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Bt(s,a),Fi(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Bt(s,a),Ac(e,t,s,a,n);case 3:e:{if(Fc(t),e===null)throw Error(i(387));s=t.pendingProps,c=t.memoizedState,a=c.element,Ja(e,t),qs(t,s,null,n);var m=t.memoizedState;if(s=m.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=ar(Error(i(423)),t),t=Dc(e,t,s,n,a);break e}else if(s!==a){a=ar(Error(i(424)),t),t=Dc(e,t,s,n,a);break e}else for(Ct=mn(t.stateNode.containerInfo.firstChild),jt=t,qe=!0,qt=null,n=Xa(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rr(),s===a){t=sn(e,t,n);break e}ft(e,t,s,n)}t=t.child}return t;case 5:return tc(t),e===null&&pi(t),s=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,m=a.children,si(s,a)?m=null:c!==null&&si(s,c)&&(t.flags|=32),Ic(e,t),ft(e,t,m,n),t.child;case 6:return e===null&&pi(t),null;case 13:return zc(e,t,n);case 4:return Si(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=sr(t,null,s,n):ft(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Bt(s,a),Rc(e,t,s,a,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,c=t.memoizedProps,m=a.value,Fe(Fs,s._currentValue),s._currentValue=m,c!==null)if(zt(c.value,m)){if(c.children===a.children&&!gt.current){t=sn(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var S=c.dependencies;if(S!==null){m=c.child;for(var b=S.firstContext;b!==null;){if(b.context===s){if(c.tag===1){b=rn(-1,n&-n),b.tag=2;var F=c.updateQueue;if(F!==null){F=F.shared;var K=F.pending;K===null?b.next=b:(b.next=K.next,K.next=b),F.pending=b}}c.lanes|=n,b=c.alternate,b!==null&&(b.lanes|=n),yi(c.return,n,t),S.lanes|=n;break}b=b.next}}else if(c.tag===10)m=c.type===t.type?null:c.child;else if(c.tag===18){if(m=c.return,m===null)throw Error(i(341));m.lanes|=n,S=m.alternate,S!==null&&(S.lanes|=n),yi(m,n,t),m=c.sibling}else m=c.child;if(m!==null)m.return=c;else for(m=c;m!==null;){if(m===t){m=null;break}if(c=m.sibling,c!==null){c.return=m.return,m=c;break}m=m.return}c=m}ft(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,ir(t,n),a=Rt(a),s=s(a),t.flags|=1,ft(e,t,s,n),t.child;case 14:return s=t.type,a=Bt(s,t.pendingProps),a=Bt(s.type,a),Tc(e,t,s,a,n);case 15:return Lc(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Bt(s,a),Ks(e,t),t.tag=1,vt(s)?(e=!0,Rs(t)):e=!1,ir(t,n),bc(t,s,a),Oi(t,s,a,n),Di(null,t,s,!0,e,n);case 19:return Bc(e,t,n);case 22:return Oc(e,t,n)}throw Error(i(156,t.tag))};function du(e,t){return Hl(e,t)}function Uf(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,n,s){return new Uf(e,t,n,s)}function sl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vf(e){if(typeof e=="function")return sl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===C)return 11;if(e===$)return 14}return 2}function jn(e,t){var n=e.alternate;return n===null?(n=Ot(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function io(e,t,n,s,a,c){var m=2;if(s=e,typeof e=="function")sl(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case B:return qn(n.children,a,c,t);case z:m=8,a|=8;break;case U:return e=Ot(12,n,t,a|2),e.elementType=U,e.lanes=c,e;case I:return e=Ot(13,n,t,a),e.elementType=I,e.lanes=c,e;case Q:return e=Ot(19,n,t,a),e.elementType=Q,e.lanes=c,e;case de:return lo(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:m=10;break e;case ee:m=9;break e;case C:m=11;break e;case $:m=14;break e;case ie:m=16,s=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=Ot(m,n,t,a),t.elementType=e,t.type=s,t.lanes=c,t}function qn(e,t,n,s){return e=Ot(7,e,s,t),e.lanes=n,e}function lo(e,t,n,s){return e=Ot(22,e,s,t),e.elementType=de,e.lanes=n,e.stateNode={isHidden:!1},e}function ol(e,t,n){return e=Ot(6,e,null,t),e.lanes=n,e}function il(e,t,n){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hf(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lo(0),this.expirationTimes=Lo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lo(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ll(e,t,n,s,a,c,m,S,b){return e=new Hf(e,t,n,S,b),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Ot(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wi(c),e}function $f(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function fu(e){if(!e)return gn;e=e._reactInternals;e:{if(Nn(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var n=e.type;if(vt(n))return qa(e,n,t)}return t}function pu(e,t,n,s,a,c,m,S,b){return e=ll(n,s,!0,e,a,c,m,S,b),e.context=fu(null),n=e.current,s=pt(),a=Mn(n),c=rn(s,a),c.callback=t??null,xn(n,c,a),e.current.lanes=a,Mr(e,a,s),wt(e,s),e}function ao(e,t,n,s){var a=t.current,c=pt(),m=Mn(a);return n=fu(n),t.context===null?t.context=n:t.pendingContext=n,t=rn(c,m),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=xn(a,t,m),e!==null&&(Ht(e,a,m,c),zs(e,a,m)),m}function co(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function al(e,t){mu(e,t),(e=e.alternate)&&mu(e,t)}function Wf(){return null}var hu=typeof reportError=="function"?reportError:function(e){console.error(e)};function cl(e){this._internalRoot=e}uo.prototype.render=cl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));ao(e,t,null,null)},uo.prototype.unmount=cl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fn(function(){ao(null,e,null,null)}),t[Jt]=null}};function uo(e){this._internalRoot=e}uo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jl();e={blockedOn:null,target:e,priority:t};for(var n=0;n<dn.length&&t!==0&&t<dn[n].priority;n++);dn.splice(n,0,e),n===0&&ta(e)}};function ul(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gu(){}function Gf(e,t,n,s,a){if(a){if(typeof s=="function"){var c=s;s=function(){var F=co(m);c.call(F)}}var m=pu(t,s,e,0,null,!1,!1,"",gu);return e._reactRootContainer=m,e[Jt]=m.current,Fr(e.nodeType===8?e.parentNode:e),Fn(),m}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var S=s;s=function(){var F=co(b);S.call(F)}}var b=ll(e,0,!1,null,null,!1,!1,"",gu);return e._reactRootContainer=b,e[Jt]=b.current,Fr(e.nodeType===8?e.parentNode:e),Fn(function(){ao(t,b,n,s)}),b}function po(e,t,n,s,a){var c=n._reactRootContainer;if(c){var m=c;if(typeof a=="function"){var S=a;a=function(){var b=co(m);S.call(b)}}ao(t,m,e,a)}else m=Gf(n,t,e,a,s);return co(m)}Xl=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kr(t.pendingLanes);n!==0&&(Oo(t,n|1),wt(t,We()),(Te&6)===0&&(dr=We()+500,vn()))}break;case 13:Fn(function(){var s=nn(e,1);if(s!==null){var a=pt();Ht(s,e,1,a)}}),al(e,1)}},Io=function(e){if(e.tag===13){var t=nn(e,134217728);if(t!==null){var n=pt();Ht(t,e,134217728,n)}al(e,134217728)}},Yl=function(e){if(e.tag===13){var t=Mn(e),n=nn(e,t);if(n!==null){var s=pt();Ht(n,e,t,s)}al(e,t)}},Jl=function(){return Oe},Zl=function(e,t){var n=Oe;try{return Oe=e,t()}finally{Oe=n}},Eo=function(e,t,n){switch(t){case"input":if(ve(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Ps(s);if(!a)throw Error(i(90));$e(s),ve(s,a)}}}break;case"textarea":Ne(e,n);break;case"select":t=n.value,t!=null&&Re(e,!!n.multiple,t,!1)}},Fl=tl,Dl=Fn;var Qf={usingClientEntryPoint:!1,Events:[qr,Jn,Ps,Il,Al,tl]},es={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kf={bundleType:es.bundleType,version:es.version,rendererPackageName:es.rendererPackageName,rendererConfig:es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ul(e),e===null?null:e.stateNode},findFiberByHostInstance:es.findFiberByHostInstance||Wf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mo.isDisabled&&mo.supportsFiber)try{us=mo.inject(Kf),Wt=mo}catch{}}return St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qf,St.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ul(t))throw Error(i(200));return $f(e,t,null,n)},St.createRoot=function(e,t){if(!ul(e))throw Error(i(299));var n=!1,s="",a=hu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ll(e,1,!1,null,null,n,!1,s,a),e[Jt]=t.current,Fr(e.nodeType===8?e.parentNode:e),new cl(t)},St.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Ul(t),e=e===null?null:e.stateNode,e},St.flushSync=function(e){return Fn(e)},St.hydrate=function(e,t,n){if(!fo(t))throw Error(i(200));return po(null,e,t,!0,n)},St.hydrateRoot=function(e,t,n){if(!ul(e))throw Error(i(405));var s=n!=null&&n.hydratedSources||null,a=!1,c="",m=hu;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),t=pu(t,null,e,1,n??null,a,!1,c,m),e[Jt]=t.current,Fr(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new uo(t)},St.render=function(e,t,n){if(!fo(t))throw Error(i(200));return po(null,e,t,!1,n)},St.unmountComponentAtNode=function(e){if(!fo(e))throw Error(i(40));return e._reactRootContainer?(Fn(function(){po(null,null,e,!1,function(){e._reactRootContainer=null,e[Jt]=null})}),!0):!1},St.unstable_batchedUpdates=tl,St.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!fo(n))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return po(e,t,n,!1,s)},St.version="18.3.1-next-f1338f8080-20240426",St}var bu;function rp(){if(bu)return pl.exports;bu=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),pl.exports=np(),pl.exports}var ju;function sp(){if(ju)return ho;ju=1;var r=rp();return ho.createRoot=r.createRoot,ho.hydrateRoot=r.hydrateRoot,ho}var op=sp(),V=is();const Ie=Gu(V),gl=["x","y"],kt=64,hr=()=>({on:!1,offset:0,velocity:1}),Qu=[{id:"static",label:"Static",offsets:[0]},{id:"i-iv-v",label:"I - IV - V",offsets:[0,5,7]},{id:"i-v-vi-iv",label:"I - V - vi - IV",offsets:[0,7,9,5]},{id:"ii-v-i",label:"ii - V - I",offsets:[2,7,0]},{id:"vi-iv-i-v",label:"vi - IV - I - V",offsets:[9,5,0,7]},{id:"blues",label:"Blues I - IV - V",offsets:[0,5,7,0]},{id:"modal-dorian",label:"Modal Dorian",offsets:[0,2,3,5]},{id:"chromatic-rise",label:"Chromatic Rise",offsets:[0,1,2,3,4,5]}],It={model:"va",harmonics:.6,timbre:.5,morph:.5,level:1},Mt={id:null,name:"Empty",dataUrl:null,rootMidi:60,loop:!0,recordedAt:void 0,durationSec:0,trimStartSec:0,trimEndSec:0},Cu=r=>({...r,mode:r.mode??"analog",macro:{...It,...r.macro??{}},sampler:{...Mt,...r.sampler??{}}}),A={osc1:{wave:"sawtooth",detune:0,detuneFine:0,octave:0,mode:"analog",macro:{...It},sampler:{...Mt}},osc2:{wave:"square",detune:0,detuneFine:0,octave:0,mode:"analog",macro:{...It},sampler:{...Mt}},mix:0,fm:{enabled:!1,ratio:2,amount:0},sub:{enabled:!1,octave:1,level:0,wave:"square"},ring:{enabled:!1,amount:1},filter:{type:"lowpass",cutoff:1200,q:.8},envelope:{attack:.01,decay:.2,sustain:.7,release:.3},master:{gain:.2},sampler:{...Mt},engineMode:"classic",macro:{...It},effects:{delay:{enabled:!1,time:.25,feedback:.3,mix:.2},reverb:{enabled:!1,size:.5,decay:.5,mix:.25}},lfo1:{enabled:!1,wave:"sine",rateHz:5,amount:.2,dest:"pitch"},lfo2:{enabled:!1,wave:"triangle",rateHz:.5,amount:.4,dest:"filter"},arp:{enabled:!1,rateHz:8,bpmSync:!1,bpm:120,division:"1/8",gate:.6,chordSource:"preset",mode:"up",octaves:1,chord:"none",latch:!1,swingPct:0,repeats:1,patternLen:0},sequencer:{enabled:!1,playing:!1,bpm:120,division:"1/16",swingPct:0,gate:.6,rootMidi:60,length:16,steps:Array.from({length:kt},()=>hr()),progressionMode:"static",grooveBaseMidi:60,spiceAmount:0,spiceSeed:void 0},expression:{x:"osc1.detune",y:"filter.cutoff"},modMatrix:[]};function ip(r){let o=0;for(let i=0;i<r.length;i++)o=(o<<5)-o+r.charCodeAt(i),o|=0;return o===0&&(o=1),()=>(o^=o<<13,o^=o>>>17,o^=o<<5,(o>>>0)/4294967295)}const it=(r,o)=>Number.isFinite(r)?r:o,ln=r=>{const o=r;if(!o._managedLifecycleAttached){o._managedLifecycleAttached=!0;const i=()=>{o._started=!1};if(typeof o.addEventListener=="function")o.addEventListener("ended",i);else{const u=o.onended;o.onended=d=>{i(),typeof u=="function"&&u.call(o,d)}}}return o._started==null&&(o._started=!!o._autoStarted),o},lp=r=>{const o=ln(r);o._started=!0},ap=r=>r==="lfo1"||r==="lfo2",cp=r=>r==="filter.cutoff"||r==="filter.q"||r==="master.gain"||r==="mix",up=r=>r==="exprX"||r==="exprY"||r==="seqStep"||r==="velocity"||r==="gate",pe=(r,o,i)=>Math.min(i,Math.max(o,r));function Eu(r){const o=r.sampleRate*1,i=r.createBuffer(1,o,r.sampleRate),u=i.getChannelData(0);for(let d=0;d<o;d++)u[d]=Math.random()*2-1;return i}function dp(r,o,i=2048){const u=new Float32Array(i),d=Math.max(1e-4,r)*6,f=(o-.5)*2;for(let p=0;p<i;p++){let x=p/(i-1)*2-1;x+=f*.5;const h=Math.tanh(d*x)/Math.tanh(d);u[p]=h}return u}function fp(r,o,i){const u=r.createOscillator(),d=r.createOscillator();u.type="sawtooth",d.type="triangle",u.frequency.value=o,d.frequency.value=o;const f=r.createGain(),p=r.createGain();f.gain.value=1-i.timbre,p.gain.value=i.timbre;const x=r.createGain(),h=r.createBiquadFilter();return h.type="lowpass",h.frequency.value=1e3+i.harmonics*15e3,h.Q.value=.5,d.connect(f).connect(x),u.connect(p).connect(x),x.connect(h),d.start(),u.start(),{output:h,stop:g=>{try{d.stop(g)}catch{}try{u.stop(g)}catch{}},pitched:[d,u]}}function pp(r,o,i){const u=r.createOscillator();u.type="sine",u.frequency.value=o;const d=r.createGain(),f=r.createWaveShaper(),p=r.createGain(),x=.2+i.harmonics*1.6,h=i.morph;f.curve=dp(x,h),f.oversample="4x",d.gain.value=1,p.gain.value=i.level;const g=r.createBiquadFilter();return g.type="lowpass",g.frequency.value=4e3+i.timbre*16e3,g.Q.value=.2,u.connect(d).connect(f).connect(g).connect(p),u.start(),{output:p,stop:v=>{try{u.stop(v)}catch{}},pitched:[u]}}function mp(r,o,i){const u=r.createGain(),d=r.createBufferSource(),f=Math.floor(r.sampleRate*.02),p=r.createBuffer(1,f,r.sampleRate),x=p.getChannelData(0);for(let j=0;j<f;j++)x[j]=(Math.random()*2-1)*(1-j/f);d.buffer=p,d.loop=!1;const h=1/Math.max(20,o),g=r.createDelay(1);g.delayTime.value=h;const v=r.createGain(),y=.78+i.harmonics*.2,M=Math.max(.8,1-o*9e-4);v.gain.value=Math.min(.96,y*M);const N=r.createBiquadFilter();N.type="lowpass",N.frequency.value=1e3+i.timbre*8e3,N.Q.value=0;const w=r.createBiquadFilter();return w.type="highpass",w.frequency.value=50+i.morph*400,d.connect(w).connect(g).connect(u),g.connect(N).connect(v).connect(g),u.gain.value=i.level,d.start(),{output:u,stop:j=>{},pitched:[]}}function hp(r,o,i){const d=r.createGain(),f=r.createBiquadFilter();f.type="lowpass",f.frequency.value=800+i.timbre*12e3,f.Q.value=.3;const p=0+i.harmonics*30,x=[-1,-.6,-.2,.2,.6,1],h=[];for(let v=0;v<6;v++){const y=r.createOscillator();y.type="sawtooth",y.frequency.value=o,y.detune.value=x[v]*p;const M=r.createGain();M.gain.value=1/6;const N=r.createStereoPanner(),w=(i.morph-.5)*2,j=x[v]/Math.max(1,Math.max(...x.map(Math.abs)))*w;N.pan.value=j,y.connect(M).connect(N).connect(d),h.push({osc:y,pan:N}),y.start()}d.connect(f);const g=r.createGain();return g.gain.value=i.level,f.connect(g),{output:g,stop:v=>h.forEach(({osc:y})=>{try{y.stop(v)}catch{}}),pitched:h.map(v=>v.osc)}}function gp(r,o,i){const u=r.createOscillator();u.type="sawtooth",u.frequency.value=o;const d=r.createGain();d.gain.value=1;const f=r.createConstantSource(),p=(i.morph-.5)*1.6;f.offset.value=p,f.start(),u.connect(d),f.connect(d);const x=r.createWaveShaper(),h=1+i.harmonics*24,g=2048,v=new Float32Array(g);for(let N=0;N<g;N++){const w=N/(g-1)*2-1;v[N]=Math.tanh(h*w)}x.curve=v,x.oversample="4x";const y=r.createBiquadFilter();y.type="lowpass",y.frequency.value=2e3+i.timbre*14e3,y.Q.value=.2;const M=r.createGain();return M.gain.value=i.level,d.connect(x).connect(y).connect(M),u.start(),{output:M,stop:N=>{try{u.stop(N)}catch{}try{f.stop(N)}catch{}},pitched:[u]}}function vp(r,o,i){const u=r.createOscillator();u.type="sine",u.frequency.value=o;const d=r.createOscillator();d.type="sine";const f=.25+i.harmonics*7.75;d.frequency.value=o*f;const p=r.createGain();p.gain.value=Math.max(0,i.timbre)*o*2,d.connect(p).connect(u.frequency);const x=r.createBiquadFilter();x.type="lowpass",x.frequency.value=1e3+i.morph*15e3,x.Q.value=.1;const h=r.createGain();return h.gain.value=i.level,u.connect(x).connect(h),u.start(),d.start(),{output:h,stop:g=>{try{u.stop(g)}catch{}try{d.stop(g)}catch{}},pitched:[u]}}function yp(r,o,i){const u=["sine","triangle","sawtooth","square"],d=Math.min(3,Math.max(0,Math.floor(i.morph*3.00001))),f=Math.min(1,Math.max(0,i.morph*3-d)),p=(M,N)=>{const w=r.createOscillator();w.type=M,w.frequency.value=o;const j=r.createGain();return j.gain.value=N,w.connect(j),{osc:w,g:j}},x=p(u[d],d===3?1:1-f),h=d<3?p(u[d+1],f):null,g=r.createBiquadFilter();g.type="lowpass",g.frequency.value=800+i.harmonics*15e3,g.Q.value=.1+i.timbre*.6;const v=r.createGain();v.gain.value=i.level,x.g.connect(g),h&&h.g.connect(g),g.connect(v),x.osc.start(),h&&h.osc.start();const y=[x.osc];return h&&y.push(h.osc),{output:v,stop:M=>{try{x.osc.stop(M)}catch{}try{h?.osc.stop(M)}catch{}},pitched:y}}function xp(r,o,i){const f=Math.round(2+i.harmonics*14),p=.5+(1-i.timbre)*2,x=(i.morph-.5)*2,h=r.createGain(),g=[];for(let M=1;M<=f;M++){const N=r.createOscillator();N.type="sine",N.frequency.value=o*M;let w=1/Math.pow(M,p);const k=M%2===0?Math.max(.1,(x+1)/2):Math.max(.1,(1-x)/2);w*=k;const L=r.createGain();L.gain.value=w,N.connect(L).connect(h),N.start(),g.push(N)}const v=r.createBiquadFilter();v.type="lowpass",v.frequency.value=1e3+i.timbre*15e3,v.Q.value=.2;const y=r.createGain();return y.gain.value=i.level,h.connect(v).connect(y),{output:y,stop:M=>{for(const N of g)try{N.stop(M)}catch{}},pitched:g}}function wp(r,o,i){const u=[[0,4,7],[0,3,7],[0,5,7],[0,2,7],[0,4,7,10],[0,3,7,10],[0,4,7,11],[0,3,6,9],[0,4,8],[-12,0,7,12]],d=Math.max(0,Math.min(u.length-1,Math.floor(i.harmonics*u.length))),f=u[d],p=(i.morph-.5)*2,x=r.createGain(),h=r.createBiquadFilter();h.type="lowpass",h.frequency.value=900+i.timbre*15e3,h.Q.value=.3;const g=r.createGain();g.gain.value=i.level;const v=[],y=[-1,-.3,.3,1];return f.forEach((M,N)=>{const w=r.createOscillator();w.type="sawtooth";const j=440*Math.pow(2,Math.log2(o/440)+M/12);w.frequency.value=j;const k=y[N%y.length]*p*15;w.detune.value=k;const L=r.createGain();L.gain.value=1/f.length;const R=r.createStereoPanner();R.pan.value=y[N%y.length]*p,w.connect(L).connect(R).connect(x),w.start(),v.push(w)}),x.connect(h).connect(g),{output:g,stop:M=>{for(const N of v)try{N.stop(M)}catch{}},pitched:v}}function Sp(r,o,i){const u=r.createOscillator();u.frequency.value=o;const d=8,p=Math.max(d,Math.round(d+i.harmonics*(64-d))),x=Math.min(.92,Math.max(.08,.08+i.timbre*.84)),h=(i.morph-.5)*Math.PI*2,g=new Float32Array(p+1),v=new Float32Array(p+1);g[0]=0;for(let j=1;j<=p;j++){const k=j,L=2/(k*Math.PI)*Math.sin(k*Math.PI*x),R=k/(p+1),W=R===0?1:Math.sin(Math.PI*R)/(Math.PI*R),X=L*W;if(!Number.isFinite(X)||Math.abs(X)<1e-6)continue;const q=h*k;g[k]=X*Math.cos(q),v[k]=X*Math.sin(q)}const y=r.createPeriodicWave(g,v,{disableNormalization:!1});u.setPeriodicWave(y);const M=r.createBiquadFilter();M.type="lowpass";const N=Math.max(o*2,o*Math.min(p+2,40));M.frequency.value=Math.min(r.sampleRate*.48,N),M.Q.value=Math.max(.35,.7+(.5-x)*.6);const w=r.createGain();return w.gain.value=i.level,u.connect(M).connect(w),u.start(),{output:w,stop:j=>{try{u.stop(j)}catch{}},pitched:[u]}}function kp(r,o,i){const u=r.createOscillator();u.type="sawtooth",u.frequency.value=o;const d=r.createGain();d.gain.value=1,u.connect(d);const f=r.createGain();f.gain.value=1;const p=[{ratios:[1,2.6,4.9],widths:[.22,.18,.28],gains:[1,.7,.45]},{ratios:[.9,2.1,3.5],widths:[.28,.22,.32],gains:[1,.65,.55]},{ratios:[1.3,2.8,4.2],widths:[.2,.16,.24],gains:[.9,.75,.5]},{ratios:[.8,1.6,2.8],widths:[.32,.26,.36],gains:[1.05,.6,.55]}],x=i.morph*(p.length-1),h=Math.floor(x),g=Math.min(p.length-1,h+1),v=x-h,y=p[h]??p[0],M=p[g],N=.8+i.harmonics*1.4,w=.6+i.timbre*2.4,j=r.sampleRate*.48,k=y.ratios.length;for(let X=0;X<k;X++){const q=y.ratios[X],P=M.ratios[X],B=y.widths[X],z=M.widths[X],U=y.gains[X],D=M.gains[X],ee=(q+(P-q)*v)*N,C=Math.max(.05,B+(z-B)*v),I=U+(D-U)*v,Q=Math.min(j,Math.max(60,o*ee)),$=r.createBiquadFilter();$.type="bandpass",$.frequency.value=Q;const ie=Math.max(.5,Math.min(30,1/C*w));$.Q.value=ie;const de=r.createGain();de.gain.value=I/k*(1/Math.sqrt(ie)),d.connect($),$.connect(de).connect(f)}const L=r.createBiquadFilter();L.type="highpass",L.frequency.value=Math.max(40,o*.5),L.Q.value=.7;const R=r.createBiquadFilter();R.type="lowpass",R.frequency.value=Math.min(j,3e3+i.harmonics*14e3),R.Q.value=.7+i.timbre*.6,f.connect(L).connect(R);const W=r.createGain();return W.gain.value=i.level,R.connect(W),u.start(),{output:W,stop:X=>{try{u.stop(X)}catch{}},pitched:[u]}}function Nu(r,o,i){switch(i.model){case"fold":return pp(r,o,i);case"pluck":return mp(r,o,i);case"supersaw":return hp(r,o,i);case"pwm":return gp(r,o,i);case"fm2op":return vp(r,o,i);case"wavetable":return yp(r,o,i);case"harmonic":return xp(r,o,i);case"chord":return wp(r,o,i);case"dirichlet":return Sp(r,o,i);case"formant":return kp(r,o,i);case"va":default:return fp(r,o,i)}}const ss=Math.PI*2,Pu=(r,o,i)=>r<o?o:r>i?i:r,Mp=r=>{let o=1;for(;o<r;)o<<=1;return o},bp=r=>{const o=new Uint32Array(r);let i=0;for(;1<<i<r;)i++;for(let u=0;u<r;u++){let d=0,f=u;for(let p=0;p<i;p++)d=d<<1|f&1,f>>=1;o[u]=d}return o},jp=r=>{const o=new Float32Array(r),i=ss/(r-1);for(let u=0;u<r;u++)o[u]=.5*(1-Math.cos(i*u));return o};class Cp{size;permutation;twiddleReal;twiddleImag;constructor(o){this.size=o,this.permutation=bp(o),this.twiddleReal=[],this.twiddleImag=[];for(let i=2;i<=o;i<<=1){const u=i>>1,d=ss/i,f=new Float32Array(u),p=new Float32Array(u);for(let x=0;x<u;x++)f[x]=Math.cos(d*x),p[x]=Math.sin(d*x);this.twiddleReal.push(f),this.twiddleImag.push(p)}}fft(o,i,u){const{size:d,permutation:f,twiddleReal:p,twiddleImag:x}=this;for(let g=0;g<d;g++){const v=f[g];if(v>g){const y=o[g],M=i[g];o[g]=o[v],i[g]=i[v],o[v]=y,i[v]=M}}let h=0;for(let g=2;g<=d;g<<=1){const v=g>>1,y=p[h],M=x[h];for(let N=0;N<d;N+=g)for(let w=0;w<v;w++){const j=N+w,k=j+v,L=y[w],R=u?-M[w]:M[w],W=o[k],X=i[k],q=L*W-R*X,P=L*X+R*W,B=o[j],z=i[j];o[k]=B-q,i[k]=z-P,o[j]=B+q,i[j]=z+P}h++}if(u){const g=1/d;for(let v=0;v<d;v++)o[v]*=g,i[v]*=g}}}const Ep=2048,Np=512,Pp=(r,o,i)=>r<=0?0:r<=o?1:Math.ceil((r-o)/i)+1,_p=r=>((r>Math.PI||r<-Math.PI)&&(r-=ss*Math.round(r/ss)),r),Rp=r=>{const{channels:o,pitchRatio:i}=r,u=Mp(Pu(r.windowSize??Ep,256,8192)),d=Pu(r.hopSize??Np,1,u>>1);if(!o.length)return[];const f=Number.isFinite(i)&&i>0?i:1;if(Math.abs(f-1)<1e-6)return o.map(B=>new Float32Array(B));const p=o[0].length;if(p===0)return o.map(()=>new Float32Array(0));const x=jp(u),h=new Cp(u),g=(u>>1)+1,v=Pp(p,u,d),y=p+u,M=o.map(()=>new Float32Array(y)),N=new Float32Array(y),w=new Float32Array(u),j=new Float32Array(u),k=new Float32Array(u),L=new Float32Array(u),R=new Float32Array(g),W=new Float32Array(g),X=o.map(()=>new Float32Array(g)),q=o.map(()=>new Float32Array(g));for(let B=0;B<v;B++){const z=B*d;for(let U=0;U<o.length;U++){const D=o[U];w.fill(0),j.fill(0);for(let I=0;I<u;I++){const Q=z+I,$=Q<p?D[Q]:0;w[I]=$*x[I]}h.fft(w,j,!1);const ee=X[U],C=q[U];for(let I=0;I<g;I++){const Q=w[I],$=j[I],ie=Math.hypot(Q,$),de=Math.atan2($,Q),Y=ss*d*I/u,se=_p(de-ee[I]-Y),te=Y+se;R[I]=ie,W[I]=te,ee[I]=de}k.fill(0),L.fill(0);for(let I=0;I<g;I++){const Q=I/f;let $=0,ie=0;if(Q<=0)$=R[0],ie=W[0]*f;else if(Q>=g-1){const te=g-1;$=R[te],ie=W[te]*f}else{const te=Math.floor(Q),_=te+1,H=Q-te,Se=R[te],xe=R[_],be=W[te],me=W[_];$=Se+H*(xe-Se),ie=(be+H*(me-be))*f}C[I]+=ie;const de=C[I],Y=$*Math.cos(de),se=$*Math.sin(de);if(k[I]=Y,L[I]=se,I>0&&I<g-1){const te=u-I;k[te]=Y,L[te]=-se}}L[0]=0,L[g-1]=0,h.fft(k,L,!0);for(let I=0;I<u;I++){const Q=z+I;if(Q>=y)break;const $=x[I];M[U][Q]+=k[I]*$,U===0&&(N[Q]+=$*$)}}}return M.map(B=>{const z=B.subarray(0,p);for(let U=0;U<z.length;U++){const D=N[U];D>1e-6&&(z[U]/=D)}return Float32Array.from(z)})};function Tp(r,o){if(o==="osc1"){const i=r.osc1.detune||0,u=r.osc1.detuneFine??0;return i+u}return r.osc2.detune||0}function Lp(r,o,i){if(!o.buffer)return null;const u=o.buffer.sampleRate,d=o.meta.trimStartSec??0,f=o.meta.trimEndSec??o.buffer.duration,p=pe(d,0,o.buffer.duration),x=pe(f,p+.005,o.buffer.duration),h=Math.max(0,Math.floor(p*u)),g=Math.max(h+1,Math.min(o.buffer.length,Math.floor(x*u)));if(g-h<=0)return null;const M=`${o.meta.id??"inline"}|${o.meta.dataUrl??"data"}|${h}|${g}`,N=Number.isFinite(i)&&i>0?i:1,w=N.toFixed(6),j=`${M}|${w}|${u}|${o.buffer.numberOfChannels}`,k=o.pitchCache.get(j);if(k)return k;const L=o.buffer.numberOfChannels,R=[];for(let q=0;q<L;q++){const B=o.buffer.getChannelData(q).subarray(h,g);R.push(Float32Array.from(B))}const W=Math.abs(N-1)<1e-4?R:Rp({channels:R,pitchRatio:N});if(!W.length||W[0].length===0)return null;const X=r.createBuffer(W.length,W[0].length,u);for(let q=0;q<W.length;q++)X.copyToChannel(W[q],q,0);return o.pitchCache.set(j,X),X}class Op{osc1Detune;osc2Detune;mixControl;mixBias;mixConnections=[];ctx;sources=[];macroVoices=[];gain;gainScale;lfoParamConnections=[];constructor(o,i,u,d,f,p,x,h){this.ctx=o;const g=o.currentTime;this.gain=o.createGain(),this.gain.gain.value=0,this.gain.connect(i);const v=.65;this.gainScale=v/Math.max(1,Math.sqrt(x+1));const y=d.envelope,M=this.gain.gain;M.cancelScheduledValues(g),M.setValueAtTime(0,g),M.linearRampToValueAtTime(this.gainScale,g+Math.max(.001,y.attack)),M.linearRampToValueAtTime(y.sustain*this.gainScale,g+y.attack+Math.max(.001,y.decay));const w=(C=>{const I=Number(C??0);return Number.isFinite(I)?Math.max(-3,Math.min(3,Math.round(I))):0})(d.osc1.octave),j=u*Math.pow(2,w),k=d.engineMode??"classic",L=C=>C==="macro"?"macro":C==="sampler"?"sampler":"analog",R=d.osc1.mode??L(k),W=d.osc2.mode??L(k),X=o.createGain();X.gain.value=0;const q=o.createGain();q.gain.value=0;const P=o.createGain();P.gain.value=1,X.connect(P),q.connect(P),P.connect(this.gain);const B=pe(d.mix,0,1);this.mixControl=o.createConstantSource(),this.mixControl.offset.value=B,this.mixBias=o.createConstantSource(),this.mixBias.offset.value=1;const z=o.createGain();z.gain.value=-1,this.mixControl.connect(q.gain),this.mixControl.connect(z),z.connect(X.gain),this.mixBias.connect(X.gain),this.mixControl.start(),this.mixBias.start();let U=null,D=null,ee=null;if(R==="macro"){const C=d.osc1.macro??d.macro??It,I=Nu(o,j,C);if(I.output.connect(X),this.macroVoices.push(I),U||(U=I.output),I.pitched)for(const Q of I.pitched)this.connectLfos(Q.detune,h)}else if(R==="sampler"){const C=this.createSamplerSource(o,j,"osc1",d,p);C&&(C.connect(X),this.sources.push(C),U=C)}else if(d.osc1.wave==="noise"&&f){const C=ln(o.createBufferSource());C.buffer=f,C.loop=!0,C.connect(X),this.sources.push(C),U=C}else if(d.osc1.wave==="sample"){const C=this.createSamplerSource(o,j,"osc1",d,p);C&&(C.connect(X),this.sources.push(C),U=C)}else{const C=ln(o.createOscillator());C.type=d.osc1.wave,C.frequency.setValueAtTime(j,g);const I=d.osc1.detuneFine??0;if(C.detune.value=(d.osc1.detune||0)+I,C.connect(X),this.sources.push(C),U=C,D=C,d.fm.enabled&&d.osc2.wave!=="noise"&&d.osc2.wave!=="sample"){const Q=ln(o.createOscillator());Q.type=d.osc2.wave;const $=Math.max(.01,d.fm.ratio||1);Q.frequency.setValueAtTime(u*$,g),Q.detune.value=d.osc2.detune||0;const ie=o.createGain();ie.gain.value=Math.max(0,d.fm.amount||0),Q.connect(ie).connect(C.frequency),this.sources.push(Q)}this.connectLfos(C.detune,h)}if(W==="macro"){const C=d.osc2.macro??d.macro??It,I=Nu(o,u,C);if(I.output.connect(q),this.macroVoices.push(I),I.pitched)for(const Q of I.pitched)this.connectLfos(Q.detune,h)}else if(W==="sampler"){const C=this.createSamplerSource(o,u,"osc2",d,p);C&&(C.connect(q),this.sources.push(C))}else{if(d.osc2.wave==="noise"&&f){const C=ln(o.createBufferSource());C.buffer=f,C.loop=!0,C.connect(q),this.sources.push(C)}else{const C=ln(o.createOscillator());C.type=d.osc2.wave,C.frequency.setValueAtTime(u,g),C.detune.value=d.osc2.detune||0,C.connect(q),this.sources.push(C),ee=C,this.connectLfos(C.detune,h)}if(d.ring.enabled&&U&&ee){const C=o.createGain();C.gain.value=0,U.connect(C);const I=o.createGain();I.gain.value=1,ee.connect(I),I.connect(C.gain);const Q=Math.max(0,Math.min(1,d.ring.amount));P.gain.value=1-Q;const $=o.createGain();$.gain.value=Q,C.connect($).connect(this.gain)}}if(d.sub.enabled){const C=ln(o.createOscillator());C.type=d.sub.wave||"square";const I=u/Math.pow(2,Math.max(1,Math.min(2,d.sub.octave)));C.frequency.setValueAtTime(I,g);const Q=o.createGain();Q.gain.value=Math.max(0,Math.min(1,d.sub.level)),C.connect(Q).connect(this.gain),this.sources.push(C),this.connectLfos(C.detune,h)}this.sources.forEach(C=>{const I=C;"start"in C&&!I._started&&(C.start(),lp(C))}),D&&(this.osc1Detune=D.detune),ee&&(this.osc2Detune=ee.detune)}connectLfos(o,i){i.lfo1.enabled&&i.lfo1.dest==="pitch"&&(i.lfo1.gain.connect(o),this.lfoParamConnections.push({g:i.lfo1.gain,p:o})),i.lfo2.enabled&&i.lfo2.dest==="pitch"&&(i.lfo2.gain.connect(o),this.lfoParamConnections.push({g:i.lfo2.gain,p:o}))}createSamplerSource(o,i,u,d,f){if(!f.buffer)return null;const p=Number.isFinite(f.meta.rootMidi)?f.meta.rootMidi:60,x=440*Math.pow(2,(p-69)/12),h=Tp(d,u),g=Math.pow(2,h/1200),v=x>0?i/x*g:g,y=Lp(o,f,v);if(!y)return null;const M=y.duration,N=!!f.meta.loop&&M>.01,w=ln(o.createBufferSource());return w.buffer=y,w.loop=N,N&&(w.loopStart=0,w.loopEnd=M),w}stop(o,i){const u=Math.max(this.ctx.currentTime,o),d=this.gain.gain;d.cancelScheduledValues(u),d.setValueAtTime(d.value,u),d.linearRampToValueAtTime(0,u+Math.max(.001,i));const f=u+i+.05;this.sources.forEach(p=>{try{p._started&&p.stop(f)}catch{}}),this.macroVoices.forEach(p=>{try{p.stop(f)}catch{}});try{this.mixControl?.stop(f)}catch{}try{this.mixBias?.stop(f)}catch{}setTimeout(()=>{this.lfoParamConnections.forEach(p=>{try{p.g.disconnect(p.p)}catch{}}),this.mixConnections.forEach(p=>{});try{this.gain.disconnect()}catch{}},(i+.1)*1e3)}}const go=(r,o)=>r.patch[o]??A[o],vo=r=>r.patch.macro??A.macro,mt={"filter.cutoff":{getBase:r=>it(r.patch.filter.cutoff,A.filter.cutoff),range:(r,o)=>{const i=pe(o*.25,80,12e3),u=pe(o*4,i+20,14e3);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({filter:{cutoff:o}},{fromExpression:!0})},"filter.q":{getBase:r=>it(r.patch.filter.q,A.filter.q),range:(r,o)=>{const i=pe(o*.5,.1,20),u=pe(o*2.5,i+.1,20);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({filter:{q:o}},{fromExpression:!0})},"master.gain":{getBase:r=>it(r.patch.master.gain,A.master.gain),range:(r,o)=>{const i=pe(o*.4,.01,1),u=pe(o*1.6,i+.01,1);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({master:{gain:o}},{fromExpression:!0})},mix:{getBase:r=>it(r.patch.mix,A.mix),range:()=>({min:0,max:1}),apply:(r,o)=>r.applyPatch({mix:pe(o,0,1)},{fromExpression:!0})},"osc1.detune":{getBase:r=>it(r.patch.osc1.detune,A.osc1.detune),range:(r,o)=>{const i=pe(o-120,-2400,2400),u=pe(o+120,i+1,2400);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({osc1:{detune:o}},{fromExpression:!0})},"osc2.detune":{getBase:r=>it(r.patch.osc2.detune,A.osc2.detune),range:(r,o)=>{const i=pe(o-120,-2400,2400),u=pe(o+120,i+1,2400);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({osc2:{detune:o}},{fromExpression:!0})},"fm.amount":{getBase:r=>it(r.patch.fm.amount,A.fm.amount),range:(r,o)=>{const i=pe(o*.5,0,4e3),u=pe(Math.max(o+400,400),i+10,4e3);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({fm:{amount:pe(o,0,4e3)}},{fromExpression:!0})},"envelope.attack":{getBase:r=>it(r.patch.envelope.attack,A.envelope.attack),range:(r,o)=>{const i=pe(o*.2,.001,4),u=pe(o*3,i+.01,4);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({envelope:{attack:o}},{fromExpression:!0})},"envelope.release":{getBase:r=>it(r.patch.envelope.release,A.envelope.release),range:(r,o)=>{const i=pe(o*.5,.03,6),u=pe(o*3,i+.05,6);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({envelope:{release:o}},{fromExpression:!0})},"macro.harmonics":{getBase:r=>it(vo(r).harmonics,A.macro.harmonics),range:()=>({min:0,max:1}),apply:(r,o)=>r.applyPatch({macro:{harmonics:pe(o,0,1)}},{fromExpression:!0})},"macro.timbre":{getBase:r=>it(vo(r).timbre,A.macro.timbre),range:()=>({min:0,max:1}),apply:(r,o)=>r.applyPatch({macro:{timbre:pe(o,0,1)}},{fromExpression:!0})},"macro.morph":{getBase:r=>it(vo(r).morph,A.macro.morph),range:()=>({min:0,max:1}),apply:(r,o)=>r.applyPatch({macro:{morph:pe(o,0,1)}},{fromExpression:!0})},"macro.level":{getBase:r=>it(vo(r).level,A.macro.level),range:()=>({min:0,max:1}),apply:(r,o)=>r.applyPatch({macro:{level:pe(o,0,1)}},{fromExpression:!0})},"lfo1.rateHz":{getBase:r=>it(go(r,"lfo1").rateHz,A.lfo1.rateHz),range:(r,o)=>{const i=pe(o*.25,.05,30),u=pe(o*4,i+.05,40);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({lfo1:{rateHz:o}},{fromExpression:!0})},"lfo1.amount":{getBase:r=>it(go(r,"lfo1").amount,A.lfo1.amount),range:()=>({min:0,max:1}),apply:(r,o)=>r.applyPatch({lfo1:{amount:pe(o,0,1)}},{fromExpression:!0})},"lfo2.rateHz":{getBase:r=>it(go(r,"lfo2").rateHz,A.lfo2.rateHz),range:(r,o)=>{const i=pe(o*.25,.02,20),u=pe(o*4,i+.05,30);return{min:i,max:u}},apply:(r,o)=>r.applyPatch({lfo2:{rateHz:o}},{fromExpression:!0})},"lfo2.amount":{getBase:r=>it(go(r,"lfo2").amount,A.lfo2.amount),range:()=>({min:0,max:1}),apply:(r,o)=>r.applyPatch({lfo2:{amount:pe(o,0,1)}},{fromExpression:!0})}},yo={"filter.cutoff":mt["filter.cutoff"],"filter.q":mt["filter.q"],"master.gain":mt["master.gain"],"macro.harmonics":mt["macro.harmonics"],"macro.timbre":mt["macro.timbre"],"macro.morph":mt["macro.morph"],"macro.level":mt["macro.level"],"fm.amount":mt["fm.amount"],mix:mt.mix,"envelope.attack":mt["envelope.attack"],"envelope.release":mt["envelope.release"]};class El{ctx;master;filter;analyser;noiseBuffer;activeVoices=new Map;fxInput;fxOutput;currentFxTap=null;lfos;expression2D={active:!1,x:.5,y:.5};expressionAxisTargets={x:A.expression.x,y:A.expression.y};expressionSnapshot={x:null,y:null};expressionApplying=!1;samplerBuffer=null;samplerMeta={...A.sampler};samplerLoadToken=0;samplerPitchCache=new Map;modMatrixConnections=new Map;controlSourceValues={exprX:0,exprY:0,seqStep:0,velocity:-1,gate:-1};controlModRows=[];controlModSnapshots=new Map;mixAudioAmounts=[0,0];activeNoteVelocities=new Map;patch;arpHeld=new Set;arpIndex=0;arpTimer=null;arpLastNote=null;arpBypass=!1;arpPhase=0;arpRepeatCounter=0;arpCurrentStepMs=0;seqTimer=null;seqPhase=0;seqCurrentStepMs=0;seqStepIndex=0;seqLastNote=null;seqControlToken=0;seqCurrentRoot=A.sequencer?.rootMidi??60;seqProgressionIndex=0;getModSourceIndex(o){switch(o){case"lfo1":return 0;case"lfo2":return 1;default:return-1}}getModTargetInfo(o){switch(o){case"filter.cutoff":return{param:this.filter.frequency,type:"param",scale:i=>i*2e3};case"filter.q":return{param:this.filter.Q,type:"param",scale:i=>i*5};case"master.gain":return{param:this.master.gain,type:"param",scale:i=>i*.5};default:return null}}recordDestination;getRecordDestination(){return this.recordDestination}getLfoConfig(o){return o==="lfo2"?this.patch.lfo2??A.lfo2:this.patch.lfo1??A.lfo1}removeModConnection(o){const i=this.modMatrixConnections.get(o);if(!i)return;const u=this.lfos[i.sourceIndex]?.gain;if(u)try{u.disconnect(i.tap)}catch{}try{i.tap.disconnect()}catch{}this.modMatrixConnections.delete(o)}applyModMatrix(o=[]){const i=o.filter(p=>p&&p.enabled),u=i.filter(p=>ap(p.source)&&cp(p.target)),d=new Set,f=[0,0];for(const p of u){const x=this.getModSourceIndex(p.source);if(x<0)continue;if(p.target==="mix"){const W=this.lfos[x]?.gain,X=p.source==="lfo2"?"lfo2":"lfo1",q=this.getLfoConfig(X),P=Math.max(0,q.amount??0),B=W?Math.abs(W.gain.value):0,z=B>1e-6?B:P>1e-6?P:1;f[x]+=p.amount/z;continue}const h=this.lfos[x]?.gain;if(!h)continue;const g=this.getModTargetInfo(p.target);if(!g)continue;const v=g.scale(p.amount),y=p.source==="lfo2"?"lfo2":"lfo1",M=this.getLfoConfig(y),N=Math.max(0,M.amount??0),w=Math.abs(h.gain.value),j=w>0?w:N,k=j>0?v/j:0,L=this.modMatrixConnections.get(p.id);L&&(L.sourceIndex!==x||L.target!==p.target)&&this.removeModConnection(p.id);let R=this.modMatrixConnections.get(p.id);if(R)R.tap.gain.setValueAtTime(k,this.ctx.currentTime),R.target=p.target;else{const W=this.ctx.createGain();W.gain.value=k,h.connect(W),W.connect(g.param),R={sourceIndex:x,tap:W,target:p.target},this.modMatrixConnections.set(p.id,R)}d.add(p.id)}for(const[p]of this.modMatrixConnections)d.has(p)||this.removeModConnection(p);this.resetControlTargets(),this.controlModRows=i.filter(p=>up(p.source)),this.applyControlModMatrix(),this.mixAudioAmounts=[pe(f[0],-1,1),pe(f[1],-1,1)],this.refreshMixAudioConnections()}refreshMixAudioConnections(){const o=this.ctx.currentTime,i=[this.patch.lfo1??A.lfo1,this.patch.lfo2??A.lfo2],u=Math.min(this.lfos.length,this.mixAudioAmounts.length);for(const d of this.activeVoices.values())if(d.mixControl){d.mixConnections||(d.mixConnections=[]);for(let f=0;f<u;f++){const p=this.mixAudioAmounts[f],h=!!i[f]?.enabled&&Math.abs(p)>1e-4;let g=d.mixConnections.findIndex(v=>v.sourceIndex===f);if(h)if(g===-1){const v=this.ctx.createGain();v.gain.value=p;const y=this.lfos[f]?.gain;if(!y)continue;y.connect(v),v.connect(d.mixControl.offset),d.mixConnections.push({sourceIndex:f,gain:v})}else d.mixConnections[g].gain.gain.setValueAtTime(p,o);else if(g!==-1){const v=d.mixConnections[g],y=this.lfos[v.sourceIndex]?.gain;if(y)try{y.disconnect(v.gain)}catch{}try{v.gain.disconnect()}catch{}d.mixConnections.splice(g,1)}}}}getControlSourceValue(o){return o==="exprX"?this.controlSourceValues.exprX:o==="exprY"?this.controlSourceValues.exprY:o==="seqStep"?this.controlSourceValues.seqStep:o==="velocity"?this.controlSourceValues.velocity:o==="gate"?this.controlSourceValues.gate:0}updateControlSource(o,i){const u=pe(i,-1,1);this.controlSourceValues[o]!==u&&(this.controlSourceValues[o]=u,this.applyControlModMatrix())}resetControlTargets(){if(this.controlModSnapshots.size!==0){for(const[o,i]of this.controlModSnapshots){const u=yo[o];u&&u.apply(this,i)}this.controlModSnapshots.clear()}}applyControlModMatrix(){if(this.controlModRows.length===0){this.resetControlTargets();return}const o=new Map;for(const u of this.controlModRows){const d=yo[u.target];if(!d)continue;const f=this.getControlSourceValue(u.source);if(!Number.isFinite(f))continue;let p=o.get(u.target);if(!p){const x=this.controlModSnapshots.get(u.target)??d.getBase(this),h=Number.isFinite(x)?x:0;this.controlModSnapshots.set(u.target,h),p={base:h,sum:0},o.set(u.target,p)}p.sum+=u.amount*f}const i=new Set(o.keys());for(const[u,d]of[...this.controlModSnapshots])if(!i.has(u)){const f=yo[u];f&&f.apply(this,d),this.controlModSnapshots.delete(u)}for(const[u,d]of o){const f=yo[u];if(!f)continue;const{base:p,sum:x}=d,h=f.range(this,p),g=h.max-h.min,v=g>0?x*g:0,y=pe(p+v,h.min,h.max);f.apply(this,y)}}refreshVelocitySignals(){if(this.activeNoteVelocities.size===0){this.updateControlSource("velocity",-1),this.updateControlSource("gate",-1);return}let o=0;for(const u of this.activeNoteVelocities.values())o+=u;const i=o/this.activeNoteVelocities.size;this.updateControlSource("velocity",pe(i*2-1,-1,1)),this.updateControlSource("gate",1)}constructor(o){this.ctx=new(window.AudioContext||window.webkitAudioContext),this.master=this.ctx.createGain(),this.recordDestination=this.ctx.createMediaStreamDestination(),this.master.connect(this.ctx.destination),this.master.connect(this.recordDestination),this.filter=this.ctx.createBiquadFilter(),this.analyser=this.ctx.createAnalyser(),this.fxInput=this.ctx.createGain(),this.fxOutput=this.ctx.createGain(),this.filter.connect(this.fxInput),this.fxInput.connect(this.fxOutput),this.fxOutput.connect(this.master),this.master.connect(this.ctx.destination);try{this.filter.connect(this.analyser)}catch{}this.analyser.smoothingTimeConstant=0,this.lfos=[];for(let i=0;i<2;i++){const u=this.ctx.createOscillator();u.type="sine",u.frequency.value=5;const d=this.ctx.createGain();d.gain.value=0,u.connect(d),u.start(),this.lfos.push({osc:u,noise:null,noiseFilter:null,gain:d,dest:"none",wave:"sine"})}this.patch={...A},this.applyPatch(),this.samplerMeta=this.normalizeSamplerMeta(this.patch.sampler,null)}get audioContext(){return this.ctx}getAnalyser(){return this.analyser}getWaveform(){const o=this.analyser.fftSize,i=new Uint8Array(o);return this.analyser.getByteTimeDomainData(i),i}async resume(){this.ctx.state!=="running"&&await this.ctx.resume()}normalizeSamplerMeta(o,i){const u=i?.duration??(Number.isFinite(o.durationSec)?o.durationSec:0);if(!(u>0))return{...o,durationSec:0,trimStartSec:0,trimEndSec:0};const d=.005,f=Math.max(0,u-d),p=Number(o.trimStartSec),x=pe(Number.isFinite(p)?p:0,0,f),h=Number(o.trimEndSec);let g=Number.isFinite(h)?h:u;return g=pe(g,x+d,u),g-x<d&&(g=Math.min(u,x+d)),{...o,durationSec:u,trimStartSec:x,trimEndSec:g}}async updateSamplerBuffer(o){const i=this.samplerMeta.id===o.id&&this.samplerMeta.dataUrl===o.dataUrl;if(this.samplerMeta=this.normalizeSamplerMeta({...o},i?this.samplerBuffer:null),!o.dataUrl){this.samplerBuffer=null,this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,null),this.samplerPitchCache.clear();return}if(i&&this.samplerBuffer)return;const u=++this.samplerLoadToken;try{const f=await(await fetch(o.dataUrl)).arrayBuffer(),p=await this.ctx.decodeAudioData(f.slice(0));u===this.samplerLoadToken&&(this.samplerBuffer=p,this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,p),this.samplerPitchCache.clear())}catch(d){u===this.samplerLoadToken&&(this.samplerBuffer=null,this.samplerMeta=this.normalizeSamplerMeta(this.samplerMeta,null),this.samplerPitchCache.clear()),console.warn("Failed to decode sampler buffer",d)}}getSamplerBaseFrequency(){const o=Number.isFinite(this.samplerMeta.rootMidi)?this.samplerMeta.rootMidi:60;return 440*Math.pow(2,(o-69)/12)}getDetuneCents(o){if(o==="osc1"){const i=this.patch.osc1.detune||0,u=this.patch.osc1.detuneFine??0;return i+u}return this.patch.osc2.detune||0}mapNoiseLfoCutoff(o){const i=pe(o,.01,20);return pe(i*12,.5,600)}updateLfoSource(o,i){const u=this.lfos[o];if(!u)return;const d=this.ctx.currentTime,f=i.wave;if(f==="noise"){if(this.noiseBuffer||(this.noiseBuffer=Eu(this.ctx)),u.osc){try{u.osc.stop(d)}catch{}try{u.osc.disconnect()}catch{}u.osc=null}if(!u.noise){const p=this.ctx.createBufferSource();p.buffer=this.noiseBuffer,p.loop=!0;const x=this.ctx.createBiquadFilter();x.type="lowpass",x.Q.value=1e-4,p.connect(x),x.connect(u.gain),p.start(),u.noise=p,u.noiseFilter=x}if(u.noiseFilter){const p=this.mapNoiseLfoCutoff(i.rateHz);u.noiseFilter.frequency.setTargetAtTime(p,d,.05)}}else{if(u.osc)u.osc.type=f,u.osc.frequency.setValueAtTime(Math.max(.01,i.rateHz),d);else{const p=this.ctx.createOscillator();p.type=f,p.frequency.value=Math.max(.01,i.rateHz),p.connect(u.gain),p.start(),u.osc=p}if(u.noise){try{u.noise.stop(d)}catch{}try{u.noise.disconnect()}catch{}u.noise=null}if(u.noiseFilter){try{u.noiseFilter.disconnect()}catch{}u.noiseFilter=null}}u.wave=f}applyPatch(o={},i={}){const{fromExpression:u=!1}=i,d=this.patch,f=o.osc1??{},p=o.osc2??{},x=Array.isArray(o.modMatrix)?o.modMatrix.map(M=>({...M,amount:Number.isFinite(M.amount)?M.amount:0,enabled:M.enabled!==!1})):void 0,h=(this.patch.modMatrix??[]).map(M=>({...M})),g=Cu({...this.patch.osc1,...f}),v=Cu({...this.patch.osc2,...p}),y={...this.patch,...o,osc1:g,osc2:v,fm:{...this.patch.fm,...o.fm??{}},sub:{...this.patch.sub,...o.sub??{}},ring:{...this.patch.ring,...o.ring??{}},filter:{...this.patch.filter,...o.filter??{}},envelope:{...this.patch.envelope,...o.envelope??{}},master:{...this.patch.master,...o.master??{}},mix:o.mix!=null?pe(o.mix,0,1):this.patch.mix,engineMode:o.engineMode??this.patch.engineMode??"classic",sampler:{...this.patch.sampler??A.sampler,...o.sampler??{}},macro:{...this.patch.macro??It,...o.macro??{}},effects:{...this.patch.effects??A.effects,...o.effects??{}},lfo1:{...this.patch.lfo1??A.lfo1,...o.lfo1??{}},lfo2:{...this.patch.lfo2??A.lfo2,...o.lfo2??{}},arp:{...this.patch.arp??A.arp,...o.arp??{}},sequencer:{...this.patch.sequencer??A.sequencer,...o.sequencer??{}},expression:{...this.patch.expression??A.expression,...o.expression??{}},modMatrix:x??h};if(this.patch=y,o.sequencer!==void 0){const M=y.sequencer?.rootMidi??A.sequencer.rootMidi;this.seqCurrentRoot=pe(M,0,127),this.seqProgressionIndex=0}if(o.sampler!==void 0?this.updateSamplerBuffer(y.sampler):o.osc1?.sampler!==void 0?this.updateSamplerBuffer(y.osc1.sampler??A.sampler):o.osc2?.sampler!==void 0&&this.updateSamplerBuffer(y.osc2.sampler??A.sampler),this.configureExpressionRouting(y.expression),o.mix!==void 0&&y.mix!==d.mix){const M=pe(y.mix,0,1),N=this.ctx.currentTime;for(const w of this.activeVoices.values())w.mixControl&&w.mixControl.offset.setTargetAtTime(M,N,.01)}if(y.master.gain!==d.master.gain&&this.master.gain.setTargetAtTime(y.master.gain,this.ctx.currentTime,.01),y.filter.type!==d.filter.type&&(this.filter.type=y.filter.type),y.filter.q!==d.filter.q&&this.filter.Q.setTargetAtTime(y.filter.q,this.ctx.currentTime,.02),y.filter.cutoff!==d.filter.cutoff&&this.filter.frequency.setTargetAtTime(y.filter.cutoff,this.ctx.currentTime,.015),this.noiseBuffer||(this.noiseBuffer=Eu(this.ctx)),o.effects!==void 0&&this.buildFxChain(),o.lfo1!==void 0||o.lfo2!==void 0||o.master?.gain!==void 0){const M=[this.patch.lfo1,this.patch.lfo2];for(let N=0;N<this.lfos.length;N++){const w=this.lfos[N],j=M[N];this.updateLfoSource(N,j);try{w.gain.disconnect()}catch{}if(w.dest="none",w.gain.gain.value=0,j.enabled)if(j.dest==="filter")w.dest="filter",w.gain.gain.value=Math.max(0,j.amount)*2e3,w.gain.connect(this.filter.frequency);else if(j.dest==="amp"){w.dest="amp";const k=this.patch.master.gain;w.gain.gain.value=Math.max(0,j.amount)*Math.max(0,k)*.8,w.gain.connect(this.master.gain)}else j.dest==="pitch"&&(w.dest="pitch",w.gain.gain.value=Math.max(0,j.amount)*50)}this.refreshMixAudioConnections()}if(o.arp!==void 0&&this.updateArpScheduler({forceRestart:!0}),o.sequencer!==void 0&&this.updateSeqScheduler(),(o.modMatrix!==void 0||o.lfo1!==void 0||o.lfo2!==void 0)&&this.applyModMatrix(this.patch.modMatrix??[]),o.osc1?.detune!==void 0||o.osc1?.detuneFine!==void 0){const M=this.ctx.currentTime,N=(y.osc1.detune||0)+(y.osc1.detuneFine??0);for(const w of this.activeVoices.values())if(w.osc1Detune)try{w.osc1Detune.setTargetAtTime(N,M,.01)}catch{}}if(o.osc2?.detune!==void 0){const M=this.ctx.currentTime;for(const N of this.activeVoices.values())if(N.osc2Detune)try{N.osc2Detune.setTargetAtTime(y.osc2.detune||0,M,.01)}catch{}}this.expression2D.active&&!u&&this.applyExpression2D()}async previewSampler(o){const i=this.patch[o].sampler??A.sampler;if(!i?.dataUrl||(await this.updateSamplerBuffer(i),!this.samplerBuffer))return;const u=this.samplerMeta.trimStartSec??0,d=this.samplerMeta.trimEndSec??this.samplerBuffer.duration,f=Math.max(.05,d-u),p=ln(this.ctx.createBufferSource());p.buffer=this.samplerBuffer;const x=this.ctx.createGain();x.gain.value=.8,p.connect(x),x.connect(this.master);const h=this.ctx.currentTime;p.start(h,u,f);const g=()=>{try{p.stop()}catch{}try{p.disconnect()}catch{}try{x.disconnect()}catch{}};p.addEventListener("ended",g,{once:!0}),setTimeout(g,f*1e3+200)}buildFxChain(){try{this.fxInput.disconnect()}catch{}if(this.currentFxTap){try{this.currentFxTap.disconnect(this.fxOutput)}catch{}this.currentFxTap=null}let o=this.fxInput;const i=this.patch.effects;i?.delay?.enabled&&(o=this.applyDelayEffect(o,i.delay)),i?.reverb?.enabled&&(o=this.applyReverbEffect(o,i.reverb)),o.connect(this.fxOutput),this.currentFxTap=o}clamp01(o){return Math.min(1,Math.max(0,o))}setExpression2D(o,i){const u=this.clamp01(o),d=this.clamp01(i);this.expression2D.active||this.captureExpressionBase(),this.expression2D={active:!0,x:u,y:d},this.applyExpression2D(),this.updateControlSource("exprX",u*2-1),this.updateControlSource("exprY",d*2-1)}clearExpression2D(){if(this.expression2D.active){this.expressionApplying=!0;try{for(const o of gl)this.resetExpressionAxis(o)}finally{this.expressionApplying=!1,this.expression2D={active:!1,x:.5,y:.5},this.expressionSnapshot={x:null,y:null},this.updateControlSource("exprX",0),this.updateControlSource("exprY",0)}}}configureExpressionRouting(o=this.patch.expression??A.expression){const i=A.expression??{x:"osc1.detune",y:"filter.cutoff"};for(const u of gl){const d=o?.[u]??i[u],f=mt[d]?d:i[u];(this.expressionAxisTargets[u]!==f||!this.expression2D.active)&&(this.expressionSnapshot[u]=null),this.expressionAxisTargets[u]=f}}captureExpressionBase(){for(const o of gl){const i=this.expressionAxisTargets[o],u=mt[i];if(!u)continue;const d=u.getBase(this);this.expressionSnapshot[o]=Number.isFinite(d)?d:0}}applyExpressionAxis(o,i){const u=this.expressionAxisTargets[o],d=mt[u];if(!d)return;let f=this.expressionSnapshot[o];(f==null||Number.isNaN(f))&&(f=d.getBase(this),this.expressionSnapshot[o]=f);const{min:p,max:x}=d.range(this,f),h=x-p,g=h<=0?f:p+h*this.clamp01(i);d.apply(this,g)}resetExpressionAxis(o){const i=this.expressionSnapshot[o],u=this.expressionAxisTargets[o],d=mt[u];d&&i!=null&&Number.isFinite(i)&&d.apply(this,i),this.expressionSnapshot[o]=null}applyExpression2D(){if(!(!this.expression2D.active||this.expressionApplying)){this.expressionApplying=!0;try{this.applyExpressionAxis("x",this.expression2D.x),this.applyExpressionAxis("y",this.expression2D.y)}finally{this.expressionApplying=!1}}}applyDelayEffect(o,i){const u=this.clamp01(i.mix),d=Math.max(0,Math.min(1.5,i.time)),f=Math.max(0,Math.min(.95,i.feedback)),p=this.ctx.createDelay(2);p.delayTime.value=d;const x=this.ctx.createGain();x.gain.value=f,p.connect(x),x.connect(p);const h=this.ctx.createGain();h.gain.value=1-u;const g=this.ctx.createGain();g.gain.value=u;const v=this.ctx.createGain();return o.connect(h),o.connect(p),p.connect(g),h.connect(v),g.connect(v),v}makeImpulse(o,i){const u=Math.max(1,Math.floor(this.ctx.sampleRate*Math.max(.05,o))),d=this.ctx.createBuffer(2,u,this.ctx.sampleRate);for(let f=0;f<d.numberOfChannels;f++){const p=d.getChannelData(f);for(let x=0;x<u;x++){const h=x/u;p[x]=(Math.random()*2-1)*Math.pow(1-h,2+i*6)}}return d}applyReverbEffect(o,i){const u=this.clamp01(i.mix),d=.1+this.clamp01(i.size)*3,f=this.clamp01(i.decay),p=this.ctx.createConvolver();p.normalize=!0,p.buffer=this.makeImpulse(d,f);const x=this.ctx.createGain();x.gain.value=1-u;const h=this.ctx.createGain();h.gain.value=u;const g=this.ctx.createGain();return o.connect(x),o.connect(p),p.connect(h),x.connect(g),h.connect(g),g}allNotesOff(){const o=this.ctx.currentTime;for(const i of this.activeVoices.values())try{i.stop(o,.1)}catch{}this.activeVoices.clear(),this.activeNoteVelocities.clear(),this.refreshVelocitySignals()}getArpChordOffsets(){const o=this.patch.arp??A.arp;if((o.chordSource??"preset")==="sequencer"){const d=this.patch.sequencer??A.sequencer,f=d.steps??[],p=Math.max(1,Math.min(f.length,d.length)),x=new Set;for(let h=0;h<p;h++){const g=f[h];if(g?.on){const v=Math.round(g.offset??0);Number.isFinite(v)&&x.add(v)}}return x.size>0?Array.from(x).sort((h,g)=>h-g):[0]}switch(o.chord??A.arp.chord??"none"){case"power":return[0,7];case"major":return[0,4,7];case"minor":return[0,3,7];case"sus2":return[0,2,7];case"sus4":return[0,5,7];case"maj7":return[0,4,7,11];case"min7":return[0,3,7,10];default:return[0]}}buildArpPool(){if(this.arpHeld.size===0)return[];const o=this.patch.arp?.mode??"up";if(o==="sequence"){const p=this.patch.sequencer??A.sequencer,x=p.steps??[],h=Math.max(1,Math.min(x.length,p.length)),g=Array.from(this.arpHeld.values()).sort((M,N)=>M-N),v=Math.max(1,Math.min(4,this.patch.arp?.octaves??1)),y=[];for(let M=0;M<h;M++){const N=x[M];if(N?.on){const w=Math.round(N.offset??0);for(let j=0;j<v;j++)for(const k of g){const L=k+j*12+w;L>=0&&L<=127?y.push(L):y.push(-1)}}else for(let w=0;w<v;w++)for(const j of g)y.push(-1)}return y}const i=o==="asplayed"?Array.from(this.arpHeld.values()):Array.from(this.arpHeld.values()).sort((p,x)=>p-x),u=Math.max(1,Math.min(4,this.patch.arp?.octaves??1)),d=[],f=this.getArpChordOffsets();for(let p=0;p<u;p++)for(const x of i){const h=x+p*12;for(const g of f){const v=h+g;v<0||v>127||d.push(v)}}if(o==="down")return d.slice().sort((p,x)=>x-p);if(o==="random")return d.slice().sort(()=>Math.random()-.5);if(o==="updown"){const p=d.slice().sort((h,g)=>h-g),x=p.slice().reverse().slice(1,-1);return p.concat(x)}return d}updateArpScheduler(o={}){const{forceRestart:i=!1}=o;if(!!this.patch.arp?.enabled&&this.arpHeld.size>0){const d=i||this.arpTimer==null;if(d&&this.arpTimer!=null&&(clearTimeout(this.arpTimer),this.arpTimer=null),d){this.arpPhase=0,this.arpRepeatCounter=0;const f=this.getArpStepMs(),p=this.computeArpAlignmentDelay(f);this.scheduleNextArpTick(p)}}else{if(this.arpTimer!=null&&(clearTimeout(this.arpTimer),this.arpTimer=null),this.arpLastNote!=null){const d=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(d)}finally{this.arpBypass=!1}this.arpLastNote=null}this.arpIndex=0,this.arpRepeatCounter=0}}computeArpAlignmentDelay(o){if(!(o>0))return 0;const u=this.ctx.currentTime*1e3%o;return u<1?0:o-u}scheduleNextArpTick(o){const i=this.getArpStepMs();let u=0;if(this.patch.arp?.bpmSync){const x=this.patch.arp?.division,h=Math.max(0,Math.min(1,this.patch.arp?.swingPct??0));x==="1/8"?u=h:x==="1/16"?u=h*.5:u=0}const d=this.arpPhase===0?1+u*.5:1-u*.5,f=i*d,p=o??f;this.arpCurrentStepMs=f,this.arpTimer=setTimeout(()=>{if(!this.patch.arp?.enabled||this.arpHeld.size===0){this.updateArpScheduler();return}this.arpTick(),this.arpPhase=this.arpPhase?0:1,this.scheduleNextArpTick()},Math.max(0,p))}getArpStepMs(){const o=this.patch.arp;if(o?.bpmSync){const u=6e4/Math.max(20,Math.min(300,o.bpm||120)),d=o.division||"1/8",f=d==="1/4"?1:d==="1/8"?.5:d==="1/8T"?1/3:d==="1/16"?.25:1/6;return u*f}else return 1e3/Math.max(.1,o?.rateHz??8)}arpTick(){let o=this.buildArpPool();if(o.length===0){if(this.arpLastNote!=null){const v=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(v)}finally{this.arpBypass=!1}this.arpLastNote=null}return}const i=Math.max(0,this.patch.arp?.patternLen??0);i>0&&o.length>i&&(o=o.slice(0,i)),this.arpIndex>=o.length&&(this.arpIndex=0);const u=o[this.arpIndex++],d=Math.max(1,Math.min(8,this.patch.arp?.repeats??1));this.arpRepeatCounter<d-1?(this.arpIndex=(this.arpIndex-1+o.length)%o.length,this.arpRepeatCounter++):this.arpRepeatCounter=0;const f=u<0;if(this.arpLastNote!=null&&(f||(this.patch.arp?.gate??.6)<1)){const v=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(v)}finally{this.arpBypass=!1}this.arpLastNote=null}if(f)return;this.arpBypass=!0;try{this.noteOn(u,1)}finally{this.arpBypass=!1}this.arpLastNote=u;const p=this.arpCurrentStepMs||this.getArpStepMs(),x=Math.max(.05,Math.min(1,this.patch.arp?.gate??.6)),h=p*x,g=u;setTimeout(()=>{this.arpBypass=!0;try{this.noteOff(g)}finally{this.arpBypass=!1}},h)}getArpStatus(){const o=!!this.patch.arp?.enabled;let i=0,u=0;if(o){const d=this.buildArpPool().length,f=Math.max(0,this.patch.arp?.patternLen??0);if(i=f>0?Math.min(f,d):d,i<=0&&(i=0),i>0){const p=(this.arpIndex-1+i)%i;u=p<0?0:p}}return{enabled:o,stepIndex:u,length:i}}getSequencerProgression(o){const i=typeof o=="string"&&o.length>0?o:"static";return Qu.find(u=>u.id===i)??null}getSequencerBaseRoot(o){const i=Number.isFinite(o.grooveBaseMidi)?o.grooveBaseMidi:o.rootMidi,u=Number.isFinite(i)?i:A.sequencer.rootMidi;return pe(Math.round(u),0,127)}resetSequencerProgression(){const o=this.patch.sequencer;this.seqProgressionIndex=0,this.seqCurrentRoot=pe(o.rootMidi??A.sequencer.rootMidi,0,127)}advanceSequencerProgression(){const o=this.patch.sequencer,i=this.getSequencerProgression(o.progressionMode);if(!i||i.offsets.length===0||i.id==="static"){this.resetSequencerProgression();return}const u=this.getSequencerBaseRoot(o),d=i.offsets[this.seqProgressionIndex%i.offsets.length];this.seqCurrentRoot=pe(u+d,0,127),this.seqProgressionIndex=(this.seqProgressionIndex+1)%i.offsets.length}getSeqStepMs(){const o=this.patch.sequencer,u=6e4/Math.max(20,Math.min(300,o.bpm||120)),d=o.division,f=d==="1/4"?1:d==="1/8"?.5:d==="1/8T"?1/3:d==="1/16"?.25:1/6;return u*f}updateSeqScheduler(){const o=this.patch.sequencer;if(!!o.enabled&&!!o.playing)this.seqTimer!=null&&(clearTimeout(this.seqTimer),this.seqTimer=null),this.seqPhase=0,this.seqStepIndex=0,this.seqProgressionIndex=0,this.seqCurrentRoot=pe(o.rootMidi??A.sequencer.rootMidi,0,127),this.scheduleNextSeqTick();else{if(this.seqTimer!=null&&(clearTimeout(this.seqTimer),this.seqTimer=null),this.seqLastNote!=null){const u=this.seqLastNote;this.arpBypass=!0;try{this.noteOff(u)}finally{this.arpBypass=!1}this.seqLastNote=null}this.updateControlSource("seqStep",0),this.resetSequencerProgression()}}scheduleNextSeqTick(){const o=this.getSeqStepMs(),i=this.patch.sequencer?.division;let u=Math.max(0,Math.min(1,this.patch.sequencer?.swingPct??0));i==="1/16"&&(u*=.5),i==="1/8"&&(u=u),(i==="1/4"||i?.endsWith("T"))&&(u=0);const d=this.seqPhase===0?1+u*.5:1-u*.5,f=o*d;this.seqCurrentStepMs=f,this.seqTimer=setTimeout(()=>{if(!this.patch.sequencer?.enabled||!this.patch.sequencer?.playing){this.updateSeqScheduler();return}this.seqTick(),this.seqPhase=this.seqPhase?0:1,this.scheduleNextSeqTick()},f)}seqTick(){const o=this.patch.sequencer,i=Math.max(1,Math.min(o.steps.length,o.length)),u=this.seqStepIndex%i,d=o.steps[u]||{on:!1,offset:0,velocity:1};this.seqStepIndex=(this.seqStepIndex+1)%i,u===0&&this.advanceSequencerProgression();const f=pe(Number.isFinite(this.seqCurrentRoot)?this.seqCurrentRoot:o.rootMidi??A.sequencer.rootMidi,0,127),p=pe(o.spiceAmount??0,0,1);let x=d.offset||0,h=d.velocity??1,g=o.gate??.6,v=d.on;if(p>0&&o.spiceSeed){const y=ip(`${o.spiceSeed}-${u}`),M=Math.floor(y()*15)-7;x=Math.round(x*(1-p)+M*p);const N=.6+y()*.8;h=pe(h*(1-p)+N*p,0,1);const w=.2+y()*.8;g=pe(g*(1-p)+w*p,.05,1),p>.7&&y()<.2*p&&(v=!1)}if(this.seqLastNote!=null&&g>=1){const y=this.seqLastNote;this.arpBypass=!0;try{this.noteOff(y)}finally{this.arpBypass=!1}this.seqLastNote=null}if(v){const y=Math.round(f+x),M=pe(h,0,1);this.arpBypass=!0;try{this.noteOn(y,M)}finally{this.arpBypass=!1}this.seqLastNote=y;const N=++this.seqControlToken;this.updateControlSource("seqStep",M*2-1);const w=Math.max(.05,Math.min(1,g)),j=(this.seqCurrentStepMs||this.getSeqStepMs())*w;setTimeout(()=>{this.arpBypass=!0;try{this.noteOff(y)}finally{this.arpBypass=!1}this.seqControlToken===N&&this.updateControlSource("seqStep",0)},j)}else this.updateControlSource("seqStep",0)}getSequencerStatus(){const o=this.patch.sequencer,i=!!o.enabled&&!!o.playing,u=Math.max(0,Math.min(o.steps.length,o.length)),d=i&&u>0?(this.seqStepIndex+u-1)%u:0,f=pe(Number.isFinite(this.seqCurrentRoot)?this.seqCurrentRoot:o.rootMidi??A.sequencer.rootMidi,0,127);return{enabled:i,stepIndex:d,length:u,currentRoot:f}}previewNote(o,i=150){this.arpBypass=!0;try{this.noteOn(o,1)}finally{this.arpBypass=!1}setTimeout(()=>{this.arpBypass=!0;try{this.noteOff(o)}finally{this.arpBypass=!1}},Math.max(20,i))}noteOn(o,i=1){if(this.patch.arp?.enabled&&!this.arpBypass){this.arpHeld.add(o),this.updateArpScheduler();return}const u=this.activeVoices.get(o);if(u){try{u.stop(this.ctx.currentTime,.05)}catch{}this.activeVoices.delete(o)}const d=440*Math.pow(2,(o-69)/12),f={buffer:this.samplerBuffer,meta:{id:this.samplerMeta.id||null,dataUrl:this.samplerMeta.dataUrl||null,trimStartSec:this.samplerMeta.trimStartSec,trimEndSec:this.samplerMeta.trimEndSec,rootMidi:this.samplerMeta.rootMidi??60,loop:!!this.samplerMeta.loop},pitchCache:this.samplerPitchCache},p={lfo1:{gain:this.lfos[0].gain,enabled:!!this.patch.lfo1?.enabled,dest:this.lfos[0].dest},lfo2:{gain:this.lfos[1].gain,enabled:!!this.patch.lfo2?.enabled,dest:this.lfos[1].dest}},x=new Op(this.ctx,this.filter,d,this.patch,this.noiseBuffer,f,this.activeVoices.size,p);this.activeVoices.set(o,x);const h=pe(i,0,1);this.activeNoteVelocities.set(o,h),this.refreshVelocitySignals(),this.refreshMixAudioConnections()}noteOff(o){if(this.patch.arp?.enabled&&!this.arpBypass){if(this.patch.arp?.latch||(this.arpHeld.delete(o),this.arpHeld.size===0&&this.updateArpScheduler()),this.arpLastNote===o){const u=this.activeVoices.get(o);if(u)try{u.stop(this.ctx.currentTime,this.patch.envelope.release)}catch{}this.activeVoices.delete(o),this.arpLastNote===o&&(this.arpLastNote=null)}return}const i=this.activeVoices.get(o);if(i){try{i.stop(this.ctx.currentTime,this.patch.envelope.release)}catch{}this.activeVoices.delete(o)}this.arpBypass?this.activeNoteVelocities.delete(o):this.activeNoteVelocities.delete(o),this.refreshVelocitySignals()}arpClear(){if(this.arpHeld.clear(),this.arpIndex=0,this.arpTimer!=null&&(clearInterval(this.arpTimer),this.arpTimer=null),this.arpLastNote!=null){const o=this.arpLastNote;this.arpBypass=!0;try{this.noteOff(o)}finally{this.arpBypass=!1}this.arpLastNote=null}}}const Ip={},_u=r=>{let o;const i=new Set,u=(v,y)=>{const M=typeof v=="function"?v(o):v;if(!Object.is(M,o)){const N=o;o=y??(typeof M!="object"||M===null)?M:Object.assign({},o,M),i.forEach(w=>w(o,N))}},d=()=>o,h={setState:u,getState:d,getInitialState:()=>g,subscribe:v=>(i.add(v),()=>i.delete(v)),destroy:()=>{(Ip?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},g=o=r(u,d,h);return h},Ap=r=>r?_u(r):_u;var vl={exports:{}},yl={},xl={exports:{}},wl={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ru;function Fp(){if(Ru)return wl;Ru=1;var r=is();function o(y,M){return y===M&&(y!==0||1/y===1/M)||y!==y&&M!==M}var i=typeof Object.is=="function"?Object.is:o,u=r.useState,d=r.useEffect,f=r.useLayoutEffect,p=r.useDebugValue;function x(y,M){var N=M(),w=u({inst:{value:N,getSnapshot:M}}),j=w[0].inst,k=w[1];return f(function(){j.value=N,j.getSnapshot=M,h(j)&&k({inst:j})},[y,N,M]),d(function(){return h(j)&&k({inst:j}),y(function(){h(j)&&k({inst:j})})},[y]),p(N),N}function h(y){var M=y.getSnapshot;y=y.value;try{var N=M();return!i(y,N)}catch{return!0}}function g(y,M){return M()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:x;return wl.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:v,wl}var Tu;function Dp(){return Tu||(Tu=1,xl.exports=Fp()),xl.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu;function zp(){if(Lu)return yl;Lu=1;var r=is(),o=Dp();function i(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var u=typeof Object.is=="function"?Object.is:i,d=o.useSyncExternalStore,f=r.useRef,p=r.useEffect,x=r.useMemo,h=r.useDebugValue;return yl.useSyncExternalStoreWithSelector=function(g,v,y,M,N){var w=f(null);if(w.current===null){var j={hasValue:!1,value:null};w.current=j}else j=w.current;w=x(function(){function L(P){if(!R){if(R=!0,W=P,P=M(P),N!==void 0&&j.hasValue){var B=j.value;if(N(B,P))return X=B}return X=P}if(B=X,u(W,P))return B;var z=M(P);return N!==void 0&&N(B,z)?B:(W=P,X=z)}var R=!1,W,X,q=y===void 0?null:y;return[function(){return L(v())},q===null?void 0:function(){return L(q())}]},[v,y,M,N]);var k=d(g,w[0],w[1]);return p(function(){j.hasValue=!0,j.value=k},[k]),h(k),k},yl}var Ou;function qp(){return Ou||(Ou=1,vl.exports=zp()),vl.exports}var Bp=qp();const Up=Gu(Bp),Ku={},{useDebugValue:Vp}=Ie,{useSyncExternalStoreWithSelector:Hp}=Up;let Iu=!1;const $p=r=>r;function Wp(r,o=$p,i){(Ku?"production":void 0)!=="production"&&i&&!Iu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Iu=!0);const u=Hp(r.subscribe,r.getState,r.getServerState||r.getInitialState,o,i);return Vp(u),u}const Gp=r=>{(Ku?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const o=typeof r=="function"?Ap(r):r,i=(u,d)=>Wp(o,u,d);return Object.assign(i,o),i},Qp=r=>Gp,Kp={};function Xp(r,o){let i;try{i=r()}catch{return}return{getItem:d=>{var f;const p=h=>h===null?null:JSON.parse(h,void 0),x=(f=i.getItem(d))!=null?f:null;return x instanceof Promise?x.then(p):p(x)},setItem:(d,f)=>i.setItem(d,JSON.stringify(f,void 0)),removeItem:d=>i.removeItem(d)}}const os=r=>o=>{try{const i=r(o);return i instanceof Promise?i:{then(u){return os(u)(i)},catch(u){return this}}}catch(i){return{then(u){return this},catch(u){return os(u)(i)}}}},Yp=(r,o)=>(i,u,d)=>{let f={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:k=>k,version:0,merge:(k,L)=>({...L,...k}),...o},p=!1;const x=new Set,h=new Set;let g;try{g=f.getStorage()}catch{}if(!g)return r((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${f.name}', the given storage is currently unavailable.`),i(...k)},u,d);const v=os(f.serialize),y=()=>{const k=f.partialize({...u()});let L;const R=v({state:k,version:f.version}).then(W=>g.setItem(f.name,W)).catch(W=>{L=W});if(L)throw L;return R},M=d.setState;d.setState=(k,L)=>{M(k,L),y()};const N=r((...k)=>{i(...k),y()},u,d);let w;const j=()=>{var k;if(!g)return;p=!1,x.forEach(R=>R(u()));const L=((k=f.onRehydrateStorage)==null?void 0:k.call(f,u()))||void 0;return os(g.getItem.bind(g))(f.name).then(R=>{if(R)return f.deserialize(R)}).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==f.version){if(f.migrate)return f.migrate(R.state,R.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return R.state}).then(R=>{var W;return w=f.merge(R,(W=u())!=null?W:N),i(w,!0),y()}).then(()=>{L?.(w,void 0),p=!0,h.forEach(R=>R(w))}).catch(R=>{L?.(void 0,R)})};return d.persist={setOptions:k=>{f={...f,...k},k.getStorage&&(g=k.getStorage())},clearStorage:()=>{g?.removeItem(f.name)},getOptions:()=>f,rehydrate:()=>j(),hasHydrated:()=>p,onHydrate:k=>(x.add(k),()=>{x.delete(k)}),onFinishHydration:k=>(h.add(k),()=>{h.delete(k)})},j(),w||N},Jp=(r,o)=>(i,u,d)=>{let f={storage:Xp(()=>localStorage),partialize:j=>j,version:0,merge:(j,k)=>({...k,...j}),...o},p=!1;const x=new Set,h=new Set;let g=f.storage;if(!g)return r((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${f.name}', the given storage is currently unavailable.`),i(...j)},u,d);const v=()=>{const j=f.partialize({...u()});return g.setItem(f.name,{state:j,version:f.version})},y=d.setState;d.setState=(j,k)=>{y(j,k),v()};const M=r((...j)=>{i(...j),v()},u,d);d.getInitialState=()=>M;let N;const w=()=>{var j,k;if(!g)return;p=!1,x.forEach(R=>{var W;return R((W=u())!=null?W:M)});const L=((k=f.onRehydrateStorage)==null?void 0:k.call(f,(j=u())!=null?j:M))||void 0;return os(g.getItem.bind(g))(f.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==f.version){if(f.migrate)return[!0,f.migrate(R.state,R.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var W;const[X,q]=R;if(N=f.merge(q,(W=u())!=null?W:M),i(N,!0),X)return v()}).then(()=>{L?.(N,void 0),N=u(),p=!0,h.forEach(R=>R(N))}).catch(R=>{L?.(void 0,R)})};return d.persist={setOptions:j=>{f={...f,...j},j.storage&&(g=j.storage)},clearStorage:()=>{g?.removeItem(f.name)},getOptions:()=>f,rehydrate:()=>w(),hasHydrated:()=>p,onHydrate:j=>(x.add(j),()=>{x.delete(j)}),onFinishHydration:j=>(h.add(j),()=>{h.delete(j)})},f.skipHydration||w(),N||M},Zp=(r,o)=>"getStorage"in o||"serialize"in o||"deserialize"in o?((Kp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Yp(r,o)):Jp(r,o),em=Zp,$t=r=>({...r,mode:r.mode??"analog",macro:{...It,...r.macro??{}},sampler:{...Mt,...r.sampler??{}}}),tm=(r,o)=>r==="sampler"||o==="sampler"?"sampler":r==="macro"||o==="macro"?"macro":"classic",nm=r=>r.osc1.mode==="macro"&&r.osc1.macro?r.osc1.macro:r.osc2.mode==="macro"&&r.osc2.macro?r.osc2.macro:r.macro??It,mr=(r,o,i)=>Math.min(i,Math.max(o,r)),rm=["lfo1","lfo2","exprX","exprY","seqStep","velocity","gate"],sm=["filter.cutoff","filter.q","master.gain","macro.harmonics","macro.timbre","macro.morph","macro.level","fm.amount","mix","envelope.attack","envelope.release"],Xu=(r,o)=>{const i=typeof r.id=="string"&&r.id.length>0?r.id:o,u=rm.includes(r.source)?r.source:"lfo1",d=sm.includes(r.target)?r.target:"filter.cutoff",f=mr(Number.isFinite(r.amount)?Number(r.amount):0,-1,1),p=r.enabled!==!1;return{id:i,source:u,target:d,amount:f,enabled:p}},Nl=()=>`mod-${Date.now().toString(36)}-${Math.random().toString(16).slice(2,6)}`,xo=r=>{const o=new Set;return r.map(i=>{let u=Xu(i,Nl());return o.has(u.id)&&(u={...u,id:Nl()}),o.add(u.id),u})},Au=r=>JSON.parse(JSON.stringify(r)),wo=r=>{const o=A.sequencer,i={...o,...r??{}},u=Number.isFinite(i.length)?Number(i.length):A.sequencer.length,d=Math.max(1,Math.min(u,kt)),f=Number.isFinite(i.rootMidi)?Number(i.rootMidi):o.rootMidi,p=mr(Math.round(f),0,127),x=Number.isFinite(i.grooveBaseMidi)?Number(i.grooveBaseMidi):p,h=mr(Math.round(x),0,127),g=typeof i.progressionMode=="string"&&i.progressionMode.length>0?i.progressionMode:"static",v=mr(Number.isFinite(i.spiceAmount)?Number(i.spiceAmount):0,0,1),y=typeof i.spiceSeed=="string"?i.spiceSeed:void 0,N=(Array.isArray(i.steps)?i.steps:[]).slice(0,kt).map(w=>({on:!!w?.on,offset:mr(Number.isFinite(w?.offset)?Number(w.offset):0,-24,24),velocity:mr(Number.isFinite(w?.velocity)?Number(w.velocity):1,0,1)}));for(;N.length<kt;)N.push(hr());return{...i,length:d,steps:N,rootMidi:p,grooveBaseMidi:h,progressionMode:g,spiceAmount:v,spiceSeed:y}},re=Qp()(em((r,o)=>({engine:null,patch:A,userPresets:[],samplerLibrary:[],layoutOrder:[],oscilloscope:{fftSize:4096},tempo:110,transport:{tempo:110,playing:!1,tick:0},midi:{supported:null,status:"idle",enabled:!1,inputs:[],selectedInputId:null,lastError:null,activeNotes:[]},setEngine:i=>r({engine:i}),updatePatch:i=>{const u=o().patch,d=Array.isArray(i.modMatrix)?xo(i.modMatrix):void 0,f=(u.modMatrix??[]).map(M=>({...M})),p={...u,...i,osc1:{...u.osc1,...i.osc1},osc2:{...u.osc2,...i.osc2},fm:{...u.fm,...i.fm},sub:{...u.sub,...i.sub},ring:{...u.ring,...i.ring},filter:{...u.filter,...i.filter},envelope:{...u.envelope,...i.envelope},master:{...u.master,...i.master},sampler:{...u.sampler,...i.sampler},macro:{...u.macro||A.macro,...i.macro},effects:{...u.effects||A.effects,...i.effects},lfo1:{...u.lfo1||A.lfo1,...i.lfo1},lfo2:{...u.lfo2||A.lfo2,...i.lfo2},arp:{...u.arp||A.arp,...i.arp},sequencer:{...u.sequencer||A.sequencer,...i.sequencer},mix:i.mix!=null?i.mix:u.mix,expression:{...u.expression||A.expression,...i.expression}};p.osc1=$t(p.osc1),p.osc2=$t(p.osc2),p.modMatrix=d??f;const x=i.engineMode,h=x??tm(p.osc1.mode??"analog",p.osc2.mode??"analog");p.engineMode=h;const g={...i};if(p.sequencer){const M=wo(p.sequencer);p.sequencer=M,i.sequencer!==void 0&&(g.sequencer=M)}(x!==void 0||(u.engineMode??"classic")!==h)&&(g.engineMode=h);const v=nm(p),y={...It,...v??{}};p.macro=y,(h==="macro"||i.macro!==void 0||i.osc1?.macro!==void 0||i.osc2?.macro!==void 0)&&(g.macro=y),d!==void 0&&(g.modMatrix=d),o().engine?.applyPatch(g),r({patch:p})},setLayoutOrder:i=>r({layoutOrder:i}),setTempo:i=>r(u=>({tempo:i,transport:{...u.transport,tempo:i}})),setTransportPlaying:i=>r(u=>({transport:{...u.transport,playing:i,tick:0}})),bumpTransportTick:()=>r(i=>({transport:{...i.transport,tick:i.transport.tick+1}})),importPatch:i=>{const u=JSON.parse(i),d={...o().patch,...u,osc1:{...o().patch.osc1,...u.osc1},osc2:{...o().patch.osc2,...u.osc2},fm:{...o().patch.fm,...u.fm},sub:{...o().patch.sub,...u.sub},ring:{...o().patch.ring,...u.ring},filter:{...o().patch.filter,...u.filter},envelope:{...o().patch.envelope,...u.envelope},master:{...o().patch.master,...u.master},sampler:{...o().patch.sampler,...u.sampler},macro:{...o().patch.macro||A.macro,...u.macro},effects:{...o().patch.effects||A.effects,...u.effects},lfo1:{...o().patch.lfo1||A.lfo1,...u.lfo1},lfo2:{...o().patch.lfo2||A.lfo2,...u.lfo2},arp:{...o().patch.arp||A.arp,...u.arp},sequencer:{...o().patch.sequencer||A.sequencer,...u.sequencer},mix:u.mix!=null?u.mix:o().patch.mix,expression:{...o().patch.expression||A.expression,...u.expression},modMatrix:Array.isArray(u.modMatrix)?xo(u.modMatrix):(o().patch.modMatrix??[]).map(f=>({...f}))};d.osc1=$t(d.osc1),d.osc2=$t(d.osc2),d.sequencer&&(d.sequencer=wo(d.sequencer)),o().engine?.applyPatch(d),r({patch:d})},exportPatch:()=>JSON.stringify(o().patch,null,2),saveUserPreset:(i,u)=>{const d=i.trim();if(!d)return null;const f=(u??"").trim();let p=null;return r(x=>{const h=d.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),g=h.length>0?`user-${h}`:`user-${Date.now().toString(36)}`,v=new Set(x.userPresets.map(j=>j.id));let y=g,M=1;for(;v.has(y);)y=`${g}-${M++}`;p=y;const N=Au(x.patch),w={id:y,name:d,description:f.length>0?f:"Custom preset",createdAt:new Date().toISOString(),patch:N};return{userPresets:[...x.userPresets,w]}}),p},overwriteUserPreset:(i,u)=>{const d=u?.name?.trim(),f=u?.description?.trim(),p=u?.updatePatch??!0;let x=!1;return r(h=>{const g=h.userPresets.findIndex(j=>j.id===i);if(g===-1)return{};const v=[...h.userPresets],y=v[g],M=d&&d.length>0?d:y.name,N=f!==void 0?f.length>0?f:"Custom preset":y.description,w=p?Au(h.patch):y.patch;return v[g]={...y,name:M,description:N,patch:w},x=!0,{userPresets:v}}),x},deleteUserPreset:i=>{let u=!1;return r(d=>d.userPresets.some(f=>f.id===i)?(u=!0,{userPresets:d.userPresets.filter(f=>f.id!==i)}):{}),u},setMidiSupported:i=>r(u=>({midi:{...u.midi,supported:i}})),setMidiStatus:(i,u=null)=>r(d=>({midi:{...d.midi,status:i,lastError:u}})),setMidiEnabled:i=>r(u=>({midi:{...u.midi,enabled:i}})),setMidiInputs:i=>r(u=>({midi:{...u.midi,inputs:i}})),setMidiSelectedInput:i=>r(u=>({midi:{...u.midi,selectedInputId:i}})),setMidiActiveNotes:i=>r(u=>({midi:{...u.midi,activeNotes:i}})),setOscilloscopeFftSize:i=>r(u=>({oscilloscope:{fftSize:i}})),saveSamplerSample:(i,u)=>r(d=>{const f=u.id??`sample-${Date.now()}`,p={...Mt,...u,id:f},x=d.samplerLibrary.filter(v=>v.id!==f).concat(p),h={...d.patch,[i]:$t({...d.patch[i],mode:"sampler",sampler:p})},g={[i]:{mode:"sampler",sampler:p}};return h.sampler=p,g.sampler=p,d.engine?.applyPatch(g),{samplerLibrary:x,patch:h}}),deleteSamplerSample:i=>r(u=>{const d=u.samplerLibrary.filter(x=>x.id!==i),f={...u.patch},p={};if(["osc1","osc2"].forEach(x=>{if(f[x].sampler?.id===i){const h={...Mt};f[x]=$t({...f[x],sampler:h}),p[x]={sampler:h}}}),f.sampler?.id===i){const x={...Mt};f.sampler=x,p.sampler=x}return Object.keys(p).length>0&&u.engine?.applyPatch(p),{samplerLibrary:d,patch:f}}),setSamplerFromLibrary:(i,u)=>r(d=>{const f=d.samplerLibrary.find(g=>g.id===u);if(!f)return{};const p={...Mt,...f},x={...d.patch,[i]:$t({...d.patch[i],mode:"sampler",sampler:p})},h={[i]:{mode:"sampler",sampler:p}};return x.sampler=p,h.sampler=p,d.engine?.applyPatch(h),{patch:x}}),updateCurrentSampler:(i,u)=>r(d=>{const p={...{...Mt,...d.patch[i].sampler??{}},...u},x={...d.patch,[i]:$t({...d.patch[i],sampler:p})},h={[i]:{sampler:p}};x.sampler=p,h.sampler=p,d.engine?.applyPatch(h);const g=p.id?d.samplerLibrary.map(v=>v.id===p.id?{...v,...u}:v):d.samplerLibrary;return{patch:x,samplerLibrary:g}}),renameSamplerSample:(i,u)=>r(d=>{const f=u.trim();if(!f)return{};let p=!1;const x=d.samplerLibrary.map(v=>v.id!==i?v:(p=!0,{...v,name:f}));if(!p)return{};const h={...d.patch},g={};if(["osc1","osc2"].forEach(v=>{if(h[v].sampler?.id===i){const y={...h[v].sampler,name:f};h[v]=$t({...h[v],sampler:y}),g[v]={sampler:y}}}),h.sampler?.id===i){const v={...h.sampler,name:f};h.sampler=v,g.sampler=v}return Object.keys(g).length>0&&d.engine?.applyPatch(g),{samplerLibrary:x,patch:h}}),playSamplerPreview:i=>{const u=o().engine;u&&u.previewSampler(i)},resetPatch:()=>r(i=>(i.engine?.applyPatch(A),{patch:A,samplerLibrary:i.samplerLibrary})),addModRoute:()=>{const i=o().patch.modMatrix??[];if(i.length>=16)return;const u={id:Nl(),source:"lfo1",target:"filter.cutoff",amount:.5,enabled:!0},d=[...i.map(f=>({...f})),u];o().updatePatch({modMatrix:d})},updateModRoute:(i,u)=>{const d=(o().patch.modMatrix??[]).map(f=>f.id===i?Xu({...f,...u},f.id):f);o().updatePatch({modMatrix:d})},removeModRoute:i=>{const u=(o().patch.modMatrix??[]).filter(d=>d.id!==i);o().updatePatch({modMatrix:u})}}),{name:"websynth-patch",partialize:r=>({patch:{...r.patch,sequencer:r.patch.sequencer?{...r.patch.sequencer,playing:!1}:r.patch.sequencer,arp:r.patch.arp?{...r.patch.arp,bpmSync:r.patch.arp.bpmSync??!0}:r.patch.arp},userPresets:r.userPresets,samplerLibrary:r.samplerLibrary,layoutOrder:r.layoutOrder,tempo:r.tempo,transport:{tempo:r.transport.tempo,playing:!1,tick:0},midi:{enabled:r.midi.enabled,selectedInputId:r.midi.selectedInputId},oscilloscope:r.oscilloscope}),version:11,migrate:(r,o)=>{const i=r?.patch;if(!i)return r;const u=i.osc1||{},{finePct:d,...f}=u,p={...A,...i,osc1:{...A.osc1,...f},osc2:{...A.osc2,...i.osc2||{}},fm:{...A.fm,...i.fm||{}},sub:{...A.sub,...i.sub||{}},ring:{...A.ring,...i.ring||{}},filter:{...A.filter,...i.filter||{}},envelope:{...A.envelope,...i.envelope||{}},master:{...A.master,...i.master||{}},sampler:{...A.sampler,...i.sampler||{}},macro:{...A.macro,...i.macro||{}},effects:{...A.effects,...i.effects||{}},lfo1:{...A.lfo1,...i.lfo1||{}},lfo2:{...A.lfo2,...i.lfo2||{}},arp:{...A.arp,...i.arp||{}},sequencer:{...A.sequencer,...i.sequencer||{}},mix:typeof i.mix=="number"?i.mix:A.mix,expression:{...A.expression,...i.expression||{}},modMatrix:Array.isArray(i.modMatrix)?xo(i.modMatrix):[]};p.sequencer&&(p.sequencer=wo(p.sequencer));const x=Array.isArray(r?.layoutOrder)?r.layoutOrder.filter(R=>typeof R=="string"):[],h=typeof r?.tempo=="number"?r.tempo:110,g=r?.transport,v=g?{tempo:g.tempo??h,playing:!1,tick:0}:{tempo:h,playing:!1,tick:0},y=r?.midi,M={supported:null,status:"idle",enabled:y?.enabled??!1,inputs:[],selectedInputId:y?.selectedInputId??null,lastError:null,activeNotes:[]},N=Array.isArray(r?.samplerLibrary)?r.samplerLibrary.map((R,W)=>({...A.sampler,...R??{},id:typeof R?.id=="string"?R.id:`legacy-${Date.now()}-${W}`})):[],w=Array.isArray(r?.userPresets)?r.userPresets.map((R,W)=>{const X=typeof R?.name=="string"&&R.name.trim().length>0?R.name.trim():`Custom Preset ${W+1}`,q=typeof R?.description=="string"?R.description:"Custom preset",P=typeof R?.id=="string"&&R.id.trim().length>0?R.id.trim():`user-${Date.now()}-${W}`,B=typeof R?.createdAt=="string"?R.createdAt:new Date().toISOString(),z=R?.patch&&typeof R.patch=="object"?R.patch:A,U={...A,...z};return U.osc1=$t(U.osc1),U.osc2=$t(U.osc2),U.sequencer&&(U.sequencer=wo(U.sequencer)),U.modMatrix=Array.isArray(z?.modMatrix)?xo(z.modMatrix):(U.modMatrix??[]).map(D=>({...D})),{id:P,name:X,description:q,createdAt:B,patch:U}}):[],j=[1024,2048,4096,8192],k=r?.oscilloscope?.fftSize,L=j.includes(k)?k:4096;return{...r,patch:p,samplerLibrary:N,userPresets:w,layoutOrder:x,tempo:h,transport:v,midi:M,oscilloscope:{fftSize:L}}},onRehydrateStorage:()=>r=>{r&&(r.engine=null,(!r.oscilloscope||![1024,2048,4096,8192].includes(r.oscilloscope.fftSize))&&(r.oscilloscope={fftSize:4096}),Array.isArray(r.layoutOrder)||(r.layoutOrder=[]),typeof r.tempo!="number"&&(r.tempo=110),r.transport||(r.transport={tempo:r.tempo,playing:!1,tick:0}),r.midi?r.midi={supported:null,status:"idle",enabled:!!r.midi.enabled,inputs:[],selectedInputId:r.midi.selectedInputId??null,lastError:null,activeNotes:[]}:r.midi={supported:null,status:"idle",enabled:!1,inputs:[],selectedInputId:null,lastError:null,activeNotes:[]},Array.isArray(r.userPresets)||(r.userPresets=[]))}}));function ke({value:r,min:o,max:i,step:u=.01,size:d=56,label:f,hint:p,formatValue:x,onChange:h,disabled:g=!1,showValue:v=!0}){const[y,M]=V.useState(!1),N=V.useRef(null),w=V.useCallback($=>Math.min(i,Math.max(o,$)),[o,i]),j=i-o,k=j===0?0:(r-o)/j,L=V.useMemo(()=>-135+k*270,[k]),R=x?x(r):om(r),W=$=>{g||($.currentTarget.setPointerCapture($.pointerId),N.current={y:$.clientY,v:r},M(!0))},X=$=>{if(!N.current||g)return;if($.buttons===0){N.current=null,M(!1);try{$.currentTarget.releasePointerCapture($.pointerId)}catch{}return}const de=(N.current.y-$.clientY)/150*j,Y=w(N.current.v+de);h(Sl(Y,u))},q=$=>{if(!g){try{$.currentTarget.releasePointerCapture($.pointerId)}catch{}N.current=null,M(!1)}},P=$=>{if(g)return;const ie=u;($.key==="ArrowUp"||$.key==="ArrowRight")&&h(w(Sl(r+ie,ie))),($.key==="ArrowDown"||$.key==="ArrowLeft")&&h(w(Sl(r-ie,ie)))},B=d/2-6,z=d/2,U=d/2,D=-135,ee=z+Math.cos(D*Math.PI/180)*(B+6),C=U+Math.sin(D*Math.PI/180)*(B+6),I=z+Math.cos(L*Math.PI/180)*(B-6),Q=U+Math.sin(L*Math.PI/180)*(B-6);return l.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:6,opacity:g?.4:1,pointerEvents:g?"none":"auto",width:d},title:p,children:[l.jsxs("svg",{width:d,height:d,onPointerDown:W,onPointerMove:X,onPointerUp:q,onKeyDown:P,role:"slider","aria-label":f,"aria-valuemin":o,"aria-valuemax":i,"aria-valuenow":r,"aria-valuetext":R,"aria-description":p,tabIndex:g?-1:0,style:{cursor:g?"default":"ns-resize",outline:y?"1px solid var(--accent)":"none",borderRadius:8},children:[l.jsx("circle",{cx:z,cy:U,r:B,fill:"#0f1217",stroke:"#2a3040"}),l.jsx("circle",{cx:z,cy:U,r:B-8,fill:"#161a22",stroke:"#202635"}),l.jsx("circle",{cx:ee,cy:C,r:2.4,fill:"#3dd973",stroke:"#12161f",strokeWidth:.8}),l.jsx("line",{x1:z,y1:U,x2:I,y2:Q,stroke:"var(--accent)",strokeWidth:3,strokeLinecap:"round"})]}),(f||v)&&l.jsxs("div",{className:"knob-legend",children:[f?l.jsx("span",{className:"label",children:f}):null,v?l.jsx("span",{className:"value",children:R}):null]})]})}function Sl(r,o){const i=1/o;return Math.round(r*i)/i}function om(r){return Math.abs(r)>=100?r.toFixed(0):Math.abs(r)>=10?r.toFixed(1):r.toFixed(2)}const im=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],gr=10,lm=Array.from({length:61},(r,o)=>{const i=36+o,u=im[i%12],d=Math.floor(i/12)-1;return{midi:i,label:`${u}${d}`}}),am=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`sample-${Date.now()}-${Math.random().toString(16).slice(2)}`,Fu=(r,o)=>{const i=(r??"").trim();return i?i.slice(0,gr):o},cm=()=>`REC-${Math.floor(Date.now()%1e6).toString(36).toUpperCase().padStart(4,"0")}`.slice(0,gr),um=r=>{const i=r.replace(/\.[^/.]+$/,"").replace(/[^A-Za-z0-9_-]/g,"").toUpperCase();return i?i.slice(0,gr):"SAMPLE"},dm=r=>{const o={...Mt,...r??{}},i=typeof o.durationSec=="number"&&o.durationSec>0?o.durationSec:0;if(i===0)return{...o,durationSec:0,trimStartSec:0,trimEndSec:0};const u=.005,d=Math.max(0,i-u),f=Number(o.trimStartSec),p=Math.min(Math.max(Number.isFinite(f)?f:0,0),d),x=Number(o.trimEndSec);let h=Number.isFinite(x)?x:i;return h-p<u&&(h=i),h=Math.min(Math.max(h,p+u),i),{...o,durationSec:i,trimStartSec:p,trimEndSec:h}},So=r=>{const o=Math.max(0,r),i=Math.floor(o/60),u=Math.floor(o%60);return`${String(i).padStart(2,"0")}:${String(u).padStart(2,"0")}`};function fm({oscillator:r="osc1"}){const o=re(J=>J.patch[r].sampler),i=re(J=>J.samplerLibrary),u=re(J=>J.saveSamplerSample),d=re(J=>J.deleteSamplerSample),f=re(J=>J.setSamplerFromLibrary),p=re(J=>J.updateCurrentSampler),x=re(J=>J.renameSamplerSample),h=re(J=>J.playSamplerPreview),[g,v]=V.useState(null),[y,M]=V.useState(!1),[N,w]=V.useState(!1),[j,k]=V.useState(0),[L,R]=V.useState(!1),W=V.useRef(null),X=V.useRef(null),q=V.useRef(null),P=V.useRef([]),B=V.useRef(null),z=V.useRef(null),U=V.useRef(null),[D,ee]=V.useState(null),[C,I]=V.useState(""),$=V.useMemo(()=>typeof window<"u"?typeof window.MediaRecorder<"u":!1,[])&&typeof navigator<"u"&&!!navigator.mediaDevices?.getUserMedia,ie=V.useCallback(()=>{q.current&&(q.current.getTracks().forEach(J=>{try{J.stop()}catch{}}),q.current=null),X.current=null},[]),de=V.useCallback(async()=>{if(typeof window>"u")return null;if(!U.current)try{U.current=new AudioContext}catch(ve){return v(ve instanceof Error?ve.message:"Unable to create AudioContext"),null}const J=U.current;if(J&&J.state==="suspended")try{await J.resume()}catch{}return J},[]),Y=V.useCallback(async J=>{const ve=await de();if(!ve)return null;try{const we=await(await fetch(J)).arrayBuffer();return(await ve.decodeAudioData(we.slice(0))).duration}catch(je){return v(je instanceof Error?je.message:"Unable to decode audio"),null}},[de]),se=dm(o),te=V.useCallback(async(J,ve)=>{M(!0),v(null);try{const je=await Y(J);if(je==null)return;const we=je>0?je:0,Pe={id:am(),name:Fu(ve,"SAMPLE"),dataUrl:J,recordedAt:Date.now(),durationSec:we,trimStartSec:0,trimEndSec:we,loop:se.loop,rootMidi:se.rootMidi};u(r,Pe)}finally{M(!1)}},[r,se.loop,se.rootMidi,Y,u]),_=V.useCallback((J,ve)=>{const je=new FileReader;je.onloadend=()=>{const we=je.result;typeof we=="string"?te(we,ve):v("Unable to read recording data")},je.onerror=()=>{v("Failed to read recorded audio")},je.readAsDataURL(J)},[te]),H=V.useCallback(()=>{const J=X.current;if(J&&J.state!=="inactive"){try{J.stop()}catch{}w(!1),B.current=null}},[]),Se=async()=>{if(!(!$||N||y)){v(null);try{const J=await navigator.mediaDevices.getUserMedia({audio:!0}),ve=window.MediaRecorder,je=new ve(J);P.current=[],je.ondataavailable=we=>{we.data&&we.data.size>0&&P.current.push(we.data)},je.onerror=we=>{const Pe=we?.error?.message??"Recording error";v(Pe),H()},je.onstop=()=>{w(!1);const we=new Blob(P.current,{type:P.current[0]?.type||"audio/webm"});P.current=[],ie(),we.size>0&&_(we,cm())},je.start(),X.current=je,q.current=J,w(!0),B.current=performance.now(),k(0),R(!0)}catch(J){ie(),w(!1),B.current=null,v(J instanceof Error?J.message:"Microphone access denied")}}},xe=V.useCallback(J=>{const ve=new FileReader;ve.onloadend=()=>{const je=ve.result;typeof je=="string"?te(je,um(J.name)):v("Unable to read file")},ve.onerror=()=>v("Unable to load file"),ve.readAsDataURL(J)},[te]),be=J=>{const ve=J.target.files?.[0];ve&&xe(ve),J.target&&(J.target.value="")};V.useEffect(()=>()=>{H(),ie()},[ie,H]),V.useEffect(()=>(N?(z.current!=null&&window.clearInterval(z.current),z.current=window.setInterval(()=>{if(B.current!=null){const J=(performance.now()-B.current)/1e3;k(J),R(ve=>!ve)}},500)):(z.current!=null&&(window.clearInterval(z.current),z.current=null),k(0),R(!1)),()=>{z.current!=null&&(window.clearInterval(z.current),z.current=null)}),[N]);const me=se.durationSec??0,Me=!!se.dataUrl&&me>0,Ce=se.trimStartSec??0,_e=se.trimEndSec??me,fe=J=>{if(!Me)return;const ve=Math.max(0,Math.min(J,me)),we=Math.max(ve+.005,_e);p(r,{trimStartSec:ve,trimEndSec:Math.min(we,me)})},Be=J=>{if(!Me)return;const ve=Math.max(0,Math.min(J,me)),je=.005,we=Math.min(Ce,ve-je),Pe=Math.max(0,Math.min(we,me)),Re=Math.min(me,Math.max(ve,je));p(r,{trimStartSec:Math.max(Pe,0),trimEndSec:Re})},$e=V.useCallback(J=>{if(typeof window>"u"||!J.dataUrl)return;const ve=document.createElement("a");ve.href=J.dataUrl;const je=J.dataUrl.split(";")[0]?.split(":")[1]??"audio/webm",we=je.includes("/")?je.split("/")[1]:"webm",Pe=(J.name||"sample").replace(/[^a-z0-9_\-]+/gi,"_");ve.download=`${Pe}.${we}`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve)},[]),Xe=V.useCallback(()=>{if(typeof window>"u"||i.length===0)return;const J=JSON.stringify(i.map(Pe=>({...Pe,recordedAt:Pe.recordedAt??null})),null,2),ve=new Blob([J],{type:"application/json"}),je=URL.createObjectURL(ve),we=document.createElement("a");we.href=je,we.download=`sampler-library-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(je)},[i]),dt=V.useCallback(()=>{ee(null),I("")},[]),At=V.useCallback(()=>{if(!D)return;const J=C.trim();J&&(x(D,Fu(J,"SAMPLE")),ee(null),I(""))},[D,C,x]);return l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,padding:"0 0 8px"},children:[l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[l.jsx("div",{className:"label",children:"Sampler"}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[l.jsx("button",{type:"button",onClick:()=>W.current?.click(),disabled:y,children:y?"Loading...":"Load Sample"}),l.jsx("button",{type:"button",onClick:()=>h(r),disabled:!se.dataUrl||y,children:"Play"}),l.jsx("button",{type:"button",onClick:N?H:Se,disabled:!$||y,children:N?"Stop Recording":"Record"}),l.jsx("button",{type:"button",onClick:()=>{p(r,{id:null,name:Mt.name,dataUrl:null,recordedAt:void 0,durationSec:0,trimStartSec:0,trimEndSec:0,loop:Mt.loop,rootMidi:Mt.rootMidi}),v(null)},disabled:!se.dataUrl,children:"Clear"})]}),l.jsx("input",{ref:W,type:"file",accept:"audio/*",style:{display:"none"},onChange:be,disabled:y})]}),N&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:L?"#ff4d4f":"#ffb3b8",boxShadow:L?"0 0 8px rgba(255,77,79,0.8)":"none",transition:"background-color 0.2s linear, box-shadow 0.2s linear"}}),l.jsxs("span",{style:{fontFamily:"monospace",fontSize:12},children:["Recording ",So(j)]})]}),l.jsxs("div",{style:{fontSize:12,color:"var(--muted)",display:"flex",flexWrap:"wrap",gap:8},children:[l.jsxs("span",{children:[l.jsx("span",{className:"label",style:{marginRight:4},children:"Current"}),l.jsx("span",{style:{maxWidth:`${gr}ch`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"bottom"},title:se.dataUrl?se.name:void 0,children:se.dataUrl?se.name:"No sample loaded"})]}),Me&&l.jsxs("span",{children:["Length ",So(me),"  Window ",So(_e-Ce)]}),!$&&l.jsx("span",{children:"(Recording unsupported in this browser)"})]}),g&&l.jsx("div",{style:{color:"var(--danger, #d14343)",fontSize:12},children:g}),l.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",alignItems:"center"},children:[l.jsxs("label",{children:[l.jsx("span",{className:"label",children:"Root Note"}),l.jsx("select",{value:se.rootMidi,onChange:J=>p(r,{rootMidi:Number(J.target.value)}),children:lm.map(J=>l.jsx("option",{value:J.midi,children:J.label},J.midi))})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:!!se.loop,onChange:J=>p(r,{loop:J.target.checked})}),"Loop playback"]})]}),Me&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[l.jsx("div",{className:"label",children:"Trim"}),l.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:[l.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:4},children:[l.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:["Start ",Math.round(Ce*1e3)," ms"]}),l.jsx("input",{type:"range",min:0,max:Math.max(me*1e3,5),step:5,value:Math.round(Ce*1e3),onChange:J=>fe(Number(J.target.value)/1e3)})]}),l.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:4},children:[l.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:["End ",Math.round(_e*1e3)," ms"]}),l.jsx("input",{type:"range",min:5,max:Math.max(me*1e3,5),step:5,value:Math.round(_e*1e3),onChange:J=>Be(Number(J.target.value)/1e3)})]})]})]}),i.length>0&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[l.jsx("div",{className:"label",children:"Library"}),l.jsx("button",{type:"button",onClick:Xe,style:{fontSize:12},children:"Export Library"})]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:i.map(J=>{if(!J.id)return null;const ve=J.id===se.id,je=D===J.id;return l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 8px",borderRadius:6,background:ve?"rgba(255, 77, 79, 0.1)":"rgba(255,255,255,0.04)"},children:[l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:160},children:[je?l.jsx("input",{value:C,onChange:we=>I(we.target.value),onKeyDown:we=>{we.key==="Enter"&&(we.preventDefault(),At()),we.key==="Escape"&&(we.preventDefault(),dt())},autoFocus:!0,maxLength:gr}):l.jsx("span",{style:{fontWeight:600,maxWidth:`${gr}ch`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:J.name||"Sample",children:J.name||"Sample"}),l.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:[So(J.durationSec??0)," ",ve?" Active":""]})]}),l.jsx("div",{style:{display:"flex",gap:8},children:je?l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",onClick:At,disabled:!C.trim(),children:"Save"}),l.jsx("button",{type:"button",onClick:dt,children:"Cancel"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",onClick:()=>f(r,J.id),disabled:ve,children:ve?"In Use":"Use"}),l.jsx("button",{type:"button",onClick:()=>{ee(J.id),I(J.name||"")},children:"Rename"}),l.jsx("button",{type:"button",onClick:()=>$e(J),disabled:!J.dataUrl,children:"Export"}),l.jsx("button",{type:"button",onClick:()=>d(J.id),style:{color:"var(--danger, #d14343)"},children:"Delete"})]})})]},J.id)})})]})]})}const pm=[{value:"analog",label:"Analog"},{value:"macro",label:"Macro"},{value:"sampler",label:"Sampler"}],Du={va:"VA",fold:"Wavefold",pluck:"Pluck",supersaw:"Supersaw",pwm:"PWM",fm2op:"FM 2-Op",wavetable:"Wavetable",harmonic:"Harmonic",chord:"Chord Stack",dirichlet:"Dirichlet Pulse",formant:"Formant"},mm={va:"https://en.wikipedia.org/wiki/Subtractive_synthesis",fold:"https://en.wikipedia.org/wiki/Waveshaping",pluck:"https://en.wikipedia.org/wiki/Karplus%E2%80%93Strong_string_synthesis",supersaw:"https://en.wikipedia.org/wiki/Supersaw_(synthesizer)",pwm:"https://en.wikipedia.org/wiki/Pulse-width_modulation",fm2op:"https://en.wikipedia.org/wiki/Frequency_modulation_synthesis",wavetable:"https://en.wikipedia.org/wiki/Wavetable_synthesis",harmonic:"https://en.wikipedia.org/wiki/Additive_synthesis",chord:"https://en.wikipedia.org/wiki/Chord_(music)",dirichlet:"https://en.wikipedia.org/wiki/Dirichlet_kernel",formant:"https://en.wikipedia.org/wiki/Formant"},hm=["va","fold","pluck","supersaw","pwm","fm2op","wavetable","harmonic","chord","dirichlet","formant"],gm={va:{summary:"Triangle/saw hybrid with simple low-pass tone control.",harmonics:{label:"Tone",hint:"Sets low-pass cutoff; higher adds brightness."},timbre:{label:"Blend",hint:"Crossfades triangle  sawtooth balance."},morph:{label:"Shape",hint:"Reserved for future tweaks; minimal impact today."}},fold:{summary:"Wavefolder voice with controllable drive and symmetry.",harmonics:{label:"Drive",hint:"Increase folding depth to add upper harmonics."},timbre:{label:"Brightness",hint:"Post-filter to tame or open the highs."},morph:{label:"Symmetry",hint:"Offset folding symmetry for odd/even emphasis."}},pluck:{summary:"Karplus-Strong burst with damped feedback.",harmonics:{label:"Decay",hint:"Feedback amount controlling sustain length."},timbre:{label:"Damping",hint:"Low-pass filter inside the loop for darker plucks."},morph:{label:"Body HP",hint:"Pre high-pass to thin or warm the attack."}},supersaw:{summary:"Six detuned saws with tone and stereo spread.",harmonics:{label:"Spread",hint:"Detune range distributed across the stack."},timbre:{label:"Brightness",hint:"Low-pass the swarm to soften or brighten."},morph:{label:"Stereo",hint:"Pan spread from narrow mono to wide field."}},pwm:{summary:"Pulse made from tanh-shaped saw for animated PWM tones.",harmonics:{label:"Edge",hint:"Tanh drive for sharper edges and richer harmonics."},timbre:{label:"Brightness",hint:"Low-pass shaper output to control fizz."},morph:{label:"Pulse Width",hint:"Duty cycle sweep from roughly 10% to 90%."}},fm2op:{summary:"Sine carrier with modulator FM for glassy to harsh tones.",harmonics:{label:"Ratio",hint:"Modulator:carrier ratio from 0.25 up to 8."},timbre:{label:"Amount",hint:"FM depth adds sidebands and grit."},morph:{label:"Tone",hint:"Low-pass filter to smooth bright spectra."}},wavetable:{summary:"Morph between sine, triangle, saw, and square.",harmonics:{label:"Brightness",hint:"Low-pass cutoff governing top-end energy."},timbre:{label:"Resonance",hint:"Boost Q for a sharper or flatter peak."},morph:{label:"Shape Blend",hint:"Scan through the wavetable continuum."}},harmonic:{summary:"Additive bank with controllable partial count and tilt.",harmonics:{label:"Partials",hint:"Number of sine partials mixed together."},timbre:{label:"Tilt",hint:"Shift energy toward darker or brighter spectra."},morph:{label:"Odd / Even",hint:"Bias emphasis toward odd or even harmonics."}},chord:{summary:"Voicing generator stacking detuned chord tones.",harmonics:{label:"Chord Set",hint:"Selects the chord recipe around the played note."},timbre:{label:"Brightness",hint:"Low-pass filter across the chord stack."},morph:{label:"Spread",hint:"Detune and stereo spread amount."}},dirichlet:{summary:"Dirichlet pulse oscillator with adjustable width and skew.",harmonics:{label:"Partials",hint:"Upper harmonic count while staying anti-aliased."},timbre:{label:"Width",hint:"Pulse width from narrow hollow tones to square-like."},morph:{label:"Skew",hint:"Phase skew for asymmetry and transient emphasis."}},formant:{summary:"Stacked, phase-aligned formants for vowel pads and choirs.",harmonics:{label:"Spacing",hint:"Scales formant frequency spacing and height."},timbre:{label:"Resonance",hint:"Boosts formant Q for sharper vowels."},morph:{label:"Vowel Sweep",hint:"Blend between stored vowel targets."}}},vm=[{value:"sine",label:"Sine"},{value:"square",label:"Square"},{value:"sawtooth",label:"Saw"},{value:"triangle",label:"Triangle"},{value:"noise",label:"Noise"}],ym={osc1:"ENG1",osc2:"ENG2"},xm="Adjusts macro output gain before it mixes with the other voices.";function wm(){const r=re(v=>v.patch),o=re(v=>v.updatePatch),i=Ie.useCallback((v,y)=>{o({[v]:y})},[o]),u=Ie.useCallback((v,y)=>{i(v,{mode:y})},[i]),d=Ie.useCallback((v,y)=>{const M=r[v].macro??It;i(v,{macro:{...M,...y}})},[r,i]),f=v=>{const y=r[v],M=y.mode??"analog",N=y.macro??It;return l.jsxs("div",{className:"osc-section",style:{display:"grid",gap:12},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[l.jsx("h4",{className:"settings-heading",style:{margin:0},children:ym[v]}),l.jsx("select",{value:M,onChange:w=>u(v,w.target.value),children:pm.map(w=>l.jsx("option",{value:w.value,children:w.label},w.value))})]}),M==="analog"&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{children:[l.jsx("div",{className:"label",children:"Wave"}),l.jsx("select",{value:y.wave??"sawtooth",onChange:w=>i(v,{wave:w.target.value}),children:vm.map(w=>l.jsx("option",{value:w.value,children:w.label},w.value))})]}),l.jsxs("div",{className:"osc-knob-row",children:[l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Octave",min:-2,max:2,step:1,value:y.octave??0,onChange:w=>i(v,{octave:Math.round(w)}),formatValue:w=>`${Math.round(w)}`})}),l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Detune",min:-1200,max:1200,step:1,value:y.detune,onChange:w=>i(v,{detune:w}),formatValue:w=>`${Math.round(w)}`})}),l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Fine",min:-10,max:10,step:.1,value:y.detuneFine??0,onChange:w=>i(v,{detuneFine:Number(w.toFixed(1))}),formatValue:w=>`${w.toFixed(1)}`})})]})]}),M==="macro"&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{children:[l.jsx("div",{className:"label",children:"Model"}),l.jsx("select",{value:N.model??"va",onChange:w=>d(v,{model:w.target.value}),children:hm.map(w=>l.jsx("option",{value:w,children:Du[w]},w))})]}),(()=>{const w=N.model??"va",j=gm[w],k=Du[w];return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"osc-knob-row",children:[l.jsx(ke,{label:j.harmonics.label,hint:j.harmonics.hint,min:0,max:1,step:.001,value:N.harmonics??.6,onChange:L=>d(v,{harmonics:L})}),l.jsx(ke,{label:j.timbre.label,hint:j.timbre.hint,min:0,max:1,step:.001,value:N.timbre??.5,onChange:L=>d(v,{timbre:L})}),l.jsx(ke,{label:j.morph.label,hint:j.morph.hint,min:0,max:1,step:.001,value:N.morph??.5,onChange:L=>d(v,{morph:L})}),l.jsx(ke,{label:"Level",hint:xm,min:0,max:1,step:.001,value:N.level??1,onChange:L=>d(v,{level:L})})]}),l.jsxs("div",{style:{marginTop:6,fontSize:12,color:"var(--muted)",lineHeight:1.5},children:[l.jsx("strong",{style:{fontSize:11,letterSpacing:.4},children:l.jsxs("a",{className:"macro-model-link",href:mm[w],target:"_blank",rel:"noreferrer",children:[l.jsx("span",{children:k}),l.jsx("svg",{viewBox:"0 0 12 12","aria-hidden":"true",focusable:"false",children:l.jsx("path",{d:"M4 3.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v4.25a.75.75 0 0 1-1.5 0V4.81l-4.22 4.22a.75.75 0 0 1-1.06-1.06L7.19 3.75H4.75A.75.75 0 0 1 4 3.25Z"})})]})}),"  ",j.summary]})]})})()]}),M==="sampler"&&l.jsx(fm,{oscillator:v})]},v)},p=r.osc1.mode??"analog",x=r.osc2.mode??"analog",h=p==="analog"&&x==="analog",g=h;return l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx("div",{className:"controls-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:16},children:["osc1","osc2"].map(f)}),l.jsxs("div",{className:"osc-knob-row",style:{justifyContent:"flex-start"},children:[l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Mix",min:0,max:1,step:.01,value:r.mix,onChange:v=>o({mix:v}),formatValue:v=>`${Math.round(v*100)}%`})}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,minWidth:120,opacity:h?1:.5},children:[l.jsx("input",{type:"checkbox",checked:r.fm.enabled&&h,disabled:!h,onChange:v=>o({fm:{...r.fm,enabled:v.target.checked}})}),l.jsx("span",{className:"label",children:"FM"})]}),l.jsx(ke,{label:"Ratio",min:.1,max:8,step:.1,value:r.fm.ratio,onChange:v=>o({fm:{...r.fm,ratio:v}}),disabled:!h||!r.fm.enabled}),l.jsx(ke,{label:"Amount (Hz)",min:0,max:1e3,step:1,value:r.fm.amount,onChange:v=>o({fm:{...r.fm,amount:v}}),disabled:!h||!r.fm.enabled}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,minWidth:120,opacity:g?1:.5},children:[l.jsx("input",{type:"checkbox",checked:r.ring.enabled&&g,disabled:!g,onChange:v=>o({ring:{...r.ring,enabled:v.target.checked}})}),l.jsx("span",{className:"label",children:"Ring"})]}),l.jsx(ke,{label:"Amount",min:0,max:1,step:.01,value:r.ring.amount,onChange:v=>o({ring:{...r.ring,amount:v}}),disabled:!g||!r.ring.enabled})]})]})}function Sm(){const r=re(d=>d.patch),o=re(d=>d.updatePatch),i=d=>{o({filter:{...r.filter,...d}})},u=r.master.gain;return l.jsxs("div",{className:"filter-panel",children:[l.jsxs("label",{className:"filter-type",children:[l.jsx("span",{className:"label",children:"Filter Type"}),l.jsxs("select",{value:r.filter.type,onChange:d=>i({type:d.target.value}),children:[l.jsx("option",{value:"lowpass",children:"Low-pass"}),l.jsx("option",{value:"highpass",children:"High-pass"}),l.jsx("option",{value:"bandpass",children:"Band-pass"}),l.jsx("option",{value:"notch",children:"Notch"})]})]}),l.jsxs("div",{className:"filter-knobs",children:[l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Cutoff",min:40,max:8e3,step:10,value:r.filter.cutoff,onChange:d=>i({cutoff:d}),formatValue:d=>`${Math.round(d)} Hz`})}),l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Resonance",min:0,max:10,step:.1,value:r.filter.q,onChange:d=>i({q:d}),formatValue:d=>d.toFixed(2)})}),l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Master",min:0,max:1,step:.01,value:u,onChange:d=>o({master:{...r.master,gain:d}}),formatValue:d=>d.toFixed(2)})})]})]})}function km(){const r=re(u=>u.patch),o=re(u=>u.updatePatch),i=r.envelope;return l.jsx("div",{className:"envelope-panel",children:l.jsxs("div",{className:"envelope-knobs",children:[l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Attack",min:0,max:2,step:.01,value:i.attack,onChange:u=>o({envelope:{...i,attack:u}})})}),l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Decay",min:0,max:2,step:.01,value:i.decay,onChange:u=>o({envelope:{...i,decay:u}})})}),l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Sustain",min:0,max:1,step:.01,value:i.sustain,onChange:u=>o({envelope:{...i,sustain:u}})})}),l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Release",min:0,max:3,step:.01,value:i.release,onChange:u=>o({envelope:{...i,release:u}})})})]})})}const Mm=[0,2,4,5,7,9,11],bm={0:1,1:3,2:null,3:6,4:8,5:10,6:null};function jm(r,o=60){const i=Math.floor(r/7),u=Mm[r%7];return o+i*12+u}function Cm(r,o=60){const i=Math.floor(r/7),u=bm[r%7];return u==null?null:o+i*12+u}const Pl={a:0,w:1,s:2,e:3,d:4,f:5,t:6,g:7,y:8,h:9,u:10,j:11,k:12,o:13,l:14,p:15,";":16,"'":17},zu=Object.fromEntries(Object.entries(Pl).map(([r,o])=>[o,r.length===1?r.toUpperCase():r]));function Em(){const r=re(q=>q.engine),o=re(q=>q.midi.activeNotes),[i,u]=V.useState(()=>new Set),[d,f]=V.useState(60),p=V.useRef(new Map),x=V.useRef(i);V.useEffect(()=>{x.current=i},[i]);const h=V.useMemo(()=>{const q=new Set(i);for(const P of o)q.add(P);return q},[i,o]),g=q=>{r?.noteOn(q,1),u(P=>new Set(P).add(q))},v=q=>{r?.noteOff(q),u(P=>{const B=new Set(P);return B.delete(q),B})};V.useEffect(()=>{const q=new Set,P=I=>I.length===1?I.toLowerCase():I,B=I=>{if(!(I instanceof HTMLElement))return!1;if(I.isContentEditable)return!0;const Q=I.tagName;return Q==="INPUT"||Q==="TEXTAREA"||Q==="SELECT"},z=()=>{const I=new Set;p.current.forEach(Q=>{I.has(Q)||(r&&r.noteOff(Q),I.add(Q))}),p.current.clear(),x.current.forEach(Q=>{I.has(Q)||(r&&r.noteOff(Q),I.add(Q))}),(I.size>0||x.current.size>0)&&(u(new Set),x.current=new Set),q.clear()},U=I=>{if(I.repeat)return;const Q=P(I.key);if(B(I.target))return;if(Q==="z"){f(de=>Math.max(24,de-12));return}if(Q==="x"){f(de=>Math.min(96,de+12));return}const $=Pl[Q],ie=$!=null?d+$:void 0;ie!=null&&!q.has(Q)&&(I.preventDefault(),I.stopPropagation(),q.add(Q),g(ie))},D=I=>{const Q=P(I.key),$=Pl[Q],ie=$!=null?d+$:void 0;ie!=null&&(q.delete(Q),v(ie))},ee=()=>{z()},C=()=>{document.visibilityState==="hidden"&&z()};return window.addEventListener("keydown",U),window.addEventListener("keyup",D),window.addEventListener("blur",ee),document.addEventListener("visibilitychange",C),()=>{window.removeEventListener("keydown",U),window.removeEventListener("keyup",D),window.removeEventListener("blur",ee),document.removeEventListener("visibilitychange",C),z()}},[r,d]);const y=14,M=V.useMemo(()=>Array.from({length:y},(q,P)=>jm(P,d)),[y,d]),N=28,j=N+2,k=Math.floor(d/12)-1,L=k-4,R=(q,P)=>{q.currentTarget.setPointerCapture(q.pointerId),q.preventDefault(),p.current.set(q.pointerId,P),g(P)},W=q=>{if(!p.current.has(q.pointerId))return;const P=p.current.get(q.pointerId),z=document.elementFromPoint(q.clientX,q.clientY)?.dataset?.midi,U=z!=null?Number(z):void 0;if(U==null){P!=null&&(v(P),p.current.delete(q.pointerId));return}U!==P&&(P!=null&&v(P),p.current.set(q.pointerId,U),g(U))},X=q=>{const P=p.current.get(q.pointerId);P!=null&&(v(P),p.current.delete(q.pointerId))};return l.jsxs("div",{className:"keyboard",children:[l.jsx("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between"},children:l.jsxs("div",{className:"octave-indicator",children:[l.jsx("span",{className:"badge",children:"Octave"}),l.jsxs("span",{className:"value",style:{color:L===0?"var(--text)":"var(--accent)"},children:[k," ",L!==0?`(${L>0?"+":""}${L})`:""]})]})}),l.jsxs("div",{className:"keys-and-help",children:[l.jsxs("div",{className:"keys-row",style:{touchAction:"none"},children:[M.map((q,P)=>l.jsx("div",{className:"key",style:{background:h.has(q)?"#d1d5db":"#f8fafc"},"data-midi":q,onPointerDown:B=>R(B,q),onPointerMove:W,onPointerUp:X,onPointerCancel:X,children:l.jsx("span",{className:"key-label",children:zu[q-d]??""})},P)),Array.from({length:y}).map((q,P)=>{const B=Cm(P,d);if(B==null)return null;const z=P*j+Math.floor(N*.7);return l.jsx("div",{className:"key black",style:{left:z,background:h.has(B)?"#111827":"#0b0f16"},"data-midi":B,onPointerDown:U=>R(U,B),onPointerMove:W,onPointerUp:X,onPointerCancel:X,children:l.jsx("span",{className:"key-label",children:zu[B-d]??""})},`b-${P}`)})]}),l.jsxs("div",{className:"kbd-help",children:[l.jsx("div",{className:"badge",style:{alignSelf:"flex-start"},children:"Octave shift"}),l.jsxs("button",{className:"kbd-row keyboard-shift-button",onClick:()=>f(q=>Math.max(24,q-12)),type:"button",children:[l.jsx("span",{className:"kbd",children:"Z"}),l.jsx("span",{className:"hint-text",children:"Octave Down"})]}),l.jsxs("button",{className:"kbd-row keyboard-shift-button",onClick:()=>f(q=>Math.min(96,q+12)),type:"button",children:[l.jsx("span",{className:"kbd",children:"X"}),l.jsx("span",{className:"hint-text",children:"Octave Up"})]})]})]})]})}const ns={highPct:2,lowPct:2,windowPct:25,holdOff:3,corrRefresh:.5};function Nm(){const r=re(v=>v.engine),o=V.useRef(null),i=V.useRef(),u=V.useRef(0),d=V.useRef(0),f=V.useRef(0),p=V.useRef(0),x=V.useRef(null),h=V.useRef(128),g=re(v=>v.oscilloscope.fftSize);return V.useEffect(()=>{const v=o.current;if(!v||!r||typeof r.getAnalyser!="function")return;const y=v.getContext("2d"),M=r.getAnalyser();M.fftSize=g,M.smoothingTimeConstant=0;const N=()=>{const w=r.getWaveform,j=typeof w=="function"?w.call(r):new Uint8Array(M.fftSize),k=window.devicePixelRatio||1,L=v.clientWidth||600,R=v.clientHeight||160,W=Math.floor(L*k),X=Math.floor(R*k);(v.width!==W||v.height!==X)&&(v.width=W,v.height=X);const q=v.width,P=v.height;y.clearRect(0,0,q,P),y.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--viz-bg")||"#05070b",y.fillRect(0,0,q,P),y.save(),y.strokeStyle="rgba(255,255,255,0.06)",y.lineWidth=1,y.beginPath(),y.moveTo(0,P/2),y.lineTo(q,P/2),y.stroke();const B=6;for(let $=1;$<B;$++){const ie=$*q/B;y.beginPath(),y.moveTo(ie,0),y.lineTo(ie,P),y.stroke()}y.restore();const z=j.length,U=new Float32Array(z);let D=0;for(let $=0;$<z;$++)D+=j[$];D/=z;let ee=0;for(let $=0;$<z;$++){const ie=(j[$]-D)/128;U[$]=ie,ee+=ie*ie}let C=u.current||0;if(ee>.001){const $=Math.max(.001,ns.highPct/100),ie=-Math.max(.001,ns.lowPct/100);let de=!1;const Y=[];for(let fe=1;fe<z;fe++){const Be=U[fe-1],$e=U[fe];!de&&Be<ie&&(de=!0),de&&Be<$&&$e>=$&&(Y.push(fe),de=!1)}if(Y.length>=2){const fe=[];for(let Re=1;Re<Y.length;Re++)fe.push(Y[Re]-Y[Re-1]);fe.sort((Re,ht)=>Re-ht);const Be=fe[Math.floor(fe.length/2)];let $e=0,Xe=0;for(const Re of fe)Math.abs(Re-Be)<=.2*Be&&($e+=Re,Xe++);const dt=Xe>0?$e/Xe:Be,At=f.current||dt,J=Math.max(6,Math.min(z,At*.6+dt*.4));f.current=J;const ve=((u.current||Y[0])+J)%z,je=Math.max(6,Math.floor(ns.windowPct/100*J)),we=[];for(const Re of Y)Math.abs(Re-ve)<=je&&we.push(Re);we.length===0&&we.push(Math.round(ve));const Pe=Math.max(32,Math.min(256,Math.floor(J)));if(h.current=Pe,!x.current){const Re=new Float32Array(Pe);for(let Ne=0;Ne<Pe;Ne++)Re[Ne]=U[(we[0]+Ne)%z];let ht=0;for(let Ne=0;Ne<Pe;Ne++)ht+=Re[Ne];ht/=Pe;let Yt=0;for(let Ne=0;Ne<Pe;Ne++)Re[Ne]=Re[Ne]-ht,Yt+=Re[Ne]*Re[Ne];Yt=Math.sqrt(Math.max(Yt,1e-12));for(let Ne=0;Ne<Pe;Ne++)Re[Ne]/=Yt;x.current=Re}{let Re=we[0],ht=-1/0;const Yt=x.current;for(const Ne of we){let Ft=0;for(let rt=0;rt<Pe;rt++)Ft+=U[(Ne+rt)%z];Ft/=Pe;let Nt=0,Ae=0;for(let rt=0;rt<Pe;rt++){const En=U[(Ne+rt)%z]-Ft;Nt+=En*En}Nt=Math.sqrt(Math.max(Nt,1e-12));for(let rt=0;rt<Pe;rt++){const En=(U[(Ne+rt)%z]-Ft)/Nt;Ae+=En*Yt[rt]}Ae>ht&&(ht=Ae,Re=Ne)}if(C=Re,ht<ns.corrRefresh){const Ne=new Float32Array(Pe);for(let Ae=0;Ae<Pe;Ae++)Ne[Ae]=U[(C+Ae)%z];let Ft=0;for(let Ae=0;Ae<Pe;Ae++)Ft+=Ne[Ae];Ft/=Pe;let Nt=0;for(let Ae=0;Ae<Pe;Ae++)Ne[Ae]=Ne[Ae]-Ft,Nt+=Ne[Ae]*Ne[Ae];Nt=Math.sqrt(Math.max(Nt,1e-12));for(let Ae=0;Ae<Pe;Ae++)Ne[Ae]/=Nt;x.current=Ne}}}else if(Y.length===1)C=Y[0];else{let fe=0,Be=0;for(let $e=1;$e<z;$e++){const Xe=U[$e]-U[$e-1];Xe>fe&&(fe=Xe,Be=$e)}C=Be}const se=u.current||0,te=f.current||0,_=te?(se+te)%z:se,H=Math.abs(C-_);if(te&&H>.6*te||p.current>=ns.holdOff){const fe=Math.round(se*.4+C*.6);u.current=fe,p.current=0}else p.current+=1;let xe=u.current;const be=12;for(let fe=-be;fe<=be;fe++){const Be=(xe+fe+z)%z,$e=(Be+1)%z,Xe=U[Be],dt=U[$e];if(Xe<$&&dt>=$){const At=($-Xe)/Math.max(dt-Xe,1e-6);xe=Be+At;break}}d.current=xe;const me=h.current,Me=new Float32Array(me);for(let fe=0;fe<me;fe++){const Be=(xe+fe)%z,$e=Math.floor(Be),Xe=($e+1)%z,dt=Be-$e,At=U[$e]*(1-dt)+U[Xe]*dt;Me[fe]=At}let Ce=0;for(let fe=0;fe<me;fe++)Ce+=Me[fe];Ce/=me;let _e=0;for(let fe=0;fe<me;fe++)Me[fe]=Me[fe]-Ce,_e+=Me[fe]*Me[fe];_e=Math.sqrt(Math.max(_e,1e-12));for(let fe=0;fe<me;fe++)Me[fe]/=_e;x.current=Me}const I=d.current||u.current||0,Q=q/z;y.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--viz-stroke")||"#00ffd5",y.lineWidth=2,y.shadowColor=y.strokeStyle,y.shadowBlur=8,y.beginPath();for(let $=0;$<z;$++){const ie=($+I)%z,de=Math.floor(ie),Y=(de+1)%z,se=ie-de,_=((U[de]*(1-se)+U[Y]*se)*.5+.5)*P,H=$*Q;$===0?y.moveTo(H,_):y.lineTo(H,_)}y.stroke(),y.shadowBlur=0,i.current=requestAnimationFrame(N)};return i.current=requestAnimationFrame(N),()=>{i.current&&cancelAnimationFrame(i.current)}},[r,g]),l.jsx("div",{children:l.jsx("canvas",{ref:o,width:600,height:300,style:{width:"100%",height:300,borderRadius:8,border:"1px solid #222631"}})})}function Pm(){const r=re(u=>u.patch),o=re(u=>u.updatePatch),i=r.effects??{delay:{enabled:!1,time:.25,feedback:.3,mix:.2},reverb:{enabled:!1,size:.5,decay:.5,mix:.25}};return l.jsxs("div",{className:"effects-panel",children:[l.jsxs("div",{className:"effects-row",children:[l.jsx("div",{className:"effects-heading",children:"Delay"}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:i.delay.enabled,onChange:u=>o({effects:{...i,delay:{...i.delay,enabled:u.target.checked}}})}),l.jsx("span",{className:"label",children:"On"})]}),l.jsxs("div",{className:"effects-knobs",children:[l.jsx(ke,{label:"Time",min:0,max:1.5,step:.01,value:i.delay.time,onChange:u=>o({effects:{...i,delay:{...i.delay,time:u}}}),disabled:!i.delay.enabled}),l.jsx(ke,{label:"Feedback",min:0,max:.95,step:.01,value:i.delay.feedback,onChange:u=>o({effects:{...i,delay:{...i.delay,feedback:u}}}),disabled:!i.delay.enabled}),l.jsx(ke,{label:"Mix",min:0,max:1,step:.01,value:i.delay.mix,onChange:u=>o({effects:{...i,delay:{...i.delay,mix:u}}}),disabled:!i.delay.enabled})]})]}),l.jsxs("div",{className:"effects-row",style:{marginTop:12},children:[l.jsx("div",{className:"effects-heading",children:"Reverb"}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:i.reverb.enabled,onChange:u=>o({effects:{...i,reverb:{...i.reverb,enabled:u.target.checked}}})}),l.jsx("span",{className:"label",children:"On"})]}),l.jsxs("div",{className:"effects-knobs",children:[l.jsx(ke,{label:"Size",min:0,max:1,step:.01,value:i.reverb.size,onChange:u=>o({effects:{...i,reverb:{...i.reverb,size:u}}}),disabled:!i.reverb.enabled}),l.jsx(ke,{label:"Decay",min:0,max:1,step:.01,value:i.reverb.decay,onChange:u=>o({effects:{...i,reverb:{...i.reverb,decay:u}}}),disabled:!i.reverb.enabled}),l.jsx(ke,{label:"Mix",min:0,max:1,step:.01,value:i.reverb.mix,onChange:u=>o({effects:{...i,reverb:{...i.reverb,mix:u}}}),disabled:!i.reverb.enabled})]})]})]})}function qu({idx:r}){const o=re(f=>f.patch),i=re(f=>f.updatePatch),u=r===1?"lfo1":"lfo2",d=o[u]||{enabled:!1,wave:"sine",rateHz:5,amount:.2,dest:"pitch"};return l.jsxs("div",{className:"lfo-row",children:[l.jsxs("label",{className:"lfo-toggle",children:[l.jsx("input",{type:"checkbox",checked:d.enabled,onChange:f=>i({[u]:{...d,enabled:f.target.checked}})}),l.jsxs("span",{className:"label",children:["LFO ",r]})]}),l.jsxs("label",{className:"lfo-select",children:[l.jsx("span",{className:"label",children:"Wave"}),l.jsxs("select",{value:d.wave,onChange:f=>i({[u]:{...d,wave:f.target.value}}),children:[l.jsx("option",{value:"sine",children:"Sine"}),l.jsx("option",{value:"triangle",children:"Triangle"}),l.jsx("option",{value:"square",children:"Square"}),l.jsx("option",{value:"sawtooth",children:"Saw"}),l.jsx("option",{value:"noise",children:"Noise"})]})]}),l.jsxs("label",{className:"lfo-select",children:[l.jsx("span",{className:"label",children:"Dest"}),l.jsxs("select",{value:d.dest,onChange:f=>i({[u]:{...d,dest:f.target.value}}),children:[l.jsx("option",{value:"pitch",children:"Pitch"}),l.jsx("option",{value:"filter",children:"Filter"}),l.jsx("option",{value:"amp",children:"Amp"})]})]}),l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Rate",min:.01,max:20,step:.01,value:d.rateHz,onChange:f=>i({[u]:{...d,rateHz:f}}),disabled:!d.enabled,formatValue:f=>`${f.toFixed(2)} Hz`})}),l.jsx("div",{className:"knob-group",children:l.jsx(ke,{label:"Amount",min:0,max:1,step:.01,value:d.amount,onChange:f=>i({[u]:{...d,amount:f}}),disabled:!d.enabled,formatValue:f=>`${Math.round(f*100)}%`})})]})}function _m(){return l.jsxs("div",{style:{display:"grid",gap:12},children:[l.jsx(qu,{idx:1}),l.jsx(qu,{idx:2})]})}const kl=["up","down","updown","random","asplayed","sequence"],Rm=["Up","Down","Up-Down","Random","As Played","Sequence"],Ml=["none","power","major","minor","sus2","sus4","maj7","min7","sequencer"],Tm=["Single","Power","Major","Minor","Sus2","Sus4","Maj7","Min7","Seq"],ko=["1/4","1/8","1/8T","1/16","1/16T"];function Lm(){const r=re(k=>k.patch),o=re(k=>k.updatePatch),i=re(k=>k.engine),u=re(k=>k.transport.tempo),d=re(k=>k.setTempo),f=r.arp??A.arp,p=r.sequencer??A.sequencer,[x,h]=Ie.useState({enabled:!1,stepIndex:0,length:0}),g=k=>{o({arp:{...f,...k}})},v=f.chordSource??"preset",y=Ie.useMemo(()=>{const k=p.steps??[],L=Math.max(1,Math.min(k.length,p.length)),R=new Set;for(let W=0;W<L;W++){const X=k[W];X?.on&&R.add(Math.round(X.offset??0))}return R.size},[p]),M=kl.indexOf(f.mode),N=v==="sequencer"?"sequencer":f.chord??"none",w=Ml.indexOf(N),j=ko.indexOf(f.division);return Ie.useEffect(()=>{if(!i)return;const k=setInterval(()=>{const L=i.getArpStatus?.();L&&h(L)},120);return()=>clearInterval(k)},[i]),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,flexWrap:"wrap"},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:f.enabled,onChange:k=>o({arp:{...f,enabled:k.target.checked}})}),l.jsx("span",{className:"label",children:"On"})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:f.latch||!1,onChange:k=>o({arp:{...f,latch:k.target.checked}}),disabled:!f.enabled}),l.jsx("span",{className:"label",children:"Latch"})]}),l.jsx("button",{onClick:()=>i?.arpClear(),disabled:!f.enabled,style:{padding:"6px 10px",fontSize:12,borderRadius:6,background:"transparent",border:"1px solid var(--border, #2a3040)",color:"var(--text)"},children:"Clear"})]}),l.jsxs("div",{style:{display:"flex",gap:20,alignItems:"center",flexWrap:"wrap"},children:[l.jsx(ke,{label:"Mode",min:0,max:kl.length-1,step:1,value:M>=0?M:0,onChange:k=>{const L=Math.round(k),R=kl[L];R&&g({mode:R})},disabled:!f.enabled,formatValue:k=>Rm[Math.round(k)]??"Up"}),l.jsx(ke,{label:"Octaves",min:1,max:4,step:1,value:f.octaves,onChange:k=>g({octaves:Math.round(k)}),disabled:!f.enabled}),l.jsx(ke,{label:"Chord",min:0,max:Ml.length-1,step:1,value:w>=0?w:0,onChange:k=>{const L=Math.round(k),R=Ml[L];g(R==="sequencer"?{chordSource:"sequencer",chord:"none"}:{chordSource:"preset",chord:R})},disabled:!f.enabled,formatValue:k=>Tm[Math.round(k)]??"Single"}),l.jsx(ke,{label:"Division",min:0,max:ko.length-1,step:1,value:j>=0?j:3,onChange:k=>{const L=Math.round(k),R=ko[L];R&&g({division:R})},disabled:!f.enabled,formatValue:k=>ko[Math.round(k)]??"1/16"}),l.jsx(ke,{label:"Tempo",min:40,max:240,step:1,value:u,onChange:k=>{d(k),g({bpm:k,bpmSync:!0})},disabled:!f.enabled}),l.jsx(ke,{label:"Gate",min:.05,max:1,step:.01,value:f.gate,onChange:k=>o({arp:{...f,gate:k}}),disabled:!f.enabled}),l.jsx(ke,{label:"Swing",min:0,max:.75,step:.01,value:f.swingPct??0,onChange:k=>o({arp:{...f,swingPct:k}}),disabled:!f.enabled||!f.bpmSync}),l.jsx(ke,{label:"Repeats",min:1,max:4,step:1,value:f.repeats??1,onChange:k=>g({repeats:Math.round(k)}),disabled:!f.enabled,formatValue:k=>`${Math.round(k)}x`}),l.jsx(ke,{label:"Length",min:0,max:16,step:1,value:f.patternLen??0,onChange:k=>g({patternLen:Math.round(k)}),disabled:!f.enabled,formatValue:k=>{const L=Math.round(k);return L===0?"Auto":`${L}`}})]}),v==="sequencer"&&l.jsxs("div",{className:"hint-text",style:{fontSize:12,opacity:.8},children:["Sequencer pattern",y>0?`  ${y} interval${y===1?"":"s"}`:"  no active steps yet"]})]})}const Bn=["1/4","1/8","1/8T","1/16","1/16T"],pr=Qu,Om=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Im=r=>{const o=Math.max(0,Math.min(127,Math.round(r))),i=Om[o%12],u=Math.floor(o/12)-1;return`${i}${u}`};function Am(){const r=re(D=>D.patch),o=re(D=>D.updatePatch),i=re(D=>D.engine),u=re(D=>D.transport.tempo),d=re(D=>D.transport.playing),f=re(D=>D.transport.tick),p=re(D=>D.setTempo),x=re(D=>D.setTransportPlaying),h=r.sequencer??A.sequencer,g=Ie.useCallback(D=>{const ee=r.sequencer??A.sequencer;o({sequencer:{...ee,...D}})},[r.sequencer,o]),v=h.steps??[],y=Math.max(1,Math.min(h.length,v.length,kt)),M=Math.max(16,Math.min(h.length,kt)),N=Ie.useMemo(()=>{const D=Bn.indexOf(h.division);return D>=0?D:Bn.indexOf("1/16")},[h.division]),w=Ie.useMemo(()=>{const D=pr.findIndex(ee=>ee.id===(h.progressionMode??"static"));return D>=0?D:0},[h.progressionMode]);Ie.useEffect(()=>{const D=h.steps??[],ee=Math.max(1,Math.min(h.length,kt)),C=h.length!==ee,I=D.length<kt;if(!C&&!I)return;const Q={};if(C&&(Q.length=ee),I){const $=D.slice();for(;$.length<kt;)$.push(hr());Q.steps=$}g(Q)},[h.length,h.steps,g]);const[j,k]=Ie.useState({enabled:!1,stepIndex:0,length:0,currentRoot:h.rootMidi??null}),L=Ie.useMemo(()=>(Number.isFinite(j.currentRoot)?j.currentRoot:void 0)??h.rootMidi??A.sequencer.rootMidi,[j.currentRoot,h.rootMidi]);Ie.useEffect(()=>{if(!i)return;const D=setInterval(()=>{const ee=i.getSequencerStatus?.();ee&&k(ee)},100);return()=>clearInterval(D)},[i]);const R=(D,ee)=>{if(D<0||D>=kt)return;const C=v.slice();for(;C.length<=D&&C.length<kt;)C.push(hr());const I=C[D]??hr();C[D]={...I,...ee},g({steps:C})},W={a:0,w:1,s:2,e:3,d:4,f:5,t:6,g:7,y:8,h:9,u:10,j:11,k:12,o:13,l:14,p:15,";":16,"'":17},X=Ie.useRef(null),[q,P]=Ie.useState(0),[B,z]=Ie.useState(!1);Ie.useEffect(()=>{P(D=>Math.min(Math.max(0,D),y-1))},[y]),Ie.useEffect(()=>{B&&X.current?.focus()},[B]),Ie.useEffect(()=>{h.enabled&&h.bpm!==u&&g({bpm:u})},[u]),Ie.useEffect(()=>{h.enabled&&h.playing!==d&&g({playing:d})},[d,h.playing,h.enabled]);const U=D=>{if(!B||!h.enabled)return;const ee=D.key,C=ee.length===1?ee.toLowerCase():ee;if(C in W){D.preventDefault();const I=W[C];R(q,{on:!0,offset:I}),P(Q=>(Q+1)%y);return}ee==="ArrowRight"?(D.preventDefault(),P(I=>(I+1)%y)):ee==="ArrowLeft"?(D.preventDefault(),P(I=>(I-1+y)%y)):ee==="ArrowUp"?(D.preventDefault(),R(q,{on:!0,offset:Math.min(24,(v[q]?.offset||0)+1)})):ee==="ArrowDown"?(D.preventDefault(),R(q,{on:!0,offset:Math.max(-24,(v[q]?.offset||0)-1)})):ee==="Enter"?(D.preventDefault(),R(q,{on:!v[q]?.on})):ee==="Backspace"||ee==="Delete"?(D.preventDefault(),R(q,{on:!1})):ee==="+"||ee==="="?(D.preventDefault(),R(q,{on:!0,offset:Math.min(24,(v[q]?.offset||0)+1)})):ee==="-"||ee==="_"?(D.preventDefault(),R(q,{on:!0,offset:Math.max(-24,(v[q]?.offset||0)-1)})):C==="z"?(D.preventDefault(),g({rootMidi:Math.max(24,h.rootMidi-12)})):C==="x"?(D.preventDefault(),g({rootMidi:Math.min(96,h.rootMidi+12)})):ee===" "&&(D.preventDefault(),x(!d))};return l.jsxs("div",{className:"sequence-panel",children:[l.jsxs("div",{className:"sequence-controls",children:[l.jsx("button",{className:"play-button",onClick:()=>x(!d),disabled:!h.enabled,children:d?"Stop":"Play"}),l.jsxs("label",{className:"sequence-toggle",children:[l.jsx("input",{type:"checkbox",checked:h.enabled,onChange:D=>g({enabled:D.target.checked})}),l.jsx("span",{children:"On"})]}),l.jsx(ke,{label:"Length",min:1,max:kt,step:1,value:Math.max(1,Math.min(h.length,kt)),onChange:D=>{const ee=Math.round(D),C=Math.max(1,Math.min(kt,ee));g({length:C})},disabled:!h.enabled,formatValue:D=>`${Math.round(D)}`}),l.jsx(ke,{label:"Division",min:0,max:Bn.length-1,step:1,value:N,onChange:D=>{const ee=Math.round(D),C=Math.max(0,Math.min(Bn.length-1,ee));g({division:Bn[C]})},disabled:!h.enabled,formatValue:D=>{const ee=Math.round(D),C=Math.max(0,Math.min(Bn.length-1,ee));return Bn[C]}}),l.jsx(ke,{label:"Tempo",min:40,max:240,step:1,value:u,onChange:D=>{p(D),g({bpm:D})},disabled:!h.enabled,formatValue:D=>`${Math.round(D)}`}),l.jsx(ke,{label:"Gate",min:.05,max:1,step:.01,value:h.gate,onChange:D=>g({gate:D}),disabled:!h.enabled}),l.jsx(ke,{label:"Swing",min:0,max:.75,step:.01,value:h.swingPct??0,onChange:D=>g({swingPct:D}),disabled:!h.enabled||h.division.endsWith("T")||h.division==="1/4"}),l.jsx(ke,{label:"Root",min:36,max:84,step:1,value:L,onChange:D=>{const ee=Math.round(D),C=Math.max(0,Math.min(127,ee)),I={rootMidi:C};(h.progressionMode??"static")!=="static"&&(I.grooveBaseMidi=C),g(I),k(Q=>({...Q,currentRoot:C}))},disabled:!h.enabled,formatValue:D=>Im(D)}),l.jsx(ke,{label:"Progression",min:0,max:pr.length-1,step:1,value:w,onChange:D=>{const ee=Math.round(D),C=Math.max(0,Math.min(pr.length-1,ee)),I=pr[C],Q=Math.round(h.grooveBaseMidi??h.rootMidi??60),$=Math.max(0,Math.min(127,Q));g({progressionMode:I.id,grooveBaseMidi:$}),k(ie=>({...ie,currentRoot:$}))},disabled:!h.enabled,formatValue:D=>{const ee=Math.round(D),C=Math.max(0,Math.min(pr.length-1,ee));return pr[C].label}}),l.jsx(ke,{label:"Spice",min:0,max:1,step:.01,value:h.spiceAmount??0,onChange:D=>{const ee=h.spiceSeed||`${Date.now()}-${Math.random().toString(36).slice(2)}`;g({spiceAmount:D,spiceSeed:ee})},disabled:!h.enabled,formatValue:D=>`${Math.round(D*100)}%`}),l.jsx("button",{className:"dice-button",onClick:()=>{const D=`${Date.now()}-${Math.random().toString(36).slice(2)}`;g({spiceSeed:D})},disabled:!h.enabled||(h.spiceAmount??0)===0,title:"Roll the dice - generate new random variation",style:{padding:"8px 12px",borderRadius:6,border:"1px solid #2a3040",background:"#1d2432",color:"var(--text)",cursor:"pointer",fontSize:14,fontWeight:500},children:" Dice"})]}),l.jsxs("div",{className:"sequence-body",children:[l.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:B,onChange:D=>z(D.target.checked)}),l.jsx("span",{className:"label",children:"Edit Notes (Keyboard)"})]}),l.jsx("div",{className:"hint-text",style:{opacity:.8},children:"Keys: A/W/S... set notes  Arrows move  Z/X root 1 oct  Space play/pause  +/- semitone  Backspace clear"})]}),l.jsx("div",{ref:X,tabIndex:0,onKeyDown:U,style:{display:"grid",gridTemplateColumns:"repeat(16, 1fr)",gap:6,outline:B?"1px dashed #2a3040":"none",borderRadius:6,padding:2},children:Array.from({length:M},(D,ee)=>{const C=v[ee]??hr(),I=ee<y,Q=C.on&&I,$=y>0?f%y:0,ie=j.enabled&&d&&I&&$===ee;return l.jsx("div",{onClick:de=>{de.altKey?R(ee,{offset:Math.max(-24,Math.min(24,(C.offset||0)+1))}):R(ee,{on:!C.on}),P(ee)},onContextMenu:de=>{de.preventDefault(),R(ee,{offset:Math.max(-24,Math.min(24,(C.offset||0)-1))})},title:`Step ${ee+1}${C.offset?`, ${C.offset>0?"+":""}${C.offset}`:""}`,style:{height:44,borderRadius:6,border:`1px solid ${ie||ee===q&&B?"var(--accent)":"#2a3040"}`,background:Q?ie?"var(--accent)":"#1d2432":"#0f1217",color:Q?ie?"#0f1217":"var(--text)":"#556",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none"},children:l.jsx("span",{style:{fontSize:11,opacity:.9},children:C.offset===0?"0":C.offset>0?`+${C.offset}`:`${C.offset}`})},ee)})})]})]})}const _l=[{id:"filter.cutoff",label:"Filter Cutoff",category:"Filter",description:"Move the filter cutoff frequency"},{id:"filter.q",label:"Filter Resonance",category:"Filter",description:"Adjust filter Q / resonance"},{id:"master.gain",label:"Master Gain",category:"Master",description:"Scale the master volume"},{id:"mix",label:"Osc Mix",category:"Oscillators",description:"Crossfade between Osc 1 and Osc 2"},{id:"osc1.detune",label:"Osc 1 Detune",category:"Oscillators",description:"Offset oscillator 1 pitch in cents"},{id:"osc2.detune",label:"Osc 2 Detune",category:"Oscillators",description:"Offset oscillator 2 pitch in cents"},{id:"fm.amount",label:"FM Amount",category:"FM",description:"Modulation index for FM routing"},{id:"envelope.attack",label:"Env Attack",category:"Envelope",description:"Envelope attack time"},{id:"envelope.release",label:"Env Release",category:"Envelope",description:"Envelope release time"},{id:"macro.harmonics",label:"Macro Harmonics",category:"Macro",description:"Macro engine harmonics"},{id:"macro.timbre",label:"Macro Timbre",category:"Macro",description:"Macro engine timbre"},{id:"macro.morph",label:"Macro Morph",category:"Macro",description:"Macro engine morph"},{id:"macro.level",label:"Macro Level",category:"Macro",description:"Macro engine output level"},{id:"lfo1.rateHz",label:"LFO 1 Rate",category:"LFO",description:"LFO1 rate in Hz"},{id:"lfo1.amount",label:"LFO 1 Amount",category:"LFO",description:"LFO1 depth"},{id:"lfo2.rateHz",label:"LFO 2 Rate",category:"LFO",description:"LFO2 rate in Hz"},{id:"lfo2.amount",label:"LFO 2 Amount",category:"LFO",description:"LFO2 depth"}],Bu=Object.fromEntries(_l.map(r=>[r.id,r.label]));function Fm(){const r=re(w=>w.engine),i=re(w=>w.patch.expression)??A.expression,u=Bu[i.x]??"X Axis",d=Bu[i.y]??"Y Axis",f=V.useRef(r),[p,x]=V.useState(!1),[h,g]=V.useState(null),v=V.useRef(!1),y=V.useRef(null),M=V.useRef(null);V.useEffect(()=>{f.current=r},[r]);const N=V.useCallback(w=>{v.current=w,x(w),w||(M.current=null,y.current!=null&&(cancelAnimationFrame(y.current),y.current=null),f.current?.clearExpression2D(),g(null))},[]);return V.useEffect(()=>{const w=k=>{k.key==="CapsLock"?N(k.getModifierState("CapsLock")):!k.getModifierState("CapsLock")&&v.current&&N(!1)},j=()=>N(!1);return window.addEventListener("keydown",w),window.addEventListener("keyup",w),window.addEventListener("blur",j),()=>{window.removeEventListener("keydown",w),window.removeEventListener("keyup",w),window.removeEventListener("blur",j)}},[N]),V.useEffect(()=>{const w=()=>{if(y.current=null,!v.current)return;const R=M.current;R&&(M.current=null,f.current?.setExpression2D(R.x,R.y),g(R))},j=()=>{y.current==null&&(y.current=requestAnimationFrame(w))},k=R=>{if(!f.current)return;const W=R.getModifierState?.("CapsLock")??v.current;if(W!==v.current&&N(W),!W||!["mouse","touch","pen"].includes(R.pointerType))return;const X=Math.min(1,Math.max(0,R.clientX/window.innerWidth)),q=Math.min(1,Math.max(0,1-R.clientY/window.innerHeight));M.current={x:X,y:q},j()},L=()=>N(!1);return window.addEventListener("pointermove",k,{passive:!0}),window.addEventListener("pointerdown",k,{passive:!0}),window.addEventListener("pointerup",k,{passive:!0}),window.addEventListener("pointercancel",L),window.addEventListener("mouseleave",L),()=>{window.removeEventListener("pointermove",k),window.removeEventListener("pointerdown",k),window.removeEventListener("pointerup",k),window.removeEventListener("pointercancel",L),window.removeEventListener("mouseleave",L),y.current!=null&&(cancelAnimationFrame(y.current),y.current=null)}},[N]),r?l.jsxs("div",{className:`expression-overlay${p?" active":""}`,"aria-hidden":"true",children:[l.jsx("div",{className:"expression-label",children:"CapsLock XY Expression"}),p?l.jsxs("div",{className:"expression-status",children:["Active  ",u," ",((h?.x??.5)*100).toFixed(0),"%  ",d," ",((h?.y??.5)*100).toFixed(0),"%"]}):l.jsxs("div",{className:"expression-status",children:["Engage CapsLock and move on the trackpad to modulate ",u," / ",d]})]}):null}const Uu="application/x-websynth-panel";function Vu(r,o,i){if(!r.includes(o))return r;const u=r.filter(f=>f!==o),d=Math.max(0,Math.min(i,u.length));return[...u.slice(0,d),o,...u.slice(d)]}function Dm({panels:r,order:o,onOrderChange:i,onRequestHelp:u}){const[d,f]=V.useState(null),[p,x]=V.useState(null),[h,g]=V.useState(!1),v=V.useMemo(()=>new Map(r.map(P=>[P.id,P])),[r]),y=V.useMemo(()=>r.map(P=>P.id),[r]),M=V.useMemo(()=>{const P=(o.length?o:y).filter(U=>v.has(U)),B=new Set(P),z=r.filter(U=>!B.has(U.id)).map(U=>U.id);return[...P,...z]},[o,y,v,r]),N=P=>B=>{B.dataTransfer.effectAllowed="move";try{B.dataTransfer.setData(Uu,P)}catch{B.dataTransfer.setData("text/plain",P)}f(P),x(null),g(!1)},w=()=>{f(null),x(null),g(!1)},j=P=>{let B="";try{B=P.dataTransfer.getData(Uu)}catch{B=P.dataTransfer.getData("text/plain")}return B||d},k=(P,B)=>z=>{if(z.preventDefault(),z.stopPropagation(),!d)return;const U=z.currentTarget.getBoundingClientRect(),D=z.clientY<U.top+U.height/2;x({id:P,position:D?"before":"after"}),g(!1)},L=(P,B)=>z=>{z.preventDefault(),z.stopPropagation();const U=j(z);if(!U)return;const D=z.currentTarget.getBoundingClientRect(),C=z.clientY<D.top+D.height/2?B:B+1,I=Vu(M,U,C);i(I),x(null),g(!1)},R=P=>B=>{B.stopPropagation(),p?.id===P&&x(null)},W=P=>{d&&(P.preventDefault(),x(null),g(!0))},X=P=>{P.preventDefault();const B=j(P);if(!B)return;const z=Vu(M,B,M.length);i(z),x(null),g(!1)},q=P=>B=>{B.preventDefault(),B.stopPropagation(),u?.(P)};return l.jsx("div",{className:`dashboard-grid${h?" drop-end":""}`,onDragOver:W,onDrop:X,children:M.map((P,B)=>{const z=v.get(P);if(!z)return null;const U=z.span??1,D=d===P,ee=p?.id===P&&p.position==="before",C=p?.id===P&&p.position==="after",I=["panel","dashboard-panel",D?"dragging":"",ee?"drop-before":"",C?"drop-after":""].filter(Boolean).join(" ");return l.jsx("section",{className:I,style:{gridColumn:U>1?`span ${U}`:void 0},onDragOver:k(z.id),onDrop:L(z.id,B),onDragLeave:R(z.id),children:l.jsxs("div",{className:"panel-body",children:[l.jsxs("div",{className:"panel-header",children:[l.jsx("h3",{className:"panel-title",children:z.title}),l.jsxs("div",{className:"panel-actions",children:[u?l.jsx("button",{type:"button",className:"panel-help-button",onClick:q(z.id),"aria-label":`Show help for ${z.title}`,children:"?"}):null,l.jsx("span",{className:"panel-drag-hint","aria-hidden":"true",draggable:!0,onDragStart:N(z.id),onDragEnd:w,children:""})]})]}),z.render()]})},z.id)})})}const zm=()=>JSON.parse(JSON.stringify(A)),Ze=r=>(r.effects||(r.effects=JSON.parse(JSON.stringify(A.effects))),r.effects),qm=r=>r.endsWith("/")?r:`${r}/`,Bm=qm("./"),Ke=(r,o,i,u,d={})=>{const f=zm();u(f);const p=d.tags??[],x=d.image??`${Bm}presets/${r}.png`;return{id:r,name:o,description:i,tags:p,image:x,patch:f}},Um={id:"essentials",name:"Essentials",description:"Foundation tones that show the core oscillators, filter, and envelopes.",presets:[Ke("init","Init Saw","Clean slate patch: saw + square with neutral envelope.",()=>{},{tags:["init"]}),Ke("warm-pad","Warm Pad","Gently detuned analog pad with slow attack and soft filter motion.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="triangle",r.osc1.detune=-4,r.osc1.detuneFine=-2,r.osc1.octave=0,r.osc2.mode="analog",r.osc2.wave="sawtooth",r.osc2.detune=5,r.osc2.detuneFine=1,r.osc2.octave=0,r.mix=.42,r.sub.enabled=!0,r.sub.wave="sine",r.sub.octave=1,r.sub.level=.35,r.fm.enabled=!1,r.ring.enabled=!1,r.filter.type="lowpass",r.filter.cutoff=880,r.filter.q=.85,r.envelope.attack=.6,r.envelope.decay=.85,r.envelope.sustain=.78,r.envelope.release=1.9,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.18,amount:.38},r.lfo2={...r.lfo2??A.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:.4,amount:.1};const o=Ze(r);o.delay={enabled:!1,time:.32,feedback:.28,mix:.18},o.reverb={enabled:!0,size:.72,decay:.85,mix:.33},r.master.gain=.22},{tags:["pad","analog"]}),Ke("bright-pluck","Bright Pluck","Snappy analog pluck with a touch of FM and tempo-friendly delay.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="square",r.osc1.detune=2,r.osc1.detuneFine=0,r.osc1.octave=0,r.osc2.mode="analog",r.osc2.wave="sawtooth",r.osc2.detune=-6,r.osc2.detuneFine=0,r.osc2.octave=0,r.mix=.5,r.fm.enabled=!0,r.fm.ratio=1.25,r.fm.amount=90,r.sub.enabled=!1,r.ring.enabled=!1,r.filter.type="lowpass",r.filter.cutoff=1500,r.filter.q=.95,r.envelope.attack=.008,r.envelope.decay=.18,r.envelope.sustain=.12,r.envelope.release=.22,r.lfo1={...r.lfo1??A.lfo1,enabled:!1,wave:"triangle",dest:"pitch",rateHz:5.5,amount:.06},r.lfo2={...r.lfo2??A.lfo2,enabled:!1,wave:"sine",dest:"amp",rateHz:.6,amount:0};const o=Ze(r);o.delay={enabled:!0,time:.26,feedback:.32,mix:.24},o.reverb={enabled:!1,size:.4,decay:.4,mix:.18},r.master.gain=.23},{tags:["lead","pluck"]})]},Vm={id:"basslines",name:"Basslines",description:"Low-end starters that demonstrate sub layering, resonance, and FM growl.",presets:[Ke("sub-driver","Sub Driver","Focused sub bass with a sine layer and tight envelope.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.octave=-1,r.osc1.detune=-2,r.osc1.detuneFine=0,r.osc2.mode="analog",r.osc2.wave="square",r.osc2.octave=-1,r.osc2.detune=3,r.osc2.detuneFine=0,r.mix=.25,r.sub.enabled=!0,r.sub.wave="sine",r.sub.octave=1,r.sub.level=.7,r.fm.enabled=!1,r.ring.enabled=!1,r.filter.type="lowpass",r.filter.cutoff=220,r.filter.q=1.2,r.envelope.attack=.01,r.envelope.decay=.2,r.envelope.sustain=.75,r.envelope.release=.32,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:.28,amount:.05},r.lfo2={...r.lfo2??A.lfo2,enabled:!1,wave:"sine",dest:"filter",rateHz:.6,amount:0};const o=Ze(r);o.delay={enabled:!1,time:.2,feedback:.2,mix:.1},o.reverb={enabled:!1,size:.3,decay:.2,mix:.1},r.master.gain=.28},{tags:["bass"]}),Ke("acid-line","Acid Line","Classic resonant saw bass ready for sequences and filter tweaks.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.octave=-1,r.osc1.detune=0,r.osc1.detuneFine=0,r.osc2.mode="analog",r.osc2.wave="sawtooth",r.osc2.octave=0,r.osc2.detune=7,r.osc2.detuneFine=0,r.mix=.55,r.sub.enabled=!1,r.fm.enabled=!1,r.ring.enabled=!1,r.filter.type="lowpass",r.filter.cutoff=520,r.filter.q=8.5,r.envelope.attack=.01,r.envelope.decay=.25,r.envelope.sustain=.3,r.envelope.release=.18,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"triangle",dest:"filter",rateHz:6,amount:.14},r.lfo2={...r.lfo2??A.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:3.5,amount:.04};const o=Ze(r);o.delay={enabled:!0,time:.18,feedback:.22,mix:.18},o.reverb={enabled:!1,size:.35,decay:.25,mix:.12},r.master.gain=.25},{tags:["bass","resonant"]}),Ke("fm-growl","FM Growl","Two-operator FM for gritty bass leads with animated mids.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.octave=0,r.osc1.detune=0,r.osc1.detuneFine=0,r.osc2.mode="analog",r.osc2.wave="square",r.osc2.octave=0,r.osc2.detune=0,r.osc2.detuneFine=0,r.mix=.4,r.fm.enabled=!0,r.fm.ratio=2,r.fm.amount=180,r.sub.enabled=!1,r.ring.enabled=!1,r.filter.type="bandpass",r.filter.cutoff=540,r.filter.q=2.8,r.envelope.attack=.012,r.envelope.decay=.22,r.envelope.sustain=.4,r.envelope.release=.3,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"triangle",dest:"filter",rateHz:1.2,amount:.25},r.lfo2={...r.lfo2??A.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:3,amount:.05};const o=Ze(r);o.delay={enabled:!1,time:.2,feedback:.2,mix:.1},o.reverb={enabled:!1,size:.4,decay:.25,mix:.12},r.master.gain=.24},{tags:["bass","fm"]})]},Hm={id:"macro",name:"Macro Voices",description:"Presets that lean on the macro engine for hybrid keys, pads, and textures.",presets:[Ke("glass-keys","Glass Keys","Macro pluck blended with a triangle support for bell-like keys.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??A.osc1.macro,model:"pluck",harmonics:.45,timbre:.6,morph:.35,level:.9},r.osc2.mode="analog",r.osc2.wave="triangle",r.osc2.detune=-2,r.osc2.detuneFine=0,r.osc2.octave=0,r.mix=.35,r.filter.type="lowpass",r.filter.cutoff=1800,r.filter.q=.7,r.envelope.attack=.02,r.envelope.decay=.25,r.envelope.sustain=.6,r.envelope.release=.55,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:5,amount:.04},r.lfo2={...r.lfo2??A.lfo2,enabled:!1,wave:"sine",dest:"amp",rateHz:.4,amount:0};const o=Ze(r);o.delay={enabled:!0,time:.3,feedback:.25,mix:.22},o.reverb={enabled:!0,size:.55,decay:.6,mix:.28},r.master.gain=.21},{tags:["macro","keys"]}),Ke("supersaw-pad","Supersaw Pad","Wide, macro-driven supersaw with evolving filter movement.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??A.osc1.macro,model:"supersaw",harmonics:.68,timbre:.5,morph:.52,level:1},r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??A.osc2.macro,model:"va",harmonics:.4,timbre:.5,morph:.5,level:.5},r.mix=.5,r.filter.type="lowpass",r.filter.cutoff=720,r.filter.q=.8,r.envelope.attack=.5,r.envelope.decay=.9,r.envelope.sustain=.82,r.envelope.release=2.4,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.12,amount:.5},r.lfo2={...r.lfo2??A.lfo2,enabled:!1,wave:"sine",dest:"pitch",rateHz:.4,amount:0};const o=Ze(r);o.delay={enabled:!0,time:.36,feedback:.32,mix:.22},o.reverb={enabled:!0,size:.82,decay:1.2,mix:.4},r.master.gain=.2},{tags:["macro","pad"]}),Ke("harmonic-motion","Harmonic Motion","Evolving harmonic macro texture with slow motion and shimmer.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??A.osc1.macro,model:"harmonic",harmonics:.55,timbre:.68,morph:.45,level:1},r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??A.osc2.macro,model:"fm2op",harmonics:.4,timbre:.6,morph:.35,level:.6},r.mix=.6,r.filter.type="bandpass",r.filter.cutoff=680,r.filter.q=1.6,r.envelope.attack=1.2,r.envelope.decay=1.1,r.envelope.sustain=.65,r.envelope.release=3.2,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.1,amount:.55},r.lfo2={...r.lfo2??A.lfo2,enabled:!0,wave:"noise",dest:"pitch",rateHz:1.2,amount:.08};const o=Ze(r);o.delay={enabled:!0,time:.5,feedback:.4,mix:.28},o.reverb={enabled:!0,size:.9,decay:1.5,mix:.45},r.master.gain=.18},{tags:["macro","texture"]}),Ke("dirichlet-glow","Dirichlet Glow","New Dirichlet pulse macro blended with a VA pad for lyrical keys.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??A.osc1.macro,model:"dirichlet",harmonics:.78,timbre:.42,morph:.6,level:1},r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??A.osc2.macro,model:"va",harmonics:.5,timbre:.4,morph:.38,level:.58},r.mix=.55,r.filter.type="bandpass",r.filter.cutoff=1350,r.filter.q=1.2,r.envelope.attack=.06,r.envelope.decay=.4,r.envelope.sustain=.62,r.envelope.release=.95,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.65,amount:.36},r.lfo2={...r.lfo2??A.lfo2,enabled:!0,wave:"triangle",dest:"amp",rateHz:3.2,amount:.08};const o=Ze(r);o.delay={enabled:!0,time:.32,feedback:.26,mix:.24},o.reverb={enabled:!0,size:.68,decay:.9,mix:.33},r.master.gain=.2},{tags:["macro","dirichlet","keys"]}),Ke("vowel-wash","Vowel Wash","Phase-aligned formant engine for choir-like swells and evolving vowels.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??A.osc1.macro,model:"formant",harmonics:.52,timbre:.58,morph:.72,level:1},r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??A.osc2.macro,model:"harmonic",harmonics:.34,timbre:.66,morph:.5,level:.5},r.mix=.48,r.filter.type="lowpass",r.filter.cutoff=820,r.filter.q=.9,r.envelope.attack=.8,r.envelope.decay=1.1,r.envelope.sustain=.82,r.envelope.release=2.8,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.18,amount:.48},r.lfo2={...r.lfo2??A.lfo2,enabled:!0,wave:"sine",dest:"pitch",rateHz:.12,amount:.05};const o=Ze(r);o.delay={enabled:!0,time:.48,feedback:.38,mix:.26},o.reverb={enabled:!0,size:.9,decay:1.8,mix:.42},r.master.gain=.18},{tags:["macro","formant","pad"]})]},$m={id:"motion",name:"Motion & FX",description:"Rhythmic and ambient presets highlighting LFO routing, noise modulation, and space.",presets:[Ke("noisy-motion","Noisy Motion","Analog layers with the new noise LFO pushing the filter for organic movement.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.detune=-7,r.osc1.detuneFine=-2,r.osc1.octave=0,r.osc2.mode="analog",r.osc2.wave="triangle",r.osc2.detune=6,r.osc2.detuneFine=2,r.osc2.octave=0,r.mix=.48,r.filter.type="bandpass",r.filter.cutoff=950,r.filter.q=1.4,r.envelope.attack=.12,r.envelope.decay=.6,r.envelope.sustain=.55,r.envelope.release=.8,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"noise",dest:"filter",rateHz:3.2,amount:.24},r.lfo2={...r.lfo2??A.lfo2,enabled:!0,wave:"sine",dest:"amp",rateHz:.55,amount:.35};const o=Ze(r);o.delay={enabled:!0,time:.4,feedback:.42,mix:.26},o.reverb={enabled:!0,size:.75,decay:1.1,mix:.36},r.master.gain=.21},{tags:["motion","noise"]}),Ke("pulsar-gate","Pulsar Gate","Square-wave LFO chops the amp while a slow triangle sweeps the filter.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.detune=-3,r.osc1.detuneFine=0,r.osc2.mode="analog",r.osc2.wave="square",r.osc2.detune=3,r.osc2.detuneFine=0,r.mix=.5,r.filter.type="lowpass",r.filter.cutoff=1400,r.filter.q=.9,r.envelope.attack=.03,r.envelope.decay=.4,r.envelope.sustain=.6,r.envelope.release=.6,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"square",dest:"amp",rateHz:6,amount:.7},r.lfo2={...r.lfo2??A.lfo2,enabled:!0,wave:"triangle",dest:"filter",rateHz:.25,amount:.4};const o=Ze(r);o.delay={enabled:!0,time:.33,feedback:.35,mix:.24},o.reverb={enabled:!0,size:.6,decay:.7,mix:.28},r.master.gain=.22,r.arp={...r.arp??A.arp,enabled:!0,gate:.45,bpmSync:!0,bpm:120,division:"1/8",mode:"updown",octaves:1,latch:!1}},{tags:["motion","arp"]}),Ke("space-drone","Space Drone","Long-release drone with ring modulation and cavernous ambience.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="triangle",r.osc1.detune=-6,r.osc1.detuneFine=-3,r.osc2.mode="analog",r.osc2.wave="sine",r.osc2.detune=6,r.osc2.detuneFine=3,r.mix=.5,r.sub.enabled=!0,r.sub.wave="sine",r.sub.octave=2,r.sub.level=.4,r.ring.enabled=!0,r.ring.amount=.6,r.filter.type="bandpass",r.filter.cutoff=420,r.filter.q=2.2,r.envelope.attack=1.5,r.envelope.decay=1.2,r.envelope.sustain=.65,r.envelope.release=4.5,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"filter",rateHz:.08,amount:.45},r.lfo2={...r.lfo2??A.lfo2,enabled:!0,wave:"noise",dest:"pitch",rateHz:1.5,amount:.08};const o=Ze(r);o.delay={enabled:!0,time:.6,feedback:.48,mix:.3},o.reverb={enabled:!0,size:.95,decay:2.4,mix:.55},r.master.gain=.18},{tags:["drone","fx"]})]},Wm={id:"keys-leads",name:"Keys & Leads",description:"Playable patches that highlight melodic workkeys, brass, and expressive leads.",presets:[Ke("dream-keys","Dream Keys","Soft keys with gentle vibrato and a shimmering tail.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="triangle",r.osc1.detune=-3,r.osc1.detuneFine=-1,r.osc2.mode="analog",r.osc2.wave="sine",r.osc2.detune=4,r.osc2.detuneFine=1,r.mix=.46,r.filter.type="lowpass",r.filter.cutoff=1450,r.filter.q=.75,r.envelope.attack=.05,r.envelope.decay=.4,r.envelope.sustain=.65,r.envelope.release=.9,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:5.8,amount:.08},r.lfo2={...r.lfo2??A.lfo2,enabled:!1,wave:"sine",dest:"amp",rateHz:.5,amount:0};const o=Ze(r);o.delay={enabled:!0,time:.28,feedback:.22,mix:.2},o.reverb={enabled:!0,size:.6,decay:.85,mix:.3},r.master.gain=.23},{tags:["keys","vibrato"]}),Ke("poly-brass","Poly Brass","Brassy synth stack with macro morphing and expressive filter.",r=>{r.engineMode="macro",r.osc1.mode="macro",r.osc1.macro={...r.osc1.macro??A.osc1.macro,model:"va",harmonics:.72,timbre:.48,morph:.62,level:1},r.osc2.mode="analog",r.osc2.wave="sawtooth",r.osc2.detune=-8,r.osc2.detuneFine=-1,r.mix=.58,r.filter.type="lowpass",r.filter.cutoff=980,r.filter.q=1.05,r.envelope.attack=.03,r.envelope.decay=.36,r.envelope.sustain=.58,r.envelope.release=.44,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"triangle",dest:"filter",rateHz:.45,amount:.32};const o=Ze(r);o.delay={enabled:!1,time:.3,feedback:.2,mix:.1},o.reverb={enabled:!0,size:.5,decay:.65,mix:.24},r.master.gain=.24},{tags:["macro","brass"]}),Ke("shimmer-lead","Shimmer Lead","Cutting lead with harmonics shimmer and subtle glide.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sawtooth",r.osc1.detune=7,r.osc1.detuneFine=1,r.osc2.mode="macro",r.osc2.macro={...r.osc2.macro??A.osc2.macro,model:"harmonic",harmonics:.58,timbre:.62,morph:.4,level:.7},r.mix=.48,r.filter.type="bandpass",r.filter.cutoff=2100,r.filter.q=1.1,r.envelope.attack=.01,r.envelope.decay=.22,r.envelope.sustain=.45,r.envelope.release=.28,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"sine",dest:"pitch",rateHz:6.5,amount:.12},r.lfo2={...r.lfo2??A.lfo2,enabled:!0,wave:"noise",dest:"filter",rateHz:2.8,amount:.18};const o=Ze(r);o.delay={enabled:!0,time:.24,feedback:.27,mix:.2},o.reverb={enabled:!0,size:.48,decay:.6,mix:.22},r.master.gain=.23},{tags:["lead"]})]},Gm={id:"percussion-fx",name:"Percussion & FX",description:"Hits, plucks, and sound design starters for rhythm tracks and atmospheres.",presets:[Ke("fm-bell","FM Bell","Metallic bell with quick shimmer and lingering tail.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="sine",r.osc1.octave=1,r.osc2.mode="analog",r.osc2.wave="sine",r.osc2.octave=1,r.fm.enabled=!0,r.fm.ratio=3,r.fm.amount=210,r.mix=.5,r.filter.type="lowpass",r.filter.cutoff=1700,r.filter.q=1.4,r.envelope.attack=.002,r.envelope.decay=.42,r.envelope.sustain=0,r.envelope.release=1.2,r.lfo1={...r.lfo1??A.lfo1,enabled:!1,wave:"sine",dest:"pitch",rateHz:6,amount:0};const o=Ze(r);o.delay={enabled:!1,time:.22,feedback:.25,mix:.18},o.reverb={enabled:!0,size:.7,decay:1.4,mix:.4},r.master.gain=.2},{tags:["percussion","fm"]}),Ke("noise-hit","Noise Hit","Short noise burst shaped with looping sampler trimideal for snares or whooshes.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="noise",r.osc2.mode="analog",r.osc2.wave="sine",r.osc2.detune=-12,r.osc2.octave=-1,r.mix=.32,r.filter.type="bandpass",r.filter.cutoff=1800,r.filter.q=5,r.envelope.attack=.001,r.envelope.decay=.28,r.envelope.sustain=0,r.envelope.release=.18,r.lfo1={...r.lfo1??A.lfo1,enabled:!0,wave:"noise",dest:"filter",rateHz:8,amount:.2};const o=Ze(r);o.delay={enabled:!1,time:.12,feedback:.1,mix:.08},o.reverb={enabled:!0,size:.55,decay:.6,mix:.28},r.master.gain=.22},{tags:["percussion","noise"]}),Ke("chiptune-click","Chiptune Click","Retro 8-bit percussive blip with sequencer-ready envelope.",r=>{r.engineMode="classic",r.osc1.mode="analog",r.osc1.wave="square",r.osc1.octave=1,r.osc2.mode="analog",r.osc2.wave="square",r.osc2.detune=7,r.osc2.octave=1,r.mix=.45,r.filter.type="highpass",r.filter.cutoff=600,r.filter.q=.7,r.envelope.attack=.001,r.envelope.decay=.12,r.envelope.sustain=0,r.envelope.release=.08,r.lfo1={...r.lfo1??A.lfo1,enabled:!1,wave:"square",dest:"pitch",rateHz:12,amount:0};const o=Ze(r);o.delay={enabled:!1,time:.08,feedback:.1,mix:.05},o.reverb={enabled:!1,size:.3,decay:.3,mix:.08},r.master.gain=.2},{tags:["percussion","retro"]})]},Yu=[Um,Vm,Hm,$m,Wm,Gm],Rl=Yu.flatMap(r=>r.presets.map(o=>({...o,groupId:r.id}))),bl=Object.fromEntries(Rl.map(r=>[r.id,r])),Qm=Object.fromEntries(Rl.map(r=>[r.id,r.patch]));Rl.map(r=>r.id);const Km="init",Xm=r=>r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");function Ym(){const r=re(C=>C.updatePatch),o=re(C=>C.exportPatch),i=re(C=>C.importPatch),u=re(C=>C.saveUserPreset),d=re(C=>C.overwriteUserPreset),f=re(C=>C.deleteUserPreset),p=re(C=>C.userPresets),x=V.useRef(null),[h,g]=V.useState(null),[v,y]=V.useState(""),[M,N]=V.useState(""),w=V.useId(),j=V.useId(),k=V.useMemo(()=>p.find(C=>C.id===h)??null,[h,p]);V.useEffect(()=>{k&&(y(k.name),N(k.description??""))},[k]);const L=C=>{const I=typeof structuredClone=="function"?structuredClone(C):JSON.parse(JSON.stringify(C));r(I)},R=()=>{const C=o(),I=new Blob([C],{type:"application/json"}),Q=URL.createObjectURL(I),$=document.createElement("a");$.href=Q,$.download="patch.json",$.click(),URL.revokeObjectURL(Q)},W=C=>{const I=C.target.files?.[0];if(!I)return;const Q=new FileReader;Q.onload=()=>{i(String(Q.result))},Q.readAsText(I)},X=()=>{g(null),y(""),N("")},q=()=>{const C=v.trim();if(!C)return;const I=M.trim(),Q=p.find(ie=>ie.name.toLowerCase()===C.toLowerCase());if(Q){if(!window.confirm(`Overwrite existing preset "${Q.name}" with the current patch?`))return;d(Q.id,{name:C,description:I,updatePatch:!0})&&g(Q.id);return}const $=u(C,I);$&&g($)},P=()=>{k&&d(k.id,{name:v.trim()||k.name,description:M.trim(),updatePatch:!0})},B=C=>{const I=p.find(Q=>Q.id===C);I&&(g(C),y(I.name),N(I.description??""),L(I.patch))},z=C=>{const I=p.find(Y=>Y.id===C);if(!I)return;const Q=JSON.stringify(I.patch,null,2),$=new Blob([Q],{type:"application/json"}),ie=URL.createObjectURL($),de=document.createElement("a");de.href=ie,de.download=`${Xm(I.name)||I.id}.json`,de.click(),URL.revokeObjectURL(ie)},U=C=>{const I=p.find($=>$.id===C);!I||!window.confirm(`Delete custom preset "${I.name}"?`)||(f(C),h===C&&X())},D=()=>{X(),L(Qm[Km])},ee=v.trim().length>0;return l.jsxs("section",{className:"preset-dashboard",children:[l.jsxs("div",{className:"preset-dashboard__header",children:[l.jsx("h3",{children:"Custom Presets"}),l.jsxs("div",{className:"preset-dashboard__header-actions",children:[l.jsx("button",{type:"button",onClick:()=>x.current?.click(),children:"Import"}),l.jsx("input",{ref:x,type:"file",accept:"application/json",style:{display:"none"},onChange:W}),l.jsx("button",{type:"button",onClick:R,children:"Export Current"}),l.jsx("button",{type:"button",title:"Clears local presets to recover from incompatible versions",onClick:()=>{localStorage.removeItem("websynth-patch"),location.reload()},children:"Clear Local"})]})]}),l.jsxs("div",{className:"preset-dashboard__save",children:[l.jsxs("div",{className:"preset-dashboard__save-fields",children:[l.jsxs("label",{className:"preset-manager__field",htmlFor:w,children:[l.jsx("span",{className:"preset-manager__field-label",children:"Preset Name"}),l.jsx("input",{id:w,className:"preset-manager__input",placeholder:"Warm Keys",value:v,onChange:C=>y(C.target.value),type:"text"})]}),l.jsxs("label",{className:"preset-manager__field",htmlFor:j,children:[l.jsx("span",{className:"preset-manager__field-label",children:"Description"}),l.jsx("textarea",{id:j,className:"preset-manager__textarea",placeholder:"Describe the character or intended use",rows:3,value:M,onChange:C=>N(C.target.value)})]})]}),l.jsxs("div",{className:"preset-dashboard__save-actions",children:[l.jsx("button",{type:"button",onClick:q,disabled:!ee,children:"Save New Preset"}),l.jsx("button",{type:"button",onClick:P,disabled:!k,children:"Overwrite Selected"}),l.jsx("button",{type:"button",onClick:D,children:"Load Init Patch"})]})]}),l.jsx("div",{className:"preset-dashboard__table-wrapper",children:l.jsxs("table",{className:"preset-dashboard__table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",children:"Name"}),l.jsx("th",{scope:"col",children:"Description"}),l.jsx("th",{scope:"col",children:"Created"}),l.jsx("th",{scope:"col",className:"preset-dashboard__table-actions",children:"Actions"})]})}),l.jsx("tbody",{children:p.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"preset-dashboard__empty",children:"No custom presets yet. Save your current patch to add one."})}):p.map(C=>{const I=C.id===h,Q=new Date(C.createdAt).toLocaleString();return l.jsxs("tr",{className:"preset-dashboard__row","data-selected":I?"true":"false",children:[l.jsx("td",{children:l.jsx("button",{type:"button",className:"preset-dashboard__name",onClick:()=>B(C.id),children:C.name})}),l.jsx("td",{className:"preset-dashboard__description",children:C.description||""}),l.jsx("td",{className:"preset-dashboard__created",children:l.jsx("time",{dateTime:C.createdAt,children:Q})}),l.jsxs("td",{className:"preset-dashboard__table-actions",children:[l.jsx("button",{type:"button",onClick:()=>B(C.id),children:"Load"}),l.jsx("button",{type:"button",onClick:()=>z(C.id),children:"Export"}),l.jsx("button",{type:"button",onClick:()=>U(C.id),children:"Delete"})]})]},C.id)})})]})})]})}function Jm(){const o=re(p=>p.patch.expression)??A.expression,i=re(p=>p.updatePatch),u=V.useMemo(()=>{const p=new Map;for(const x of _l){const h=p.get(x.category)??[];h.push(x),p.set(x.category,h)}return Array.from(p.entries())},[]),d=p=>x=>{const h=x.target.value,g=p==="x"?{x:h,y:o.y}:{x:o.x,y:h};i({expression:g})},f=p=>{const x=o?.[p];return _l.find(g=>g.id===x)?.description??"Select a destination to be controlled by the XY surface."};return l.jsxs("div",{className:"expression-panel",children:[l.jsxs("div",{className:"expression-row",children:[l.jsxs("label",{children:[l.jsx("span",{className:"label",children:"X Axis Target"}),l.jsx("select",{value:o?.x??A.expression.x,onChange:d("x"),children:u.map(([p,x])=>l.jsx("optgroup",{label:p,children:x.map(h=>l.jsx("option",{value:h.id,children:h.label},h.id))},p))})]}),l.jsx("p",{className:"hint-text",children:f("x")})]}),l.jsxs("div",{className:"expression-row",children:[l.jsxs("label",{children:[l.jsx("span",{className:"label",children:"Y Axis Target"}),l.jsx("select",{value:o?.y??A.expression.y,onChange:d("y"),children:u.map(([p,x])=>l.jsx("optgroup",{label:p,children:x.map(h=>l.jsx("option",{value:h.id,children:h.label},h.id))},p))})]}),l.jsx("p",{className:"hint-text",children:f("y")})]})]})}function jl({open:r,onClose:o,children:i,title:u="Settings",closeLabel:d="Close settings"}){return V.useEffect(()=>{if(!r)return;const f=p=>{p.key==="Escape"&&o()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[r,o]),r?l.jsxs("div",{className:"modal-overlay",role:"dialog","aria-modal":"true",children:[l.jsx("div",{className:"modal-backdrop",onClick:o}),l.jsxs("div",{className:"modal",children:[l.jsxs("header",{className:"modal-header",children:[l.jsx("h3",{className:"modal-title",children:u}),l.jsx("button",{className:"modal-close",onClick:o,"aria-label":d,children:""})]}),l.jsx("div",{className:"modal-body",children:i})]})]}):null}const Ju=16,Un=[{id:"kick",label:"Kick",midi:36,voices:[{name:"Classic",patch:{osc1:{wave:"sine",detune:-24},osc2:{wave:"sine",detune:0},mix:0,envelope:{attack:.001,decay:.18,sustain:0,release:.08},filter:{type:"lowpass",cutoff:380,q:.8},master:{gain:.35}}},{name:"Boom",patch:{osc1:{wave:"sine",detune:-36},osc2:{wave:"triangle",detune:-12},mix:.25,envelope:{attack:.001,decay:.32,sustain:0,release:.22},filter:{type:"lowpass",cutoff:240,q:1.1},master:{gain:.38}}},{name:"Punch",patch:{osc1:{wave:"sawtooth",detune:-12},osc2:{wave:"square",detune:0},mix:.6,envelope:{attack:.001,decay:.16,sustain:0,release:.1},filter:{type:"bandpass",cutoff:680,q:1.8},master:{gain:.33}}},{name:"Snap",patch:{osc1:{wave:"triangle",detune:-24},osc2:{wave:"noise",detune:0},mix:.2,envelope:{attack:.001,decay:.12,sustain:0,release:.08},filter:{type:"highpass",cutoff:320,q:.7},master:{gain:.3}}},{name:"808",patch:{osc1:{wave:"sine",detune:-12},osc2:{wave:"sine",detune:-12,detuneFine:-5},mix:.4,envelope:{attack:.001,decay:.5,sustain:.05,release:.4},filter:{type:"lowpass",cutoff:180,q:1.4},master:{gain:.36}}},{name:"Drive",patch:{osc1:{wave:"sawtooth",detune:-7},osc2:{wave:"sawtooth",detune:5},mix:.5,envelope:{attack:.001,decay:.24,sustain:.05,release:.18},filter:{type:"lowpass",cutoff:420,q:1.6},master:{gain:.32},ring:{enabled:!0,amount:.35}}},{name:"Click",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"sine",detune:-24},mix:.15,envelope:{attack:.001,decay:.1,sustain:0,release:.06},filter:{type:"highpass",cutoff:400,q:1},master:{gain:.28}}},{name:"Thud",patch:{osc1:{wave:"triangle",detune:-24},osc2:{wave:"triangle",detune:-36},mix:.3,envelope:{attack:.001,decay:.26,sustain:.05,release:.2},filter:{type:"lowpass",cutoff:260,q:1.2},master:{gain:.37}}}]},{id:"snare",label:"Snare",midi:38,voices:[{name:"Tight",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"triangle",detune:12},mix:.55,envelope:{attack:.001,decay:.22,sustain:0,release:.12},filter:{type:"bandpass",cutoff:1800,q:2.8},master:{gain:.28}}},{name:"Crack",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"square",detune:24},mix:.65,envelope:{attack:.001,decay:.18,sustain:0,release:.09},filter:{type:"highpass",cutoff:2800,q:1.6},master:{gain:.26}}},{name:"Wide",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"sawtooth",detune:7},mix:.6,envelope:{attack:.001,decay:.28,sustain:.05,release:.18},filter:{type:"bandpass",cutoff:1500,q:1.4},master:{gain:.3}}},{name:"LoFi",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"triangle",detune:-12},mix:.4,envelope:{attack:.001,decay:.24,sustain:0,release:.18},filter:{type:"bandpass",cutoff:950,q:3.2},master:{gain:.24}}},{name:"Brush",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"noise",detune:12},mix:.5,envelope:{attack:.001,decay:.32,sustain:.05,release:.24},filter:{type:"highpass",cutoff:1400,q:.9},master:{gain:.22}}},{name:"Snap",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"sine",detune:5},mix:.35,envelope:{attack:.001,decay:.14,sustain:0,release:.08},filter:{type:"bandpass",cutoff:2e3,q:2.1},master:{gain:.25}}},{name:"Clap",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"noise",detune:12},mix:.8,envelope:{attack:.001,decay:.26,sustain:0,release:.22},filter:{type:"bandpass",cutoff:1200,q:1},master:{gain:.27}}},{name:"Body",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"triangle",detune:-7},mix:.45,envelope:{attack:.001,decay:.3,sustain:.1,release:.24},filter:{type:"bandpass",cutoff:900,q:1.8},master:{gain:.31}}}]},{id:"hat",label:"Hat",midi:42,voices:[{name:"Closed",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"triangle",detune:24},mix:.7,envelope:{attack:.001,decay:.08,sustain:0,release:.05},filter:{type:"highpass",cutoff:5e3,q:.9},master:{gain:.22}}},{name:"Open",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"noise",detune:24},mix:.65,envelope:{attack:.001,decay:.32,sustain:.15,release:.3},filter:{type:"highpass",cutoff:4200,q:.7},master:{gain:.25}}},{name:"Tight",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"square",detune:18},mix:.5,envelope:{attack:.001,decay:.06,sustain:0,release:.04},filter:{type:"highpass",cutoff:6200,q:1.1},master:{gain:.2}}},{name:"Shimmer",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"sawtooth",detune:12},mix:.55,envelope:{attack:.001,decay:.14,sustain:0,release:.1},filter:{type:"bandpass",cutoff:6800,q:2.2},master:{gain:.23}}},{name:"Metal",patch:{osc1:{wave:"triangle",detune:24},osc2:{wave:"square",detune:36},mix:.45,envelope:{attack:.001,decay:.18,sustain:.05,release:.12},filter:{type:"highpass",cutoff:4600,q:1.5},master:{gain:.24}}},{name:"Loose",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"noise",detune:36},mix:.75,envelope:{attack:.001,decay:.22,sustain:.1,release:.18},filter:{type:"highpass",cutoff:3800,q:.8},master:{gain:.26}}},{name:"Chick",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"triangle",detune:30},mix:.5,envelope:{attack:.001,decay:.09,sustain:0,release:.05},filter:{type:"highpass",cutoff:5400,q:1.3},master:{gain:.21}}},{name:"Airy",patch:{osc1:{wave:"noise",detune:0},osc2:{wave:"noise",detune:18},mix:.6,envelope:{attack:.001,decay:.18,sustain:.08,release:.18},filter:{type:"highpass",cutoff:6400,q:.9},master:{gain:.2}}}]}];function Zm(){const r={};for(const o of Un)r[o.id]=Array.from({length:Ju},()=>!1);return r.kick[0]=!0,r.kick[8]=!0,r.snare[4]=!0,r.snare[12]=!0,r.hat=r.hat.map((o,i)=>i%2===0),r}function eh(){const r=re(P=>P.transport.tempo),o=re(P=>P.transport.playing),i=re(P=>P.transport.tick),u=re(P=>P.setTempo),d=re(P=>P.setTransportPlaying),[f,p]=V.useState(!0),[x,h]=V.useState(()=>Zm()),[g,v]=V.useState(0),[y,M]=V.useState(()=>{const P={};for(const B of Un)P[B.id]=0;return P}),N=V.useRef({}),w=V.useRef(x),j=V.useRef(y),k=V.useRef(f);V.useEffect(()=>{w.current=x},[x]),V.useEffect(()=>{j.current=y},[y]),V.useEffect(()=>{k.current=f,f||v(0)},[f]);const L=(P,B,z)=>{const U=Un.find(C=>C.id===P);if(!U)return;const D=U.voices[B]??U.voices[0];if(!D)return;const ee=z??N.current[P];ee&&ee.applyPatch({...A,...D.patch})},R=async P=>{let B=N.current[P];B||(B=new El,N.current[P]=B),await B.resume();const z=j.current[P]??0;return L(P,z,B),B},W=async P=>{if(!k.current)return;const B=w.current,z=Un.filter(U=>B[U.id]?.[P]);for(const U of z)(await R(U.id)).previewNote(U.midi,180)};V.useEffect(()=>{if(!o||!f){v(0);return}const P=i%Ju;v(P),W(P)},[i,o,f]),V.useEffect(()=>()=>{for(const P of Object.values(N.current))try{P.audioContext.close()}catch{}N.current={}},[]);const X=(P,B)=>{h(z=>{const U={...z,[P]:[...z[P]]};return U[P][B]=!U[P][B],U})},q=(P,B)=>{const z=Un.find(ee=>ee.id===P);if(!z)return;const U=z.voices.length-1,D=Math.round(Math.min(U,Math.max(0,B)));M(ee=>({...ee,[P]:D})),L(P,D)};return l.jsxs("div",{className:"drum-machine",children:[l.jsxs("div",{className:"drum-controls",children:[l.jsx("button",{className:"play-button",onClick:()=>d(!o),disabled:!f,children:o?"Stop":"Play"}),l.jsxs("label",{className:"drum-enable-toggle",children:[l.jsx("input",{type:"checkbox",checked:f,onChange:P=>p(P.target.checked)}),l.jsx("span",{children:"On"})]}),l.jsx(ke,{label:"Tempo",min:60,max:180,step:1,value:r,onChange:P=>u(P)}),Un.map(P=>{const B=y[P.id]??0;return l.jsx(ke,{label:`${P.label} Voice`,min:0,max:P.voices.length-1,step:1,value:B,onChange:z=>q(P.id,z),formatValue:z=>P.voices[Math.round(z)]?.name??""},`${P.id}-voice`)})]}),l.jsx("div",{className:"drum-grid",children:Un.map(P=>l.jsxs("div",{className:"drum-row",children:[l.jsx("div",{className:"drum-label",children:P.label}),l.jsx("div",{className:"drum-steps",children:x[P.id]?.map((B,z)=>{const U=o&&f&&g===z;return l.jsx("button",{className:`drum-step${B?" active":""}${U?" current":""}`,onClick:()=>X(P.id,z)},z)})})]},P.id))})]})}const th=4;function nh(){const r=re(f=>f.transport.tempo),o=re(f=>f.transport.playing),i=re(f=>f.bumpTransportTick),u=re(f=>f.patch),d=re(f=>f.updatePatch);return V.useEffect(()=>{if(!o)return;const f=6e4/r/th,p=window.setInterval(()=>i(),f);return()=>window.clearInterval(p)},[o,r,i]),V.useEffect(()=>{const f=u.sequencer??A.sequencer;f?.enabled&&f.playing!==o&&d({sequencer:{...f,playing:o}})},[o,u.sequencer,d]),V.useEffect(()=>{const f=u.sequencer??A.sequencer;f?.enabled&&f.bpm!==r&&d({sequencer:{...f,bpm:r}});const p=u.arp??A.arp;p?.enabled&&(p.bpm!==r||!p.bpmSync)&&d({arp:{...p,bpm:r,bpmSync:!0}})},[r,u.sequencer,u.arp,d]),null}const Hu=144,rh=128;function sh(r){return Array.from(r.inputs.values()).map(o=>({id:o.id,name:o.name??"Unknown input",manufacturer:o.manufacturer??null}))}let rs=null;function Zu(){return rs||(typeof navigator>"u"||typeof navigator.requestMIDIAccess!="function"?Promise.reject(new Error("Web MIDI API is not supported in this environment")):(rs=navigator.requestMIDIAccess({sysex:!1}).finally(()=>{rs=null}),rs))}function oh(){const r=re(v=>v.engine),o=re(v=>v.midi),i=re(v=>v.setMidiSupported),u=re(v=>v.setMidiStatus),d=re(v=>v.setMidiInputs),f=re(v=>v.setMidiSelectedInput),p=re(v=>v.setMidiActiveNotes),x=V.useRef(null),h=V.useRef(null),g=V.useRef(new Set);return V.useEffect(()=>{if(!o.enabled){const y=Array.from(g.current);y.length&&r&&y.forEach(N=>r.noteOff(N)),g.current.clear(),p([]);const M=o.supported===!1?"unsupported":"idle";o.status!==M&&u(M),d([]),x.current&&(x.current.onstatechange=null);return}if(typeof navigator>"u"||typeof navigator.requestMIDIAccess!="function"){i(!1),u("unsupported");return}let v=!1;return i(!0),u("requesting"),Zu().then(y=>{if(v)return;x.current=y;const M=()=>{const N=sh(y);d(N);const{selectedInputId:w}=re.getState().midi;N.length===0&&(g.current.clear(),p([])),N.length>0?N.some(k=>k.id===w)||f(N[0]?.id??null):w&&f(null)};M(),y.onstatechange=()=>M(),u("ready")}).catch(y=>{if(v)return;const M=y instanceof Error?y.message:"Failed to access MIDI devices";u("error",M)}),()=>{v=!0,x.current&&(x.current.onstatechange=null),x.current=null}},[r,o.enabled,p,d,f,u,i]),V.useEffect(()=>{if(!o.enabled){h.current&&(h.current.onmidimessage=null,h.current=null);return}const v=x.current;if(!v)return;const y=o.selectedInputId,M=y?Array.from(v.inputs.values()).find(w=>w.id===y):null;if(h.current&&h.current!==M){h.current.onmidimessage=null,h.current=null;const w=Array.from(g.current);w.length&&r&&w.forEach(j=>r.noteOff(j)),g.current.clear(),p([])}if(!M)return;const N=w=>{const j=w.data;if(!j||j.length<2)return;const k=j[0],L=j[1],R=j[2]??0,W=k&240,X=L;if(W===Hu&&R>0){const q=Math.max(0,Math.min(1,R/127));r&&r.noteOn(X,q),g.current.add(X),p(Array.from(g.current));return}(W===rh||W===Hu&&R===0)&&(r&&r.noteOff(X),g.current.delete(X),p(Array.from(g.current)))};return M.onmidimessage=N,h.current=M,()=>{M.onmidimessage===N&&(M.onmidimessage=null);const w=Array.from(g.current);w.length&&r&&w.forEach(j=>r.noteOff(j)),g.current.clear(),p([])}},[r,o.enabled,o.selectedInputId,p]),null}const ih={idle:"Not connected",requesting:"Awaiting browser permission...",ready:"Connected",error:"Connection error",unsupported:"Not supported"};function lh(){const r=re(h=>h.midi),o=re(h=>h.setMidiEnabled),i=re(h=>h.setMidiSelectedInput),u=re(h=>h.setMidiStatus),d=re(h=>h.setMidiSupported),f=V.useMemo(()=>{const h=ih[r.status]??"Unknown";return r.status==="error"&&r.lastError?`${h}: ${r.lastError}`:r.status==="ready"&&r.inputs.length===0?"Connected - no inputs detected":h},[r.inputs.length,r.lastError,r.status]),p=r.supported===!1,x=V.useCallback(h=>{if(!h.target.checked){o(!1);return}u("requesting"),o(!0),Zu().then(()=>{d(!0)}).catch(v=>{const y=v instanceof Error?v.message:"Failed to access MIDI devices";if(v instanceof Error&&/not supported/i.test(v.message)){d(!1),u("unsupported"),o(!1);return}d(!0),u("error",y)})},[o,u,d]);return l.jsxs("div",{className:"settings-card",children:[l.jsxs("div",{className:"settings-row",children:[l.jsx("label",{className:"settings-label",htmlFor:"midi-enabled",children:"Enable MIDI input"}),l.jsx("input",{id:"midi-enabled",type:"checkbox",checked:r.enabled,onChange:x,disabled:p})]}),l.jsxs("div",{className:"settings-row",children:[l.jsx("span",{className:"settings-label",children:"Status"}),l.jsx("span",{className:"settings-value","data-status":r.status,children:f})]}),r.status==="unsupported"?l.jsx("p",{className:"settings-help",children:"This browser does not expose the Web MIDI API. Try Chrome or Edge on desktop."}):null,l.jsxs("div",{className:"settings-row",children:[l.jsx("label",{className:"settings-label",htmlFor:"midi-input",children:"MIDI input device"}),l.jsxs("select",{id:"midi-input",value:r.selectedInputId??"",onChange:h=>{const g=h.target.value;i(g.length?g:null)},disabled:!r.enabled||r.inputs.length===0,children:[r.inputs.length===0?l.jsx("option",{value:"",children:"No inputs detected"}):null,r.inputs.map(h=>l.jsxs("option",{value:h.id,children:[h.name,h.manufacturer?` (${h.manufacturer})`:""]},h.id))]})]}),r.enabled&&r.inputs.length===0?l.jsx("p",{className:"settings-help",children:"Plug in a controller or check browser permissions."}):null]})}function ah({href:r="https://github.com/szabadkai/synth-demo"}){return l.jsxs("a",{className:"github-corner",href:r,"aria-label":"View WebSynth Studio on GitHub",target:"_blank",rel:"noreferrer noopener",children:[l.jsx("span",{className:"sr-only",children:"View the project repository on GitHub"}),l.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:l.jsx("path",{d:"M12 0a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58 0-.29-.01-1.05-.02-2.05-3.34.73-4.04-1.61-4.04-1.61-.55-1.4-1.35-1.78-1.35-1.78-1.11-.76.08-.75.08-.75 1.22.09 1.87 1.26 1.87 1.26 1.09 1.86 2.86 1.32 3.56 1 .11-.79.43-1.32.78-1.62-2.66-.3-5.47-1.33-5.47-5.9 0-1.3.47-2.37 1.24-3.21-.12-.3-.54-1.51.12-3.15 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.3-1.55 3.3-1.23 3.3-1.23.66 1.64.24 2.85.12 3.15.77.84 1.24 1.9 1.24 3.21 0 4.58-2.82 5.6-5.5 5.9.44.39.83 1.16.83 2.34 0 1.69-.02 3.05-.02 3.47 0 .32.22.69.83.57A12 12 0 0 0 12 0Z"})})]})}const ch=[{title:"Power On + Audio Check",points:["Click Power On (or press any key) to resume the audio engine  browsers block sound until you interact.","Hold a note on the on-screen keyboard or your computer keys (A/W/S) to confirm audio output.","Watch the Audio Ready badge so you know the synth engine is live and responsive."]},{title:"Dashboard Basics",points:["Each panel can be dragged by the  handle to personalise your layout.","Use the Oscilloscope panel to visualise how the engines, filter, and envelope tweaks shape the signal.","Dive into the Engine panel (ENG1/ENG2), plus Filter, Envelope, and Effects modules to sculpt tone, dynamics, and ambience."]},{title:"Modulation Playground",points:["Assign LFOs to pitch, filter, or effect targets for evolving textures  adjust rate, shape, sync, and depth.","Flip on the Arpeggiator to latch held notes, experiment with 6 modes (Up, Down, Up-Down, Random, As Played, Sequence).",'Try "Sequence" mode to play through your Sequencer pattern with rests  OFF steps create rhythmic pauses.',"Program riffs in the Sequencer, toggle steps live, and shape groove with progression modes and spice amount."]},{title:"Rhythm Layer",points:["Open the Drum Machine to sequence kick, snare, and hat voices using the shared global transport.","Hit Play/Stop in the Drum Machine (or space bar in the Sequencer) to drive every tempo-aware module.","Adjust BPM from either panel  the Transport keeps LFO sync, sequencer rate, and arps locked in."]},{title:"Expressive Performance",points:["Engage CapsLock to activate the 2D expression surface; glide a trackpad, mouse, or pen for live modulation.","Check the overlay label to see which parameters the X/Y axes control and their real-time values.","Customise X/Y destinations under Settings  Expression to map filter sweeps, macro blends, and more."]},{title:"Patch Workflow",points:["Browse the top-bar Preset menu or Settings  Patches to explore curated starting points.","Export your patch as JSON to share, import saved patches, or reset to the init patch at any time.","Use Clear Local if you ever need to wipe cached patches after upgrading the app."]},{title:"Hardware MIDI",points:["Toggle Enable MIDI input in Settings  MIDI to request browser permission for your controller.","Select a detected device and play  incoming notes route straight into the synth voice engine.","Status hints show permission prompts, errors, or a friendly ready state so you know what to expect."]},{title:"Arpeggiator Deep Dive",points:['"Up/Down/Up-Down" modes arpeggiate sorted by pitch; "Random" shuffles on each cycle.','"As Played" preserves the order you pressed keys  great for creating specific melodic patterns.','"Sequence" mode plays through your Sequencer pattern: ON steps trigger notes, OFF steps are rests.','Use "Chord" knob to add intervals (Single, Power, Major, Minor, etc.) or "Seq" to use sequencer offsets as chords.']},{title:"Next Steps",points:["Layer Sequencer, Arpeggiator, Drum Machine, and expression surface for full arrangements.","Save favourite patches into src/patches/ to share with your team or future sessions.","Before shipping changes, run npm run lint, npm run typecheck, npm test, and npm run build to keep QA tight."]}];function uh({onFinish:r}){return l.jsxs("div",{className:"onboarding-guide",children:[l.jsx("p",{className:"onboarding-intro",children:"New to WebSynth Studio? Work through the highlights below, tweaking the live app as you go. Each section points you to the panels and controls that define the instrument."}),l.jsx("ol",{className:"onboarding-list",children:ch.map(o=>l.jsxs("li",{className:"onboarding-section",children:[l.jsx("h4",{children:o.title}),l.jsx("ul",{children:o.points.map(i=>l.jsx("li",{children:i},i))})]},o.title))}),l.jsx("button",{type:"button",className:"onboarding-cta",onClick:()=>{r?.()},children:"Let's go"})]})}const dh="https://buymeacoffee.com/szabadkai",fh="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png",Cl="buy-coffee-collapsed";function ph(){const[r,o]=V.useState(!1);return V.useEffect(()=>{try{window.localStorage.getItem(Cl)==="1"&&o(!0)}catch{}},[]),V.useEffect(()=>{try{r?window.localStorage.setItem(Cl,"1"):window.localStorage.removeItem(Cl)}catch{}},[r]),r?l.jsx("div",{className:"buy-coffee collapsed",children:l.jsx("button",{type:"button",className:"buy-coffee-icon","aria-label":"Show Buy Me a Coffee support button",onClick:()=>o(!1),children:l.jsx("span",{"aria-hidden":"true",children:""})})}):l.jsxs("div",{className:"buy-coffee",children:[l.jsxs("a",{className:"buy-coffee-link",href:dh,target:"_blank",rel:"noreferrer noopener","aria-label":"Support WebSynth Studio via Buy Me a Coffee",children:[l.jsx("span",{className:"sr-only",children:"Support WebSynth Studio on Buy Me a Coffee"}),l.jsx("img",{src:fh,alt:"",loading:"lazy",width:220,height:62})]}),l.jsx("button",{type:"button",className:"buy-coffee-dismiss","aria-label":"Hide Buy Me a Coffee support button",onClick:()=>o(!0),children:l.jsx("span",{"aria-hidden":"true",children:""})})]})}const mh=[{label:"1024",value:1024,description:"Fastest response, lowest resolution"},{label:"2048",value:2048,description:"Balanced speed and detail"},{label:"4096",value:4096,description:"Default detail"},{label:"8192",value:8192,description:"Highest resolution, slowest refresh"}];function hh(){const r=re(i=>i.oscilloscope.fftSize),o=re(i=>i.setOscilloscopeFftSize);return l.jsxs("div",{className:"settings-group",children:[l.jsx("h5",{className:"settings-subheading",children:"Oscilloscope"}),l.jsxs("div",{className:"settings-row",children:[l.jsx("span",{className:"label",children:"FFT Size"}),l.jsx("div",{className:"fft-options",children:mh.map(i=>{const u=r===i.value;return l.jsxs("button",{type:"button",className:`fft-option${u?" active":""}`,"aria-pressed":u,onClick:()=>o(i.value),children:[l.jsx("span",{className:"fft-option__label",children:i.label}),l.jsx("span",{className:"fft-option__hint",children:i.description})]},i.value)})})]})]})}function gh(){const r=re(w=>w.updatePatch),o=re(w=>w.userPresets),[i,u]=Ie.useState(null),[d,f]=Ie.useState(!1),p=Ie.useRef(null),x=Ie.useRef(null),h=i?bl[i]:null,g=i?o.find(w=>w.id===i):void 0,v=h?{id:h.id,name:h.name,description:h.description,image:h.image}:g?{id:g.id,name:g.name,description:g.description,image:void 0}:null,y=Ie.useCallback(()=>{f(!1),p.current?.blur()},[]),M=Ie.useCallback(w=>{u(w),y();const j=bl[w];if(j){r(j.patch);return}const k=o.find(L=>L.id===w);if(k){const L=typeof structuredClone=="function"?structuredClone(k.patch):JSON.parse(JSON.stringify(k.patch));r(L)}},[y,r,o]);Ie.useEffect(()=>{if(!d)return;const w=k=>{!p.current?.contains(k.target)&&!x.current?.contains(k.target)&&y()},j=k=>{k.key==="Escape"&&(k.preventDefault(),y())};return document.addEventListener("pointerdown",w),document.addEventListener("keydown",j),()=>{document.removeEventListener("pointerdown",w),document.removeEventListener("keydown",j)}},[d,y]);const N=()=>{f(w=>!w),d&&y()};return Ie.useEffect(()=>{i&&(bl[i]||o.some(w=>w.id===i)||u(null))},[i,o]),l.jsxs("div",{className:"preset-selector","data-open":d?"true":"false",children:[l.jsxs("button",{type:"button",ref:p,className:"preset-selector-trigger",onClick:N,"aria-haspopup":"listbox","aria-expanded":d,children:[v?l.jsxs("span",{className:"preset-selector-label",children:[l.jsx("span",{className:"preset-selector-thumb",style:v.image?{backgroundImage:`url(${v.image})`}:void 0}),l.jsx("span",{children:v.name})]}):l.jsx("span",{className:"preset-selector-placeholder",children:"Presets"}),l.jsx("span",{className:"preset-selector-caret","aria-hidden":"true",children:""})]}),d&&l.jsxs("div",{className:"preset-selector-popover",ref:x,role:"listbox","aria-label":"Preset library",children:[Yu.map(w=>l.jsxs("div",{className:"preset-selector-group",children:[l.jsx("div",{className:"preset-selector-group-title",children:w.name}),l.jsx("div",{className:"preset-selector-options",children:w.presets.map(j=>l.jsx("button",{type:"button",role:"option","aria-selected":j.id===i,className:"preset-option",style:{backgroundImage:`url(${j.image})`},onClick:()=>M(j.id),children:l.jsxs("div",{className:"preset-option-overlay",children:[l.jsx("div",{className:"preset-option-name",children:j.name}),l.jsx("div",{className:"preset-option-description",children:j.description})]})},j.id))})]},w.id)),o.length>0&&l.jsxs("div",{className:"preset-selector-group",children:[l.jsx("div",{className:"preset-selector-group-title",children:"Custom Presets"}),l.jsx("div",{className:"preset-selector-options",children:o.map(w=>l.jsx("button",{type:"button",role:"option","aria-selected":w.id===i,className:"preset-option",onClick:()=>M(w.id),children:l.jsxs("div",{className:"preset-option-overlay",children:[l.jsx("div",{className:"preset-option-name",children:w.name}),l.jsx("div",{className:"preset-option-description",children:w.description})]})},w.id))})]})]})]})}const vh=[{value:"lfo1",label:"LFO 1 (Audio)"},{value:"lfo2",label:"LFO 2 (Audio)"},{value:"exprX",label:"Expression X (CapsLock X)"},{value:"exprY",label:"Expression Y (CapsLock Y)"},{value:"seqStep",label:"Sequencer Step"},{value:"velocity",label:"Note Velocity"},{value:"gate",label:"Note Gate"}],$u=[{value:"filter.cutoff",label:"Filter Cutoff",description:"Modulate the primary filter frequency"},{value:"filter.q",label:"Filter Resonance",description:"Modulate filter resonance (Q)"},{value:"master.gain",label:"Master Gain",description:"Trim the overall output level"},{value:"macro.harmonics",label:"Macro Harmonics",description:"Shape the macro engine harmonic content"},{value:"macro.timbre",label:"Macro Timbre",description:"Tilt the macro tone or brightness"},{value:"macro.morph",label:"Macro Morph",description:"Sweep the macro engine model position"},{value:"macro.level",label:"Macro Level",description:"Adjust macro oscillator output level"},{value:"fm.amount",label:"FM Amount",description:"Scale frequency modulation depth"},{value:"mix",label:"Osc Mix",description:"Crossfade between oscillator 1 and 2"},{value:"envelope.attack",label:"Env Attack",description:"Modulate the envelope attack time"},{value:"envelope.release",label:"Env Release",description:"Modulate the envelope release time"}],yh=r=>`${r>=0?"+":""}${(r*100).toFixed(0)}%`;function xh(){const r=re(h=>h.patch.modMatrix??[]),o=re(h=>h.addModRoute),i=re(h=>h.updateModRoute),u=re(h=>h.removeModRoute),d=(h,g)=>{i(h.id,{source:g})},f=(h,g)=>{i(h.id,{target:g})},p=(h,g)=>{i(h.id,{amount:g})},x=(h,g)=>{i(h.id,{enabled:g})};return l.jsxs("div",{className:"mod-matrix-panel",children:[l.jsxs("div",{className:"mod-matrix-header",children:[l.jsx("button",{type:"button",onClick:o,className:"mod-matrix-add",children:"+ Add Route"}),l.jsxs("span",{className:"mod-matrix-count",children:[r.length," routings"]})]}),r.length===0?l.jsx("p",{className:"hint-text",style:{marginTop:8},children:"Add routes to patch LFOs into filter or master parameters. More sources will arrive in future revisions."}):l.jsx("div",{className:"mod-matrix-list",children:r.map(h=>l.jsxs("div",{className:`mod-matrix-row${h.enabled?"":" disabled"}`,children:[l.jsx("div",{className:"mod-matrix-col",children:l.jsxs("label",{children:[l.jsx("div",{className:"label",children:"Source"}),l.jsx("select",{value:h.source,onChange:g=>d(h,g.target.value),children:vh.map(g=>l.jsx("option",{value:g.value,children:g.label},g.value))})]})}),l.jsxs("div",{className:"mod-matrix-col",children:[l.jsxs("label",{children:[l.jsx("div",{className:"label",children:"Target"}),l.jsx("select",{value:h.target,onChange:g=>f(h,g.target.value),children:$u.map(g=>l.jsx("option",{value:g.value,children:g.label},g.value))})]}),l.jsx("span",{className:"mod-matrix-hint",children:$u.find(g=>g.value===h.target)?.description??""})]}),l.jsxs("div",{className:"mod-matrix-col amount",children:[l.jsxs("label",{children:[l.jsx("div",{className:"label",children:"Amount"}),l.jsx("input",{type:"range",min:-1,max:1,step:.01,value:h.amount,onChange:g=>p(h,Number(g.target.value))})]}),l.jsx("div",{className:"mod-matrix-amount",children:yh(h.amount)})]}),l.jsxs("div",{className:"mod-matrix-actions",children:[l.jsxs("label",{className:"mod-matrix-toggle",children:[l.jsx("input",{type:"checkbox",checked:h.enabled,onChange:g=>x(h,g.target.checked)}),l.jsx("span",{children:"Enabled"})]}),l.jsx("button",{type:"button",className:"mod-matrix-remove",onClick:()=>u(h.id),"aria-label":"Remove route",children:""})]})]},h.id))})]})}function wh(){const r=re(w=>w.engine),[o,i]=V.useState(!1),[u,d]=V.useState(0),[f,p]=V.useState(null),x=V.useRef(null),h=V.useRef([]),g=V.useRef(null);V.useEffect(()=>()=>{g.current&&clearInterval(g.current),f&&URL.revokeObjectURL(f)},[f]);const v=()=>{if(!r)return;const w=r.getRecordDestination();if(!w)return;h.current=[];const k=["audio/webm;codecs=opus","audio/webm","audio/mp4"].find(L=>MediaRecorder.isTypeSupported(L))||"";try{const L=new MediaRecorder(w.stream,{mimeType:k});L.ondataavailable=W=>{W.data.size>0&&h.current.push(W.data)},L.onstop=()=>{const W=k||"audio/webm",X=new Blob(h.current,{type:W}),q=URL.createObjectURL(X);p(q)},L.start(),x.current=L,i(!0),p(null);const R=Date.now();d(0),g.current=window.setInterval(()=>{d(Math.floor((Date.now()-R)/1e3))},1e3)}catch(L){console.error("Recording failed:",L)}},y=()=>{x.current&&x.current.state!=="inactive"&&x.current.stop(),i(!1),g.current&&(clearInterval(g.current),g.current=null)},M=w=>{const j=Math.floor(w/60),k=w%60;return`${j.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`},N=()=>{if(!f)return;const w=document.createElement("a");w.href=f,w.download=`recording-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.webm`,w.click()};return l.jsxs("div",{className:"recorder-panel",children:[l.jsxs("div",{className:"recorder-display",style:{fontFamily:"monospace",fontSize:"14px",color:o?"#ef4444":"#64748b",display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"currentcolor",opacity:o?1:.3}}),M(u)]}),o?l.jsx("button",{className:"recorder-btn stop",onClick:y,style:{borderColor:"currentColor"},children:" STOP"}):l.jsx("button",{className:"recorder-btn record",onClick:v,title:"Start Recording",style:{color:"#ef4444",borderColor:"#ef4444"},children:" REC"}),f&&!o&&l.jsx("button",{className:"recorder-btn download",onClick:N,title:"Download Recording",children:""})]})}const Wu="websynth-guide-seen",Sh=["oscilloscope","oscillator","effects","lfos","arp","sequencer","modmatrix","drum","keyboard"];function kh(r){return Sh.includes(r)}function Mh(){const r=re(L=>L.engine),o=re(L=>L.setEngine),i=re(L=>L.patch),[u,d]=V.useState(!1),[f,p]=V.useState(!1),[x,h]=V.useState(null);V.useEffect(()=>{try{localStorage.getItem(Wu)||p(!0)}catch{}},[]),V.useEffect(()=>{const L=async()=>{if(!re.getState().engine){const R=new El;await R.resume(),R.applyPatch(i),o(R)}window.removeEventListener("pointerdown",L),window.removeEventListener("keydown",L)};return window.addEventListener("pointerdown",L),window.addEventListener("keydown",L),()=>{window.removeEventListener("pointerdown",L),window.removeEventListener("keydown",L)}},[i,o]);const g=async()=>{if(!r){const L=new El;await L.resume(),L.applyPatch(i),o(L)}},v=[{id:"oscilloscope",title:"Oscilloscope",span:2,render:()=>l.jsxs("div",{className:"oscilloscope-stack",children:[l.jsx(Nm,{}),l.jsxs("div",{className:"oscilloscope-row",children:[l.jsx(Sm,{}),l.jsx(km,{})]})]})},{id:"oscillator",title:"Oscillator",span:2,render:()=>l.jsx(wm,{})},{id:"effects",title:"Effects",span:2,render:()=>l.jsx(Pm,{})},{id:"lfos",title:"LFOs",span:2,render:()=>l.jsx(_m,{})},{id:"modmatrix",title:"Mod Matrix",span:2,render:()=>l.jsx(xh,{})},{id:"arp",title:"Arpeggiator",span:2,render:()=>l.jsx(Lm,{})},{id:"sequencer",title:"Sequencer",span:2,render:()=>l.jsx(Am,{})},{id:"drum",title:"Drum Machine",span:2,render:()=>l.jsx(eh,{})},{id:"keyboard",title:"Keyboard",span:2,render:()=>l.jsx(Em,{})}],y=re(L=>L.layoutOrder),M=re(L=>L.setLayoutOrder),N=re(L=>L.resetPatch),w=V.useMemo(()=>({oscilloscope:{title:"Oscilloscope & Signal Shaping",body:l.jsxs("div",{className:"module-help",children:[l.jsx("p",{children:"This column stacks the live scope with the filter and envelope controls so you can see and hear how each tweak reshapes the voice in real time."}),l.jsx("h5",{children:"Oscilloscope"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Live waveform"})," shows the post-filter signalwatch for clipping, phase inversion, or DC offset."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Visual feedback"})," makes it easy to dial envelope curves or modulation depth by eye."]})]}),l.jsx("h5",{children:"Filter"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Filter Type"}),": switch between low-pass, high-pass, band-pass, or notch responses."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Cutoff"}),": set the corner frequency (408 kHz)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Resonance"}),": emphasise frequencies around the cutoff for squelchy tones or formants."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Master"}),": trim the synth output to prevent overload after heavy resonance or drive."]})]}),l.jsx("h5",{children:"Envelope"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Attack/Decay"}),": tune how quickly the note ramps up and falls back."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Sustain"}),": set the plateau level while a key is held."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Release"}),": control how long the tail rings once the note stops."]})]}),l.jsx("h5",{children:"Workflow Tips"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Start with moderate sustain and adjust cutoff until the oscilloscope shows a balanced waveform."}),l.jsx("li",{children:"Use short attacks with high resonance for plucky stabs, or longer releases for pads."})]})]})},oscillator:{title:"ENG Voice Engine",body:l.jsxs("div",{className:"module-help",children:[l.jsx("p",{children:"The engine panel builds the raw tone. Switch between the classic dual-engine stack (ENG1/ENG2) and the macro voice engine."}),l.jsx("h5",{children:"Classic Mode"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Mode"}),": choose Classic to expose ENG1 and ENG2 controls; Macro flips to the multi-model engine."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Wave"}),": pick saw, square, triangle, sine, or noise per engine."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Detune/Fine"}),": detune ENG1 in cents for chorus movement; fine tune provides subtle offsets."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Mix"}),": blend ENG1 against ENG2 to balance the tone."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"FM toggle"}),": enable frequency modulation, then set ",l.jsx("strong",{children:"Ratio"})," for the modulator harmonic and ",l.jsx("strong",{children:"Amount"})," for depth."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Ring toggle"}),": engage ring modulation and scale its ",l.jsx("strong",{children:"Amount"})," for metallic textures."]})]}),l.jsx("h5",{children:"Macro Mode"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Model"}),": jump between macro-oscillator flavours (VA, wavefold, pluck, FM 2-Op, etc.)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Harmonics/Timbre/Morph"}),": scan each models parameter setgreat for morphing wavetables or shaping plucks."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Level"}),": trim the macro engine output when layering with other voices."]})]}),l.jsx("h5",{children:"Sound Design Tips"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Stack slight detune plus a touch of ring modulation for wide analog pads."}),l.jsx("li",{children:"Macro models respond well to LFO or expression assignmentsmap CapsLock X/Y to Morph or Timbre for live movement."})]})]})},effects:{title:"Effects Rack",body:l.jsxs("div",{className:"module-help",children:[l.jsx("p",{children:"Delay and reverb live here so you can finish a patch without leaving the synth view."}),l.jsx("h5",{children:"Delay"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"On"}),": toggle the bucket-brigade style delay."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Time"}),": set delay time in seconds (01.5s). Syncs nicely with tempo divisions."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Feedback"}),": control repeats; keep under ~0.7 for stable feedback."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Mix"}),": blend the wet signal back with the dry synth."]})]}),l.jsx("h5",{children:"Reverb"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"On"}),": load the convolution reverb stage."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Size"}),': pick the impulse "room" length.']}),l.jsxs("li",{children:[l.jsx("strong",{children:"Decay"}),": shape how long the tail sustains."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Mix"}),": balance ambience without washing out the dry signal."]})]}),l.jsx("h5",{children:"Tips"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Short delay times with low mix create slapback for bass and plucks."}),l.jsx("li",{children:"Cut delay feedback when engaging heavy reverb to avoid muddiness."})]})]})},lfos:{title:"LFO Modulators",body:l.jsxs("div",{className:"module-help",children:[l.jsx("p",{children:"Two low-frequency oscillators inject motion into almost any destination in the patch."}),l.jsx("h5",{children:"LFO Controls"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Enabled"}),": arm the modulation path for each LFO."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Wave"}),": choose sine, triangle, square, saw, or noise for the modulation shape."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Dest"}),": route to pitch, filter, or amptie depth to macros or expression for more routings."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Rate"}),": set frequency in Hz (0.0120); syncs with tempo when combined with the transport."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Amount"}),": scale modulation depth; automate this with the Sequencer or expression surface for evolving sounds."]})]}),l.jsx("h5",{children:"Tips"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Use LFO1 for slow filter sweeps and LFO2 for faster vibrato or tremolo."}),l.jsx("li",{children:"Disable the checkbox to park an LFO without losing its configuration."})]})]})},modmatrix:{title:"Mod Matrix",body:l.jsxs("div",{className:"module-help",children:[l.jsx("p",{children:"Layer additional motion by routing the LFOs into filter or master parameters."}),l.jsx("h5",{children:"Routing"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Source"}),": pick which LFO feeds the routedepth follows that LFOs shape."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Target"}),": choose filter cutoff, resonance, or master gain as the modulation destination."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Amount"}),": dial positive values to boost, negative to invert; the percentage shows the exact depth."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Enabled"}),": toggle a route on/off without deleting it."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Sequencer Step"}),": the Sequencer source mirrors the current step velocity for rhythmic modulation."]})]}),l.jsx("h5",{children:"Tips"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Stack multiple routes per LFO to move cutoff and resonance together."}),l.jsx("li",{children:"Use opposing amounts to push resonance down while cutoff rises for smooth sweeps."})]})]})},arp:{title:"Arpeggiator",body:l.jsxs("div",{className:"module-help",children:[l.jsx("p",{children:"Turn held chords into rhythmic runs that follow the global transport. Features 6 playback modes including the new Sequence mode."}),l.jsx("h5",{children:"Playback"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"On"}),": enable and start capturing held notes."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Latch"}),": keep notes running after you release the keys."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Clear"}),": flush the current latched chord without toggling the arp off."]})]}),l.jsx("h5",{children:"Playback Modes"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Up"}),": arpeggiate held notes ascending by pitch."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Down"}),": arpeggiate held notes descending by pitch."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Up-Down"}),": ascend then descend in ping-pong fashion."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Random"}),": randomize note order on each cycle."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"As Played"}),": preserve the exact order you pressed keysgreat for creating specific melodic patterns that aren't just up or down."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Sequence"}),"  ",l.jsx("em",{children:"NEW"}),": play through your Sequencer pattern with rhythmic rests. ON steps in the sequencer trigger notes using your held note(s) + the step's offset; OFF steps create pauses/rests. Perfect for creating complex rhythmic sequences that combine the arp's timing with the sequencer's melody."]})]}),l.jsx("h5",{children:"Timing & Shape"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Octaves"}),": extend the pattern across 14 octaves."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Chord"}),": add intervals to each noteSingle (none), Power (5th), Major/Minor triads, Sus2/Sus4, Maj7/Min7, or ",l.jsx("strong",{children:"Seq"})," to use the sequencer's active step offsets as chord intervals (different from Sequence mode)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Division"}),": choose rhythmic value (1/4, 1/8, 1/8T, 1/16, 1/16T)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Tempo"}),": linked to the global BPM so drums and sequencer stay in sync."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Gate"}),": control note length (0.051.0)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Swing"}),": add shuffle/groove (disabled for triplets and 1/4 notes)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Repeats"}),": repeat each step 14 times before advancing."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Length"}),": limit the pattern length (0 = auto, uses full pool)."]})]}),l.jsx("h5",{children:"Creative Tips"}),l.jsxs("ul",{children:[l.jsxs("li",{children:["Try ",l.jsx("strong",{children:"Sequence mode"})," with a rhythmic pattern in the sequencer for instant complex melodies."]}),l.jsxs("li",{children:["Use ",l.jsx("strong",{children:"As Played mode"})," to create melodic patterns by pressing keys in a specific order."]}),l.jsx("li",{children:"Combine Latch with the Sequencer for counterpointthe arp handles chords while the sequencer drives lead lines."}),l.jsx("li",{children:"Map the expression surface (CapsLock + trackpad) to filter cutoff for dynamic sweeps during arps."})]})]})},sequencer:{title:"Step Sequencer",body:l.jsxs("div",{className:"module-help",children:[l.jsx("p",{children:"Program note offsets and modulation lanes across up to 16 stepsperfect for basslines or evolving textures."}),l.jsx("h5",{children:"Transport & Timing"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Play"}),": toggles the shared transport; the button mirrors the space-bar shortcut."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Enabled"}),": arm the sequencer without nuking your pattern."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Tempo"}),": linked to the global BPM so drums and arp line up."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Division"}),": set step rate (quarter to triplet sixteenths)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Length"}),": choose how many steps play before looping."]})]}),l.jsx("h5",{children:"Shape the Pattern"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Gate"}),": change note length; great for staccato acid lines."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Swing"}),": add shuffle (disabled for triplets and quarter notes)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Root"}),": slide the entire sequence up or down in pitch."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Edit Notes (Keyboard)"}),": enable to type notes with A/W/S; +/- nudges semitones, Z/X shifts the root octave."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Step grid"}),": click to toggle notes, ",l.jsx("strong",{children:"Alt+click"})," raises semitone offset, right-click lowers it."]})]}),l.jsx("h5",{children:"Visual Feedback"}),l.jsxs("ul",{children:[l.jsx("li",{children:"The highlighted cell shows the playhead; cursor outlines follow keyboard edit focus."}),l.jsx("li",{children:"Offsets in the cells (+/- values) represent semitone shifts relative to Root."})]})]})},drum:{title:"Drum Machine",body:l.jsxs("div",{className:"module-help",children:[l.jsx("p",{children:"Create percussive backbeats that share tempo and transport with the synth voice."}),l.jsx("h5",{children:"Transport"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Play/Stop"}),": drives the global clock, so sequencer and arp follow the same BPM."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Tempo"}),": change BPM with the sliderapplies everywhere."]})]}),l.jsx("h5",{children:"Programming"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Step buttons"}),": click to toggle hits for kick, snare, and hat; glowing steps are active."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Current step highlight"}),": a brighter cell shows the beat currently firing."]}),l.jsx("li",{children:"Each instrument has its own SynthEngine voice with curated patches for punchy drums."})]}),l.jsx("h5",{children:"Tips"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Start with the default 4-on-the-floor kick and build snare/hat syncopation around it."}),l.jsx("li",{children:"Layer sequencer basslines with hats on offbeats for instant groove."})]})]})},keyboard:{title:"Keyboard & Performance",body:l.jsxs("div",{className:"module-help",children:[l.jsx("p",{children:"Play and monitor incoming notes from both the computer keyboard and external MIDI controllers."}),l.jsx("h5",{children:"Computer Keys"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Mapping"}),": A/W/S/D/F/G map to white and black keys; apostrophe reaches two octaves up."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Z / X"}),": shift the octave indicator down or up in 12-semitone jumps."]}),l.jsx("li",{children:"Held keys appear highlighted so you always know what is sustaining."})]}),l.jsx("h5",{children:"Pointer & Touch"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Click or drag for glissando; multi-touch (trackpad/tablet) keeps parallel notes held."}),l.jsx("li",{children:"Black keys float above the whites for accurate gliss transitions."})]}),l.jsx("h5",{children:"MIDI Integration"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Notes triggered from external hardware light up alongside local keysgreat for debugging MIDI routing."}),l.jsx("li",{children:"The octave badge shows the base MIDI note and offset so you can align hardware controllers quickly."})]})]})}}),[]),j=x?w[x]:null,k=()=>{try{localStorage.setItem(Wu,"1")}catch{}p(!1)};return l.jsxs("div",{className:"app",children:[l.jsx(ah,{}),l.jsx(ph,{}),l.jsx(oh,{}),l.jsxs("header",{className:"header",children:[l.jsx("h2",{children:"WebSynth Studio"}),l.jsxs("div",{className:"row",children:[l.jsx(gh,{}),l.jsx(wh,{}),l.jsx("button",{onClick:g,children:r?"Audio Ready":"Power On"}),l.jsx("button",{onClick:()=>{N()},children:"Reset Patch"}),l.jsx("button",{onClick:()=>{p(!0)},children:"Help"}),l.jsx("button",{onClick:()=>d(!0),children:"Settings"})]})]}),l.jsx("main",{children:l.jsx(Dm,{panels:v,order:y,onOrderChange:M,onRequestHelp:L=>{kh(L)&&h(L)}})}),l.jsx(Fm,{}),l.jsx(jl,{open:x!=null,onClose:()=>h(null),title:j?.title??"Module Help",closeLabel:"Close module help",children:j?.body??l.jsx("p",{children:"Help content coming soon."})}),l.jsx(jl,{open:f,onClose:k,title:"Onboarding Guide",closeLabel:"Close help overlay",children:l.jsx(uh,{onFinish:k})}),l.jsxs(jl,{open:u,onClose:()=>d(!1),children:[l.jsxs("section",{className:"settings-section",children:[l.jsx("h4",{className:"settings-heading",children:"Patches"}),l.jsx(Ym,{})]}),l.jsxs("section",{className:"settings-section",children:[l.jsx("h4",{className:"settings-heading",children:"Expression"}),l.jsx(Jm,{})]}),l.jsxs("section",{className:"settings-section",children:[l.jsx("h4",{className:"settings-heading",children:"Visualization"}),l.jsx(hh,{})]}),l.jsxs("section",{className:"settings-section",children:[l.jsx("h4",{className:"settings-heading",children:"MIDI"}),l.jsx(lh,{})]})]}),l.jsx(nh,{})]})}const bh=op.createRoot(document.getElementById("root"));bh.render(l.jsx(Mh,{}));
